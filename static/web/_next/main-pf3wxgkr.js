import{a as rT,b as pT}from"../chunk-tvrdndbw.js";var N1=Array.isArray;function G2(u){let g=typeof u;return g==="string"||g==="number"}function P(u){return u===void 0||u===null}function E1(u){return u===null||u===!1||u===!0||u===void 0}function h(u){return typeof u==="function"}function d1(u){return typeof u==="string"}function S3(u){return typeof u==="number"}function A0(u){return u===null}function G3(u){return u===void 0}function Nu(u){return!A0(u)&&typeof u==="object"}var q0={},c1="$F";class K1{constructor(){this.componentDidAppear=[],this.componentWillDisappear=[],this.componentWillMove=[]}}function Eu(u){return u.substring(2).toLowerCase()}function V4(u,g){u.appendChild(g)}function y2(u,g,w){if(A0(w))V4(u,g);else u.insertBefore(g,w)}function v3(u,g){if(g)return document.createElementNS("http://www.w3.org/2000/svg",u);return document.createElement(u)}function M3(u,g,w){u.replaceChild(g,w)}function r4(u,g){u.removeChild(g)}function p4(u){for(let g=0;g<u.length;g++)u[g]()}function D3(u,g,w){let z=u.children;if((w&4)!==0)return z.$LI;if((w&8192)!==0)return u.childFlags===2?z:z[g?0:z.length-1];return z}function P0(u,g){let w,z=u;while(!P(z)){if(w=z.flags,(w&1521)!==0)return z.dom;z=D3(z,g,w)}return null}function h2(u,g){let w=u.length,z;while((z=u.pop())!==void 0)z(()=>{if(--w<=0&&h(g))g()})}function y3(u){for(let g=0;g<u.length;g++)u[g].fn();for(let g=0;g<u.length;g++){let w=u[g];y2(w.parent,w.dom,w.next)}u.splice(0,u.length)}function C2(u,g,w){while(!P(u)){let z=u.flags;if((z&1521)!==0){if(!w||u.dom.parentNode===g)r4(g,u.dom);return}let $=u.children;if((z&4)!==0)u=$.$LI;if((z&8)!==0)u=$;if((z&8192)!==0)if(u.childFlags===2)u=$;else{for(let B=0,J=$.length;B<J;++B)C2($[B],g,!1);return}}}function h3(u,g){return function(){C2(u,g,!0)}}function O2(u,g,w){if(w.componentWillDisappear.length>0)h2(w.componentWillDisappear,h3(u,g));else C2(u,g,!1)}function C3(u,g,w,z,$,B,J,Z){u.componentWillMove.push({dom:z,fn:()=>{if((J&4)!==0)w.componentWillMove(g,$,z);else if((J&8)!==0)w.onComponentWillMove(g,$,z,Z)},next:B,parent:$})}function i4(u,g,w,z,$){let B,J,Z=g.flags;while(!P(g)){let q=g.flags;if((q&1521)!==0){if(!P(B)&&(h(B.componentWillMove)||h(B.onComponentWillMove)))C3($,u,B,g.dom,w,z,Z,J);else y2(w,g.dom,z);return}let X=g.children;if((q&4)!==0)B=g.children,J=g.props,g=X.$LI;else if((q&8)!==0)B=g.ref,J=g.props,g=X;else if((q&8192)!==0)if(g.childFlags===2)g=X;else{for(let Y=0,R=X.length;Y<R;++Y)i4(u,X[Y],w,z,$);return}}}function N4(u,g,w){if(h(u.constructor.getDerivedStateFromProps))return{...w,...u.constructor.getDerivedStateFromProps(g,w)};return w}var o1={v:!1},v2={createVNode:null};function p1(u,g){u.textContent=g}function E4(u,g){return Nu(u)&&u.event===g.event&&u.data===g.data}function d4(u,g){for(let w in g)if(G3(u[w]))u[w]=g[w];return u}function du(u,g){return h(u)&&(u(g),!0)}var i1="$";function s2(u,g,w,z,$,B,J,Z){this.childFlags=u,this.children=g,this.className=w,this.dom=null,this.flags=z,this.key=$===void 0?null:$,this.props=B===void 0?null:B,this.ref=J===void 0?null:J,this.type=Z}function ou(u,g,w,z,$,B,J,Z){let q=$===void 0?1:$,X=new s2(q,z,w,u,J,B,Z,g);if(v2.createVNode)v2.createVNode(X);if(q===0)r3(X,X.children);return X}function O3(u,g,w){if(u&4)return w;let z=(u&32768?g.render:g).defaultHooks;if(P(z))return w;if(P(w))return z;return d4(w,z)}function s3(u,g,w){let z=(u&32768?g.render:g).defaultProps;if(P(z))return w;if(P(w))return{...z};return d4(w,z)}function x3(u,g){if(u&12)return u;if(g.prototype?.render)return 4;if(g.render)return 32776;return 8}function o4(u,g,w,z,$){u=x3(u,g);let B=new s2(1,null,null,u,z,s3(u,g,w),O3(u,g,$),g);if(h(v2.createVNode))v2.createVNode(B);return B}function a1(u,g){return new s2(1,P(u)||u===!0||u===!1?"":u,null,16,g,null,null,null)}function x2(u,g,w){let z=ou(8192,8192,null,u,g,null,w,null);switch(z.childFlags){case 1:z.children=V2(),z.childFlags=2;break;case 16:z.children=[a1(u)],z.childFlags=4;break}return z}function V3(u){let{children:g,childFlags:w}=u;return x2(w===2?$0(g):g.map($0),w,u.key)}function $0(u){let g=u.flags&-16385,w=u.props;if(g&14){if(!A0(w)){let z=w;w={};for(let $ in z)w[$]=z[$]}}if((g&8192)===0)return new s2(u.childFlags,u.children,u.className,g,u.key,w,u.ref,u.type);return V3(u)}function V2(){return a1("",null)}function m4(u,g,w,z){for(let $=u.length;w<$;w++){let B=u[w];if(!E1(B)){let J=z+i1+w;if(N1(B))m4(B,g,0,J);else{if(G2(B))B=a1(B,J);else{let Z=B.key,q=d1(Z)&&Z[0]===i1;if(B.flags&81920||q)B=$0(B);if(B.flags|=65536,!q)if(A0(Z))B.key=J;else B.key=z+Z;else if(Z.substring(0,z.length)!==z)B.key=z+Z}g.push(B)}}}}function c4(u){switch(u){case"svg":return 32;case"input":return 64;case"select":return 256;case"textarea":return 128;case c1:return 8192;default:return 1}}function r3(u,g){let w,z=1;if(E1(g))w=g;else if(G2(g))z=16,w=g;else if(N1(g)){let $=g.length;for(let B=0;B<$;++B){let J=g[B];if(E1(J)||N1(J)){w=w||g.slice(0,B),m4(g,w,B,"");break}else if(G2(J))w=w||g.slice(0,B),w.push(a1(J,i1+B));else{let Z=J.key,q=(J.flags&81920)>0,X=A0(Z),Y=d1(Z)&&Z[0]===i1;if(q||X||Y){if(w=w||g.slice(0,B),q||Y)J=$0(J);if(X||Y)J.key=i1+B;w.push(J)}else if(w)w.push(J);J.flags|=65536}}if(w=w||g,w.length===0)z=1;else z=8}else{if(w=g,w.flags|=65536,g.flags&81920)w=$0(g);z=2}return u.children=w,u.childFlags=z,u}function mu(u){if(E1(u)||G2(u))return a1(u,null);if(N1(u))return x2(u,0,null);return u.flags&16384?$0(u):u}var H1="http://www.w3.org/1999/xlink",Vu="http://www.w3.org/XML/1998/namespace",y4={"xlink:actuate":H1,"xlink:arcrole":H1,"xlink:href":H1,"xlink:role":H1,"xlink:show":H1,"xlink:title":H1,"xlink:type":H1,"xml:base":Vu,"xml:lang":Vu,"xml:space":Vu};function r2(u){return{onClick:u,onDblClick:u,onFocusIn:u,onFocusOut:u,onKeyDown:u,onKeyPress:u,onKeyUp:u,onMouseDown:u,onMouseMove:u,onMouseUp:u,onTouchEnd:u,onTouchMove:u,onTouchStart:u}}var a4=r2(0),ru=r2(null),l4=r2(!0);function h4(u,g){let w=g.$EV;if(!w)w=g.$EV=r2(null);if(!w[u]){if(++a4[u]===1)ru[u]=a3(u)}return w}function t4(u,g){let w=g.$EV;if(w?.[u]){if(--a4[u]===0)document.removeEventListener(Eu(u),ru[u]),ru[u]=null;w[u]=null}}function p3(u,g,w,z){if(h(w))h4(u,z)[u]=w;else if(Nu(w)){if(E4(g,w))return;h4(u,z)[u]=w}else t4(u,z)}function i3(u){return h(u.composedPath)?u.composedPath()[0]:u.target}function N3(u,g,w,z){let $=i3(u);do{if(g&&$.disabled)return;let B=$.$EV;if(!P(B)){let J=B[w];if(J){if(z.dom=$,J.event)J.event(J.data,u);else J(u);if(u.cancelBubble)return}}$=$.parentNode}while(!A0($))}function E3(){if(this.cancelBubble=!0,!this.immediatePropagationStopped)this.stopImmediatePropagation()}function d3(){return this.defaultPrevented}function o3(){return this.cancelBubble}function m3(u){let g={dom:document};return u.isDefaultPrevented=d3,u.isPropagationStopped=o3,u.stopPropagation=E3,Object.defineProperty(u,"currentTarget",{configurable:!0,get:function w(){return g.dom}}),g}function c3(u){let g=u==="onClick"||u==="onDblClick";return function(w){N3(w,g,u,m3(w))}}function a3(u){let g=c3(u);return document.addEventListener(Eu(u),g),g}function l3(u,g){let w=document.createElement("i");return w.innerHTML=g,w.innerHTML===u.innerHTML}function C4(u,g,w){let z=u[g];if(z)if(z.event)z.event(z.data,w);else z(w);else{let $=g.toLowerCase();if(h(u[$]))u[$](w)}}function l1(u,g){let w=function z($){let B=this.$V;if(P(B))return;let J=B.props??q0,Z=B.dom;if(d1(u))C4(J,u,$);else for(let q=0;q<u.length;++q)C4(J,u[q],$);if(h(g)){let q=this.$V,X=q.props??q0;g(X,Z,!1,q)}};return Object.defineProperty(w,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),w}function W1(u,g,w){let z=`$${g}`,$=u[z];if($){if($[1].wrapped)return;u.removeEventListener($[0],$[1]),u[z]=null}if(h(w))u.addEventListener(g,w),u[z]=[g,w]}function cu(u){return u==="checkbox"||u==="radio"}var t3=l1("onInput",au),n3=l1(["onClick","onChange"],au);function n4(u){u.stopPropagation()}n4.wrapped=!0;function e3(u,g){if(cu(g.type))W1(u,"change",n3),W1(u,"click",n4);else W1(u,"input",t3)}function au(u,g){let{type:w,value:z,checked:$,multiple:B,defaultValue:J}=u,Z=!P(z);if(w!=null&&w!==g.type)g.setAttribute("type",w);if(!P(B)&&B!==g.multiple)g.multiple=B;if(!P(J)&&!Z)g.defaultValue=J+"";if(cu(w)){if(Z)g.value=z;if(!P($))g.checked=$}else if(Z&&g.value!==z)g.defaultValue=z,g.value=z;else if(!P($))g.checked=$}function r1(u,g){if(u.type==="option")u8(u,g);else{let{children:w,flags:z}=u;if((z&4)!==0)r1(w.$LI,g);else if((z&8)!==0)r1(w,g);else if(u.childFlags===2)r1(w,g);else if((u.childFlags&12)!==0)for(let $=0,B=w.length;$<B;++$)r1(w[$],g)}}function u8(u,g){let w=u.props??q0,z=w.value,$=u.dom;if($.value=z,z===g||N1(g)&&g.includes(z))$.selected=!0;else if(!P(g)||!P(w.selected))$.selected=Boolean(w.selected)}var g8=l1("onChange",e4);function w8(u){W1(u,"change",g8)}function e4(u,g,w,z){let $=Boolean(u.multiple);if(!P(u.multiple)&&$!==g.multiple)g.multiple=$;let B=u.selectedIndex;if(B===-1)g.selectedIndex=-1;if(z.childFlags!==1){let Z=u.value;if(S3(B)&&B>-1&&!P(g.options[B]))Z=g.options[B].value;if(w&&P(Z))Z=u.defaultValue;r1(z,Z)}}var T8=l1("onInput",u5),z8=l1("onChange");function $8(u,g){if(W1(u,"input",T8),h(g.onChange))W1(u,"change",z8)}function u5(u,g,w){let z=u.value,$=g.value;if(P(z)){if(w){let B=u.defaultValue;if(!P(B)&&B!==$)g.defaultValue=B,g.value=B}}else if($!==z)g.defaultValue=z,g.value=z}function g5(u,g,w,z,$,B){if((u&64)!==0)au(z,w);else if((u&256)!==0)e4(z,w,$,g);else if((u&128)!==0)u5(z,w,$);if(B)w.$V=g}function B8(u,g,w){if((u&64)!==0)e3(g,w);else if((u&256)!==0)w8(g);else if((u&128)!==0)$8(g,w)}function w5(u){return cu(u.type)?!P(u.checked):!P(u.value)}function M2(u){if(!P(u)){if(!du(u,null)&&u.current)u.current=null}}function p2(u,g,w){if(!P(u)&&(h(u)||u.current!==void 0))w.push(()=>{if(!du(u,g)&&u.current!==void 0)u.current=g})}function O0(u,g,w){d0(u,w),O2(u,g,w)}function d0(u,g){let{flags:w,children:z}=u,$;if((w&481)!==0){$=u.ref;let B=u.props;M2($);let J=u.childFlags;if(!A0(B)){let Z=Object.keys(B);for(let q=0,X=Z.length;q<X;q++){let Y=Z[q];if(l4[Y])t4(Y,u.dom)}}if(J&12)m1(z,g);else if(J===2)d0(z,g)}else if(z){if(w&4){if(h(z.componentWillUnmount))z.componentWillUnmount();let B=g;if(h(z.componentWillDisappear))B=new K1,O4(g,z,z.$LI.dom,w,void 0);M2(u.ref),z.$UN=!0,d0(z.$LI,B)}else if(w&8){let B=g;if($=u.ref,!P($)){let J=null;if(h($.onComponentWillUnmount))J=P0(u,!0),$.onComponentWillUnmount(J,u.props||q0);if(h($.onComponentWillDisappear))B=new K1,J=J||P0(u,!0),O4(g,$,J,w,u.props)}d0(z,B)}else if(w&1024)O0(z,u.ref,g);else if(w&8192){if(u.childFlags&12)m1(z,g)}}}function m1(u,g){for(let w=0,z=u.length;w<z;++w)d0(u[w],g)}function J8(u,g){return function(){if(g)for(let w=0;w<u.length;w++){let z=u[w];C2(z,g,!1)}}}function P2(u,g,w){if(w.componentWillDisappear.length>0)h2(w.componentWillDisappear,J8(g,u));else u.textContent=""}function D2(u,g,w,z){if(m1(w,z),g.flags&8192)O2(g,u,z);else P2(u,w,z)}function O4(u,g,w,z,$){u.componentWillDisappear.push((B)=>{if(z&4)g.componentWillDisappear(w,B);else if(z&8)g.onComponentWillDisappear(w,$,B)})}function Z8(u){let g=u.event;return function(w){g(u.data,w)}}function q8(u,g,w,z){if(Nu(w)){if(E4(g,w))return;w=Z8(w)}W1(z,Eu(u),w)}function X8(u,g,w){if(P(g)){w.removeAttribute("style");return}let z=w.style,$,B;if(d1(g)){z.cssText=g;return}if(!P(u)&&!d1(u)){for($ in g)if(B=g[$],B!==u[$])z.setProperty($,B);for($ in u)if(P(g[$]))z.removeProperty($)}else for($ in g)B=g[$],z.setProperty($,B)}function Y8(u,g,w,z,$){let B=u?.__html||"",J=g?.__html||"";if(B!==J){if(!P(J)&&!l3(z,J)){if(!A0(w)){if(w.childFlags&12)m1(w.children,$);else if(w.childFlags===2)d0(w.children,$);w.children=null,w.childFlags=1}z.innerHTML=J}}}function R8(u,g,w){let z=P(u)?"":u;if(g[w]!==z)g[w]=z}function pu(u,g,w,z,$,B,J,Z){switch(u){case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":case"selectedIndex":break;case"autoFocus":z.autofocus=!!w;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":z[u]=!!w;break;case"defaultChecked":case"value":case"volume":if(B&&u==="value")break;R8(w,z,u);break;case"style":X8(g,w,z);break;case"dangerouslySetInnerHTML":Y8(g,w,J,z,Z);break;default:if(l4[u])p3(u,g,w,z);else if(u.charCodeAt(0)===111&&u.charCodeAt(1)===110)q8(u,g,w,z);else if(P(w))z.removeAttribute(u);else if($&&y4[u])z.setAttributeNS(y4[u],u,w);else z.setAttribute(u,w);break}}function H8(u,g,w,z,$,B){let J=!1,Z=(g&448)>0;if(Z){if(J=w5(w),J)B8(g,z,w)}for(let q in w)pu(q,null,w[q],z,$,J,null,B);if(Z)g5(g,u,z,w,!0,J)}function T5(u,g,w){let z=mu(u.render(g,u.state,w)),$=w;if(h(u.getChildContext))$={...w,...u.getChildContext()};return u.$CX=$,z}function W8(u,g,w,z,$,B){let J=new g(w,z),Z=J.$N=Boolean(g.getDerivedStateFromProps||J.getSnapshotBeforeUpdate);if(J.$SVG=$,J.$L=B,u.children=J,J.$BS=!1,J.context=z,J.props===q0)J.props=w;if(!Z){if(h(J.componentWillMount)){J.$BR=!0,J.componentWillMount();let q=J.$PS;if(!A0(q)){let X=J.state;if(A0(X))J.state=q;else for(let Y in q)X[Y]=q[Y];J.$PS=null}J.$BR=!1}}else J.state=N4(J,w,J.state);return J.$LI=T5(J,w,z),J}function z5(u,g){let w=u.props||q0;return u.flags&32768?u.type.render(w,u.ref,g):u.type(w,g)}function X0(u,g,w,z,$,B,J){let Z=u.flags|=16384;if((Z&481)!==0)A8(u,g,w,z,$,B,J);else if((Z&4)!==0)Q8(u,g,w,z,$,B,J);else if(Z&8)_8(u,g,w,z,$,B,J);else if(Z&16)$5(u,g,$);else if(Z&8192)U8(u,w,g,z,$,B,J);else if(Z&1024)K8(u,w,g,$,B,J)}function K8(u,g,w,z,$,B){X0(u.children,u.ref,g,!1,null,$,B);let J=V2();$5(J,w,z),u.dom=J.dom}function U8(u,g,w,z,$,B,J){let{children:Z,childFlags:q}=u;if(q&12&&Z.length===0)q=u.childFlags=2,Z=u.children=V2();if(q===2)X0(Z,w,g,z,$,B,J);else U1(Z,w,g,z,$,B,J)}function $5(u,g,w){let z=u.dom=document.createTextNode(u.children);if(!A0(g))y2(g,z,w)}function A8(u,g,w,z,$,B,J){let{flags:Z,props:q,className:X,childFlags:Y}=u,R=u.dom=v3(u.type,z=z||(Z&32)>0),H=u.children;if(!P(X)&&X!=="")if(z)R.setAttribute("class",X);else R.className=X;if(Y===16)p1(R,H);else if(Y!==1){let W=z&&u.type!=="foreignObject";if(Y===2){if(H.flags&16384)u.children=H=$0(H);X0(H,R,w,W,null,B,J)}else if(Y===8||Y===4)U1(H,R,w,W,null,B,J)}if(!A0(g))y2(g,R,$);if(!A0(q))H8(u,Z,q,R,z,J);p2(u.ref,R,B)}function U1(u,g,w,z,$,B,J){for(let Z=0;Z<u.length;++Z){let q=u[Z];if(q.flags&16384)u[Z]=q=$0(q);X0(q,g,w,z,$,B,J)}}function Q8(u,g,w,z,$,B,J){let Z=W8(u,u.type,u.props||q0,w,z,B),q=J;if(h(Z.componentDidAppear))q=new K1;X0(Z.$LI,g,Z.$CX,z,$,B,q),k8(u.ref,Z,B,J)}function _8(u,g,w,z,$,B,J){let Z=u.ref,q=J;if(!P(Z)&&h(Z.onComponentDidAppear))q=new K1;X0(u.children=mu(z5(u,w)),g,w,z,$,B,q),F8(u,B,J)}function b8(u){return()=>{u.componentDidMount()}}function I8(u,g,w){u.componentDidAppear.push(()=>{g.componentDidAppear(w)})}function L8(u,g,w,z){u.componentDidAppear.push(()=>{g.onComponentDidAppear(w,z)})}function k8(u,g,w,z){if(p2(u,g,w),h(g.componentDidMount))w.push(b8(g));if(h(g.componentDidAppear))I8(z,g,g.$LI.dom)}function f8(u,g){return()=>{u.onComponentDidMount(P0(g,!0),g.props||q0)}}function F8(u,g,w){let z=u.ref;if(!P(z)){if(du(z.onComponentWillMount,u.props||q0),h(z.onComponentDidMount))g.push(f8(z,u));if(h(z.onComponentDidAppear))L8(w,z,P0(u,!0),u.props)}}function j8(u,g,w,z,$,B,J){if(d0(u,J),(g.flags&u.flags&1521)!==0)X0(g,null,z,$,null,B,J),M3(w,g.dom,u.dom);else X0(g,w,z,$,P0(u,!0),B,J),O2(u,w,J)}function o0(u,g,w,z,$,B,J,Z){let q=g.flags|=16384;if(u.flags!==q||u.type!==g.type||u.key!==g.key||q&2048)if(u.flags&16384)j8(u,g,w,z,$,J,Z);else X0(g,w,z,$,B,J,Z);else if(q&481)M8(u,g,z,$,J,Z);else if(q&4)C8(u,g,w,z,$,B,J,Z);else if(q&8)O8(u,g,w,z,$,B,J,Z);else if(q&16)s8(u,g);else if(q&8192)G8(u,g,w,z,$,J,Z);else v8(u,g,z,J,Z)}function P8(u,g,w){if(u!==g)if(u!=="")w.firstChild.nodeValue=g;else p1(w,g)}function S8(u,g){if(u.textContent!==g)u.textContent=g}function G8(u,g,w,z,$,B,J){let Z=u.children,q=g.children,X=u.childFlags,Y=g.childFlags,R=null;if(Y&12&&q.length===0)Y=g.childFlags=2,q=g.children=V2();let H=(Y&2)!==0;if(X&12){let W=Z.length;if(X&8&&Y&8||H||!H&&q.length>W)R=P0(Z[W-1],!1).nextSibling}lu(X,Y,Z,q,w,z,$,R,u,B,J)}function v8(u,g,w,z,$){let B=u.ref,J=g.ref,Z=g.children;if(lu(u.childFlags,g.childFlags,u.children,Z,B,w,!1,null,u,z,$),g.dom=u.dom,B!==J&&!E1(Z)){let q=Z.dom;r4(B,q),V4(J,q)}}function M8(u,g,w,z,$,B){let J=g.dom=u.dom,Z=u.props,q=g.props,X=g.flags,Y=!1,R=!1,H;if(z=z||(X&32)>0,Z!==q){let _=Z||q0;if(H=q||q0,H!==q0){if(Y=(X&448)>0,Y)R=w5(H);for(let p in H){let E=_[p],J0=H[p];if(E!==J0)pu(p,E,J0,J,z,R,u,B)}}if(_!==q0){for(let p in _)if(P(H[p])&&!P(_[p]))pu(p,_[p],null,J,z,R,u,B)}}let{children:W,className:Q}=g;if(u.className!==Q)if(P(Q))J.removeAttribute("class");else if(z)J.setAttribute("class",Q);else J.className=Q;if(X&4096)S8(J,W);else lu(u.childFlags,g.childFlags,u.children,W,J,w,z&&g.type!=="foreignObject",null,u,$,B);if(Y)g5(X,g,J,H,!1,R);let K=g.ref,k=u.ref;if(k!==K)M2(k),p2(K,J,$)}function D8(u,g,w,z,$,B,J){d0(u,J),U1(g,w,z,$,P0(u,!0),B,J),O2(u,w,J)}function y8(u,g,w,z,$,B,J,Z,q,X,Y){let R=u.length|0,H=g.length|0;if(R===0){if(H>0)U1(g,w,z,$,B,J,Z)}else if(H===0)D2(w,q,u,Z);else if(X===8&&Y===8)V8(u,g,w,z,$,R,H,B,q,J,Z);else x8(u,g,w,z,$,R,H,B,J,Z)}function lu(u,g,w,z,$,B,J,Z,q,X,Y){switch(u){case 2:switch(g){case 2:o0(w,z,$,B,J,Z,X,Y);break;case 1:O0(w,$,Y);break;case 16:d0(w,Y),p1($,z);break;default:D8(w,z,$,B,J,X,Y);break}break;case 1:switch(g){case 2:X0(z,$,B,J,Z,X,Y);break;case 1:break;case 16:p1($,z);break;default:U1(z,$,B,J,Z,X,Y);break}break;case 16:switch(g){case 16:P8(w,z,$);break;case 2:P2($,w,Y),X0(z,$,B,J,Z,X,Y);break;case 1:P2($,w,Y);break;default:P2($,w,Y),U1(z,$,B,J,Z,X,Y);break}break;default:switch(g){case 16:m1(w,Y),p1($,z);break;case 2:D2($,q,w,Y),X0(z,$,B,J,Z,X,Y);break;case 1:D2($,q,w,Y);break;default:y8(w,z,$,B,J,Z,X,Y,q,g,u);break}break}}function h8(u,g,w,z,$){$.push(()=>{u.componentDidUpdate(g,w,z)})}function B5(u,g,w,z,$,B,J,Z,q,X){let{state:Y,props:R}=u,H=Boolean(u.$N),W=h(u.shouldComponentUpdate);if(H)g=N4(u,w,g!==Y?{...Y,...g}:g);if(J||!W||W&&u.shouldComponentUpdate(w,g,$)){if(!H&&h(u.componentWillUpdate))u.componentWillUpdate(w,g,$);u.props=w,u.state=g,u.context=$;let Q=null,K=T5(u,w,$);if(H&&h(u.getSnapshotBeforeUpdate))Q=u.getSnapshotBeforeUpdate(R,Y);if(o0(u.$LI,K,z,u.$CX,B,Z,q,X),u.$LI=K,h(u.componentDidUpdate))h8(u,R,Y,Q,q)}else u.props=w,u.state=g,u.context=$}function C8(u,g,w,z,$,B,J,Z){let q=g.children=u.children;if(A0(q))return;q.$L=J;let X=g.props||q0,Y=g.ref,R=u.ref,H=q.state;if(!q.$N){if(h(q.componentWillReceiveProps)){if(q.$BR=!0,q.componentWillReceiveProps(X,z),q.$UN)return;q.$BR=!1}if(!A0(q.$PS))H={...H,...q.$PS},q.$PS=null}if(B5(q,H,X,w,z,$,!1,B,J,Z),R!==Y)M2(R),p2(Y,q,J)}function O8(u,g,w,z,$,B,J,Z){let q=!0,X=g.props||q0,Y=g.ref,R=u.props,H=!P(Y),W=u.children;if(H&&h(Y.onComponentShouldUpdate))q=Y.onComponentShouldUpdate(R,X);if(q){if(H&&h(Y.onComponentWillUpdate))Y.onComponentWillUpdate(R,X);let Q=mu(z5(g,z));if(o0(W,Q,w,z,$,B,J,Z),g.children=Q,H&&h(Y.onComponentDidUpdate))Y.onComponentDidUpdate(R,X)}else g.children=W}function s8(u,g){let w=g.children,z=g.dom=u.dom;if(w!==u.children)z.nodeValue=w}function x8(u,g,w,z,$,B,J,Z,q,X){let Y=B>J?J:B,R=0,H,W;for(;R<Y;++R){if(H=g[R],W=u[R],H.flags&16384)H=g[R]=$0(H);o0(W,H,w,z,$,Z,q,X),u[R]=H}if(B<J)for(R=Y;R<J;++R){if(H=g[R],H.flags&16384)H=g[R]=$0(H);X0(H,w,z,$,Z,q,X)}else if(B>J)for(R=Y;R<B;++R)O0(u[R],w,X)}function V8(u,g,w,z,$,B,J,Z,q,X,Y){let R=B-1,H=J-1,W=0,Q=u[W],K=g[W],k,_;u:{while(Q.key===K.key){if(K.flags&16384)g[W]=K=$0(K);if(o0(Q,K,w,z,$,Z,X,Y),u[W]=K,++W,W>R||W>H)break u;Q=u[W],K=g[W]}Q=u[R],K=g[H];while(Q.key===K.key){if(K.flags&16384)g[H]=K=$0(K);if(o0(Q,K,w,z,$,Z,X,Y),u[R]=K,R--,H--,W>R||W>H)break u;Q=u[R],K=g[H]}}if(W>R){if(W<=H){k=H+1,_=k<J?P0(g[k],!0):Z;while(W<=H){if(K=g[W],K.flags&16384)g[W]=K=$0(K);++W,X0(K,w,z,$,_,X,Y)}}}else if(W>H)while(W<=R)O0(u[W++],w,Y);else r8(u,g,z,B,J,R,H,W,w,$,Z,q,X,Y)}function r8(u,g,w,z,$,B,J,Z,q,X,Y,R,H,W){let Q,K,k=0,_=0,p=Z,E=Z,J0=B-Z+1,c=J-Z+1,z0=new Int32Array(c+1),a=J0===z,L=!1,j=0,_0=0;if($<4||(J0|c)<32){for(_=p;_<=B;++_)if(Q=u[_],_0<c){for(Z=E;Z<=J;Z++)if(K=g[Z],Q.key===K.key){if(z0[Z-E]=_+1,a){a=!1;while(p<_)O0(u[p++],q,W)}if(j>Z)L=!0;else j=Z;if(K.flags&16384)g[Z]=K=$0(K);o0(Q,K,q,w,X,Y,H,W),++_0;break}if(!a&&Z>J)O0(Q,q,W)}else if(!a)O0(Q,q,W)}else{let h0={};for(_=E;_<=J;++_)h0[g[_].key]=_;for(_=p;_<=B;++_)if(Q=u[_],_0<c){if(Z=h0[Q.key],Z!==void 0){if(a){a=!1;while(_>p)O0(u[p++],q,W)}if(z0[Z-E]=_+1,j>Z)L=!0;else j=Z;if(K=g[Z],K.flags&16384)g[Z]=K=$0(K);o0(Q,K,q,w,X,Y,H,W),++_0}else if(!a)O0(Q,q,W)}else if(!a)O0(Q,q,W)}if(a)D2(q,R,u,W),U1(g,q,w,X,Y,H,W);else if(L){let h0=p8(z0);Z=h0.length-1;for(_=c-1;_>=0;_--)if(z0[_]===0){if(j=_+E,K=g[j],K.flags&16384)g[j]=K=$0(K);k=j+1,X0(K,q,w,X,k<$?P0(g[k],!0):Y,H,W)}else if(Z<0||_!==h0[Z])j=_+E,K=g[j],k=j+1,i4(R,K,q,k<$?P0(g[k],!0):Y,W);else Z--;if(W.componentWillMove.length>0)y3(W.componentWillMove)}else if(_0!==c){for(_=c-1;_>=0;_--)if(z0[_]===0){if(j=_+E,K=g[j],K.flags&16384)g[j]=K=$0(K);k=j+1,X0(K,q,w,X,k<$?P0(g[k],!0):Y,H,W)}}}var E0,j2,s4=0;function p8(u){let g=0,w=0,z=0,$=0,B=0,J=0,Z=0,q=u.length;if(q>s4)s4=q,E0=new Int32Array(q),j2=new Int32Array(q);for(;w<q;++w)if(g=u[w],g!==0){if(z=E0[$],u[z]<g){j2[w]=z,E0[++$]=w;continue}B=0,J=$;while(B<J)if(Z=B+J>>1,u[E0[Z]]<g)B=Z+1;else J=Z;if(g<u[E0[B]]){if(B>0)j2[w]=E0[B-1];E0[B]=w}}B=$+1;let X=new Int32Array(B);J=E0[B-1];while(B-- >0)X[B]=J,J=j2[J],E0[B]=0;return X}var i8=typeof document!=="undefined";if(i8){if(window.Node)Node.prototype.$EV=null,Node.prototype.$V=null}function N8(u,g,w,z){let $=[],B=new K1,J=g.$V;if(o1.v=!0,P(J)){if(!P(u)){if((u.flags&16384)!==0)u=$0(u);X0(u,g,z,!1,null,$,B),g.$V=u,J=u}}else if(P(u))O0(J,g,B),g.$V=null;else{if(u.flags&16384)u=$0(u);o0(J,u,g,z,!1,null,$,B),J=g.$V=u}if(p4($),h2(B.componentDidAppear),o1.v=!1,h(w))w()}function J5(u,g,w=null,z=q0){N8(u,g,w,z)}var S2=[],E8=Promise.resolve().then.bind(Promise.resolve()),iu=!1;function x4(u,g,w,z){let $=u.$PS;if(h(g))g=g($?{...u.state,...$}:u.state,u.props,u.context);if(P($))u.$PS=g;else for(let B in g)$[B]=g[B];if(!u.$BR){if(!o1.v){if(S2.length===0){if(Z5(u,z),h(w))w.call(u);return}}if(!S2.includes(u))S2.push(u);if(z)u.$F=!0;if(!iu)iu=!0,E8(o8);if(h(w)){let B=u.$QU;if(!B)B=u.$QU=[];B.push(w)}}else if(h(w))u.$L.push(w.bind(u))}function d8(u){let g=u.$QU;for(let w=0;w<g.length;++w)g[w].call(u);u.$QU=null}function o8(){let u;iu=!1;while(u=S2.shift())if(!u.$UN){let g=u.$F;if(u.$F=!1,Z5(u,g),u.$QU)d8(u)}}function Z5(u,g){if(g||!u.$BR){let w=u.$PS;u.$PS=null;let z=[],$=new K1;o1.v=!0,B5(u,{...u.state,...w},u.props,P0(u.$LI,!0).parentNode,u.context,u.$SVG,g,null,z,$),p4(z),h2($.componentDidAppear),o1.v=!1}else u.state=u.$PS,u.$PS=null}class S{constructor(u,g){this.state=null,this.props=void 0,this.context=void 0,this.displayName=void 0,this.$BR=!1,this.$BS=!0,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$QU=null,this.$N=!1,this.$SSR=void 0,this.$L=null,this.$SVG=!1,this.$F=!1,this.props=u||q0,this.context=g||q0}forceUpdate(u){if(this.$UN)return;x4(this,{},u,!0)}setState(u,g){if(this.$UN)return;if(!this.$BS)x4(this,u,g,!1)}render(u,g,w){return null}}S.defaultProps=null;function q5(u){return u===void 0||u===null}function m8(u){return typeof u==="string"}function X5(u){return u===void 0}function T(u,g,...w){let z,$=null,B=null,J=null,Z,q,X=w.length;if(X===1)z=w[0];else if(X>1){z=[];for(let Y=0;Y<X;Y++)z.push(w[Y])}if(m8(u)){if(Z=c4(u),!q5(g)){q={};for(let Y in g)if(Y==="className"||Y==="class")J=g[Y];else if(Y==="key")B=g.key;else if(Y==="children"&&X5(z))z=g.children;else if(Y==="ref")$=g.ref;else{if(Y==="contenteditable")Z|=4096;q[Y]=g[Y]}}}else{if(Z=2,!X5(z)){if(!g)g={};g.children=z}if(!q5(g)){q={};for(let Y in g)if(Y==="key")B=g.key;else if(Y==="ref")$=g.ref;else switch(Y){case"onComponentDidAppear":case"onComponentDidMount":case"onComponentDidUpdate":case"onComponentShouldUpdate":case"onComponentWillDisappear":case"onComponentWillMount":case"onComponentWillUnmount":case"onComponentWillUpdate":if(!$)$={};$[Y]=g[Y];break;default:q[Y]=g[Y];break}}return o4(Z,u,q,B,$)}if(Z&8192)return x2(X===1?[z]:z,0,B);return ou(Z,u,J,z,0,q,B,$)}function Y5(u){var g,w,z="";if(typeof u=="string"||typeof u=="number")z+=u;else if(typeof u=="object")if(Array.isArray(u)){var $=u.length;for(g=0;g<$;g++)u[g]&&(w=Y5(u[g]))&&(z&&(z+=" "),z+=w)}else for(w in u)u[w]&&(z&&(z+=" "),z+=w);return z}function i2(){for(var u,g,w=0,z="",$=arguments.length;w<$;w++)(u=arguments[w])&&(g=Y5(u))&&(z&&(z+=" "),z+=g);return z}var c8=(u,g)=>{let w=new Array(u.length+g.length);for(let z=0;z<u.length;z++)w[z]=u[z];for(let z=0;z<g.length;z++)w[u.length+z]=g[z];return w},a8=(u,g)=>({classGroupId:u,validator:g}),A5=(u=new Map,g=null,w)=>({nextPart:u,validators:g,classGroupId:w});var R5=[];var l8=(u)=>{let g=n8(u),{conflictingClassGroups:w,conflictingClassGroupModifiers:z}=u;return{getClassGroupId:(J)=>{if(J.startsWith("[")&&J.endsWith("]"))return t8(J);let Z=J.split("-"),q=Z[0]===""&&Z.length>1?1:0;return Q5(Z,q,g)},getConflictingClassGroupIds:(J,Z)=>{if(Z){let q=z[J],X=w[J];if(q){if(X)return c8(X,q);return q}return X||R5}return w[J]||R5}}},Q5=(u,g,w)=>{if(u.length-g===0)return w.classGroupId;let $=u[g],B=w.nextPart.get($);if(B){let X=Q5(u,g+1,B);if(X)return X}let J=w.validators;if(J===null)return;let Z=g===0?u.join("-"):u.slice(g).join("-"),q=J.length;for(let X=0;X<q;X++){let Y=J[X];if(Y.validator(Z))return Y.classGroupId}return},t8=(u)=>u.slice(1,-1).indexOf(":")===-1?void 0:(()=>{let g=u.slice(1,-1),w=g.indexOf(":"),z=g.slice(0,w);return z?"arbitrary.."+z:void 0})(),n8=(u)=>{let{theme:g,classGroups:w}=u;return e8(w,g)},e8=(u,g)=>{let w=A5();for(let z in u){let $=u[z];nu($,w,z,g)}return w},nu=(u,g,w,z)=>{let $=u.length;for(let B=0;B<$;B++){let J=u[B];u9(J,g,w,z)}},u9=(u,g,w,z)=>{if(typeof u==="string"){g9(u,g,w);return}if(typeof u==="function"){w9(u,g,w,z);return}T9(u,g,w,z)},g9=(u,g,w)=>{let z=u===""?g:_5(g,u);z.classGroupId=w},w9=(u,g,w,z)=>{if(z9(u)){nu(u(z),g,w,z);return}if(g.validators===null)g.validators=[];g.validators.push(a8(w,u))},T9=(u,g,w,z)=>{let $=Object.entries(u),B=$.length;for(let J=0;J<B;J++){let[Z,q]=$[J];nu(q,_5(g,Z),w,z)}},_5=(u,g)=>{let w=u,z=g.split("-"),$=z.length;for(let B=0;B<$;B++){let J=z[B],Z=w.nextPart.get(J);if(!Z)Z=A5(),w.nextPart.set(J,Z);w=Z}return w},z9=(u)=>("isThemeGetter"in u)&&u.isThemeGetter===!0,$9=(u)=>{if(u<1)return{get:()=>{return},set:()=>{}};let g=0,w=Object.create(null),z=Object.create(null),$=(B,J)=>{if(w[B]=J,g++,g>u)g=0,z=w,w=Object.create(null)};return{get(B){let J=w[B];if(J!==void 0)return J;if((J=z[B])!==void 0)return $(B,J),J},set(B,J){if(B in w)w[B]=J;else $(B,J)}}};var B9=[],H5=(u,g,w,z,$)=>({modifiers:u,hasImportantModifier:g,baseClassName:w,maybePostfixModifierPosition:z,isExternal:$}),J9=(u)=>{let{prefix:g,experimentalParseClassName:w}=u,z=($)=>{let B=[],J=0,Z=0,q=0,X,Y=$.length;for(let K=0;K<Y;K++){let k=$[K];if(J===0&&Z===0){if(k===":"){B.push($.slice(q,K)),q=K+1;continue}if(k==="/"){X=K;continue}}if(k==="[")J++;else if(k==="]")J--;else if(k==="(")Z++;else if(k===")")Z--}let R=B.length===0?$:$.slice(q),H=R,W=!1;if(R.endsWith("!"))H=R.slice(0,-1),W=!0;else if(R.startsWith("!"))H=R.slice(1),W=!0;let Q=X&&X>q?X-q:void 0;return H5(B,W,H,Q)};if(g){let $=g+":",B=z;z=(J)=>J.startsWith($)?B(J.slice($.length)):H5(B9,!1,J,void 0,!0)}if(w){let $=z;z=(B)=>w({className:B,parseClassName:$})}return z},Z9=(u)=>{let g=new Map;return u.orderSensitiveModifiers.forEach((w,z)=>{g.set(w,1e6+z)}),(w)=>{let z=[],$=[];for(let B=0;B<w.length;B++){let J=w[B],Z=J[0]==="[",q=g.has(J);if(Z||q){if($.length>0)$.sort(),z.push(...$),$=[];z.push(J)}else $.push(J)}if($.length>0)$.sort(),z.push(...$);return z}},q9=(u)=>({cache:$9(u.cacheSize),parseClassName:J9(u),sortModifiers:Z9(u),...l8(u)}),X9=/\s+/,Y9=(u,g)=>{let{parseClassName:w,getClassGroupId:z,getConflictingClassGroupIds:$,sortModifiers:B}=g,J=[],Z=u.trim().split(X9),q="";for(let X=Z.length-1;X>=0;X-=1){let Y=Z[X],{isExternal:R,modifiers:H,hasImportantModifier:W,baseClassName:Q,maybePostfixModifierPosition:K}=w(Y);if(R){q=Y+(q.length>0?" "+q:q);continue}let k=!!K,_=z(k?Q.substring(0,K):Q);if(!_){if(!k){q=Y+(q.length>0?" "+q:q);continue}if(_=z(Q),!_){q=Y+(q.length>0?" "+q:q);continue}k=!1}let p=H.length===0?"":H.length===1?H[0]:B(H).join(":"),E=W?p+"!":p,J0=E+_;if(J.indexOf(J0)>-1)continue;J.push(J0);let c=$(_,k);for(let z0=0;z0<c.length;++z0){let a=c[z0];J.push(E+a)}q=Y+(q.length>0?" "+q:q)}return q},R9=(...u)=>{let g=0,w,z,$="";while(g<u.length)if(w=u[g++]){if(z=b5(w))$&&($+=" "),$+=z}return $},b5=(u)=>{if(typeof u==="string")return u;let g,w="";for(let z=0;z<u.length;z++)if(u[z]){if(g=b5(u[z]))w&&(w+=" "),w+=g}return w},H9=(u,...g)=>{let w,z,$,B,J=(q)=>{let X=g.reduce((Y,R)=>R(Y),u());return w=q9(X),z=w.cache.get,$=w.cache.set,B=Z,Z(q)},Z=(q)=>{let X=z(q);if(X)return X;let Y=Y9(q,w);return $(q,Y),Y};return B=J,(...q)=>B(R9(...q))},W9=[],B0=(u)=>{let g=(w)=>w[u]||W9;return g.isThemeGetter=!0,g},I5=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,L5=/^\((?:(\w[\w-]*):)?(.+)\)$/i,K9=/^\d+(?:\.\d+)?\/\d+(?:\.\d+)?$/,U9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,A9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Q9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,_9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,b9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,u1=(u)=>K9.test(u),D=(u)=>!!u&&!Number.isNaN(Number(u)),g1=(u)=>!!u&&Number.isInteger(Number(u)),tu=(u)=>u.endsWith("%")&&D(u.slice(0,-1)),m0=(u)=>U9.test(u),k5=()=>!0,I9=(u)=>A9.test(u)&&!Q9.test(u),eu=()=>!1,L9=(u)=>_9.test(u),k9=(u)=>b9.test(u),f9=(u)=>!b(u)&&!I(u),F9=(u)=>w1(u,j5,eu),b=(u)=>I5.test(u),A1=(u)=>w1(u,P5,I9),W5=(u)=>w1(u,y9,D),j9=(u)=>w1(u,G5,k5),P9=(u)=>w1(u,S5,eu),K5=(u)=>w1(u,f5,eu),S9=(u)=>w1(u,F5,k9),N2=(u)=>w1(u,v5,L9),I=(u)=>L5.test(u),t1=(u)=>Q1(u,P5),G9=(u)=>Q1(u,S5),U5=(u)=>Q1(u,f5),v9=(u)=>Q1(u,j5),M9=(u)=>Q1(u,F5),E2=(u)=>Q1(u,v5,!0),D9=(u)=>Q1(u,G5,!0),w1=(u,g,w)=>{let z=I5.exec(u);if(z){if(z[1])return g(z[1]);return w(z[2])}return!1},Q1=(u,g,w=!1)=>{let z=L5.exec(u);if(z){if(z[1])return g(z[1]);return w}return!1},f5=(u)=>u==="position"||u==="percentage",F5=(u)=>u==="image"||u==="url",j5=(u)=>u==="length"||u==="size"||u==="bg-size",P5=(u)=>u==="length",y9=(u)=>u==="number",S5=(u)=>u==="family-name",G5=(u)=>u==="number"||u==="weight",v5=(u)=>u==="shadow";var h9=()=>{let u=B0("color"),g=B0("font"),w=B0("text"),z=B0("font-weight"),$=B0("tracking"),B=B0("leading"),J=B0("breakpoint"),Z=B0("container"),q=B0("spacing"),X=B0("radius"),Y=B0("shadow"),R=B0("inset-shadow"),H=B0("text-shadow"),W=B0("drop-shadow"),Q=B0("blur"),K=B0("perspective"),k=B0("aspect"),_=B0("ease"),p=B0("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J0=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],c=()=>[...J0(),I,b],z0=()=>["auto","hidden","clip","visible","scroll"],a=()=>["auto","contain","none"],L=()=>[I,b,q],j=()=>[u1,"full","auto",...L()],_0=()=>[g1,"none","subgrid",I,b],h0=()=>["auto",{span:["full",g1,I,b]},g1,I,b],Y1=()=>[g1,"auto",I,b],P4=()=>["auto","min","max","fr",I,b],hu=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],j1=()=>["start","end","center","stretch","center-safe","end-safe"],C0=()=>["auto",...L()],R1=()=>[u1,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...L()],Cu=()=>[u1,"screen","full","dvw","lvw","svw","min","max","fit",...L()],Ou=()=>[u1,"screen","full","lh","dvh","lvh","svh","min","max","fit",...L()],F=()=>[u,I,b],S4=()=>[...J0(),U5,K5,{position:[I,b]}],G4=()=>["no-repeat",{repeat:["","x","y","space","round"]}],v4=()=>["auto","cover","contain",v9,F9,{size:[I,b]}],su=()=>[tu,t1,A1],K0=()=>["","none","full",X,I,b],U0=()=>["",D,t1,A1],L2=()=>["solid","dashed","dotted","double"],M4=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Z0=()=>[D,tu,U5,K5],D4=()=>["","none",Q,I,b],k2=()=>["none",D,I,b],f2=()=>["none",D,I,b],xu=()=>[D,I,b],F2=()=>[u1,"full",...L()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[m0],breakpoint:[m0],color:[k5],container:[m0],"drop-shadow":[m0],ease:["in","out","in-out"],font:[f9],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[m0],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[m0],shadow:[m0],spacing:["px",D],text:[m0],"text-shadow":[m0],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",u1,b,I,k]}],container:["container"],columns:[{columns:[D,b,I,Z]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:c()}],overflow:[{overflow:z0()}],"overflow-x":[{"overflow-x":z0()}],"overflow-y":[{"overflow-y":z0()}],overscroll:[{overscroll:a()}],"overscroll-x":[{"overscroll-x":a()}],"overscroll-y":[{"overscroll-y":a()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:j()}],"inset-x":[{"inset-x":j()}],"inset-y":[{"inset-y":j()}],start:[{"inset-s":j(),start:j()}],end:[{"inset-e":j(),end:j()}],"inset-bs":[{"inset-bs":j()}],"inset-be":[{"inset-be":j()}],top:[{top:j()}],right:[{right:j()}],bottom:[{bottom:j()}],left:[{left:j()}],visibility:["visible","invisible","collapse"],z:[{z:[g1,"auto",I,b]}],basis:[{basis:[u1,"full","auto",Z,...L()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[D,u1,"auto","initial","none",b]}],grow:[{grow:["",D,I,b]}],shrink:[{shrink:["",D,I,b]}],order:[{order:[g1,"first","last","none",I,b]}],"grid-cols":[{"grid-cols":_0()}],"col-start-end":[{col:h0()}],"col-start":[{"col-start":Y1()}],"col-end":[{"col-end":Y1()}],"grid-rows":[{"grid-rows":_0()}],"row-start-end":[{row:h0()}],"row-start":[{"row-start":Y1()}],"row-end":[{"row-end":Y1()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P4()}],"auto-rows":[{"auto-rows":P4()}],gap:[{gap:L()}],"gap-x":[{"gap-x":L()}],"gap-y":[{"gap-y":L()}],"justify-content":[{justify:[...hu(),"normal"]}],"justify-items":[{"justify-items":[...j1(),"normal"]}],"justify-self":[{"justify-self":["auto",...j1()]}],"align-content":[{content:["normal",...hu()]}],"align-items":[{items:[...j1(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...j1(),{baseline:["","last"]}]}],"place-content":[{"place-content":hu()}],"place-items":[{"place-items":[...j1(),"baseline"]}],"place-self":[{"place-self":["auto",...j1()]}],p:[{p:L()}],px:[{px:L()}],py:[{py:L()}],ps:[{ps:L()}],pe:[{pe:L()}],pbs:[{pbs:L()}],pbe:[{pbe:L()}],pt:[{pt:L()}],pr:[{pr:L()}],pb:[{pb:L()}],pl:[{pl:L()}],m:[{m:C0()}],mx:[{mx:C0()}],my:[{my:C0()}],ms:[{ms:C0()}],me:[{me:C0()}],mbs:[{mbs:C0()}],mbe:[{mbe:C0()}],mt:[{mt:C0()}],mr:[{mr:C0()}],mb:[{mb:C0()}],ml:[{ml:C0()}],"space-x":[{"space-x":L()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":L()}],"space-y-reverse":["space-y-reverse"],size:[{size:R1()}],"inline-size":[{inline:["auto",...Cu()]}],"min-inline-size":[{"min-inline":["auto",...Cu()]}],"max-inline-size":[{"max-inline":["none",...Cu()]}],"block-size":[{block:["auto",...Ou()]}],"min-block-size":[{"min-block":["auto",...Ou()]}],"max-block-size":[{"max-block":["none",...Ou()]}],w:[{w:[Z,"screen",...R1()]}],"min-w":[{"min-w":[Z,"screen","none",...R1()]}],"max-w":[{"max-w":[Z,"screen","none","prose",{screen:[J]},...R1()]}],h:[{h:["screen","lh",...R1()]}],"min-h":[{"min-h":["screen","lh","none",...R1()]}],"max-h":[{"max-h":["screen","lh",...R1()]}],"font-size":[{text:["base",w,t1,A1]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[z,D9,j9]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",tu,b]}],"font-family":[{font:[G9,P9,g]}],"font-features":[{"font-features":[b]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[$,I,b]}],"line-clamp":[{"line-clamp":[D,"none",I,W5]}],leading:[{leading:[B,...L()]}],"list-image":[{"list-image":["none",I,b]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",I,b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...L2(),"wavy"]}],"text-decoration-thickness":[{decoration:[D,"from-font","auto",I,A1]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[D,"auto",I,b]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",I,b]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",I,b]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:S4()}],"bg-repeat":[{bg:G4()}],"bg-size":[{bg:v4()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},g1,I,b],radial:["",I,b],conic:[g1,I,b]},M9,S9]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:su()}],"gradient-via-pos":[{via:su()}],"gradient-to-pos":[{to:su()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:K0()}],"rounded-s":[{"rounded-s":K0()}],"rounded-e":[{"rounded-e":K0()}],"rounded-t":[{"rounded-t":K0()}],"rounded-r":[{"rounded-r":K0()}],"rounded-b":[{"rounded-b":K0()}],"rounded-l":[{"rounded-l":K0()}],"rounded-ss":[{"rounded-ss":K0()}],"rounded-se":[{"rounded-se":K0()}],"rounded-ee":[{"rounded-ee":K0()}],"rounded-es":[{"rounded-es":K0()}],"rounded-tl":[{"rounded-tl":K0()}],"rounded-tr":[{"rounded-tr":K0()}],"rounded-br":[{"rounded-br":K0()}],"rounded-bl":[{"rounded-bl":K0()}],"border-w":[{border:U0()}],"border-w-x":[{"border-x":U0()}],"border-w-y":[{"border-y":U0()}],"border-w-s":[{"border-s":U0()}],"border-w-e":[{"border-e":U0()}],"border-w-bs":[{"border-bs":U0()}],"border-w-be":[{"border-be":U0()}],"border-w-t":[{"border-t":U0()}],"border-w-r":[{"border-r":U0()}],"border-w-b":[{"border-b":U0()}],"border-w-l":[{"border-l":U0()}],"divide-x":[{"divide-x":U0()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":U0()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...L2(),"hidden","none"]}],"divide-style":[{divide:[...L2(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-bs":[{"border-bs":F()}],"border-color-be":[{"border-be":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...L2(),"none","hidden"]}],"outline-offset":[{"outline-offset":[D,I,b]}],"outline-w":[{outline:["",D,t1,A1]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",Y,E2,N2]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",R,E2,N2]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:U0()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[D,A1]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":U0()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",H,E2,N2]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[D,I,b]}],"mix-blend":[{"mix-blend":[...M4(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":M4()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[D]}],"mask-image-linear-from-pos":[{"mask-linear-from":Z0()}],"mask-image-linear-to-pos":[{"mask-linear-to":Z0()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":Z0()}],"mask-image-t-to-pos":[{"mask-t-to":Z0()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":Z0()}],"mask-image-r-to-pos":[{"mask-r-to":Z0()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":Z0()}],"mask-image-b-to-pos":[{"mask-b-to":Z0()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":Z0()}],"mask-image-l-to-pos":[{"mask-l-to":Z0()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":Z0()}],"mask-image-x-to-pos":[{"mask-x-to":Z0()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":Z0()}],"mask-image-y-to-pos":[{"mask-y-to":Z0()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[I,b]}],"mask-image-radial-from-pos":[{"mask-radial-from":Z0()}],"mask-image-radial-to-pos":[{"mask-radial-to":Z0()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":J0()}],"mask-image-conic-pos":[{"mask-conic":[D]}],"mask-image-conic-from-pos":[{"mask-conic-from":Z0()}],"mask-image-conic-to-pos":[{"mask-conic-to":Z0()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:S4()}],"mask-repeat":[{mask:G4()}],"mask-size":[{mask:v4()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",I,b]}],filter:[{filter:["","none",I,b]}],blur:[{blur:D4()}],brightness:[{brightness:[D,I,b]}],contrast:[{contrast:[D,I,b]}],"drop-shadow":[{"drop-shadow":["","none",W,E2,N2]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",D,I,b]}],"hue-rotate":[{"hue-rotate":[D,I,b]}],invert:[{invert:["",D,I,b]}],saturate:[{saturate:[D,I,b]}],sepia:[{sepia:["",D,I,b]}],"backdrop-filter":[{"backdrop-filter":["","none",I,b]}],"backdrop-blur":[{"backdrop-blur":D4()}],"backdrop-brightness":[{"backdrop-brightness":[D,I,b]}],"backdrop-contrast":[{"backdrop-contrast":[D,I,b]}],"backdrop-grayscale":[{"backdrop-grayscale":["",D,I,b]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[D,I,b]}],"backdrop-invert":[{"backdrop-invert":["",D,I,b]}],"backdrop-opacity":[{"backdrop-opacity":[D,I,b]}],"backdrop-saturate":[{"backdrop-saturate":[D,I,b]}],"backdrop-sepia":[{"backdrop-sepia":["",D,I,b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":L()}],"border-spacing-x":[{"border-spacing-x":L()}],"border-spacing-y":[{"border-spacing-y":L()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",I,b]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[D,"initial",I,b]}],ease:[{ease:["linear","initial",_,I,b]}],delay:[{delay:[D,I,b]}],animate:[{animate:["none",p,I,b]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[K,I,b]}],"perspective-origin":[{"perspective-origin":c()}],rotate:[{rotate:k2()}],"rotate-x":[{"rotate-x":k2()}],"rotate-y":[{"rotate-y":k2()}],"rotate-z":[{"rotate-z":k2()}],scale:[{scale:f2()}],"scale-x":[{"scale-x":f2()}],"scale-y":[{"scale-y":f2()}],"scale-z":[{"scale-z":f2()}],"scale-3d":["scale-3d"],skew:[{skew:xu()}],"skew-x":[{"skew-x":xu()}],"skew-y":[{"skew-y":xu()}],transform:[{transform:[I,b,"","none","gpu","cpu"]}],"transform-origin":[{origin:c()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:F2()}],"translate-x":[{"translate-x":F2()}],"translate-y":[{"translate-y":F2()}],"translate-z":[{"translate-z":F2()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",I,b]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mbs":[{"scroll-mbs":L()}],"scroll-mbe":[{"scroll-mbe":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pbs":[{"scroll-pbs":L()}],"scroll-pbe":[{"scroll-pbe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",I,b]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[D,t1,A1,W5]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","inset-bs","inset-be","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pbs","pbe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mbs","mbe","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-bs","border-w-be","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-bs","border-color-be","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mbs","scroll-mbe","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pbs","scroll-pbe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}};var M5=H9(h9);function U(...u){return M5(i2(u))}var g2=Array.isArray;function a2(u){var g=typeof u;return g==="string"||g==="number"}function r(u){return u===void 0||u===null}function w2(u){return u===null||u===!1||u===!0||u===void 0}function i(u){return typeof u==="function"}function T2(u){return typeof u==="string"}function C9(u){return typeof u==="number"}function Q0(u){return u===null}function O9(u){return u===void 0}function L1(u,g){var w={};if(u)for(var z in u)w[z]=u[z];if(g)for(var $ in g)w[$]=g[$];return w}function $g(u){return!Q0(u)&&typeof u==="object"}var Y0={},s9="$F",z2=function u(){this.componentDidAppear=[],this.componentWillDisappear=[],this.componentWillMove=[]};function Bg(u){return u.substring(2).toLowerCase()}function x5(u,g){u.appendChild(g)}function n2(u,g,w){if(Q0(w))x5(u,g);else u.insertBefore(g,w)}function x9(u,g){if(g)return document.createElementNS("http://www.w3.org/2000/svg",u);return document.createElement(u)}function V9(u,g,w){u.replaceChild(g,w)}function V5(u,g){u.removeChild(g)}function r9(u){for(var g=0;g<u.length;g++)u[g]()}function p9(u,g,w){var z=u.children;if(w&4)return z.$LI;if(w&8192)return u.childFlags===2?z:z[g?0:z.length-1];return z}function S0(u,g){var w;while(u){if(w=u.flags,w&1521)return u.dom;u=p9(u,g,w)}return null}function Jg(u,g){var w=u.length,z;while((z=u.pop())!==void 0)z(function(){if(--w<=0&&i(g))g()})}function i9(u){for(var g=0;g<u.length;g++)u[g].fn();for(var w=0;w<u.length;w++){var z=u[w];n2(z.parent,z.dom,z.next)}u.splice(0,u.length)}function e2(u,g,w){do{var z=u.flags;if(z&1521){if(!w||u.dom.parentNode===g)V5(g,u.dom);return}var $=u.children;if(z&4)u=$.$LI;if(z&8)u=$;if(z&8192)if(u.childFlags===2)u=$;else{for(var B=0,J=$.length;B<J;++B)e2($[B],g,!1);return}}while(u)}function N9(u,g){return function(){e2(u,g,!0)}}function uu(u,g,w){if(w.componentWillDisappear.length>0)Jg(w.componentWillDisappear,N9(u,g));else e2(u,g,!1)}function E9(u,g,w,z,$,B,J,Z){u.componentWillMove.push({dom:z,fn:function q(){if(J&4)w.componentWillMove(g,$,z);else if(J&8)w.onComponentWillMove(g,$,z,Z)},next:B,parent:$})}function r5(u,g,w,z,$){var B,J,Z=g.flags;do{var q=g.flags;if(q&1521){if(!r(B)&&(i(B.componentWillMove)||i(B.onComponentWillMove)))E9($,u,B,g.dom,w,z,Z,J);else n2(w,g.dom,z);return}var X=g.children;if(q&4)B=g.children,J=g.props,g=X.$LI;else if(q&8)B=g.ref,J=g.props,g=X;else if(q&8192)if(g.childFlags===2)g=X;else{for(var Y=0,R=X.length;Y<R;++Y)r5(u,X[Y],w,z,$);return}}while(g)}function p5(u,g,w){if(u.constructor.getDerivedStateFromProps)return L1(w,u.constructor.getDerivedStateFromProps(g,w));return w}var gg={v:!1},l2={componentComparator:null,createVNode:null,renderComplete:null};function e1(u,g){u.textContent=g}function i5(u,g){return $g(u)&&u.event===g.event&&u.data===g.data}function N5(u,g){for(var w in g)if(O9(u[w]))u[w]=g[w];return u}function Zg(u,g){return!!i(u)&&(u(g),!0)}var u2="$";function gu(u,g,w,z,$,B,J,Z){this.childFlags=u,this.children=g,this.className=w,this.dom=null,this.flags=z,this.key=$===void 0?null:$,this.props=B===void 0?null:B,this.ref=J===void 0?null:J,this.type=Z}function qg(u,g,w,z,$,B,J,Z){var q=$===void 0?1:$,X=new gu(q,z,w,u,J,B,Z,g);if(l2.createVNode)l2.createVNode(X);if(q===0)a9(X,X.children);return X}function d9(u,g,w){if(u&4)return w;var z=(u&32768?g.render:g).defaultHooks;if(r(z))return w;if(r(w))return z;return N5(w,z)}function o9(u,g,w){var z=(u&32768?g.render:g).defaultProps;if(r(z))return w;if(r(w))return L1(z,null);return N5(w,z)}function m9(u,g){if(u&12)return u;if(g.prototype&&g.prototype.render)return 4;if(g.render)return 32776;return 8}function E5(u,g,w,z,$){u=m9(u,g);var B=new gu(1,null,null,u,z,o9(u,g,w),d9(u,g,$),g);if(l2.createVNode)l2.createVNode(B);return B}function B2(u,g){return new gu(1,r(u)||u===!0||u===!1?"":u,null,16,g,null,null,null)}function wu(u,g,w){var z=qg(8192,8192,null,u,g,null,w,null);switch(z.childFlags){case 1:z.children=Tu(),z.childFlags=2;break;case 16:z.children=[B2(u)],z.childFlags=4;break}return z}function c9(u){var{children:g,childFlags:w}=u;return wu(w===2?R0(g):g.map(R0),w,u.key)}function R0(u){var g=u.flags&-16385,w=u.props;if(g&14){if(!Q0(w)){var z=w;w={};for(var $ in z)w[$]=z[$]}}if((g&8192)===0)return new gu(u.childFlags,u.children,u.className,g,u.key,w,u.ref,u.type);return c9(u)}function Tu(){return B2("",null)}function d5(u,g,w,z){for(var $=u.length;w<$;w++){var B=u[w];if(!w2(B)){var J=z+u2+w;if(g2(B))d5(B,g,0,J);else{if(a2(B))B=B2(B,J);else{var Z=B.key,q=T2(Z)&&Z[0]===u2;if(B.flags&81920||q)B=R0(B);if(B.flags|=65536,!q)if(Q0(Z))B.key=J;else B.key=z+Z;else if(Z.substring(0,z.length)!==z)B.key=z+Z}g.push(B)}}}}function o5(u){switch(u){case"svg":return 32;case"input":return 64;case"select":return 256;case"textarea":return 128;case s9:return 8192;default:return 1}}function a9(u,g){var w,z=1;if(w2(g))w=g;else if(a2(g))z=16,w=g;else if(g2(g)){var $=g.length;for(var B=0;B<$;++B){var J=g[B];if(w2(J)||g2(J)){w=w||g.slice(0,B),d5(g,w,B,"");break}else if(a2(J))w=w||g.slice(0,B),w.push(B2(J,u2+B));else{var Z=J.key,q=(J.flags&81920)>0,X=Q0(Z),Y=T2(Z)&&Z[0]===u2;if(q||X||Y){if(w=w||g.slice(0,B),q||Y)J=R0(J);if(X||Y)J.key=u2+B;w.push(J)}else if(w)w.push(J);J.flags|=65536}}if(w=w||g,w.length===0)z=1;else z=8}else{if(w=g,w.flags|=65536,g.flags&81920)w=R0(g);z=2}return u.children=w,u.childFlags=z,u}function Xg(u){if(w2(u)||a2(u))return B2(u,null);if(g2(u))return wu(u,0,null);return u.flags&16384?R0(u):u}var _1="http://www.w3.org/1999/xlink",ug="http://www.w3.org/XML/1998/namespace",D5={"xlink:actuate":_1,"xlink:arcrole":_1,"xlink:href":_1,"xlink:role":_1,"xlink:show":_1,"xlink:title":_1,"xlink:type":_1,"xml:base":ug,"xml:lang":ug,"xml:space":ug};function zu(u){return{onClick:u,onDblClick:u,onFocusIn:u,onFocusOut:u,onKeyDown:u,onKeyPress:u,onKeyUp:u,onMouseDown:u,onMouseMove:u,onMouseUp:u,onTouchEnd:u,onTouchMove:u,onTouchStart:u}}var m5=zu(0),wg=zu(null),c5=zu(!0);function y5(u,g){var w=g.$EV;if(!w)w=g.$EV=zu(null);if(!w[u]){if(++m5[u]===1)wg[u]=T7(u)}return w}function a5(u,g){var w=g.$EV;if(w&&w[u]){if(--m5[u]===0)document.removeEventListener(Bg(u),wg[u]),wg[u]=null;w[u]=null}}function l9(u,g,w,z){if(i(w))y5(u,z)[u]=w;else if($g(w)){if(i5(g,w))return;y5(u,z)[u]=w}else a5(u,z)}function t9(u){return i(u.composedPath)?u.composedPath()[0]:u.target}function l5(u,g,w,z){var $=t9(u);do{if(g&&$.disabled)return;var B=$.$EV;if(B){var J=B[w];if(J){if(z.dom=$,J.event?J.event(J.data,u):J(u),u.cancelBubble)return}}$=$.parentNode}while(!Q0($))}function n9(){if(this.cancelBubble=!0,!this.immediatePropagationStopped)this.stopImmediatePropagation()}function e9(){return this.defaultPrevented}function u7(){return this.cancelBubble}function t5(u){var g={dom:document};return u.isDefaultPrevented=e9,u.isPropagationStopped=u7,u.stopPropagation=n9,Object.defineProperty(u,"currentTarget",{configurable:!0,get:function w(){return g.dom}}),g}function g7(u){return function(g){if(g.button!==0){g.stopPropagation();return}l5(g,!0,u,t5(g))}}function w7(u){return function(g){l5(g,!1,u,t5(g))}}function T7(u){var g=u==="onClick"||u==="onDblClick"?g7(u):w7(u);return document.addEventListener(Bg(u),g),g}function z7(u,g){var w=document.createElement("i");return w.innerHTML=g,w.innerHTML===u.innerHTML}function h5(u,g,w){if(u[g]){var z=u[g];if(z.event)z.event(z.data,w);else z(w)}else{var $=g.toLowerCase();if(u[$])u[$](w)}}function J2(u,g){var w=function z($){var B=this.$V;if(!B)return;var J=B.props||Y0,Z=B.dom;if(T2(u))h5(J,u,$);else for(var q=0;q<u.length;++q)h5(J,u[q],$);if(i(g)){var X=this.$V,Y=X.props||Y0;g(Y,Z,!1,X)}};return Object.defineProperty(w,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),w}function b1(u,g,w){var z="$"+g,$=u[z];if($){if($[1].wrapped)return;u.removeEventListener($[0],$[1]),u[z]=null}if(i(w))u.addEventListener(g,w),u[z]=[g,w]}function Yg(u){return u==="checkbox"||u==="radio"}var $7=J2("onInput",Rg),B7=J2(["onClick","onChange"],Rg);function n5(u){u.stopPropagation()}n5.wrapped=!0;function J7(u,g){if(Yg(g.type))b1(u,"change",B7),b1(u,"click",n5);else b1(u,"input",$7)}function Rg(u,g){var{type:w,value:z,checked:$,multiple:B,defaultValue:J}=u,Z=!r(z);if(w&&w!==g.type)g.setAttribute("type",w);if(!r(B)&&B!==g.multiple)g.multiple=B;if(!r(J)&&!Z)g.defaultValue=J+"";if(Yg(w)){if(Z)g.value=z;if(!r($))g.checked=$}else if(Z&&g.value!==z)g.defaultValue=z,g.value=z;else if(!r($))g.checked=$}function n1(u,g){if(u.type==="option")Z7(u,g);else{var{children:w,flags:z}=u;if(z&4)n1(w.$LI,g);else if(z&8)n1(w,g);else if(u.childFlags===2)n1(w,g);else if(u.childFlags&12)for(var $=0,B=w.length;$<B;++$)n1(w[$],g)}}function Z7(u,g){var w=u.props||Y0,z=u.dom;if(z.value=w.value,w.value===g||g2(g)&&g.indexOf(w.value)!==-1)z.selected=!0;else if(!r(g)||!r(w.selected))z.selected=w.selected||!1}var q7=J2("onChange",e5);function X7(u){b1(u,"change",q7)}function e5(u,g,w,z){var $=Boolean(u.multiple);if(!r(u.multiple)&&$!==g.multiple)g.multiple=$;var B=u.selectedIndex;if(B===-1)g.selectedIndex=-1;var J=z.childFlags;if(J!==1){var Z=u.value;if(C9(B)&&B>-1&&g.options[B])Z=g.options[B].value;if(w&&r(Z))Z=u.defaultValue;n1(z,Z)}}var Y7=J2("onInput",uw),R7=J2("onChange");function H7(u,g){if(b1(u,"input",Y7),g.onChange)b1(u,"change",R7)}function uw(u,g,w){var z=u.value,$=g.value;if(r(z)){if(w){var B=u.defaultValue;if(!r(B)&&B!==$)g.defaultValue=B,g.value=B}}else if($!==z)g.defaultValue=z,g.value=z}function gw(u,g,w,z,$,B){if(u&64)Rg(z,w);else if(u&256)e5(z,w,$,g);else if(u&128)uw(z,w,$);if(B)w.$V=g}function W7(u,g,w){if(u&64)J7(g,w);else if(u&256)X7(g);else if(u&128)H7(g,w)}function ww(u){return u.type&&Yg(u.type)?!r(u.checked):!r(u.value)}function t2(u){if(u){if(!Zg(u,null)&&u.current)u.current=null}}function $u(u,g,w){if(u&&(i(u)||u.current!==void 0))w.push(function(){if(!Zg(u,g)&&u.current!==void 0)u.current=g})}function r0(u,g,w){a0(u,w),uu(u,g,w)}function a0(u,g){var{flags:w,children:z}=u,$;if(w&481){$=u.ref;var B=u.props;t2($);var J=u.childFlags;if(!Q0(B)){var Z=Object.keys(B);for(var q=0,X=Z.length;q<X;q++){var Y=Z[q];if(c5[Y])a5(Y,u.dom)}}if(J&12)$2(z,g);else if(J===2)a0(z,g)}else if(z){if(w&4){if(i(z.componentWillUnmount))z.componentWillUnmount();var R=g;if(i(z.componentWillDisappear))R=new z2,C5(g,z,z.$LI.dom,w,void 0);t2(u.ref),z.$UN=!0,a0(z.$LI,R)}else if(w&8){var H=g;if($=u.ref,!r($)){var W=null;if(i($.onComponentWillUnmount))W=S0(u,!0),$.onComponentWillUnmount(W,u.props||Y0);if(i($.onComponentWillDisappear))H=new z2,W=W||S0(u,!0),C5(g,$,W,w,u.props)}a0(z,H)}else if(w&1024)r0(z,u.ref,g);else if(w&8192){if(u.childFlags&12)$2(z,g)}}}function $2(u,g){for(var w=0,z=u.length;w<z;++w)a0(u[w],g)}function K7(u,g){return function(){if(g)for(var w=0;w<u.length;w++){var z=u[w];e2(z,g,!1)}}}function o2(u,g,w){if(w.componentWillDisappear.length>0)Jg(w.componentWillDisappear,K7(g,u));else u.textContent=""}function m2(u,g,w,z){if($2(w,z),g.flags&8192)uu(g,u,z);else o2(u,w,z)}function C5(u,g,w,z,$){u.componentWillDisappear.push(function(B){if(z&4)g.componentWillDisappear(w,B);else if(z&8)g.onComponentWillDisappear(w,$,B)})}function U7(u){var g=u.event;return function(w){g(u.data,w)}}function A7(u,g,w,z){if($g(w)){if(i5(g,w))return;w=U7(w)}b1(z,Bg(u),w)}function Q7(u,g,w){if(r(g)){w.removeAttribute("style");return}var z=w.style,$,B;if(T2(g)){z.cssText=g;return}if(!r(u)&&!T2(u)){for($ in g)if(B=g[$],B!==u[$])z.setProperty($,B);for($ in u)if(r(g[$]))z.removeProperty($)}else for($ in g)B=g[$],z.setProperty($,B)}function _7(u,g,w,z,$){var B=u&&u.__html||"",J=g&&g.__html||"";if(B!==J){if(!r(J)&&!z7(z,J)){if(!Q0(w)){if(w.childFlags&12)$2(w.children,$);else if(w.childFlags===2)a0(w.children,$);w.children=null,w.childFlags=1}z.innerHTML=J}}}function Tg(u,g,w,z,$,B,J,Z){switch(u){case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":case"selectedIndex":break;case"autoFocus":z.autofocus=!!w;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":z[u]=!!w;break;case"defaultChecked":case"value":case"volume":if(B&&u==="value")break;var q=r(w)?"":w;if(z[u]!==q)z[u]=q;break;case"style":Q7(g,w,z);break;case"dangerouslySetInnerHTML":_7(g,w,J,z,Z);break;default:if(c5[u])l9(u,g,w,z);else if(u.charCodeAt(0)===111&&u.charCodeAt(1)===110)A7(u,g,w,z);else if(r(w))z.removeAttribute(u);else if($&&D5[u])z.setAttributeNS(D5[u],u,w);else z.setAttribute(u,w);break}}function b7(u,g,w,z,$,B){var J=!1,Z=(g&448)>0;if(Z){if(J=ww(w),J)W7(g,z,w)}for(var q in w)Tg(q,null,w[q],z,$,J,null,B);if(Z)gw(g,u,z,w,!0,J)}function Tw(u,g,w){var z=Xg(u.render(g,u.state,w)),$=w;if(i(u.getChildContext))$=L1(w,u.getChildContext());return u.$CX=$,z}function I7(u,g,w,z,$,B){var J=new g(w,z),Z=J.$N=Boolean(g.getDerivedStateFromProps||J.getSnapshotBeforeUpdate);if(J.$SVG=$,J.$L=B,u.children=J,J.$BS=!1,J.context=z,J.props===Y0)J.props=w;if(!Z){if(i(J.componentWillMount)){J.$BR=!0,J.componentWillMount();var q=J.$PS;if(!Q0(q)){var X=J.state;if(Q0(X))J.state=q;else for(var Y in q)X[Y]=q[Y];J.$PS=null}J.$BR=!1}}else J.state=p5(J,w,J.state);return J.$LI=Tw(J,w,z),J}function zw(u,g){var w=u.props||Y0;return u.flags&32768?u.type.render(w,u.ref,g):u.type(w,g)}function W0(u,g,w,z,$,B,J){var Z=u.flags|=16384;if(Z&481)f7(u,g,w,z,$,B,J);else if(Z&4)F7(u,g,w,z,$,B,J);else if(Z&8)j7(u,g,w,z,$,B,J);else if(Z&16)$w(u,g,$);else if(Z&8192)k7(u,w,g,z,$,B,J);else if(Z&1024)L7(u,w,g,$,B,J)}function L7(u,g,w,z,$,B){W0(u.children,u.ref,g,!1,null,$,B);var J=Tu();$w(J,w,z),u.dom=J.dom}function k7(u,g,w,z,$,B,J){var{children:Z,childFlags:q}=u;if(q&12&&Z.length===0)q=u.childFlags=2,Z=u.children=Tu();if(q===2)W0(Z,w,g,z,$,B,J);else I1(Z,w,g,z,$,B,J)}function $w(u,g,w){var z=u.dom=document.createTextNode(u.children);if(!Q0(g))n2(g,z,w)}function f7(u,g,w,z,$,B,J){var{flags:Z,props:q,className:X,childFlags:Y}=u,R=u.dom=x9(u.type,z=z||(Z&32)>0),H=u.children;if(!r(X)&&X!=="")if(z)R.setAttribute("class",X);else R.className=X;if(Y===16)e1(R,H);else if(Y!==1){var W=z&&u.type!=="foreignObject";if(Y===2){if(H.flags&16384)u.children=H=R0(H);W0(H,R,w,W,null,B,J)}else if(Y===8||Y===4)I1(H,R,w,W,null,B,J)}if(!Q0(g))n2(g,R,$);if(!Q0(q))b7(u,Z,q,R,z,J);$u(u.ref,R,B)}function I1(u,g,w,z,$,B,J){for(var Z=0;Z<u.length;++Z){var q=u[Z];if(q.flags&16384)u[Z]=q=R0(q);W0(q,g,w,z,$,B,J)}}function F7(u,g,w,z,$,B,J){var Z=I7(u,u.type,u.props||Y0,w,z,B),q=J;if(i(Z.componentDidAppear))q=new z2;W0(Z.$LI,g,Z.$CX,z,$,B,q),S7(u.ref,Z,B,J)}function j7(u,g,w,z,$,B,J){var Z=u.ref,q=J;if(!r(Z)&&i(Z.onComponentDidAppear))q=new z2;W0(u.children=Xg(zw(u,w)),g,w,z,$,B,q),v7(u,B,J)}function P7(u){return function(){u.componentDidMount()}}function Bw(u,g,w,z,$){u.componentDidAppear.push(function(){if(z&4)g.componentDidAppear(w);else if(z&8)g.onComponentDidAppear(w,$)})}function S7(u,g,w,z){if($u(u,g,w),i(g.componentDidMount))w.push(P7(g));if(i(g.componentDidAppear))Bw(z,g,g.$LI.dom,4,void 0)}function G7(u,g){return function(){u.onComponentDidMount(S0(g,!0),g.props||Y0)}}function v7(u,g,w){var z=u.ref;if(!r(z)){if(Zg(z.onComponentWillMount,u.props||Y0),i(z.onComponentDidMount))g.push(G7(z,u));if(i(z.onComponentDidAppear))Bw(w,z,S0(u,!0),8,u.props)}}function M7(u,g,w,z,$,B,J){if(a0(u,J),(g.flags&u.flags&1521)!==0)W0(g,null,z,$,null,B,J),V9(w,g.dom,u.dom);else W0(g,w,z,$,S0(u,!0),B,J),uu(u,w,J)}function T1(u,g,w,z,$,B,J,Z){var q=g.flags|=16384;if(u.flags!==q||u.type!==g.type||u.key!==g.key||q&2048)if(u.flags&16384)M7(u,g,w,z,$,J,Z);else W0(g,w,z,$,B,J,Z);else if(q&481)O7(u,g,z,$,q,J,Z);else if(q&4)V7(u,g,w,z,$,B,J,Z);else if(q&8)r7(u,g,w,z,$,B,J,Z);else if(q&16)p7(u,g);else if(q&8192)h7(u,g,w,z,$,J,Z);else C7(u,g,z,J,Z)}function D7(u,g,w){if(u!==g)if(u!=="")w.firstChild.nodeValue=g;else e1(w,g)}function y7(u,g){if(u.textContent!==g)u.textContent=g}function h7(u,g,w,z,$,B,J){var Z=u.children,q=g.children,X=u.childFlags,Y=g.childFlags,R=null;if(Y&12&&q.length===0)Y=g.childFlags=2,q=g.children=Tu();var H=(Y&2)!==0;if(X&12){var W=Z.length;if(X&8&&Y&8||H||!H&&q.length>W)R=S0(Z[W-1],!1).nextSibling}Hg(X,Y,Z,q,w,z,$,R,u,B,J)}function C7(u,g,w,z,$){var B=u.ref,J=g.ref,Z=g.children;if(Hg(u.childFlags,g.childFlags,u.children,Z,B,w,!1,null,u,z,$),g.dom=u.dom,B!==J&&!w2(Z)){var q=Z.dom;V5(B,q),x5(J,q)}}function O7(u,g,w,z,$,B,J){var Z=g.dom=u.dom,q=u.props,X=g.props,Y=!1,R=!1,H;if(z=z||($&32)>0,q!==X){var W=q||Y0;if(H=X||Y0,H!==Y0){if(Y=($&448)>0,Y)R=ww(H);for(var Q in H){var K=W[Q],k=H[Q];if(K!==k)Tg(Q,K,k,Z,z,R,u,J)}}if(W!==Y0){for(var _ in W)if(r(H[_])&&!r(W[_]))Tg(_,W[_],null,Z,z,R,u,J)}}var{children:p,className:E}=g;if(u.className!==E)if(r(E))Z.removeAttribute("class");else if(z)Z.setAttribute("class",E);else Z.className=E;if($&4096)y7(Z,p);else Hg(u.childFlags,g.childFlags,u.children,p,Z,w,z&&g.type!=="foreignObject",null,u,B,J);if(Y)gw($,g,Z,H,!1,R);var J0=g.ref,c=u.ref;if(c!==J0)t2(c),$u(J0,Z,B)}function s7(u,g,w,z,$,B,J){a0(u,J),I1(g,w,z,$,S0(u,!0),B,J),uu(u,w,J)}function Hg(u,g,w,z,$,B,J,Z,q,X,Y){switch(u){case 2:switch(g){case 2:T1(w,z,$,B,J,Z,X,Y);break;case 1:r0(w,$,Y);break;case 16:a0(w,Y),e1($,z);break;default:s7(w,z,$,B,J,X,Y);break}break;case 1:switch(g){case 2:W0(z,$,B,J,Z,X,Y);break;case 1:break;case 16:e1($,z);break;default:I1(z,$,B,J,Z,X,Y);break}break;case 16:switch(g){case 16:D7(w,z,$);break;case 2:o2($,w,Y),W0(z,$,B,J,Z,X,Y);break;case 1:o2($,w,Y);break;default:o2($,w,Y),I1(z,$,B,J,Z,X,Y);break}break;default:switch(g){case 16:$2(w,Y),e1($,z);break;case 2:m2($,q,w,Y),W0(z,$,B,J,Z,X,Y);break;case 1:m2($,q,w,Y);break;default:var R=w.length|0,H=z.length|0;if(R===0){if(H>0)I1(z,$,B,J,Z,X,Y)}else if(H===0)m2($,q,w,Y);else if(g===8&&u===8)N7(w,z,$,B,J,R,H,Z,q,X,Y);else i7(w,z,$,B,J,R,H,Z,X,Y);break}break}}function x7(u,g,w,z,$){$.push(function(){u.componentDidUpdate(g,w,z)})}function Jw(u,g,w,z,$,B,J,Z,q,X){var{state:Y,props:R}=u,H=Boolean(u.$N),W=i(u.shouldComponentUpdate);if(H)g=p5(u,w,g!==Y?L1(Y,g):g);if(J||!W||W&&u.shouldComponentUpdate(w,g,$)){if(!H&&i(u.componentWillUpdate))u.componentWillUpdate(w,g,$);u.props=w,u.state=g,u.context=$;var Q=null,K=Tw(u,w,$);if(H&&i(u.getSnapshotBeforeUpdate))Q=u.getSnapshotBeforeUpdate(R,Y);if(T1(u.$LI,K,z,u.$CX,B,Z,q,X),u.$LI=K,i(u.componentDidUpdate))x7(u,R,Y,Q,q)}else u.props=w,u.state=g,u.context=$}function V7(u,g,w,z,$,B,J,Z){var q=g.children=u.children;if(Q0(q))return;q.$L=J;var X=g.props||Y0,Y=g.ref,R=u.ref,H=q.state;if(!q.$N){if(i(q.componentWillReceiveProps)){if(q.$BR=!0,q.componentWillReceiveProps(X,z),q.$UN)return;q.$BR=!1}if(!Q0(q.$PS))H=L1(H,q.$PS),q.$PS=null}if(Jw(q,H,X,w,z,$,!1,B,J,Z),R!==Y)t2(R),$u(Y,q,J)}function r7(u,g,w,z,$,B,J,Z){var q=!0,X=g.props||Y0,Y=g.ref,R=u.props,H=!r(Y),W=u.children;if(H&&i(Y.onComponentShouldUpdate))q=Y.onComponentShouldUpdate(R,X);if(q!==!1){if(H&&i(Y.onComponentWillUpdate))Y.onComponentWillUpdate(R,X);var Q=Xg(zw(g,z));if(T1(W,Q,w,z,$,B,J,Z),g.children=Q,H&&i(Y.onComponentDidUpdate))Y.onComponentDidUpdate(R,X)}else g.children=W}function p7(u,g){var w=g.children,z=g.dom=u.dom;if(w!==u.children)z.nodeValue=w}function i7(u,g,w,z,$,B,J,Z,q,X){var Y=B>J?J:B,R=0,H,W;for(;R<Y;++R){if(H=g[R],W=u[R],H.flags&16384)H=g[R]=R0(H);T1(W,H,w,z,$,Z,q,X),u[R]=H}if(B<J)for(R=Y;R<J;++R){if(H=g[R],H.flags&16384)H=g[R]=R0(H);W0(H,w,z,$,Z,q,X)}else if(B>J)for(R=Y;R<B;++R)r0(u[R],w,X)}function N7(u,g,w,z,$,B,J,Z,q,X,Y){var R=B-1,H=J-1,W=0,Q=u[W],K=g[W],k,_;u:{while(Q.key===K.key){if(K.flags&16384)g[W]=K=R0(K);if(T1(Q,K,w,z,$,Z,X,Y),u[W]=K,++W,W>R||W>H)break u;Q=u[W],K=g[W]}Q=u[R],K=g[H];while(Q.key===K.key){if(K.flags&16384)g[H]=K=R0(K);if(T1(Q,K,w,z,$,Z,X,Y),u[R]=K,R--,H--,W>R||W>H)break u;Q=u[R],K=g[H]}}if(W>R){if(W<=H){k=H+1,_=k<J?S0(g[k],!0):Z;while(W<=H){if(K=g[W],K.flags&16384)g[W]=K=R0(K);++W,W0(K,w,z,$,_,X,Y)}}}else if(W>H)while(W<=R)r0(u[W++],w,Y);else E7(u,g,z,B,J,R,H,W,w,$,Z,q,X,Y)}function E7(u,g,w,z,$,B,J,Z,q,X,Y,R,H,W){var Q,K,k=0,_=0,p=Z,E=Z,J0=B-Z+1,c=J-Z+1,z0=new Int32Array(c+1),a=J0===z,L=!1,j=0,_0=0;if($<4||(J0|c)<32){for(_=p;_<=B;++_)if(Q=u[_],_0<c){for(Z=E;Z<=J;Z++)if(K=g[Z],Q.key===K.key){if(z0[Z-E]=_+1,a){a=!1;while(p<_)r0(u[p++],q,W)}if(j>Z)L=!0;else j=Z;if(K.flags&16384)g[Z]=K=R0(K);T1(Q,K,q,w,X,Y,H,W),++_0;break}if(!a&&Z>J)r0(Q,q,W)}else if(!a)r0(Q,q,W)}else{var h0={};for(_=E;_<=J;++_)h0[g[_].key]=_;for(_=p;_<=B;++_)if(Q=u[_],_0<c){if(Z=h0[Q.key],Z!==void 0){if(a){a=!1;while(_>p)r0(u[p++],q,W)}if(z0[Z-E]=_+1,j>Z)L=!0;else j=Z;if(K=g[Z],K.flags&16384)g[Z]=K=R0(K);T1(Q,K,q,w,X,Y,H,W),++_0}else if(!a)r0(Q,q,W)}else if(!a)r0(Q,q,W)}if(a)m2(q,R,u,W),I1(g,q,w,X,Y,H,W);else if(L){var Y1=d7(z0);Z=Y1.length-1;for(_=c-1;_>=0;_--)if(z0[_]===0){if(j=_+E,K=g[j],K.flags&16384)g[j]=K=R0(K);k=j+1,W0(K,q,w,X,k<$?S0(g[k],!0):Y,H,W)}else if(Z<0||_!==Y1[Z])j=_+E,K=g[j],k=j+1,r5(R,K,q,k<$?S0(g[k],!0):Y,W);else Z--;if(W.componentWillMove.length>0)i9(W.componentWillMove)}else if(_0!==c){for(_=c-1;_>=0;_--)if(z0[_]===0){if(j=_+E,K=g[j],K.flags&16384)g[j]=K=R0(K);k=j+1,W0(K,q,w,X,k<$?S0(g[k],!0):Y,H,W)}}}var c0,d2,O5=0;function d7(u){var g=0,w=0,z=0,$=0,B=0,J=0,Z=0,q=u.length;if(q>O5)O5=q,c0=new Int32Array(q),d2=new Int32Array(q);for(;w<q;++w)if(g=u[w],g!==0){if(z=c0[$],u[z]<g){d2[w]=z,c0[++$]=w;continue}B=0,J=$;while(B<J)if(Z=B+J>>1,u[c0[Z]]<g)B=Z+1;else J=Z;if(g<u[c0[B]]){if(B>0)d2[w]=c0[B-1];c0[B]=w}}B=$+1;var X=new Int32Array(B);J=c0[B-1];while(B-- >0)X[B]=J,J=d2[J],c0[B]=0;return X}var o7=typeof document!=="undefined";if(o7){if(window.Node)Node.prototype.$EV=null,Node.prototype.$V=null}var c2=[],m7=typeof Promise!=="undefined"?Promise.resolve().then.bind(Promise.resolve()):function(u){window.setTimeout(u,0)},zg=!1;function s5(u,g,w,z){var $=u.$PS;if(i(g))g=g($?L1(u.state,$):u.state,u.props,u.context);if(r($))u.$PS=g;else for(var B in g)$[B]=g[B];if(!u.$BR){if(!gg.v){if(c2.length===0){if(Zw(u,z),i(w))w.call(u);return}}if(c2.indexOf(u)===-1)c2.push(u);if(z)u.$F=!0;if(!zg)zg=!0,m7(a7);if(i(w)){var J=u.$QU;if(!J)J=u.$QU=[];J.push(w)}}else if(i(w))u.$L.push(w.bind(u))}function c7(u){var g=u.$QU;for(var w=0;w<g.length;++w)g[w].call(u);u.$QU=null}function a7(){var u;zg=!1;while(u=c2.shift())if(!u.$UN){var g=u.$F;if(u.$F=!1,Zw(u,g),u.$QU)c7(u)}}function Zw(u,g){if(g||!u.$BR){var w=u.$PS;u.$PS=null;var z=[],$=new z2;gg.v=!0,Jw(u,L1(u.state,w),u.props,S0(u.$LI,!0).parentNode,u.context,u.$SVG,g,null,z,$),r9(z),Jg($.componentDidAppear),gg.v=!1}else u.state=u.$PS,u.$PS=null}var d=function(){function u(w,z){this.state=null,this.props=void 0,this.context=void 0,this.displayName=void 0,this.$BR=!1,this.$BS=!0,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$QU=null,this.$N=!1,this.$SSR=void 0,this.$L=null,this.$SVG=!1,this.$F=!1,this.props=w||Y0,this.context=z||Y0}var g=u.prototype;return g.forceUpdate=function w(z){if(this.$UN)return;s5(this,{},z,!0)},g.setState=function w(z,$){if(this.$UN)return;if(!this.$BS)s5(this,z,$,!1)},g.render=function w(z,$,B){return null},u}();d.defaultProps=null;function qw(u){return u===void 0||u===null}function l7(u){return typeof u==="string"}function Xw(u){return u===void 0}var t7={onComponentDidAppear:1,onComponentDidMount:1,onComponentDidUpdate:1,onComponentShouldUpdate:1,onComponentWillDisappear:1,onComponentWillMount:1,onComponentWillUnmount:1,onComponentWillUpdate:1};function A(u,g,w){var z,$=null,B=null,J=null,Z,q,X=arguments.length-2;if(X===1)z=w;else if(X>1){z=[];while(X-- >0)z[X]=arguments[X+2]}if(l7(u)){if(Z=o5(u),!qw(g)){q={};for(var Y in g)if(Y==="className"||Y==="class")J=g[Y];else if(Y==="key")B=g.key;else if(Y==="children"&&Xw(z))z=g.children;else if(Y==="ref")$=g.ref;else{if(Y==="contenteditable")Z|=4096;q[Y]=g[Y]}}}else{if(Z=2,!Xw(z)){if(!g)g={};g.children=z}if(!qw(g)){q={};for(var R in g)if(R==="key")B=g.key;else if(R==="ref")$=g.ref;else if(t7[R]===1){if(!$)$={};$[R]=g[R]}else q[R]=g[R]}return E5(Z,u,q,B,$)}if(Z&8192)return wu(X===1?[z]:z,0,B);return qg(Z,u,J,z,0,q,B,$)}var Yw=(u)=>typeof u==="boolean"?`${u}`:u===0?"0":u,Rw=i2,G0=(u,g)=>(w)=>{var z;if((g===null||g===void 0?void 0:g.variants)==null)return Rw(u,w===null||w===void 0?void 0:w.class,w===null||w===void 0?void 0:w.className);let{variants:$,defaultVariants:B}=g,J=Object.keys($).map((X)=>{let Y=w===null||w===void 0?void 0:w[X],R=B===null||B===void 0?void 0:B[X];if(Y===null)return null;let H=Yw(Y)||Yw(R);return $[X][H]}),Z=w&&Object.entries(w).reduce((X,Y)=>{let[R,H]=Y;if(H===void 0)return X;return X[R]=H,X},{}),q=g===null||g===void 0?void 0:(z=g.compoundVariants)===null||z===void 0?void 0:z.reduce((X,Y)=>{let{class:R,className:H,...W}=Y;return Object.entries(W).every((Q)=>{let[K,k]=Q;return Array.isArray(k)?k.includes({...B,...Z}[K]):{...B,...Z}[K]===k})?[...X,R,H]:X},[]);return Rw(u,J,q,w===null||w===void 0?void 0:w.class,w===null||w===void 0?void 0:w.className)};var Bu=G0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium cursor-pointer transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*=size-])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-ring/50 focus-visible:ring-[3px]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20",outline:"border-2 border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md gap-1.5 px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs",lg:"h-10 rounded-md px-6",icon:"size-9","icon-sm":"size-8"}},defaultVariants:{variant:"default",size:"default"}});function f(u){let{variant:g,size:w,className:z,disabled:$,type:B="button",onClick:J,children:Z}=u;return A("button",{type:B,disabled:$,onClick:J,className:U(Bu({variant:g,size:w,className:z}))},Z)}var Hw=G0("inline-flex items-center justify-center rounded-full border border-transparent px-2.5 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none transition-colors overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground",secondary:"bg-secondary text-secondary-foreground",destructive:"bg-destructive text-white",outline:"border-border text-foreground",ghost:"text-muted-foreground"}},defaultVariants:{variant:"default"}});function v({variant:u,className:g,children:w}){return A("span",{className:U(Hw({variant:u}),g)},w)}function M({className:u,children:g,onClick:w}){return A("div",{"data-slot":"card",className:U("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",w&&"cursor-pointer",u),onClick:w},g)}function O({className:u,children:g}){return A("div",{"data-slot":"card-header",className:U("grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6",u)},g)}function x({className:u,children:g}){return A("div",{"data-slot":"card-title",className:U("leading-none font-semibold",u)},g)}function o({className:u,children:g}){return A("div",{"data-slot":"card-description",className:U("text-muted-foreground text-sm",u)},g)}function s({className:u,children:g}){return A("div",{"data-slot":"card-content",className:U("px-6",u)},g)}function Wg({className:u,children:g}){return A("div",{"data-slot":"card-footer",className:U("flex items-center px-6",u)},g)}function n(u){let{className:g,type:w="text",...z}=u;return A("input",{"data-slot":"input",type:w,...z,className:U("placeholder:text-muted-foreground border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-sm shadow-xs transition-[color,box-shadow] outline-none","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50",g)})}function k1(u){let{className:g,rows:w=3,...z}=u;return A("textarea",{"data-slot":"textarea",rows:w,...z,className:U("border-input placeholder:text-muted-foreground flex min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-sm shadow-xs transition-[color,box-shadow] outline-none","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:cursor-not-allowed disabled:opacity-50","resize-none",g)})}function l({className:u,htmlFor:g,children:w}){return A("label",{"data-slot":"label",for:g,className:U("flex items-center gap-2 text-sm leading-none font-medium select-none","peer-disabled:cursor-not-allowed peer-disabled:opacity-50",u)},w)}function p0({className:u,checked:g=!1,disabled:w=!1,onChange:z}){return A("button",{"data-slot":"switch",type:"button",role:"switch","aria-checked":g,disabled:w,onClick:()=>z?.(!g),className:U("peer inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none cursor-pointer","focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:cursor-not-allowed disabled:opacity-50",g?"bg-primary":"bg-muted-foreground/40",u)},A("span",{"data-slot":"switch-thumb",className:U("pointer-events-none block size-4 rounded-full bg-background ring-0 transition-transform",g?"translate-x-4":"translate-x-0")}))}function z1({className:u,children:g}){return A("span",{"data-slot":"avatar",className:U("relative flex size-8 shrink-0 overflow-hidden rounded-full",u)},g)}class l0 extends d{constructor(u){super(u);this.state={failed:!1}}componentDidUpdate(u){if(u.src!==this.props.src)this.setState({failed:!1})}render(){if(this.state.failed||!this.props.src)return null;return A("img",{"data-slot":"avatar-image",src:this.props.src,alt:this.props.alt||"",onError:(u)=>{this.setState({failed:!0}),this.props.onError?.(u)},className:U("aspect-square size-full object-cover",this.props.className)})}}function $1({className:u,children:g}){return A("span",{"data-slot":"avatar-fallback",className:U("bg-muted flex size-full items-center justify-center rounded-full text-xs font-medium",u)},g)}function t0({className:u,orientation:g="horizontal"}){return A("div",{"data-slot":"separator",role:"separator",className:U("shrink-0 bg-border",g==="horizontal"?"h-px w-full":"h-full w-px",u)})}var n7={sm:"size-4 border-2",default:"size-6 border-3",lg:"size-8 border-4"};function i0({className:u,size:g="default"}){return A("div",{"data-slot":"spinner",role:"status","aria-label":"Loading",className:U("animate-spin rounded-full border-muted border-t-primary",n7[g],u)})}function y({className:u}){return A("div",{"data-slot":"skeleton",className:U("bg-accent animate-pulse rounded-md",u)})}function Z2(u){let{className:g,value:w=0,max:z=100}=u,$=Math.min(100,Math.max(0,w/z*100));return A("div",{"data-slot":"progress",role:"progressbar","aria-valuenow":w,"aria-valuemin":0,"aria-valuemax":z,className:U("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",g)},A("div",{"data-slot":"progress-indicator",className:"bg-primary h-full transition-all duration-300 ease-in-out",style:{width:`${$}%`}}))}var Ww=G0("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function u0({variant:u,className:g,children:w}){return A("div",{"data-slot":"alert",role:"alert",className:U(Ww({variant:u}),g)},w)}function g0({className:u,children:g}){return A("div",{"data-slot":"alert-description",className:U("col-start-2 text-sm text-muted-foreground [&_p]:leading-relaxed",u)},g)}var Kw=G0("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 outline-none focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:focus-visible:ring-destructive/20",{variants:{variant:{default:"bg-transparent hover:bg-muted hover:text-muted-foreground data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground data-[state=on]:bg-accent data-[state=on]:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});var B1=null,Kg=new Set;function q2(u){B1=u,Kg.forEach((g)=>g())}function e7(u){return Kg.add(u),()=>{Kg.delete(u)}}var uT=0;class Uw extends d{id=`nmi-${++uT}`;unsub=null;ref=null;constructor(u){super(u);this.state={open:!1}}handleOutside=(u)=>{if(B1===this.id&&this.ref&&!this.ref.contains(u.target))q2(null)};handleKey=(u)=>{if(u.key==="Escape"&&B1)q2(null)};componentDidMount(){this.unsub=e7(()=>{let u=B1===this.id;if(this.state.open!==u)this.setState({open:u})}),document.addEventListener("mousedown",this.handleOutside),document.addEventListener("keydown",this.handleKey)}componentWillUnmount(){if(this.unsub?.(),document.removeEventListener("mousedown",this.handleOutside),document.removeEventListener("keydown",this.handleKey),B1===this.id)q2(null)}handleClick=()=>{q2(B1===this.id?null:this.id)};handleMouseEnter=()=>{if(B1&&B1!==this.id)q2(this.id)};render(){let{className:u,children:g}=this.props,{open:w}=this.state,z=Array.isArray(g)?g:[g],$=null,B=null,J=[];for(let Z of z){if(!Z)continue;if(Z.type===Ug||Z.props&&Z.props["data-slot"]==="navigation-menu-trigger")$=Z;else if(Z.type===Aw||Z.props&&Z.props["data-slot"]==="navigation-menu-content")B=Z;else J.push(Z)}return A("li",{"data-slot":"navigation-menu-item",ref:(Z)=>{this.ref=Z},className:U("relative",u),onmouseenter:this.handleMouseEnter},$?A(Ug,{...$.props||{},onClick:this.handleClick,"data-state":w?"open":"closed"},$.children!=null?$.children:$.props&&$.props.children):null,w&&B?B:null,...J)}}function Ug(u){let{className:g,onClick:w,children:z,...$}=u;return A("button",{"data-slot":"navigation-menu-trigger",type:"button",onClick:w,className:U("group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors","hover:bg-accent hover:text-accent-foreground","focus-visible:outline-none","data-[state=open]:bg-accent/50",g),...$},z,A("svg",{className:U("relative top-px ml-1 size-3 transition-transform duration-200","group-data-[state=open]:rotate-180"),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},A("path",{d:"M6 9l6 6 6-6"})))}function Aw({className:u,children:g}){return A("div",{"data-slot":"navigation-menu-content",className:U("absolute left-0 top-full w-full md:w-auto","mt-1.5 min-w-[400px] md:min-w-[500px] lg:min-w-[600px] rounded-md border bg-popover p-4 text-popover-foreground shadow-lg","animate-in fade-in-0 zoom-in-95",u)},g)}var P1=null,Qg=new Set;function Ag(u){P1=u,Qg.forEach((g)=>g())}function gT(u){return Qg.add(u),()=>{Qg.delete(u)}}var wT=0;class Qw extends d{id=`mbm-${++wT}`;unsub=null;constructor(u){super(u);this.state={open:!1}}componentDidMount(){this.unsub=gT(()=>{let u=P1===this.id;if(this.state.open!==u)this.setState({open:u})})}componentWillUnmount(){if(this.unsub?.(),P1===this.id)Ag(null)}handleClick=()=>{Ag(P1===this.id?null:this.id)};handleMouseEnter=()=>{if(P1&&P1!==this.id)Ag(this.id)};render(){let{children:u}=this.props,{open:g}=this.state,w=Array.isArray(u)?u:[u],z=null,$=null,B=[];for(let J of w){if(!J)continue;if(J.type===_g||J.props&&J.props["data-slot"]==="menubar-trigger")z=J;else if(J.type===_w||J.props&&J.props["data-slot"]==="menubar-content")$=J;else B.push(J)}return A("div",{"data-slot":"menubar-menu",className:"relative",onmouseenter:this.handleMouseEnter},z?A(_g,{...z.props||{},onClick:this.handleClick,"data-state":g?"open":"closed"},z.children!=null?z.children:z.props&&z.props.children):null,g&&$?$:null,...B)}}function _g(u){let{className:g,onClick:w,children:z,...$}=u;return A("button",{"data-slot":"menubar-trigger",type:"button",onClick:w,className:U("flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none","hover:bg-accent hover:text-accent-foreground","focus-visible:outline-none","data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",g),...$},z)}function _w({className:u,children:g}){return A("div",{"data-slot":"menubar-content",role:"menu",className:U("absolute left-0 top-full z-50 mt-1 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","animate-in fade-in-0 zoom-in-95",u)},g)}var qB=G0("bg-background fixed z-50 flex flex-col gap-4 shadow-lg transition-transform duration-300 ease-in-out border",{variants:{side:{top:"inset-x-0 top-0 border-b",bottom:"inset-x-0 bottom-0 border-t",left:"inset-y-0 left-0 w-3/4 border-r sm:max-w-sm",right:"inset-y-0 right-0 w-3/4 border-l sm:max-w-sm"}},defaultVariants:{side:"right"}});class Ju extends d{raf=null;timer=null;constructor(u){super(u);this.state={mounted:u.open,visible:!1}}componentDidMount(){if(this.props.open)this.raf=requestAnimationFrame(()=>{this.raf=requestAnimationFrame(()=>{this.setState({visible:!0})})})}componentDidUpdate(u){if(!u.open&&this.props.open)this.clearTimers(),this.setState({mounted:!0,visible:!1},()=>{this.raf=requestAnimationFrame(()=>{this.raf=requestAnimationFrame(()=>{this.setState({visible:!0})})})});else if(u.open&&!this.props.open)this.setState({visible:!1}),this.timer=setTimeout(()=>this.setState({mounted:!1}),300)}componentWillUnmount(){this.clearTimers()}clearTimers(){if(this.raf)cancelAnimationFrame(this.raf),this.raf=null;if(this.timer)clearTimeout(this.timer),this.timer=null}render(){if(!this.state.mounted)return null;let{visible:u}=this.state,{onOpenChange:g,children:w}=this.props;return A(TT,{visible:u,onClose:()=>g?.(!1)},w)}}function TT({visible:u,onClose:g,children:w}){return A("div",{"data-slot":"drawer-portal",className:"fixed inset-0 z-50"},A("div",{"data-slot":"drawer-overlay",className:"fixed inset-0 bg-black/50",style:{opacity:u?1:0,transition:"opacity 300ms cubic-bezier(0.4,0,0.2,1)"},onClick:g}),A("div",{"data-slot":"drawer-content",className:"bg-background fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border-t",style:{transform:u?"translateY(0)":"translateY(100%)",transition:"transform 300ms cubic-bezier(0.32,0.72,0,1)"}},A("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),w))}function bg({className:u,children:g}){return A("div",{"data-slot":"drawer-content-inner",className:U("px-4",u)},g)}function Ig({className:u,children:g}){return A("div",{"data-slot":"drawer-header",className:U("grid gap-1.5 p-4 text-center",u)},g)}function Lg({className:u,children:g}){return A("h2",{"data-slot":"drawer-title",className:U("text-lg font-semibold leading-none tracking-tight",u)},g)}class S1 extends d{timer=null;constructor(u){super(u);this.state={visible:!1}}componentWillUnmount(){if(this.timer)clearTimeout(this.timer)}show=()=>{let u=this.props.delayMs??200;this.timer=setTimeout(()=>this.setState({visible:!0}),u)};hide=()=>{if(this.timer)clearTimeout(this.timer);this.timer=null,this.setState({visible:!1})};render(){let{content:u,side:g="top",className:w,children:z}=this.props,{visible:$}=this.state,B={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"};return A("div",{"data-slot":"tooltip",className:"relative inline-flex",onMouseEnter:this.show,onMouseLeave:this.hide,onFocus:this.show,onBlur:this.hide},z,$?A("div",{"data-slot":"tooltip-content",role:"tooltip",className:U("absolute z-50 w-fit rounded-md bg-popover border border-border px-3 py-1.5 text-xs text-popover-foreground shadow-md pointer-events-none whitespace-nowrap animate-in fade-in-0 zoom-in-95",B[g],w)},u):null)}}var X2=[],Zu=[],zT=0;function bw(){Zu.forEach((u)=>u([...X2]))}function t(u){let g=`toast-${++zT}`,w={id:g,duration:4000,variant:"default",...u};return X2=[...X2,w],bw(),setTimeout(()=>{kg(g)},w.duration),g}function kg(u){X2=X2.filter((g)=>g.id!==u),bw()}function $T(u){return Zu.push(u),()=>{Zu=Zu.filter((g)=>g!==u)}}var BT=G0("group pointer-events-auto relative flex w-full items-center justify-between gap-4 overflow-hidden rounded-md border p-4 shadow-lg transition-all",{variants:{variant:{default:"bg-background text-foreground border-border",destructive:"bg-destructive text-white border-destructive group"}},defaultVariants:{variant:"default"}});function JT({data:u,onDismiss:g}){return A("div",{"data-slot":"toast",role:"alert",className:U(BT({variant:u.variant}))},A("div",{className:"grid gap-1"},u.title?A("div",{"data-slot":"toast-title",className:"text-sm font-semibold"},u.title):null,u.description?A("div",{"data-slot":"toast-description",className:"text-sm opacity-90"},u.description):null),A("button",{"data-slot":"toast-close",type:"button",onClick:()=>g(u.id),className:U("absolute top-2 right-2 rounded-md p-1 opacity-0 transition-opacity group-hover:opacity-100","outline-none focus-visible:opacity-100 focus-visible:ring-ring/50 focus-visible:ring-[3px]","hover:text-foreground"),"aria-label":"Dismiss"},A("svg",{className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},A("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),A("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))))}class G1 extends d{unsub=null;constructor(u){super(u);this.state={toasts:[]}}componentDidMount(){this.unsub=$T((u)=>this.setState({toasts:u}))}componentWillUnmount(){this.unsub?.()}render(){let{toasts:u}=this.state;if(u.length===0)return null;let g=3,w=u.slice(-g),z=u.length-w.length;return A("div",{"data-slot":"toaster",className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2 w-full max-w-sm pointer-events-none"},z>0?A("div",{className:"text-center text-xs text-muted-foreground py-1"},`+${z} more`):null,...w.map(($)=>A(JT,{key:$.id,data:$,onDismiss:kg})))}}function ZT(){if(typeof window==="undefined")return"dark";let u=localStorage.getItem("theme");if(u==="light"||u==="dark")return u;return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Iw(u){let g=document.documentElement;if(u==="dark")g.classList.add("dark");else g.classList.remove("dark");localStorage.setItem("theme",u)}class v1 extends d{constructor(u){super(u);this.state={theme:ZT()}}componentDidMount(){Iw(this.state.theme)}toggle=()=>{let u=this.state.theme==="dark"?"light":"dark";this.setState({theme:u}),Iw(u)};render(){let{className:u}=this.props,g=this.state.theme==="dark";return A("button",{type:"button",onClick:this.toggle,"aria-label":g?"Switch to light mode":"Switch to dark mode",className:U("inline-flex items-center justify-center size-9 rounded-md border border-input bg-background text-foreground shadow-xs cursor-pointer transition-colors hover:bg-accent hover:text-accent-foreground outline-none focus-visible:ring-ring/50 focus-visible:ring-[3px]",u)},g?A("svg",{className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},A("circle",{cx:"12",cy:"12",r:"4"}),A("path",{d:"M12 2v2"}),A("path",{d:"M12 20v2"}),A("path",{d:"m4.93 4.93 1.41 1.41"}),A("path",{d:"m17.66 17.66 1.41 1.41"}),A("path",{d:"M2 12h2"}),A("path",{d:"M20 12h2"}),A("path",{d:"m6.34 17.66-1.41 1.41"}),A("path",{d:"m19.07 4.93-1.41 1.41"})):A("svg",{className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},A("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})))}}var qT=1000,XT=30000,YT=1e4;class fg{ws=null;url;accessToken="";handlers=new Map;reconnectAttempts=0;reconnectTimer=null;pingTimer=null;connected=!1;constructor(u){let g=window.location.protocol==="https:"?"wss:":"ws:",w=u||window.location.host;this.url=`${g}//${w}/ws`}setAccessToken(u){this.accessToken=u}on(u,g){let w=this.handlers.get(u)||[];w.push(g),this.handlers.set(u,w)}off(u,g){let w=this.handlers.get(u)||[];this.handlers.set(u,w.filter((z)=>z!==g))}connect(){if(this.ws)this.ws.close();let u=this.accessToken?`${this.url}?accessToken=${this.accessToken}`:this.url;this.ws=new WebSocket(u),this.ws.onopen=()=>{this.connected=!0,this.reconnectAttempts=0,this.startPing(),console.log("[WS] Connected")},this.ws.onclose=(g)=>{this.connected=!1,this.stopPing(),console.log(`[WS] Disconnected (code=${g.code})`),this.scheduleReconnect()},this.ws.onerror=(g)=>{console.error("[WS] Error:",g)},this.ws.onmessage=(g)=>{try{let w=JSON.parse(g.data);if(w.type==="PONG")return;this.dispatch(w)}catch(w){console.error("[WS] Parse error:",w)}}}disconnect(){if(this.stopPing(),this.reconnectTimer)clearTimeout(this.reconnectTimer),this.reconnectTimer=null;if(this.ws)this.ws.onclose=null,this.ws.close(),this.ws=null;this.connected=!1}send(u){if(this.ws&&this.connected)this.ws.send(u)}sendChat(u){this.send(JSON.stringify({type:"CHAT",body:u}))}isConnected(){return this.connected}dispatch(u){let g=this.handlers.get(u.type);if(g)for(let z of g)z(u);let w=this.handlers.get("*");if(w)for(let z of w)z(u)}startPing(){this.stopPing(),this.pingTimer=setInterval(()=>{this.send(JSON.stringify({type:"PING"}))},YT)}stopPing(){if(this.pingTimer)clearInterval(this.pingTimer),this.pingTimer=null}scheduleReconnect(){if(this.reconnectTimer)return;let u=Math.min(qT*Math.pow(2,this.reconnectAttempts),XT);this.reconnectAttempts++,console.log(`[WS] Reconnecting in ${u}ms (attempt ${this.reconnectAttempts})`),this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.connect()},u)}}async function qu(u){let g=await fetch(`/api${u}`);if(!g.ok)throw new Error(`GET ${u} failed: ${g.status}`);return g.json()}async function RT(u,g){let w=await fetch(`/api${u}`,{method:"POST",headers:{"Content-Type":"application/json"},body:g?JSON.stringify(g):void 0});if(!w.ok)throw new Error(`POST ${u} failed: ${w.status}`);return w.json()}async function HT(u,g){let w=await fetch(`/api${u}?accessToken=${g}`);if(!w.ok)throw new Error(`GET ${u} failed: ${w.status}`);return w.json()}async function v0(u,g){let w=await fetch(`/api${u}`,{headers:{Authorization:`Bearer ${g}`}});if(!w.ok)throw new Error(`GET ${u} failed: ${w.status}`);return w.json()}async function b0(u,g,w){let z=await fetch(`/api${u}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:w?JSON.stringify(w):void 0});if(!z.ok)throw new Error(`POST ${u} failed: ${z.status}`);return z.json()}var C={getStatus:()=>qu("/status"),getConfig:()=>qu("/config"),getEmoji:()=>qu("/emoji"),getChatHistory:(u)=>HT("/chat",u),registerChatUser:(u)=>RT("/chat/register",{displayName:u}),getVideoVariants:()=>qu("/video/variants"),admin:{getConfig:(u)=>v0("/admin/serverconfig",u),getStatus:(u)=>v0("/admin/status",u),getLogs:(u)=>v0("/admin/logs",u),getViewers:(u)=>v0("/admin/viewers",u),getHardware:(u)=>v0("/admin/hardwareinfo",u),getChatMessages:(u)=>v0("/admin/chat/messages",u),getWebhooks:(u)=>v0("/admin/webhooks",u),getAccessTokens:(u)=>v0("/admin/accesstokens",u),getFederationFollowers:(u)=>v0("/admin/followers",u),updateConfig:(u,g)=>b0("/admin/config",u,g),sendSystemMessage:(u,g)=>b0("/admin/chat/send",u,{body:g}),createAccessToken:(u,g)=>b0("/admin/accesstokens/create",u,g),deleteAccessToken:(u,g)=>b0("/admin/accesstokens/delete",u,{token:g}),getConnectedClients:(u)=>v0("/admin/chat/clients",u),setStreamKey:(u,g)=>b0("/admin/config/key",u,{value:g}),getLogEntries:(u)=>v0("/admin/logs",u),getWarnings:(u)=>v0("/admin/logs/warnings",u),updateVideoConfig:(u,g)=>b0("/admin/config/video",u,g),updateChatDisabled:(u,g)=>b0("/admin/config/chat/disable",u,{value:g}),updateChatJoinMessages:(u,g)=>b0("/admin/config/chat/joinmessagesenabled",u,{value:g}),updateChatEstablishedMode:(u,g)=>b0("/admin/config/chat/establishedusermode",u,{value:g}),updateChatSpamProtection:(u,g)=>b0("/admin/config/chat/spamprotectionenabled",u,{value:g}),updateChatSlurFilter:(u,g)=>b0("/admin/config/chat/slurfilterenabled",u,{value:g}),updateForbiddenUsernames:(u,g)=>b0("/admin/config/chat/forbiddenusernames",u,{value:g}),updateSuggestedUsernames:(u,g)=>b0("/admin/config/chat/suggestedusernames",u,{value:g}),updateHideViewerCount:(u,g)=>b0("/admin/config/hideviewercount",u,{value:g})}};function kw(u){try{return new Date(u).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}}function fw(u){if(u===1)return"1 viewer";return`${u} viewers`}function L0(u){try{let g=new Date(u),z=new Date().getTime()-g.getTime(),$=Math.floor(z/60000);if($<1)return"just now";if($<60)return`${$}m ago`;let B=Math.floor($/60);if(B<24)return`${B}h ago`;return`${Math.floor(B/24)}d ago`}catch{return""}}function Y2(u){try{return localStorage.getItem(u)}catch{return null}}function R2(u,g){try{localStorage.setItem(u,g)}catch{}}function Xu(u){try{localStorage.removeItem(u)}catch{}}var M0={accessToken:"oni-access-token",displayName:"oni-display-name",displayColor:"oni-display-color",userId:"oni-user-id",visitCount:"oni-visit-count",notifyModalShown:"oni-notify-modal-shown"};var Yu=new Set,Fg=!1;function H0(){if(Fg)return;Fg=!0,queueMicrotask(()=>{Fg=!1;for(let u of Yu)u()})}var{configHydration:Fw,statusHydration:WT}=window,G={loading:!Fw,config:Fw||null,status:WT||null,messages:[],currentUser:null,accessToken:Y2(M0.accessToken),isMobile:window.innerWidth<=768,chatVisible:!0,error:null},w0=null,H2=null,jw=Y2(M0.userId),Pw=Y2(M0.displayName),Sw=Y2(M0.displayColor);if(jw&&Pw)G.currentUser={id:jw,displayName:Pw,displayColor:Sw?parseInt(Sw,10):0};function Gw(){let u=G.config?.socketHostOverride;if(w0=new fg(u||void 0),G.accessToken)w0.setAccessToken(G.accessToken);w0.on("CHAT",(g)=>{let w=g;G.messages=[...G.messages,w],H0()}),w0.on("NAME_CHANGE",(g)=>{let w=g;G.messages=[...G.messages,w],H0()}),w0.on("USER_JOINED",(g)=>{let w=g;G.messages=[...G.messages,w],H0()}),w0.on("USER_PARTED",(g)=>{let w=g;G.messages=[...G.messages,w],H0()}),w0.on("SYSTEM",(g)=>{let w=g;G.messages=[...G.messages,w],H0()}),w0.on("FEDIVERSE_ENGAGEMENT_FOLLOW",(g)=>{let w=g;G.messages=[...G.messages,w],H0()}),w0.on("FEDIVERSE_ENGAGEMENT_LIKE",(g)=>{let w=g;G.messages=[...G.messages,w],H0()}),w0.on("FEDIVERSE_ENGAGEMENT_REPOST",(g)=>{let w=g;G.messages=[...G.messages,w],H0()}),w0.on("CONNECTED_USER_INFO",(g)=>{let w=g;if(w.user)G.currentUser={id:w.user.id,displayName:w.user.displayName,displayColor:w.user.displayColor,isModerator:w.user.isModerator},H0()}),w0.on("VISIBILITY-UPDATE",(g)=>{let w=g;if(w.ids&&w.ids.length>0){let z=new Set(w.ids);if(w.visible===!1)G.messages=G.messages.filter(($)=>!z.has($.id));H0()}}),w0.on("ERROR_NEEDS_REGISTRATION",()=>{G.currentUser=null,G.accessToken=null,Xu(M0.accessToken),Xu(M0.userId),Xu(M0.displayName),H0()}),w0.connect()}function KT(){if(H2)return;H2=setInterval(async()=>{try{let u=await C.getStatus();G.status=u,H0()}catch(u){console.error("[Store] Status poll error:",u)}},5000)}var V={getState(){return G},subscribe(u){return Yu.add(u),()=>Yu.delete(u)},async init(){try{if(!G.config){let[u,g]=await Promise.all([C.getConfig(),C.getStatus()]);G.config=u,G.status=g}if(G.accessToken)try{let u=await C.getChatHistory(G.accessToken);if(Array.isArray(u))G.messages=u}catch{}G.loading=!1,H0(),Gw(),KT()}catch(u){G.error=u instanceof Error?u.message:"Failed to load",G.loading=!1,H0()}},async registerUser(u){try{let g=await C.registerChatUser(u);if(G.accessToken=g.accessToken,G.currentUser={id:g.id,displayName:g.displayName,displayColor:g.displayColor},R2(M0.accessToken,g.accessToken),R2(M0.userId,g.id),R2(M0.displayName,g.displayName),R2(M0.displayColor,String(g.displayColor)),w0)w0.disconnect();Gw();try{let w=await C.getChatHistory(g.accessToken);if(Array.isArray(w))G.messages=w}catch{}H0()}catch(g){throw console.error("[Store] Registration error:",g),g}},sendChat(u){if(w0)w0.sendChat(u)},toggleChat(){G.chatVisible=!G.chatVisible,H0()},setMobile(u){if(G.isMobile!==u)G.isMobile=u,H0()},cleanup(){if(w0)w0.disconnect(),w0=null;if(H2)clearInterval(H2),H2=null;Yu.clear()}};function UT(u){return u instanceof Uint8Array||ArrayBuffer.isView(u)&&u.constructor.name==="Uint8Array"}function Ru(u,...g){if(!UT(u))throw new Error("Uint8Array expected");if(g.length>0&&!g.includes(u.length))throw new Error("Uint8Array expected of length "+g+", got length="+u.length)}function jg(u,g=!0){if(u.destroyed)throw new Error("Hash instance has been destroyed");if(g&&u.finished)throw new Error("Hash#digest() has already been called")}function vw(u,g){Ru(u);let w=g.outputLen;if(u.length<w)throw new Error("digestInto() expects output buffer of length at least "+w)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Hu(u){return new DataView(u.buffer,u.byteOffset,u.byteLength)}function s0(u,g){return u<<32-g|u>>>g}var Dw=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",AT=Array.from({length:256},(u,g)=>g.toString(16).padStart(2,"0"));function Pg(u){if(Ru(u),Dw)return u.toHex();let g="";for(let w=0;w<u.length;w++)g+=AT[u[w]];return g}var n0={_0:48,_9:57,A:65,F:70,a:97,f:102};function Mw(u){if(u>=n0._0&&u<=n0._9)return u-n0._0;if(u>=n0.A&&u<=n0.F)return u-(n0.A-10);if(u>=n0.a&&u<=n0.f)return u-(n0.a-10);return}function yw(u){if(typeof u!=="string")throw new Error("hex string expected, got "+typeof u);if(Dw)return Uint8Array.fromHex(u);let g=u.length,w=g/2;if(g%2)throw new Error("hex string expected, got unpadded hex of length "+g);let z=new Uint8Array(w);for(let $=0,B=0;$<w;$++,B+=2){let J=Mw(u.charCodeAt(B)),Z=Mw(u.charCodeAt(B+1));if(J===void 0||Z===void 0){let q=u[B]+u[B+1];throw new Error('hex string expected, got non-hex character "'+q+'" at index '+B)}z[$]=J*16+Z}return z}function QT(u){if(typeof u!=="string")throw new Error("utf8ToBytes expected string, got "+typeof u);return new Uint8Array(new TextEncoder().encode(u))}function Sg(u){if(typeof u==="string")u=QT(u);return Ru(u),u}class Gg{clone(){return this._cloneInto()}}function hw(u){let g=(z)=>u().update(Sg(z)).digest(),w=u();return g.outputLen=w.outputLen,g.blockLen=w.blockLen,g.create=()=>u(),g}function _T(u,g,w,z){if(typeof u.setBigUint64==="function")return u.setBigUint64(g,w,z);let $=BigInt(32),B=BigInt(4294967295),J=Number(w>>$&B),Z=Number(w&B),q=z?4:0,X=z?0:4;u.setUint32(g+q,J,z),u.setUint32(g+X,Z,z)}function Cw(u,g,w){return u&g^~u&w}function Ow(u,g,w){return u&g^u&w^g&w}class vg extends Gg{constructor(u,g,w,z){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=u,this.outputLen=g,this.padOffset=w,this.isLE=z,this.buffer=new Uint8Array(u),this.view=Hu(this.buffer)}update(u){jg(this);let{view:g,buffer:w,blockLen:z}=this;u=Sg(u);let $=u.length;for(let B=0;B<$;){let J=Math.min(z-this.pos,$-B);if(J===z){let Z=Hu(u);for(;z<=$-B;B+=z)this.process(Z,B);continue}if(w.set(u.subarray(B,B+J),this.pos),this.pos+=J,B+=J,this.pos===z)this.process(g,0),this.pos=0}return this.length+=u.length,this.roundClean(),this}digestInto(u){jg(this),vw(u,this),this.finished=!0;let{buffer:g,view:w,blockLen:z,isLE:$}=this,{pos:B}=this;if(g[B++]=128,this.buffer.subarray(B).fill(0),this.padOffset>z-B)this.process(w,0),B=0;for(let Y=B;Y<z;Y++)g[Y]=0;_T(w,z-8,BigInt(this.length*8),$),this.process(w,0);let J=Hu(u),Z=this.outputLen;if(Z%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let q=Z/4,X=this.get();if(q>X.length)throw new Error("_sha2: outputLen bigger than state");for(let Y=0;Y<q;Y++)J.setUint32(4*Y,X[Y],$)}digest(){let{buffer:u,outputLen:g}=this;this.digestInto(u);let w=u.slice(0,g);return this.destroy(),w}_cloneInto(u){u||(u=new this.constructor),u.set(...this.get());let{blockLen:g,buffer:w,length:z,finished:$,destroyed:B,pos:J}=this;if(u.length=z,u.pos=J,u.finished=$,u.destroyed=B,z%g)u.buffer.set(w);return u}}var bT=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),J1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Z1=new Uint32Array(64);class sw extends vg{constructor(u=32){super(64,u,8,!1);this.A=J1[0]|0,this.B=J1[1]|0,this.C=J1[2]|0,this.D=J1[3]|0,this.E=J1[4]|0,this.F=J1[5]|0,this.G=J1[6]|0,this.H=J1[7]|0}get(){let{A:u,B:g,C:w,D:z,E:$,F:B,G:J,H:Z}=this;return[u,g,w,z,$,B,J,Z]}set(u,g,w,z,$,B,J,Z){this.A=u|0,this.B=g|0,this.C=w|0,this.D=z|0,this.E=$|0,this.F=B|0,this.G=J|0,this.H=Z|0}process(u,g){for(let Y=0;Y<16;Y++,g+=4)Z1[Y]=u.getUint32(g,!1);for(let Y=16;Y<64;Y++){let R=Z1[Y-15],H=Z1[Y-2],W=s0(R,7)^s0(R,18)^R>>>3,Q=s0(H,17)^s0(H,19)^H>>>10;Z1[Y]=Q+Z1[Y-7]+W+Z1[Y-16]|0}let{A:w,B:z,C:$,D:B,E:J,F:Z,G:q,H:X}=this;for(let Y=0;Y<64;Y++){let R=s0(J,6)^s0(J,11)^s0(J,25),H=X+R+Cw(J,Z,q)+bT[Y]+Z1[Y]|0,Q=(s0(w,2)^s0(w,13)^s0(w,22))+Ow(w,z,$)|0;X=q,q=Z,Z=J,J=B+H|0,B=$,$=z,z=w,w=H+Q|0}w=w+this.A|0,z=z+this.B|0,$=$+this.C|0,B=B+this.D|0,J=J+this.E|0,Z=Z+this.F|0,q=q+this.G|0,X=X+this.H|0,this.set(w,z,$,B,J,Z,q,X)}roundClean(){Z1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}var xw=hw(()=>new sw);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yg(u){return u instanceof Uint8Array||ArrayBuffer.isView(u)&&u.constructor.name==="Uint8Array"}function Nw(u,g){if(!Array.isArray(g))return!1;if(g.length===0)return!0;if(u)return g.every((w)=>typeof w==="string");else return g.every((w)=>Number.isSafeInteger(w))}function Ew(u){if(typeof u!=="function")throw new Error("function expected");return!0}function M1(u,g){if(typeof g!=="string")throw new Error(`${u}: string expected`);return!0}function K2(u){if(!Number.isSafeInteger(u))throw new Error(`invalid integer: ${u}`)}function Ku(u){if(!Array.isArray(u))throw new Error("array expected")}function Uu(u,g){if(!Nw(!0,g))throw new Error(`${u}: array of strings expected`)}function hg(u,g){if(!Nw(!1,g))throw new Error(`${u}: array of numbers expected`)}function k0(...u){let g=(B)=>B,w=(B,J)=>(Z)=>B(J(Z)),z=u.map((B)=>B.encode).reduceRight(w,g),$=u.map((B)=>B.decode).reduce(w,g);return{encode:z,decode:$}}function f0(u){let g=typeof u==="string"?u.split(""):u,w=g.length;Uu("alphabet",g);let z=new Map(g.map(($,B)=>[$,B]));return{encode:($)=>{return Ku($),$.map((B)=>{if(!Number.isSafeInteger(B)||B<0||B>=w)throw new Error(`alphabet.encode: digit index outside alphabet "${B}". Allowed: ${u}`);return g[B]})},decode:($)=>{return Ku($),$.map((B)=>{M1("alphabet.decode",B);let J=z.get(B);if(J===void 0)throw new Error(`Unknown letter: "${B}". Allowed: ${u}`);return J})}}}function F0(u=""){return M1("join",u),{encode:(g)=>{return Uu("join.decode",g),g.join(u)},decode:(g)=>{return M1("join.decode",g),g.split(u)}}}function Qu(u,g="="){return K2(u),M1("padding",g),{encode(w){Uu("padding.encode",w);while(w.length*u%8)w.push(g);return w},decode(w){Uu("padding.decode",w);let z=w.length;if(z*u%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;z>0&&w[z-1]===g;z--)if((z-1)*u%8===0)throw new Error("padding: invalid, string has too much padding");return w.slice(0,z)}}}function dw(u){return Ew(u),{encode:(g)=>g,decode:(g)=>u(g)}}function Vw(u,g,w){if(g<2)throw new Error(`convertRadix: invalid from=${g}, base cannot be less than 2`);if(w<2)throw new Error(`convertRadix: invalid to=${w}, base cannot be less than 2`);if(Ku(u),!u.length)return[];let z=0,$=[],B=Array.from(u,(Z)=>{if(K2(Z),Z<0||Z>=g)throw new Error(`invalid integer: ${Z}`);return Z}),J=B.length;while(!0){let Z=0,q=!0;for(let X=z;X<J;X++){let Y=B[X],R=g*Z,H=R+Y;if(!Number.isSafeInteger(H)||R/g!==Z||H-Y!==R)throw new Error("convertRadix: carry overflow");let W=H/w;Z=H%w;let Q=Math.floor(W);if(B[X]=Q,!Number.isSafeInteger(Q)||Q*w+Z!==H)throw new Error("convertRadix: carry overflow");if(!q)continue;else if(!Q)z=X;else q=!1}if($.push(Z),q)break}for(let Z=0;Z<u.length-1&&u[Z]===0;Z++)$.push(0);return $.reverse()}var ow=(u,g)=>g===0?u:ow(g,u%g),Au=(u,g)=>u+(g-ow(u,g)),Wu=(()=>{let u=[];for(let g=0;g<40;g++)u.push(2**g);return u})();function Mg(u,g,w,z){if(Ku(u),g<=0||g>32)throw new Error(`convertRadix2: wrong from=${g}`);if(w<=0||w>32)throw new Error(`convertRadix2: wrong to=${w}`);if(Au(g,w)>32)throw new Error(`convertRadix2: carry overflow from=${g} to=${w} carryBits=${Au(g,w)}`);let $=0,B=0,J=Wu[g],Z=Wu[w]-1,q=[];for(let X of u){if(K2(X),X>=J)throw new Error(`convertRadix2: invalid data word=${X} from=${g}`);if($=$<<g|X,B+g>32)throw new Error(`convertRadix2: carry overflow pos=${B} from=${g}`);B+=g;for(;B>=w;B-=w)q.push(($>>B-w&Z)>>>0);let Y=Wu[B];if(Y===void 0)throw new Error("invalid carry");$&=Y-1}if($=$<<w-B&Z,!z&&B>=g)throw new Error("Excess padding");if(!z&&$>0)throw new Error(`Non-zero padding: ${$}`);if(z&&B>0)q.push($>>>0);return q}function IT(u){K2(u);let g=256;return{encode:(w)=>{if(!yg(w))throw new Error("radix.encode input should be Uint8Array");return Vw(Array.from(w),g,u)},decode:(w)=>{return hg("radix.decode",w),Uint8Array.from(Vw(w,u,g))}}}function D0(u,g=!1){if(K2(u),u<=0||u>32)throw new Error("radix2: bits should be in (0..32]");if(Au(8,u)>32||Au(u,8)>32)throw new Error("radix2: carry overflow");return{encode:(w)=>{if(!yg(w))throw new Error("radix2.encode input should be Uint8Array");return Mg(Array.from(w),8,u,!g)},decode:(w)=>{return hg("radix2.decode",w),Uint8Array.from(Mg(w,u,8,g))}}}function rw(u){return Ew(u),function(...g){try{return u.apply(null,g)}catch(w){}}}var $Y=k0(D0(4),f0("0123456789ABCDEF"),F0("")),BY=k0(D0(5),f0("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Qu(5),F0("")),JY=k0(D0(5),f0("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),F0("")),ZY=k0(D0(5),f0("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Qu(5),F0("")),qY=k0(D0(5),f0("0123456789ABCDEFGHIJKLMNOPQRSTUV"),F0("")),XY=k0(D0(5),f0("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),F0(""),dw((u)=>u.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),YY=k0(D0(6),f0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Qu(6),F0("")),RY=k0(D0(6),f0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),F0("")),HY=k0(D0(6),f0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Qu(6),F0("")),WY=k0(D0(6),f0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),F0("")),Cg=(u)=>k0(IT(58),f0(u),F0("")),KY=Cg("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),UY=Cg("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),AY=Cg("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");var Dg=k0(f0("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),F0("")),pw=[996825010,642813549,513874426,1027748829,705979059];function W2(u){let g=u>>25,w=(u&33554431)<<5;for(let z=0;z<pw.length;z++)if((g>>z&1)===1)w^=pw[z];return w}function iw(u,g,w=1){let z=u.length,$=1;for(let B=0;B<z;B++){let J=u.charCodeAt(B);if(J<33||J>126)throw new Error(`Invalid prefix (${u})`);$=W2($)^J>>5}$=W2($);for(let B=0;B<z;B++)$=W2($)^u.charCodeAt(B)&31;for(let B of g)$=W2($)^B;for(let B=0;B<6;B++)$=W2($);return $^=w,Dg.encode(Mg([$%Wu[30]],30,5,!1))}function mw(u){let g=u==="bech32"?1:734539939,w=D0(5),z=w.decode,$=w.encode,B=rw(z);function J(R,H,W=90){if(M1("bech32.encode prefix",R),yg(H))H=Array.from(H);hg("bech32.encode",H);let Q=R.length;if(Q===0)throw new TypeError(`Invalid prefix length ${Q}`);let K=Q+7+H.length;if(W!==!1&&K>W)throw new TypeError(`Length ${K} exceeds limit ${W}`);let k=R.toLowerCase(),_=iw(k,H,g);return`${k}1${Dg.encode(H)}${_}`}function Z(R,H=90){M1("bech32.decode input",R);let W=R.length;if(W<8||H!==!1&&W>H)throw new TypeError(`invalid string length: ${W} (${R}). Expected (8..${H})`);let Q=R.toLowerCase();if(R!==Q&&R!==R.toUpperCase())throw new Error("String must be lowercase or uppercase");let K=Q.lastIndexOf("1");if(K===0||K===-1)throw new Error('Letter "1" must be present between prefix and data only');let k=Q.slice(0,K),_=Q.slice(K+1);if(_.length<6)throw new Error("Data must be at least 6 characters long");let p=Dg.decode(_).slice(0,-6),E=iw(k,p,g);if(!_.endsWith(E))throw new Error(`Invalid checksum in ${R}: expected "${E}"`);return{prefix:k,words:p}}let q=rw(Z);function X(R){let{prefix:H,words:W}=Z(R,!1);return{prefix:H,words:W,bytes:z(W)}}function Y(R,H){return J(R,$(H))}return{encode:J,decode:Z,encodeFromBytes:Y,decodeToBytes:X,decodeUnsafe:q,fromWords:z,fromWordsUnsafe:B,toWords:$}}var Og=mw("bech32"),QY=mw("bech32m");var _Y=k0(D0(4),f0("0123456789abcdef"),F0(""),dw((u)=>{if(typeof u!=="string"||u.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof u} with length ${u.length}`);return u.toLowerCase()}));var LT=5000;function cw(u){return new TextEncoder().encode(u)}function U2(){return Math.floor(Date.now()/1000)}function kT(u,g){let w=yw(g),z=Og.toWords(w);return Og.encode(u,z,LT)}function D1(u){return kT("npub",u)}function _u(u,g=8){if(u.length<=g*2)return u;return`${u.slice(0,g)}...${u.slice(-g)}`}function fT(u){return JSON.stringify([0,u.pubkey,u.created_at,u.kind,u.tags,u.content])}function sg(u){let g=fT(u),w=xw(cw(g));return Pg(w)}function bu(u,g,w=[],z=""){return{pubkey:z,created_at:U2(),kind:u,tags:w,content:g}}var I0={Metadata:0,Text:1,RecommendRelay:2,Contacts:3,EncryptedDM:4,EventDeletion:5,Repost:6,Reaction:7,ChannelCreation:40,ChannelMetadata:41,ChannelMessage:42,ChannelHideMessage:43,ChannelMuteUser:44,Comment:1111,ClientAuth:22242,RelayList:10002,LiveEvent:30311};function Iu(){return typeof window!=="undefined"&&!!window.nostr}async function aw(){if(!Iu())throw new Error("No NIP-07 extension found. Install Alby or nos2x.");return window.nostr.getPublicKey()}async function Lu(u){if(!Iu())throw new Error("No NIP-07 extension found.");let g=sg(u),w={...u,id:g};return window.nostr.signEvent(w)}function lw(){if(typeof navigator==="undefined")return!1;return/android/i.test(navigator.userAgent)}function FT(u){return`${window.location.origin+window.location.pathname}?nip55_action=${u}&event=`}function tw(){let u=FT("get_public_key");window.location.href=`nostrsigner:?compressionType=none&returnType=signature&type=get_public_key&callbackUrl=${u}`}function nw(){if(typeof window==="undefined")return null;let u=new URLSearchParams(window.location.search),g=u.get("nip55_action"),w=u.get("event");if(!g||!w)return null;return{action:g,result:w}}function ew(){if(typeof window==="undefined")return;let u=new URL(window.location.href);u.searchParams.delete("nip55_action"),u.searchParams.delete("event");let g=u.pathname+(u.search||"");window.history.replaceState({},"",g)}var jT=0;function PT(){return`sub_${++jT}_${Date.now().toString(36)}`}class x0{url;ws=null;subscriptions=new Map;pendingPublish=new Map;pendingMessages=[];reconnectTimer=null;reconnectDelay=1000;maxReconnectDelay=60000;reconnectAttempts=0;maxReconnectAttempts=5;_status="disconnected";statusListeners=new Set;_authSigner=null;_authenticated=!1;_authInProgress=!1;constructor(u){this.url=u.replace(/\/$/,"")}setAuthSigner(u){this._authSigner=u}get hasAuthSigner(){return this._authSigner!==null}get authenticated(){return this._authenticated}get status(){return this._status}setStatus(u){this._status=u;for(let g of this.statusListeners)g(u)}onStatusChange(u){return this.statusListeners.add(u),()=>this.statusListeners.delete(u)}connect(){if(this.ws&&(this.ws.readyState===WebSocket.OPEN||this.ws.readyState===WebSocket.CONNECTING))return Promise.resolve();return new Promise((u)=>{this.setStatus("connecting");try{this.ws=new WebSocket(this.url)}catch(w){this.setStatus("error"),u();return}let g=!1;this.ws.onopen=()=>{this.setStatus("connected"),this.reconnectDelay=1000,this.reconnectAttempts=0;for(let w of this.pendingMessages)this.ws.send(w);this.pendingMessages=[];for(let[w,z]of this.subscriptions){let $=JSON.stringify(["REQ",w,...z.filters]);this.ws.send($)}if(!g)g=!0,u()},this.ws.onmessage=(w)=>{this.handleMessage(w.data)},this.ws.onerror=()=>{this.setStatus("error")},this.ws.onclose=()=>{if(this.setStatus("disconnected"),this.ws=null,!g)g=!0,u();this.scheduleReconnect()}})}disconnect(){if(this.reconnectTimer)clearTimeout(this.reconnectTimer),this.reconnectTimer=null;for(let[u,g]of this.pendingPublish)clearTimeout(g.timer),g.resolve({accepted:!1,message:"disconnected"});if(this.pendingPublish.clear(),this.subscriptions.clear(),this.pendingMessages=[],this.ws)this.ws.onclose=null,this.ws.close(),this.ws=null;this.setStatus("disconnected")}scheduleReconnect(){if(this.reconnectTimer)return;if(this.reconnectAttempts++,this.reconnectAttempts>this.maxReconnectAttempts){console.warn(`[Relay ${this.url}] Max reconnect attempts (${this.maxReconnectAttempts}) reached, giving up`),this.setStatus("error");return}this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.connect().catch(()=>{})},this.reconnectDelay),this.reconnectDelay=Math.min(this.reconnectDelay*2,this.maxReconnectDelay)}handleMessage(u){let g;try{g=JSON.parse(u)}catch{return}if(!Array.isArray(g)||g.length<2)return;switch(g[0]){case"EVENT":{let z=g[1],$=g[2],B=this.subscriptions.get(z);if(B)B.onEvent($);break}case"EOSE":{let z=g[1],$=this.subscriptions.get(z);if($?.onEose)$.onEose();break}case"OK":{let z=g[1],$=this.pendingPublish.get(z);if($)clearTimeout($.timer),this.pendingPublish.delete(z),$.resolve({accepted:!!g[2],message:g[3]||""});break}case"NOTICE":{console.warn(`[Relay ${this.url}] NOTICE:`,g[1]);break}case"CLOSED":{let z=g[1],$=g[2]||"",B=this.subscriptions.get(z);if(B?.onClosed)B.onClosed($);this.subscriptions.delete(z);break}case"AUTH":{let z=g[1];this.handleAuthChallenge(z);break}}}_authFailed=!1;async handleAuthChallenge(u){if(!this._authSigner)return;if(this._authInProgress)return;if(this._authFailed)return;this._authInProgress=!0;try{let g=bu(I0.ClientAuth,"",[["relay",this.url],["challenge",u]]),w=await this._authSigner(g);this.send(JSON.stringify(["AUTH",w])),this._authenticated=!0}catch(g){this._authFailed=!0,console.warn(`[Relay ${this.url}] AUTH declined by signer`)}finally{this._authInProgress=!1}}send(u){if(this.ws&&this.ws.readyState===WebSocket.OPEN)this.ws.send(u);else this.pendingMessages.push(u)}subscribe(u,g,w,z){let $=PT();return this.subscriptions.set($,{id:$,filters:u,onEvent:g,onEose:w,onClosed:z}),this.send(JSON.stringify(["REQ",$,...u])),$}unsubscribe(u){if(this.subscriptions.has(u))this.send(JSON.stringify(["CLOSE",u])),this.subscriptions.delete(u)}publish(u){return new Promise((g)=>{let w=setTimeout(()=>{this.pendingPublish.delete(u.id),g({accepted:!1,message:"timeout"})},1e4);this.pendingPublish.set(u.id,{resolve:g,timer:w}),this.send(JSON.stringify(["EVENT",u]))})}get activeSubscriptions(){return this.subscriptions.size}}class xg{relays=new Map;seenEvents=new Set;maxSeen=50000;_authSigner=null;setAuthSigner(u){this._authSigner=u;for(let g of this.relays.values())if(g.hasAuthSigner)g.setAuthSigner(u)}clearSeenEvents(){this.seenEvents.clear()}addRelay(u){let g=u.replace(/\/$/,"");if(this.relays.has(g))return this.relays.get(g);let w=new x0(g);return this.relays.set(g,w),w}addRelayWithAuth(u){let g=this.addRelay(u);if(this._authSigner)g.setAuthSigner(this._authSigner);return g}removeRelay(u){let g=u.replace(/\/$/,""),w=this.relays.get(g);if(w)w.disconnect(),this.relays.delete(g)}getRelay(u){return this.relays.get(u.replace(/\/$/,""))}get allRelays(){return Array.from(this.relays.values())}async connectAll(){let u=this.allRelays.map((g)=>g.connect().catch((w)=>{console.warn(`Failed to connect to ${g.url}:`,w)}));await Promise.allSettled(u)}disconnectAll(){for(let u of this.relays.values())u.disconnect()}subscribe(u,g,w){let z=new Map,$=`pool_${Date.now().toString(36)}`;for(let B of this.relays.values()){let J=B.subscribe(u,(Z)=>{if(this.seenEvents.has(Z.id))return;this.trackSeen(Z.id),g(Z,B)},()=>{if(w)w(B)});z.set(B,J)}return{id:$,unsubscribe:()=>{for(let[B,J]of z)B.unsubscribe(J);z.clear()}}}subscribeToUrls(u,g,w,z){let $=new Map,B=`pool_targeted_${Date.now().toString(36)}`;for(let J of u){let Z=J.replace(/\/$/,""),q=this.relays.get(Z);if(!q)continue;let X=q.subscribe(g,(Y)=>{if(this.seenEvents.has(Y.id))return;this.trackSeen(Y.id),w(Y,q)},()=>{if(z)z(q)});$.set(q,X)}return{id:B,unsubscribe:()=>{for(let[J,Z]of $)J.unsubscribe(Z);$.clear()}}}async publish(u){let g=new Map,w=this.allRelays.map(async(z)=>{try{let $=await z.publish(u);g.set(z.url,$)}catch($){g.set(z.url,{accepted:!1,message:String($)})}});return await Promise.allSettled(w),g}trackSeen(u){if(this.seenEvents.add(u),this.seenEvents.size>this.maxSeen){let g=Math.floor(this.maxSeen*0.4),w=this.seenEvents.values();for(let z=0;z<g;z++){let $=w.next().value;if($)this.seenEvents.delete($)}}}getStatus(){let u=new Map;for(let[g,w]of this.relays)u.set(g,w.status);return u}}var Vg=null,V0={statuses:new Map,isConnecting:!1},rg=new Set;function A2(){for(let u of rg)u()}function pg(){return V0}function u3(u){return rg.add(u),()=>rg.delete(u)}function y0(){if(!Vg)Vg=new xg;return Vg}async function g3(){let u=y0();V0={...V0,isConnecting:!0},A2(),await u.connectAll(),V0={...V0,isConnecting:!1,statuses:u.getStatus()},A2()}function ig(u){let g=y0(),w=g.addRelay(u);w.onStatusChange(()=>{V0={...V0,statuses:g.getStatus()},A2()}),w.connect().catch(()=>{}),V0={...V0,statuses:g.getStatus()},A2()}function w3(u){let g=y0();g.removeRelay(u),V0={...V0,statuses:g.getStatus()},A2()}var T3="oni_relay_profiles",ku=[{id:"outbox",name:"Outbox",relays:[],builtin:!0},{id:"inbox",name:"Inbox",relays:[],builtin:!0},{id:"indexers",name:"Indexers",relays:[],builtin:!0}],m={profiles:[...ku],activeProfileId:"outbox"},Ng=new Set;function f1(){for(let u of Ng)u()}function y1(){if(typeof localStorage!=="undefined")localStorage.setItem(T3,JSON.stringify(m))}function z3(){if(typeof localStorage==="undefined")return;try{let u=localStorage.getItem(T3);if(u){let g=JSON.parse(u),w=new Set(ku.map(($)=>$.id)),z=[];for(let $ of ku){let B=g.profiles.find((J)=>J.id===$.id);z.push(B?{...B,builtin:!0}:{...$})}for(let $ of g.profiles)if(!w.has($.id))z.push({...$,builtin:!1});m={profiles:z,activeProfileId:g.activeProfileId||"outbox"}}}catch{}f1()}function h1(){return m}function $3(u){return Ng.add(u),()=>Ng.delete(u)}function ST(){return m.profiles.find((u)=>u.id===m.activeProfileId)||m.profiles[0]}function B3(u){m={...m,activeProfileId:u},y1(),f1(),Eg()}function C1(u,g){let w=g.trim();if(!w.startsWith("wss://")&&!w.startsWith("ws://"))w="wss://"+w;if(w=w.replace(/\/+$/,""),m={...m,profiles:m.profiles.map((z)=>z.id===u&&!z.relays.includes(w)?{...z,relays:[...z.relays,w]}:z)},y1(),f1(),u===m.activeProfileId)ig(w)}function fu(u,g){if(m={...m,profiles:m.profiles.map((w)=>w.id===u?{...w,relays:w.relays.filter((z)=>z!==g)}:w)},y1(),f1(),u===m.activeProfileId)w3(g)}function J3(u){let g="custom_"+Date.now()+"_"+Math.random().toString(36).slice(2,8);return m={...m,profiles:[...m.profiles,{id:g,name:u,relays:[],builtin:!1}]},y1(),f1(),g}function Z3(u){let g=m.profiles.find((w)=>w.id===u);if(!g||g.builtin)return;m={...m,profiles:m.profiles.filter((w)=>w.id!==u),activeProfileId:m.activeProfileId===u?"outbox":m.activeProfileId},y1(),f1()}function Eg(){let u=y0(),g=ST(),w=new Set(u.allRelays.map(($)=>$.url)),z=new Set(g.relays);for(let $ of w)if(!z.has($))u.removeRelay($);for(let $ of z)if(!w.has($))ig($)}function q3(){m={profiles:[...ku],activeProfileId:"outbox"},y1(),f1()}var j0={pubkey:null,isLoading:!1,error:null},dg=new Set;function F1(){for(let u of dg)u()}function T0(){return j0}function q1(u){return dg.add(u),()=>dg.delete(u)}async function O1(){if(Iu()){j0={...j0,isLoading:!0,error:null},F1();try{let u=await aw();if(j0={pubkey:u,isLoading:!1,error:null},typeof localStorage!=="undefined")localStorage.setItem("oni_pubkey",u)}catch(u){j0={...j0,isLoading:!1,error:String(u)}}F1();return}if(lw()){j0={...j0,isLoading:!0,error:null},F1(),tw();return}j0={...j0,error:"No Nostr signer found. Install a NIP-07 extension (desktop) or Amber (Android)."},F1()}function og(){y0().clearSeenEvents(),q3()}function Fu(){if(og(),j0={pubkey:null,isLoading:!1,error:null},typeof localStorage!=="undefined")localStorage.removeItem("oni_pubkey");F1()}function ju(){if(typeof localStorage==="undefined")return;let u=nw();if(u&&u.action==="get_public_key"&&u.result){let w=u.result;localStorage.setItem("oni_pubkey",w),j0={pubkey:w,isLoading:!1,error:null},ew(),F1();return}let g=localStorage.getItem("oni_pubkey");if(g)j0={pubkey:g,isLoading:!1,error:null},F1()}var e0={urls:[],source:"none",isLoading:!1,error:null},ag=new Set,Q2=null,mg=!1;function Pu(){if(mg)return;mg=!0,queueMicrotask(()=>{mg=!1;for(let u of ag)u()})}function X3(){return e0}function _2(){return e0.urls}function Y3(u){return ag.add(u),()=>ag.delete(u)}var GT=["wss://relay.damus.io","wss://relay.nostr.band","wss://nos.lol","wss://relay.snort.social","wss://purplepag.es","wss://relay.primal.net"],cg=["wss://relay.nostr.watch","wss://history.nostr.watch"];function Su(u=10){if(e0.urls.length>0&&!e0.isLoading)return Promise.resolve();if(Q2)return Q2;return Q2=vT(u).finally(()=>{Q2=null}),Q2}async function vT(u){e0={...e0,isLoading:!0,error:null},Pu();try{let g=await MT(u);if(g.length>0){console.log("[indexers] Discovered",g.length,"relays via rstate"),e0={urls:g,source:"rstate",isLoading:!1,error:null},Pu();return}}catch(g){console.warn("[indexers] rstate unavailable:",g)}console.log("[indexers] Using fallback indexers"),e0={urls:GT.slice(0,u),source:"fallback",isLoading:!1,error:null},Pu(),DT(u)}async function MT(u){let g=new AbortController,w=setTimeout(()=>g.abort(),5000);try{let z=new URLSearchParams({limit:String(u*3),offset:"0",sortBy:"lastSeen",sortOrder:"desc",format:"detailed"}),$=await fetch(`/relays?${z}`,{signal:g.signal});if(!$.ok)throw new Error(`rstate ${$.status}`);let Z=((await $.json()).relays||[]).filter((Y)=>{if(!Y.relayUrl||!Y.relayUrl.startsWith("wss://"))return!1;if(Y.network?.value&&Y.network.value!=="clearnet")return!1;return!0}).map((Y)=>({url:Y.relayUrl.replace(/\/+$/,""),rtt:Y.rtt?.open?.value??9999,lastSeen:Y.lastSeenAt??0})).sort((Y,R)=>{if(Y.rtt!==R.rtt)return Y.rtt-R.rtt;return R.lastSeen-Y.lastSeen}),q=new Set,X=[];for(let Y of Z){if(q.has(Y.url))continue;if(q.add(Y.url),X.push(Y.url),X.length>=u)break}return X}finally{clearTimeout(w)}}function DT(u){let g=new Map,w=0,z=setTimeout(()=>$(),8000);function $(){if(clearTimeout(z),g.size===0)return;let B=Array.from(g.entries()).sort((J,Z)=>J[1].rtt-Z[1].rtt).map(([J])=>J).slice(0,u);if(B.length>0)console.log("[indexers] Upgraded to",B.length,"relays via NIP-66"),e0={urls:B,source:"nip66",isLoading:!1,error:null},Pu()}for(let B of cg){let J=new x0(B);J.connect().then(()=>{let Z=J.subscribe([{kinds:[30166],limit:u*3}],(q)=>{let X=q.tags.find((Q)=>Q[0]==="d");if(!X||!X[1])return;let Y=X[1].replace(/\/+$/,"");if(!Y.startsWith("wss://"))return;let R=9999,H=q.tags.find((Q)=>Q[0]==="rtt"&&Q[1]==="open");if(H&&H[2])R=parseInt(H[2],10)||9999;let W=g.get(Y);if(!W||R<W.rtt)g.set(Y,{rtt:R})},()=>{if(J.unsubscribe(Z),J.disconnect(),w++,w>=cg.length)$()})}).catch(()=>{if(w++,w>=cg.length)$()})}}var N={phase:"idle",profile:null,profileEvent:null,relayList:[],relayListEvent:null,contactsEvent:null,followingCount:0,indexersQueried:0,indexersResponded:0,outboxConnected:0,inboxConnected:0,error:null},ng=new Set,lg=!1;function N0(){if(lg)return;lg=!0,queueMicrotask(()=>{lg=!1;for(let u of ng)u()})}function X1(){return N}function Gu(u){return ng.add(u),()=>ng.delete(u)}var eg=[],tg=null,b2=null;async function H3(u){if(tg===u&&N.phase==="ready")return;if(tg===u&&b2)return b2;return tg=u,b2=yT(u).finally(()=>{b2=null}),b2}async function yT(u){if(N={phase:"discovering_indexers",profile:null,profileEvent:null,relayList:[],relayListEvent:null,contactsEvent:null,followingCount:0,indexersQueried:0,indexersResponded:0,outboxConnected:0,inboxConnected:0,error:null},N0(),X3().urls.length===0)await Su(10);let w=_2();if(w.length===0){N={...N,phase:"error",error:"No indexer relays found"},N0();return}if(R3(w),Y3(()=>{let z=_2();if(z.length>0)R3(z)}),N={...N,phase:"querying_indexers",indexersQueried:w.length},N0(),await hT(u,w),N.relayList.length>0)N={...N,phase:"connecting_relays"},N0(),await CT(N.relayList);N={...N,phase:"ready"},N0(),OT()}function hT(u,g){return new Promise((w)=>{let z=0,$=g.length,B=setTimeout(()=>J(),8000);function J(){clearTimeout(B),w()}function Z(){if(z++,N={...N,indexersResponded:z},N0(),z>=$)J()}for(let q of g){let X=new x0(q);eg.push(X),X.connect().then(()=>{if(X.status!=="connected"){Z();return}let Y=X.subscribe([{kinds:[I0.Metadata],authors:[u],limit:1},{kinds:[I0.RelayList],authors:[u],limit:1},{kinds:[I0.Contacts],authors:[u],limit:1}],(R)=>{if(R.kind===I0.Metadata){if(!N.profileEvent||R.created_at>N.profileEvent.created_at)N={...N,profileEvent:R,profile:sT(R)},N0()}else if(R.kind===I0.RelayList){if(!N.relayListEvent||R.created_at>N.relayListEvent.created_at)N={...N,relayListEvent:R,relayList:xT(R)},N0()}else if(R.kind===I0.Contacts){if(!N.contactsEvent||R.created_at>N.contactsEvent.created_at){let H=R.tags.filter((W)=>W[0]==="p"&&W[1]).length;N={...N,contactsEvent:R,followingCount:H},N0()}}},()=>{X.unsubscribe(Y),Z()})}).catch(()=>{Z()})}})}async function CT(u){let g=y0(),w=h1(),z=u.filter((X)=>X.write).map((X)=>X.url),$=u.filter((X)=>X.read).map((X)=>X.url),B=w.profiles.find((X)=>X.id==="outbox"),J=w.profiles.find((X)=>X.id==="inbox");for(let X of z)if(B&&!B.relays.includes(X))C1("outbox",X);for(let X of $)if(J&&!J.relays.includes(X))C1("inbox",X);let Z=new Set([...z,...$]),q=[];for(let X of Z)if(!g.getRelay(X)){let R=g.addRelayWithAuth(X);q.push(R.connect().then(()=>{if(z.includes(X))N={...N,outboxConnected:N.outboxConnected+1};if($.includes(X))N={...N,inboxConnected:N.inboxConnected+1};N0()}).catch((H)=>{console.warn(`[bootstrap] Failed to connect to ${X}:`,H)}))}await Promise.allSettled(q)}function R3(u){let w=h1().profiles.find((z)=>z.id==="indexers");if(!w)return;for(let z of w.relays)if(!u.includes(z))fu("indexers",z);for(let z of u)if(!w.relays.includes(z))C1("indexers",z)}function OT(){for(let u of eg)if(!y0().getRelay(u.url))u.disconnect();eg=[]}function sT(u){let g={};try{g=JSON.parse(u.content)}catch{}return{name:g.name||"",displayName:g.display_name||g.displayName||"",picture:g.picture||"",banner:g.banner||"",about:g.about||"",nip05:g.nip05||"",lud16:g.lud16||""}}function xT(u){let g=[];for(let w of u.tags){if(w[0]!=="r"||!w[1])continue;let z=w[1].replace(/\/+$/,""),$=w[2];g.push({url:z,read:!$||$==="read",write:!$||$==="write"})}return g}var I2=new Map,vu=new Set,u4=new Set;function W3(){for(let u of u4)u()}function K3(u){return u4.add(u),()=>u4.delete(u)}function U3(u){let g=I2.get(u);if(g)return g;return{pubkey:u,name:"",displayName:"",picture:"",banner:"",about:"",nip05:"",lud16:"",fetched:!1}}function A3(u){let g=U3(u);if(g.displayName)return g.displayName;if(g.name)return g.name;try{let w=D1(u);return w.slice(0,12)+"..."+w.slice(-4)}catch{return _u(u,8)}}function Q3(u){return U3(u).picture}function g4(u){if(I2.has(u)&&I2.get(u).fetched)return;if(vu.has(u))return;vu.add(u);let g=_2();if(g.length===0){vu.delete(u);return}let w=g.slice(0,3),z=null,$=0;function B(){if(vu.delete(u),z){let Z=VT(u,z);I2.set(u,Z),W3()}else I2.set(u,{pubkey:u,name:"",displayName:"",picture:"",banner:"",about:"",nip05:"",lud16:"",fetched:!0}),W3()}let J=setTimeout(()=>B(),6000);for(let Z of w){let q=new x0(Z);q.connect().then(()=>{if(q.status!=="connected"){if($++,$>=w.length)clearTimeout(J),B();return}let X=q.subscribe([{kinds:[I0.Metadata],authors:[u],limit:1}],(Y)=>{if(!z||Y.created_at>z.created_at)z=Y},()=>{if(q.unsubscribe(X),q.disconnect(),$++,$>=w.length)clearTimeout(J),B()})}).catch(()=>{if($++,$>=w.length)clearTimeout(J),B()})}}function VT(u,g){let w={};try{w=JSON.parse(g.content)}catch{}return{pubkey:u,name:w.name||"",displayName:w.display_name||w.displayName||"",picture:w.picture||"",banner:w.banner||"",about:w.about||"",nip05:w.nip05||"",lud16:w.lud16||"",fetched:!0}}class w4 extends S{unsub=null;unsubAuth=null;unsubBootstrap=null;unsubProfiles=null;menuRef=null;state={config:V.getState().config,status:V.getState().status,chatVisible:V.getState().chatVisible,nostrPubkey:T0().pubkey,nostrLoading:T0().isLoading,userMenuOpen:!1,profileVersion:0};handleOutsideClick=(u)=>{if(this.state.userMenuOpen&&this.menuRef&&!this.menuRef.contains(u.target))this.setState({userMenuOpen:!1})};componentDidMount(){this.unsub=V.subscribe(()=>{let g=V.getState();this.setState({config:g.config,status:g.status,chatVisible:g.chatVisible})}),this.unsubAuth=q1(()=>{let g=T0();if(this.setState({nostrPubkey:g.pubkey,nostrLoading:g.isLoading}),g.pubkey)g4(g.pubkey)}),this.unsubBootstrap=Gu(()=>{this.setState({profileVersion:this.state.profileVersion+1})}),this.unsubProfiles=K3(()=>{this.setState({profileVersion:this.state.profileVersion+1})});let u=T0();if(u.pubkey)g4(u.pubkey);document.addEventListener("mousedown",this.handleOutsideClick)}componentWillUnmount(){this.unsub?.(),this.unsubAuth?.(),this.unsubBootstrap?.(),this.unsubProfiles?.(),document.removeEventListener("mousedown",this.handleOutsideClick)}handleLogin=()=>{O1()};handleLogout=()=>{Fu(),this.setState({userMenuOpen:!1})};render(){let{config:u,status:g,chatVisible:w,nostrPubkey:z,nostrLoading:$,userMenuOpen:B}=this.state,J=u?.name||"",Z=g?.online||!1,q=g?.viewerCount||0,X=z?A3(z):"",Y=z?Q3(z):"";return T("header",{class:"sticky top-0 z-50 border-b border-border/30 bg-background/80 backdrop-blur-xl backdrop-saturate-150"},T("div",{class:"mx-auto flex h-14 items-center justify-between px-4 sm:px-6"},T("div",{class:"flex items-center gap-4"},T("a",{href:"/",class:"flex items-center gap-2.5 shrink-0"},T("span",{class:"text-xl"},"\uD83D\uDD25"),T("span",{class:"text-lg font-bold tracking-tight"},J||"oni")),Z&&T(v,{variant:"default",className:"gap-1.5 bg-success text-success-foreground"},T("span",{class:"size-1.5 rounded-full bg-current live-dot"}),"Live"),Z&&q>0&&T("span",{class:"hidden sm:inline text-sm text-muted-foreground tabular-nums"},q.toLocaleString()," watching"),T("nav",{class:"hidden sm:flex items-center gap-0.5"},T("a",{href:"https://mycelium.social",target:"_blank",rel:"noopener",class:"inline-flex h-9 items-center justify-center rounded-md px-3 py-2 text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground"},"Mycelium"))),T("div",{class:"flex items-center gap-1.5"},!u?.chatDisabled&&T(f,{variant:"ghost",size:"sm",onClick:()=>V.toggleChat(),className:U("gap-1.5 h-8",w&&"bg-accent text-accent-foreground")},T("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),T("span",{class:"hidden sm:inline text-sm"},"Chat")),T(v1,{className:"hidden sm:inline-flex size-8"}),z?T("div",{ref:(R)=>{this.menuRef=R},class:"relative"},T("button",{onClick:()=>this.setState({userMenuOpen:!B}),class:"flex items-center gap-2 rounded-full border border-border px-1 py-1 pr-3 hover:bg-accent/50 transition-colors cursor-pointer"},T(z1,{className:"size-7"},T(l0,{src:Y,alt:X}),T($1,{className:"text-[10px]"},X.charAt(0).toUpperCase())),T("span",{class:"text-sm font-medium max-w-[120px] truncate hidden sm:block"},X),T("span",{class:"text-xs opacity-40"},"")),B&&T("div",{class:"absolute right-0 top-full mt-2 w-72 bg-popover border border-border rounded-xl shadow-xl overflow-hidden z-50"},T("div",{class:"relative"},T("div",{class:"h-20 bg-gradient-to-br from-primary/30 via-primary/10 to-muted/50"}),T("div",{class:"absolute -bottom-5 left-4"},T(z1,{className:"size-10 ring-2 ring-popover"},T(l0,{src:Y,alt:X}),T($1,{className:"text-xs font-bold"},X.charAt(0).toUpperCase())))),T("div",{class:"pt-7 pb-3 px-4"},T("p",{class:"text-sm font-semibold truncate"},X),T("p",{class:"font-mono text-[10px] text-muted-foreground truncate"},(()=>{try{return D1(z).slice(0,24)+"..."}catch{return z.slice(0,24)+"..."}})())),T("div",{class:"border-t border-border"}),T("div",{class:"py-1"},T("a",{href:"/admin",onClick:()=>this.setState({userMenuOpen:!1}),class:"flex items-center gap-2.5 px-4 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-accent transition-colors"},T("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 010 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 010-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28z"}),T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})),"Admin Dashboard")),T("div",{class:"border-t border-border"}),T("div",{class:"py-1"},T("button",{onClick:this.handleLogout,class:"flex items-center gap-2.5 px-4 py-2 w-full text-sm text-destructive/70 hover:text-destructive hover:bg-destructive/5 transition-colors cursor-pointer"},T("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})),"Sign Out")))):T(f,{size:"sm",onClick:this.handleLogin,disabled:$},$?"Connecting...":"Sign In"))))}}class T4 extends S{videoRef=null;hlsInstance=null;state={isLoading:!0,hasError:!1};componentDidMount(){if(this.props.online)this.initPlayer()}componentDidUpdate(u){if(this.props.online&&!u.online)this.setState({isLoading:!0,hasError:!1}),this.initPlayer();else if(!this.props.online&&u.online)this.destroyPlayer()}componentWillUnmount(){this.destroyPlayer()}async initPlayer(){let u=this.videoRef;if(!u)return;let g=this.props.source;if(u.addEventListener("playing",()=>{this.setState({isLoading:!1})},{once:!0}),u.canPlayType("application/vnd.apple.mpegurl")){u.src=g,u.addEventListener("loadedmetadata",()=>{u.play().catch(()=>{})});return}try{let w=(await import("../chunk-eyp45axx.js")).default;if(w.isSupported())this.hlsInstance=new w({enableWorker:!0,lowLatencyMode:!0,backBufferLength:90}),this.hlsInstance.loadSource(g),this.hlsInstance.attachMedia(u),this.hlsInstance.on(w.Events.MANIFEST_PARSED,()=>{u.play().catch(()=>{})}),this.hlsInstance.on(w.Events.ERROR,(z,$)=>{if($.fatal)switch($.type){case w.ErrorTypes.NETWORK_ERROR:this.hlsInstance?.startLoad();break;case w.ErrorTypes.MEDIA_ERROR:this.hlsInstance?.recoverMediaError();break;default:this.setState({hasError:!0,isLoading:!1}),this.destroyPlayer();break}})}catch{u.src=g}}destroyPlayer(){if(this.hlsInstance)this.hlsInstance.destroy(),this.hlsInstance=null;if(this.videoRef)this.videoRef.removeAttribute("src"),this.videoRef.load()}render(){let{online:u,title:g}=this.props,{isLoading:w,hasError:z}=this.state;if(!u)return null;return T("div",{class:"relative w-full bg-black aspect-video group"},T("video",{ref:($)=>{this.videoRef=$},class:"w-full h-full object-contain",controls:!0,playsInline:!0,title:g}),w&&!z&&T("div",{class:"absolute inset-0 flex items-center justify-center bg-black/95 pointer-events-none"},T("div",{class:"absolute inset-0 bg-gradient-to-b from-primary/[0.04] via-transparent to-transparent"}),T("div",{class:"relative flex flex-col items-center gap-5"},T("div",{class:"relative"},T(i0,{size:"lg"}),T("div",{class:"absolute -inset-4 rounded-full blur-2xl bg-primary/10"})),T("div",{class:"text-center"},T("p",{class:"text-sm font-semibold text-foreground/90"},"Connecting to stream"),T("p",{class:"text-xs text-muted-foreground/50 mt-1"},"Please wait...")))),z&&T("div",{class:"absolute inset-0 flex items-center justify-center bg-black/95"},T("div",{class:"absolute inset-0 bg-gradient-to-b from-destructive/[0.03] via-transparent to-transparent"}),T("div",{class:"relative flex flex-col items-center gap-5 text-center px-6"},T("div",{class:"size-16 rounded-2xl bg-destructive/10 border border-destructive/20 flex items-center justify-center"},T("svg",{class:"size-7 text-destructive",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))),T("div",null,T("p",{class:"text-base font-bold text-foreground"},"Stream unavailable"),T("p",{class:"text-sm text-muted-foreground/60 mt-1"},"The stream may have ended or encountered an error")),T(f,{size:"sm",className:"px-6 font-semibold",onClick:()=>{this.setState({isLoading:!0,hasError:!1}),this.initPlayer()}},"Try Again"))))}}class z4 extends S{render(){let{name:u,customText:g,lastDisconnectTime:w,logo:z}=this.props;return T("div",{class:"flex flex-col items-center justify-center w-full aspect-video bg-muted/30"},T("div",{class:"flex flex-col items-center px-6 py-16 text-center max-w-lg animate-in"},T(z1,{className:"size-20 mb-6"},T(l0,{src:z,alt:u}),T($1,{className:"text-3xl bg-card text-muted-foreground/30"},T("svg",{class:"size-10 text-muted-foreground/20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z"})))),T("h2",{class:"text-2xl font-bold tracking-tight mb-2"},u),T(v,{variant:"secondary",className:"mb-4"},T("span",{class:"size-1.5 rounded-full bg-muted-foreground/40 mr-1.5"}),"Offline"),T("p",{class:"text-sm text-muted-foreground leading-relaxed mb-5 max-w-sm"},g||"This stream is currently offline. Check back later!"),w&&T(v,{variant:"outline",className:"gap-1.5"},T("svg",{class:"size-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})),"Last live ",L0(w))))}}class $4 extends S{unsub=null;state={status:V.getState().status,config:V.getState().config};componentDidMount(){this.unsub=V.subscribe(()=>{let u=V.getState();this.setState({status:u.status,config:u.config})})}componentWillUnmount(){this.unsub?.()}render(){let{status:u,config:g}=this.state;if(!u?.online)return null;let w=u.streamTitle||g?.name||"",z=g?.tags||[];return T("div",{class:"px-5 py-3.5 border-b border-border bg-card/40"},T("div",{class:"flex items-start justify-between gap-4"},T("div",{class:"min-w-0 flex-1"},w&&T("h2",{class:"text-[15px] font-semibold text-foreground tracking-tight truncate"},w),z.length>0&&T("div",{class:"flex flex-wrap gap-1.5 mt-2.5"},z.slice(0,6).map(($)=>T(v,{key:$,variant:"secondary",className:"text-[11px]"},$)))),T("div",{class:"flex items-center gap-3 shrink-0"},T(v,{variant:"outline",className:"tabular-nums gap-1.5"},T("svg",{class:"size-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})),fw(u.viewerCount)),u.lastConnectTime&&T(v,{variant:"outline",className:"tabular-nums gap-1.5"},T("svg",{class:"size-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})),L0(u.lastConnectTime)))))}}var B4=["#c084fc","#f472b6","#fb923c","#facc15","#4ade80","#22d3ee","#60a5fa","#a78bfa","#f87171","#34d399","#e879f9","#38bdf8","#fbbf24","#a3e635","#fb7185","#2dd4bf","#818cf8","#f97316","#14b8a6","#d946ef"];function Mu(u){return B4[u%B4.length]||B4[0]}class J4 extends S{render(){let{message:u,isModerator:g}=this.props,{type:w,timestamp:z}=u,$=kw(z);if(w==="SYSTEM")return T("div",{class:"px-3 py-1.5 flex items-center gap-1.5"},T("svg",{class:"w-3 h-3 text-primary/60 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})),T("span",{class:"text-[11px] text-muted-foreground italic"},u.body));if(w==="USER_JOINED"||w==="USER_PARTED"){let X=w==="USER_JOINED";return T("div",{class:"px-3 py-0.5 flex items-center gap-1"},T("span",{class:U("text-[10px]",X?"text-success/50":"text-muted-foreground/40")},X?"":""),T("span",{class:"text-[10px] text-muted-foreground/60"},T("span",{style:{color:Mu(u.user?.displayColor||0)},class:"opacity-60"},u.user?.displayName)," ",X?"joined":"left"))}if(w==="NAME_CHANGE")return T("div",{class:"px-3 py-0.5 text-[10px] text-muted-foreground/60"},T("span",{style:{color:Mu(u.user?.displayColor||0)},class:"opacity-60"},u.oldName),"  ",T("span",{style:{color:Mu(u.user?.displayColor||0)},class:"opacity-80"},u.user?.displayName));if(w==="FEDIVERSE_ENGAGEMENT_FOLLOW"||w==="FEDIVERSE_ENGAGEMENT_LIKE"||w==="FEDIVERSE_ENGAGEMENT_REPOST"){let X=w==="FEDIVERSE_ENGAGEMENT_FOLLOW"?"followed":w==="FEDIVERSE_ENGAGEMENT_LIKE"?"liked":"shared";return T("div",{class:"px-3 py-1.5 flex items-center gap-1.5 bg-primary/5 mx-2 my-1 rounded-md"},T("svg",{class:"w-3 h-3 text-primary shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},T("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})),T("span",{class:"text-[11px] text-primary/80"},u.user?.displayName," ",X," on the fediverse"))}let B=Mu(u.user?.displayColor||0),J=u.user?.isModerator,Z=u.user?.isBot,q=u.user?.authenticated;return T("div",{class:"group px-4 py-2 hover:bg-accent/50 transition-colors duration-150 animate-msg-in"},T("div",{class:"flex items-baseline gap-1.5 flex-wrap"},T("span",{class:"text-[12px] font-bold leading-tight",style:{color:B}},J&&T(S1,{content:"Moderator",side:"top"},T(v,{className:"mr-1 align-middle text-[8px] py-0 px-1.5 uppercase tracking-wider"},"Mod")),Z&&T(S1,{content:"Bot",side:"top"},T(v,{variant:"secondary",className:"mr-1 align-middle text-[8px] py-0 px-1.5 uppercase tracking-wider"},"Bot")),q&&T(S1,{content:"Verified",side:"top"},T("span",{class:"inline-flex items-center justify-center size-3.5 text-success mr-0.5 align-middle"},T("svg",{class:"size-2.5",fill:"currentColor",viewBox:"0 0 20 20"},T("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})))),u.user?.displayName),T("span",{class:"text-[10px] text-muted-foreground/40 leading-tight tabular-nums"},$)),T("p",{class:"text-[13px] text-foreground/90 leading-relaxed break-words mt-0.5"},u.body))}}class Z4 extends S{state={value:""};handleSubmit=(u)=>{u.preventDefault();let g=this.state.value.trim();if(!g)return;this.props.onSend(g),this.setState({value:""})};handleInput=(u)=>{this.setState({value:u.target.value})};handleKeyDown=(u)=>{if(u.key==="Enter"&&!u.shiftKey)u.preventDefault(),this.handleSubmit(u)};render(){let u=this.state.value.trim().length>0;return T("form",{class:"flex items-center gap-2 p-3 border-t border-border bg-card/60",onSubmit:this.handleSubmit},T(n,{className:"flex-1 h-9 text-sm",placeholder:"Send a message...",value:this.state.value,onInput:this.handleInput,onKeyDown:this.handleKeyDown}),T(f,{type:"submit",size:"icon-sm",disabled:!u},T("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))))}}class q4 extends S{state={name:"",loading:!1,error:null};handleSubmit=async(u)=>{u.preventDefault();let g=this.state.name.trim();if(!g)return;this.setState({loading:!0,error:null});try{await V.registerUser(g)}catch(w){this.setState({error:w instanceof Error?w.message:"Registration failed",loading:!1})}};handleInput=(u)=>{this.setState({name:u.target.value})};render(){let{name:u,loading:g,error:w}=this.state;return T("div",{class:"p-3 border-t border-border bg-card/60"},T("form",{onSubmit:this.handleSubmit},T(l,{className:"text-muted-foreground mb-2"},"Pick a name to join the chat"),T("div",{class:"flex items-center gap-2"},T(n,{className:"flex-1 h-9 text-sm",placeholder:"Your name...",value:u,onInput:this.handleInput,disabled:g}),T(f,{type:"submit",size:"sm",disabled:!u.trim()||g,className:"h-9 px-5"},g?T(i0,{size:"sm"}):"Join")),w&&T("p",{class:"text-xs text-destructive mt-2"},w)))}}class Du extends S{unsub=null;messagesEndRef=null;scrollContainerRef=null;shouldAutoScroll=!0;state={messages:V.getState().messages,currentUser:V.getState().currentUser,chatDisabled:V.getState().config?.chatDisabled||!1,showScrollBtn:!1};componentDidMount(){this.unsub=V.subscribe(()=>{let u=V.getState();this.setState({messages:u.messages,currentUser:u.currentUser,chatDisabled:u.config?.chatDisabled||!1})})}componentDidUpdate(u,g){if(g.messages.length!==this.state.messages.length&&this.shouldAutoScroll)this.scrollToBottom()}componentWillUnmount(){this.unsub?.()}scrollToBottom(){if(this.messagesEndRef)this.messagesEndRef.scrollIntoView({behavior:"smooth"})}handleScroll=(u)=>{let g=u.target,w=g.scrollHeight-g.scrollTop-g.clientHeight<50;this.shouldAutoScroll=w,this.setState({showScrollBtn:!w})};handleSend=(u)=>{V.sendChat(u)};render(){let{messages:u,currentUser:g,chatDisabled:w,showScrollBtn:z}=this.state;if(w)return null;return T("div",{class:"flex flex-col h-full"},T("div",{class:"flex items-center justify-between px-4 py-3 border-b border-border bg-card/60"},T("div",{class:"flex items-center gap-2.5"},T("svg",{class:"size-4 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),T("h2",{class:"text-[13px] font-semibold text-foreground"},"Chat")),u.length>0&&T(v,{variant:"secondary",className:"text-[10px] tabular-nums"},u.length)),T("div",{ref:($)=>{this.scrollContainerRef=$},class:"flex-1 overflow-y-auto overflow-x-hidden scroll-smooth",onScroll:this.handleScroll},u.length===0&&T("div",{class:"flex flex-col items-center justify-center h-full px-6 text-center"},T("svg",{class:"size-10 text-muted-foreground/20 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),T("p",{class:"text-sm font-medium text-muted-foreground/50"},"No messages yet"),T("p",{class:"text-xs text-muted-foreground/30 mt-1"},"Be the first to say something")),u.map(($)=>T(J4,{key:$.id,message:$,isModerator:g?.isModerator})),T("div",{ref:($)=>{this.messagesEndRef=$}})),z&&T("div",{class:"relative"},T("div",{class:"absolute bottom-3 left-1/2 -translate-x-1/2 z-10"},T(f,{size:"sm",onClick:()=>{this.shouldAutoScroll=!0,this.scrollToBottom()},className:"rounded-full shadow-lg px-4"},"New messages "))),g?T(Z4,{onSend:this.handleSend}):T(q4,null))}}class X4 extends S{unsub=null;state={config:V.getState().config};componentDidMount(){this.unsub=V.subscribe(()=>{this.setState({config:V.getState().config})})}componentWillUnmount(){this.unsub?.()}render(){let{config:u}=this.state,g=!!u?.summary,w=u?.tags&&u.tags.length>0,z=u?.socialHandles&&u.socialHandles.length>0,$=!!u?.extraPageContent;return T("footer",{id:"footer",class:"border-t border-border/30 mt-auto"},T("div",{class:"mx-auto max-w-7xl px-4 sm:px-6 py-6"},(g||z||w||$)&&T("div",{class:"mb-6 max-w-2xl"},g&&T("p",{class:"text-sm text-muted-foreground leading-relaxed mb-4"},u.summary),z&&T("div",{class:"flex flex-wrap gap-2 mb-4"},u.socialHandles.map((B)=>T("a",{key:B.platform,href:B.url,target:"_blank",rel:"noopener noreferrer",class:"no-underline"},T(f,{variant:"outline",size:"sm",className:"gap-2"},T("svg",{class:"size-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})),B.platform)))),w&&T("div",{class:"flex flex-wrap gap-1.5 mb-4"},u.tags.map((B)=>T(v,{key:B,variant:"outline",className:"text-xs"},"#",B))),$&&T("div",{class:"text-sm text-muted-foreground mb-4 [&_a]:text-foreground [&_a]:underline",innerHTML:u.extraPageContent})),T("div",{class:"flex flex-col items-center gap-4 sm:flex-row sm:justify-between text-sm text-muted-foreground"},T("div",{class:"flex items-center gap-2"},T("span",{class:"text-xl"},"\uD83D\uDD25"),T("span",{class:"font-medium text-foreground/80"},"oni"),T("span",{class:"text-border"},""),T("span",{class:"text-xs"},"Part of"," ",T("a",{href:"https://mycelium.social",target:"_blank",rel:"noopener noreferrer",class:"hover:text-foreground transition-colors"},"mycelium.social"))),T("div",{class:"flex items-center gap-4"},T("a",{href:"/admin",class:"text-xs hover:text-foreground transition-colors"},"Admin"),T("a",{href:"https://github.com/TekkadanPlays/oni",target:"_blank",rel:"noopener noreferrer",class:"text-xs hover:text-foreground transition-colors"},"GitHub")))))}}function iT(u,g){let w=g.identifier||`oni-${U2()}`,z=[["d",w]];if(g.title)z.push(["title",g.title]);if(g.summary)z.push(["summary",g.summary]);if(g.image)z.push(["image",g.image]);if(g.streamingUrl)z.push(["streaming",g.streamingUrl]);if(g.recordingUrl)z.push(["recording",g.recordingUrl]);if(g.starts)z.push(["starts",g.starts.toString()]);if(g.ends)z.push(["ends",g.ends.toString()]);if(g.status)z.push(["status",g.status]);if(g.currentParticipants!==void 0)z.push(["current_participants",g.currentParticipants.toString()]);if(g.totalParticipants!==void 0)z.push(["total_participants",g.totalParticipants.toString()]);if(g.tags)for(let $ of g.tags)z.push(["t",$]);if(g.participants)for(let $ of g.participants){let B=["p",$.pubkey];if($.relay)B.push($.relay);if(B.push($.role),$.proof)B.push($.proof);z.push(B)}if(g.relays&&g.relays.length>0)z.push(["relays",...g.relays]);return z.push(["a",`${I0.LiveEvent}:${u}:${w}`]),bu(I0.LiveEvent,"",z,u)}async function Y4(u,g){try{let w=iT(u,g);return await Lu(w)}catch(w){return console.error("[nip53] Error creating live event:",w),null}}async function yu(u,g){if(!u||g.length===0)return{published:!1,results:new Map};let w=[];try{let z=g.map(async(Z)=>{let q=new x0(Z);return w.push(q),await q.connect(),q});await Promise.allSettled(z);let $=new Map,B=w.filter((Z)=>Z.status==="connected").map(async(Z)=>{try{let q=await Z.publish(u);$.set(Z.url,q)}catch(q){$.set(Z.url,{accepted:!1,message:String(q)})}});return await Promise.allSettled(B),{published:Array.from($.values()).some((Z)=>Z.accepted),results:$}}finally{for(let z of w)z.disconnect()}}async function R4(u,g,w){let z=g.tags.find((Z)=>Z[0]==="d"),$=z?z[1]:`oni-${U2()}`,B={identifier:$,status:"live"};for(let Z of g.tags)switch(Z[0]){case"title":B.title=Z[1];break;case"summary":B.summary=Z[1];break;case"image":B.image=Z[1];break;case"streaming":B.streamingUrl=Z[1];break;case"recording":B.recordingUrl=Z[1];break;case"starts":B.starts=parseInt(Z[1],10);break;case"ends":B.ends=parseInt(Z[1],10);break;case"status":B.status=Z[1];break;case"current_participants":B.currentParticipants=parseInt(Z[1],10);break}let J={...B,...w,identifier:$};return Y4(u,J)}var e={currentEvent:null,isPublishing:!1,lastPublished:null,error:null,enabled:!1},H4=new Set,s1=null;function x1(){for(let u of H4)u()}function V1(){return e}function _3(u){return H4.add(u),()=>H4.delete(u)}function b3(u){if(e={...e,enabled:u},typeof localStorage!=="undefined")localStorage.setItem("oni_live_events_enabled",u?"1":"0");x1()}function I3(){if(typeof localStorage==="undefined")return;let u=localStorage.getItem("oni_live_events_enabled");if(u!==null)e={...e,enabled:u==="1"},x1()}function W4(){let g=X1().relayList.filter((w)=>w.write).map((w)=>w.url);if(g.length>0)return g;return["wss://relay.damus.io","wss://nos.lol","wss://relay.nostr.band"]}async function L3(u,g){let w=T0();if(!w.pubkey||!e.enabled)return;e={...e,isPublishing:!0,error:null},x1();try{let z=W4(),$=await Y4(w.pubkey,{identifier:`oni-${Date.now()}`,title:u||"Live Stream",status:"live",streamingUrl:`${window.location.origin}/hls/stream.m3u8`,starts:Math.floor(Date.now()/1000),currentParticipants:g,participants:[{pubkey:w.pubkey,role:"Host"}],relays:z});if($){let{published:B}=await yu($,z);if(B){if(console.log("[liveevents] Published live event:",$.id),e={...e,currentEvent:$,isPublishing:!1,lastPublished:new Date().toISOString()},s1)clearInterval(s1);s1=setInterval(()=>{NT(u,g)},60000)}else e={...e,isPublishing:!1,error:"Failed to publish to any relay"}}else e={...e,isPublishing:!1,error:"Failed to create event (signer rejected?)"}}catch(z){e={...e,isPublishing:!1,error:String(z)}}x1()}async function k3(){let u=T0();if(!u.pubkey||!e.currentEvent)return;if(s1)clearInterval(s1),s1=null;try{let g=W4(),w=await R4(u.pubkey,e.currentEvent,{status:"ended",ends:Math.floor(Date.now()/1000)});if(w)await yu(w,g),console.log("[liveevents] Published stream ended event")}catch(g){console.error("[liveevents] Error ending live event:",g)}e={...e,currentEvent:null},x1()}async function NT(u,g){let w=T0();if(!w.pubkey||!e.currentEvent)return;try{let z=W4(),$=await R4(w.pubkey,e.currentEvent,{title:u||"Live Stream",currentParticipants:g,status:"live"});if($)e={...e,currentEvent:$,lastPublished:new Date().toISOString()},await yu($,z),x1()}catch(z){console.error("[liveevents] Error updating live event:",z)}}class K4 extends S{unsub=null;unsubAuth=null;lastPubkey=null;wasOnline=!1;state={loading:!0,error:null,online:!1,chatVisible:!0,chatDisabled:!1,isMobile:window.innerWidth<=768,name:"",streamTitle:"",offlineMessage:"",lastDisconnectTime:"",logo:""};updateAuthSigner(){let u=T0(),g=y0();if(u.pubkey)g.setAuthSigner((w)=>Lu(w));else g.setAuthSigner(null)}onAuthChange(){let u=T0();if(this.updateAuthSigner(),u.pubkey&&this.lastPubkey&&u.pubkey!==this.lastPubkey)og();if(this.lastPubkey=u.pubkey,u.pubkey)H3(u.pubkey).catch((g)=>console.warn("[oni] Bootstrap error:",g))}componentDidMount(){this.unsub=V.subscribe(()=>{let u=V.getState(),g=u.status?.online||!1,w=this.wasOnline;if(this.setState({loading:u.loading,error:u.error,online:g,chatVisible:u.chatVisible,chatDisabled:u.config?.chatDisabled||!1,isMobile:u.isMobile,name:u.config?.name||"",streamTitle:u.status?.streamTitle||"",offlineMessage:u.config?.offlineMessage||"",lastDisconnectTime:u.status?.lastDisconnectTime||"",logo:u.config?.logo||""}),g&&!w)this.wasOnline=!0,L3(u.status?.streamTitle||u.config?.name||"Live Stream",u.status?.viewerCount||0);else if(!g&&w)this.wasOnline=!1,k3()}),this.unsubAuth=q1(()=>this.onAuthChange()),z3(),Eg(),I3(),Su(10).catch((u)=>console.warn("[oni] Indexer discovery error:",u)),ju(),this.updateAuthSigner(),g3().then(()=>{this.onAuthChange()}).catch((u)=>console.warn("[oni] Relay connect error:",u)),window.addEventListener("resize",this.handleResize),V.init()}componentWillUnmount(){this.unsub?.(),this.unsubAuth?.(),window.removeEventListener("resize",this.handleResize),V.cleanup()}handleResize=()=>{V.setMobile(window.innerWidth<=768)};render(){let{loading:u,error:g,online:w,chatVisible:z,chatDisabled:$,isMobile:B,name:J,streamTitle:Z,offlineMessage:q,lastDisconnectTime:X,logo:Y}=this.state;if(g)return T("div",{class:"flex items-center justify-center min-h-screen bg-background"},T(M,{className:"max-w-sm w-full mx-4 text-center"},T(s,{className:"pt-6"},T("div",{class:"size-12 rounded-lg bg-destructive/10 flex items-center justify-center mx-auto mb-4"},T("svg",{class:"size-5 text-destructive",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}))),T("h2",{class:"text-lg font-semibold mb-2"},"Unable to connect"),T("p",{class:"text-sm text-muted-foreground mb-6"},g),T(f,{onClick:()=>window.location.reload()},"Try Again"))));if(u)return T("div",{class:"flex items-center justify-center min-h-screen bg-background"},T("div",{class:"text-center"},T(i0,{size:"lg",className:"mx-auto mb-4"}),T("p",{class:"text-sm text-muted-foreground"},"Loading stream...")));return T("div",{class:"flex flex-col h-screen bg-background"},T(w4,null),T("div",{class:"flex flex-1 min-h-0"},T("div",{class:"flex flex-col flex-1 overflow-y-auto"},w?T(T4,{source:"/hls/stream.m3u8",online:w,title:Z||J}):T(z4,{name:J,customText:q,lastDisconnectTime:X,logo:Y?"/logo":void 0}),w&&T($4,null),T("div",{class:"flex-1"}),T(X4,null)),z&&!$&&!B&&T("div",{class:"w-[340px] shrink-0 border-l border-border bg-card"},T(Du,null))),T(Ju,{open:B&&!$&&z,onOpenChange:(H)=>{if(!H)V.toggleChat()}},T(Ig,null,T(Lg,null,"Chat")),T(bg,{className:"h-[70vh]"},T(Du,null))),T(G1,null))}}var ET=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),T("polyline",{points:"9 22 9 12 15 12 15 22"})),dT=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("circle",{cx:"12",cy:"12",r:"3"}),T("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})),oT=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("polygon",{points:"23 7 16 12 23 17 23 7"}),T("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),mT=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})),cT=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),T("circle",{cx:"9",cy:"7",r:"4"}),T("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),T("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})),aT=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),T("polyline",{points:"14 2 14 8 20 8"}),T("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),T("line",{x1:"16",y1:"17",x2:"8",y2:"17"})),lT=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})),tT=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})),nT=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("circle",{cx:"12",cy:"12",r:"2"}),T("path",{d:"M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"})),eT=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),T("polyline",{points:"12 19 5 12 12 5"})),u6=[{heading:"",items:[{id:"overview",label:"Dashboard",icon:ET},{id:"viewers",label:"Viewers",icon:cT}]},{heading:"Configuration",items:[{id:"general",label:"General",icon:dT},{id:"video",label:"Video",icon:oT},{id:"chat",label:"Chat",icon:mT}]},{heading:"Nostr",items:[{id:"nostr",label:"Identity",icon:tT},{id:"relays",label:"Relays",icon:nT}]},{heading:"Advanced",items:[{id:"logs",label:"Logs",icon:aT},{id:"tokens",label:"Access Tokens",icon:lT}]}];class U4 extends S{unsub=null;state={online:!1,name:"",streamTitle:"",viewerCount:0,sidebarOpen:!1};componentDidMount(){this.unsub=V.subscribe(()=>{let u=V.getState();this.setState({online:u.status?.online||!1,name:u.config?.name||"",streamTitle:u.status?.streamTitle||"",viewerCount:u.status?.viewerCount||0})})}componentWillUnmount(){this.unsub?.()}render(){let{activeTab:u,onTabChange:g,children:w}=this.props,{online:z,name:$,viewerCount:B}=this.state;return T("div",{class:"min-h-screen bg-background"},T("header",{class:"sticky top-0 z-50 border-b border-border/30 bg-background/80 backdrop-blur-xl backdrop-saturate-150"},T("div",{class:"flex h-14 items-center justify-between px-4 sm:px-6"},T("div",{class:"flex items-center gap-4"},T("a",{href:"/",class:"flex items-center gap-2.5 shrink-0"},T("span",{class:"text-xl"},"\uD83D\uDD25"),T("span",{class:"text-lg font-bold tracking-tight"},$||"oni")),T("nav",{class:"hidden md:flex items-center gap-0.5"},T("a",{href:"/",class:"inline-flex h-9 items-center justify-center rounded-md px-3 py-2 text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground"},"Stream"),T("a",{href:"https://mycelium.social",target:"_blank",rel:"noopener",class:"inline-flex h-9 items-center justify-center rounded-md px-3 py-2 text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground"},"Mycelium"))),T("div",{class:"flex items-center gap-2"},z&&B>0&&T(v,{variant:"outline",className:"tabular-nums gap-1.5"},T("svg",{class:"size-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},T("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),T("circle",{cx:"12",cy:"12",r:"3"})),B),T(v,{variant:z?"default":"secondary",className:U("gap-1.5",z&&"bg-success text-success-foreground")},T("span",{class:U("size-1.5 rounded-full",z?"bg-current live-dot":"bg-muted-foreground/50")}),z?"Live":"Offline"),T(v1,{className:"hidden sm:inline-flex size-8"})))),T("div",{class:"flex"},T("aside",{class:"hidden md:block w-52 shrink-0 border-r border-border"},T("div",{class:"sticky top-[57px] py-4 px-3 space-y-4 h-[calc(100vh-57px)] overflow-y-auto"},u6.map((J)=>T("div",{key:J.heading},J.heading&&T("p",{class:"px-3 mb-1.5 text-[11px] font-semibold tracking-wider uppercase text-muted-foreground/50"},J.heading),J.items.map((Z)=>{let q=Z.icon,X=u===Z.id;return T("button",{key:Z.id,class:U("w-full flex items-center gap-2.5 px-3 py-2 rounded-md text-sm transition-colors cursor-pointer",X?"bg-accent text-foreground font-medium":"text-muted-foreground hover:text-foreground hover:bg-accent/80"),onClick:()=>g(Z.id)},T("span",{class:U("text-sm",X?"text-foreground":"text-muted-foreground/60")},T(q,null)),Z.label)}))),T(t0,null),T("button",{class:"w-full flex items-center gap-2.5 px-3 py-2 rounded-md text-sm text-muted-foreground hover:text-foreground hover:bg-accent/80 transition-colors cursor-pointer",onClick:()=>{window.location.href="/"}},T(eT,null),"Back to stream"))),T("main",{class:"flex-1 min-w-0"},T("div",{class:"mx-auto max-w-5xl px-5 sm:px-6 lg:px-8 py-6"},w))),T(G1,null))}}var g6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("circle",{cx:"12",cy:"12",r:"10"}),T("polyline",{points:"12 6 12 12 16 14"})),w6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),T("circle",{cx:"9",cy:"7",r:"4"}),T("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),T("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})),T6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),T("polyline",{points:"17 6 23 6 23 12"})),z6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"}),T("rect",{x:"9",y:"9",width:"6",height:"6"}),T("line",{x1:"9",y1:"1",x2:"9",y2:"4"}),T("line",{x1:"15",y1:"1",x2:"15",y2:"4"}),T("line",{x1:"9",y1:"20",x2:"9",y2:"23"}),T("line",{x1:"15",y1:"20",x2:"15",y2:"23"}),T("line",{x1:"20",y1:"9",x2:"23",y2:"9"}),T("line",{x1:"20",y1:"14",x2:"23",y2:"14"}),T("line",{x1:"1",y1:"9",x2:"4",y2:"9"}),T("line",{x1:"1",y1:"14",x2:"4",y2:"14"})),$6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2"}),T("line",{x1:"6",y1:"6",x2:"6",y2:"2"}),T("line",{x1:"10",y1:"6",x2:"10",y2:"2"}),T("line",{x1:"14",y1:"6",x2:"14",y2:"2"}),T("line",{x1:"18",y1:"6",x2:"18",y2:"2"})),B6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("line",{x1:"22",y1:"12",x2:"2",y2:"12"}),T("path",{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"}),T("line",{x1:"6",y1:"16",x2:"6.01",y2:"16"}),T("line",{x1:"10",y1:"16",x2:"10.01",y2:"16"})),J6=()=>T("svg",{class:"size-8 text-muted-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},T("polygon",{points:"5 3 19 12 5 21 5 3"}));class A4 extends S{pollTimer=null;state={status:null,hardware:null,loading:!0,error:null};componentDidMount(){this.loadData(),this.pollTimer=setInterval(()=>this.loadData(),5000)}componentWillUnmount(){if(this.pollTimer)clearInterval(this.pollTimer)}async loadData(){try{let[u,g]=await Promise.all([C.admin.getStatus(this.props.token),C.admin.getHardware(this.props.token).catch(()=>null)]);this.setState({status:u,hardware:g,loading:!1,error:null})}catch(u){this.setState({error:u instanceof Error?u.message:"Failed to load",loading:!1})}}renderOnlineState(u){let g=u?.viewerCount||0,w=u?.sessionPeakViewerCount||0,z=u?.lastConnectTime,$=u?.broadcaster,B=$?.streamDetails;return T("div",{class:"space-y-6"},T("div",{class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},T(M,null,T(O,null,T(o,{className:"flex items-center gap-1.5"},T(g6,null),"Stream started"),T(x,{className:"text-2xl tabular-nums"},z?L0(z):"Just now"))),T(M,null,T(O,null,T(o,{className:"flex items-center gap-1.5"},T(w6,null),"Current viewers"),T(x,{className:"text-2xl tabular-nums"},g))),T(M,null,T(O,null,T(o,{className:"flex items-center gap-1.5"},T(T6,null),"Session peak"),T(x,{className:"text-2xl tabular-nums"},w)))),T("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},T(M,null,T(O,null,T(x,null,"Inbound Stream"),T(o,null,"Details from the broadcasting source")),T(s,null,T("div",{class:"space-y-2"},$?.remoteAddr&&T("div",{class:"flex justify-between text-sm"},T("span",{class:"text-muted-foreground"},"Source"),T("span",{class:"font-mono text-foreground"},$.remoteAddr)),B&&T(c1,null,T(t0,null),T("div",{class:"flex justify-between text-sm"},T("span",{class:"text-muted-foreground"},"Video"),T("span",{class:"text-foreground"},B.videoCodec,"  ",B.videoBitrate," kbps")),T("div",{class:"flex justify-between text-sm"},T("span",{class:"text-muted-foreground"},"Resolution"),T("span",{class:"text-foreground"},B.width,"",B.height," @ ",B.framerate,"fps")),T("div",{class:"flex justify-between text-sm"},T("span",{class:"text-muted-foreground"},"Audio"),T("span",{class:"text-foreground"},B.audioCodec,"  ",B.audioBitrate," kbps"))),!B&&!$?.remoteAddr&&T("p",{class:"text-sm text-muted-foreground italic"},"No stream details available")))),this.renderHardwareCard()))}renderOfflineState(u){let g=u?.lastDisconnectTime;return T("div",{class:"space-y-6"},T(M,null,T(s,{className:"py-12"},T("div",{class:"flex flex-col items-center text-center"},T("div",{class:"flex size-12 items-center justify-center rounded-full bg-muted mb-4"},T(J6,null)),T("h3",{class:"text-lg font-semibold"},"No active stream"),T("p",{class:"text-sm text-muted-foreground mt-1 mb-2 max-w-sm"},"Start streaming to see your dashboard come alive with real-time stats."),g&&T(v,{variant:"outline",className:"mt-1"},"Last stream ended ",L0(g))))),T("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4"},T(M,null,T(O,null,T(x,null,"Broadcasting Software"),T(o,null,"Get started with OBS or Streamlabs")),T(s,null,T("p",{class:"text-sm text-muted-foreground leading-relaxed"},"Point your streaming software to your server's RTMP endpoint to begin broadcasting."))),T(M,null,T(O,null,T(x,null,"Stream Key"),T(o,null,"Found in Video configuration")),T(s,null,T("p",{class:"text-sm text-muted-foreground leading-relaxed"},"Your stream key is in the Video tab. Keep it secret  anyone with the key can stream to your server.")))),this.renderHardwareCard())}renderHardwareCard(){let{hardware:u}=this.state;if(!u)return null;let g=u,w=g.cpu?.[0]?.percent!=null?Math.round(g.cpu[0].percent):g.memory?Math.round(g.memory.percent):0,z=g.memory?Math.round(g.memory.percent):0,$=g.disk?Math.round(g.disk.percent):0;return T(M,null,T(O,null,T(x,null,"Hardware"),T(o,null,"Server resource utilization")),T(s,null,T("div",{class:"space-y-4"},g.cpu?.[0]&&T("div",null,T("div",{class:"flex items-center justify-between mb-2"},T("span",{class:"text-sm text-muted-foreground flex items-center gap-2"},T(z6,null)," ",g.cpu[0].modelName||"CPU"),T("span",{class:U("text-sm font-medium tabular-nums",w>90?"text-destructive":"")},w,"%")),T(Z2,{value:w})),g.memory&&T("div",null,T("div",{class:"flex items-center justify-between mb-2"},T("span",{class:"text-sm text-muted-foreground flex items-center gap-2"},T($6,null)," Memory"),T("span",{class:U("text-sm font-medium tabular-nums",z>90?"text-destructive":"")},z,"%")),T(Z2,{value:z})),g.disk&&T("div",null,T("div",{class:"flex items-center justify-between mb-2"},T("span",{class:"text-sm text-muted-foreground flex items-center gap-2"},T(B6,null)," Disk"),T("span",{class:U("text-sm font-medium tabular-nums",$>90?"text-destructive":"")},$,"%")),T(Z2,{value:$})))))}render(){let{status:u,loading:g,error:w}=this.state;if(g)return T("div",{class:"space-y-4"},T(y,{className:"h-8 w-48"}),T("div",{class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},T(y,{className:"h-24 rounded-xl"}),T(y,{className:"h-24 rounded-xl"}),T(y,{className:"h-24 rounded-xl"})),T("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},T(y,{className:"h-48 rounded-xl"}),T(y,{className:"h-48 rounded-xl"})));if(w)return T(u0,{variant:"destructive"},T(g0,null,w));let z=u,$=z?.online||!1;return T("div",null,T("div",{class:"mb-6"},T("h1",{class:"text-2xl font-bold tracking-tight"},"Dashboard"),T("p",{class:"text-sm text-muted-foreground mt-1"},$?"Your stream is live.":"Server overview and quick actions.")),$?this.renderOnlineState(z):this.renderOfflineState(z))}}class Q4 extends S{state={config:null,loading:!0,saving:!1,error:null,success:null,name:"",title:"",summary:"",logo:"",tags:"",offlineMessage:"",nsfw:!1};componentDidMount(){this.loadConfig()}async loadConfig(){try{let u=await C.admin.getConfig(this.props.token),g=u?.instanceDetails||{};this.setState({config:u,loading:!1,name:g.name||"",title:g.title||"",summary:g.summary||"",logo:g.logo||"",tags:(g.tags||[]).join(", "),offlineMessage:g.offlineMessage||"",nsfw:g.nsfw||!1})}catch(u){this.setState({error:u instanceof Error?u.message:"Failed to load config",loading:!1})}}handleSave=async()=>{this.setState({saving:!0,error:null,success:null});try{let u=this.state.tags.split(",").map((g)=>g.trim()).filter(Boolean);await C.admin.updateConfig(this.props.token,{instanceDetails:{name:this.state.name,title:this.state.title,summary:this.state.summary,logo:this.state.logo,tags:u,offlineMessage:this.state.offlineMessage,nsfw:this.state.nsfw}}),this.setState({saving:!1,success:"Configuration saved."}),t({title:"Configuration saved",description:"Your changes have been applied."}),setTimeout(()=>this.setState({success:null}),3000)}catch(u){let g=u instanceof Error?u.message:"Failed to save";this.setState({saving:!1,error:g}),t({title:"Save failed",description:g,variant:"destructive"})}};handleInput=(u)=>(g)=>{this.setState({[u]:g.target.value})};render(){let{loading:u,saving:g,error:w,success:z,name:$,title:B,summary:J,tags:Z,offlineMessage:q,nsfw:X}=this.state;if(u)return T("div",{class:"max-w-3xl space-y-4"},T(y,{className:"h-8 w-64"}),T(y,{className:"h-4 w-96"}),T(y,{className:"h-64 rounded-xl"}),T(y,{className:"h-32 rounded-xl"}),T(y,{className:"h-20 rounded-xl"}));return T("div",{class:"max-w-3xl space-y-6"},T("div",null,T("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"General Configuration"),T("p",{class:"text-sm text-muted-foreground mt-1"},"Configure your server's public-facing information.")),w&&T(u0,{variant:"destructive"},T(g0,null,w)),z&&T(u0,null,T(g0,{className:"text-success"},z)),T(M,null,T(O,null,T(x,null,"Instance Details"),T(o,null,"Basic information about your streaming server.")),T(s,null,T("div",{class:"space-y-4"},T("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4"},T("div",{class:"space-y-1.5"},T(l,null,"Server Name"),T(n,{type:"text",value:$,onInput:this.handleInput("name"),placeholder:"My Stream"}),T("p",{class:"text-xs text-muted-foreground"},"The public name of your server.")),T("div",{class:"space-y-1.5"},T(l,null,"Stream Title"),T(n,{type:"text",value:B,onInput:this.handleInput("title"),placeholder:"What are you streaming?"}),T("p",{class:"text-xs text-muted-foreground"},"Shown when your stream is live."))),T("div",{class:"space-y-1.5"},T(l,null,"Summary"),T(k1,{className:"min-h-[100px]",value:J,onInput:this.handleInput("summary"),placeholder:"Tell viewers about your stream..."}),T("p",{class:"text-xs text-muted-foreground"},"A brief description shown on your stream page.")),T("div",{class:"space-y-1.5"},T(l,null,"Tags"),T(n,{type:"text",value:Z,onInput:this.handleInput("tags"),placeholder:"gaming, music, art"}),T("p",{class:"text-xs text-muted-foreground"},"Comma-separated tags to help people discover your stream."))))),T(M,null,T(O,null,T(x,null,"Appearance"),T(o,null,"Customize what viewers see when your stream is offline.")),T(s,null,T("div",{class:"space-y-1.5"},T(l,null,"Offline Message"),T(k1,{className:"min-h-[80px]",value:q,onInput:this.handleInput("offlineMessage"),placeholder:"Custom message shown when stream is offline"}),T("p",{class:"text-xs text-muted-foreground"},"Displayed to visitors when you're not streaming.")))),T(M,null,T(O,null,T(x,null,"Content Settings")),T(s,null,T("div",{class:"flex items-center justify-between rounded-lg border p-4"},T("div",null,T("p",{class:"text-sm font-medium"},"NSFW Content"),T("p",{class:"text-sm text-muted-foreground"},"Mark your stream as containing adult content.")),T(p0,{checked:X,onChange:(Y)=>this.setState({nsfw:Y})})))),T("div",{class:"flex items-center gap-4 pt-2 pb-8"},T(f,{onClick:this.handleSave,disabled:g,className:"px-8"},g?"Saving...":"Save Configuration"),z&&T(v,{variant:"outline",className:"text-success border-success/30"},"Saved")))}}var Z6=[{value:1,label:"Low Latency",description:"~4s delay. Best for interactive streams."},{value:2,label:"Medium",description:"~8s delay. Good balance of quality and latency."},{value:3,label:"High Quality",description:"~15s delay. Best video quality, higher latency."},{value:4,label:"Offline",description:"Optimized for VOD-style playback."}],q6=[{value:1,label:"Fastest",description:"Lowest quality, minimal CPU"},{value:2,label:"Faster",description:"Low quality, low CPU"},{value:3,label:"Medium",description:"Balanced quality and CPU"},{value:4,label:"Slower",description:"High quality, more CPU"},{value:5,label:"Slowest",description:"Best quality, maximum CPU"}],X6=[{label:"Source (passthrough)",width:0,height:0},{label:"1080p",width:1920,height:1080},{label:"720p",width:1280,height:720},{label:"480p",width:854,height:480},{label:"360p",width:640,height:360}];var Y6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),T("line",{x1:"5",y1:"12",x2:"19",y2:"12"})),R6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("polyline",{points:"3 6 5 6 21 6"}),T("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})),H6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),T("circle",{cx:"12",cy:"12",r:"3"})),W6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),T("line",{x1:"1",y1:"1",x2:"23",y2:"23"}));var f3=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),T("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}));function F3(){return{videoPassthrough:!1,audioPassthrough:!1,videoBitrate:1200,audioBitrate:128,scaledWidth:1280,scaledHeight:720,framerate:24,cpuUsageLevel:3}}class _4 extends S{state={loading:!0,saving:!1,error:null,latencyLevel:2,variants:[],streamKey:"",showStreamKey:!1,newStreamKey:"",rtmpPort:1935,webPort:8080};componentDidMount(){this.loadConfig()}async loadConfig(){try{let u=await C.admin.getConfig(this.props.token),g=u?.videoSettings||{};this.setState({loading:!1,latencyLevel:g.latencyLevel||2,variants:g.videoQualityVariants||[F3()],streamKey:u?.streamKey||"",rtmpPort:u?.rtmpServerPort||1935,webPort:u?.webServerPort||8080})}catch(u){this.setState({error:u instanceof Error?u.message:"Failed to load config",loading:!1})}}handleSave=async()=>{this.setState({saving:!0,error:null});try{await C.admin.updateConfig(this.props.token,{videoSettings:{latencyLevel:this.state.latencyLevel,videoQualityVariants:this.state.variants}}),this.setState({saving:!1}),t({title:"Video configuration saved",description:"Changes will apply on next stream start."})}catch(u){let g=u instanceof Error?u.message:"Failed to save";this.setState({saving:!1,error:g}),t({title:"Save failed",description:g,variant:"destructive"})}};handleStreamKeyChange=async()=>{let u=this.state.newStreamKey.trim();if(!u)return;try{await C.admin.setStreamKey(this.props.token,u),this.setState({streamKey:u,newStreamKey:""}),t({title:"Stream key updated"})}catch(g){t({title:"Failed to update stream key",variant:"destructive"})}};updateVariant(u,g){let w=[...this.state.variants];w[u]={...w[u],...g},this.setState({variants:w})}addVariant=()=>{this.setState({variants:[...this.state.variants,F3()]})};removeVariant=(u)=>{if(this.state.variants.length<=1)return;let g=this.state.variants.filter((w,z)=>z!==u);this.setState({variants:g})};copyToClipboard(u){navigator.clipboard.writeText(u).then(()=>{t({title:"Copied to clipboard"})}).catch(()=>{})}renderVariantCard(u,g){let w=u.videoPassthrough,z=w?"Source":u.scaledWidth===0?"Source":`${u.scaledWidth}${u.scaledHeight}`;return T(M,{key:g},T(O,null,T("div",{class:"flex items-center justify-between"},T("div",{class:"flex items-center gap-2"},T(x,null,"Output #",g+1),T(v,{variant:"secondary"},z),w&&T(v,{variant:"outline"},"Passthrough")),this.state.variants.length>1&&T(f,{variant:"ghost",size:"icon-sm",className:"text-destructive/60 hover:text-destructive hover:bg-destructive/10",onClick:()=>this.removeVariant(g)},T(R6,null)))),T(s,null,T("div",{class:"space-y-6"},T("div",{class:"flex items-center justify-between rounded-lg border p-4"},T("div",{class:"pr-4"},T("p",{class:"text-sm font-medium"},"Video Passthrough"),T("p",{class:"text-sm text-muted-foreground mt-0.5"},"Re-use the inbound stream without re-encoding. Lowest CPU.")),T(p0,{checked:u.videoPassthrough,onChange:($)=>this.updateVariant(g,{videoPassthrough:$})})),!u.videoPassthrough&&T(c1,null,T("div",{class:"space-y-3"},T(l,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Resolution"),T("div",{class:"flex flex-wrap gap-2"},X6.map(($)=>{let B=u.scaledWidth===$.width&&u.scaledHeight===$.height;return T("button",{key:$.label,class:U("pill-btn px-4 py-2 rounded-lg text-xs font-medium cursor-pointer",B&&"active"),onClick:()=>this.updateVariant(g,{scaledWidth:$.width,scaledHeight:$.height})},$.label)})),u.scaledWidth>0&&T("div",{class:"flex gap-3 mt-1"},T("div",{class:"space-y-1.5"},T(l,{className:"text-[11px] text-muted-foreground"},"Width"),T(n,{type:"number",className:"h-9 w-28 text-xs tabular-nums",value:String(u.scaledWidth),onInput:($)=>this.updateVariant(g,{scaledWidth:parseInt($.target.value)||0})})),T("div",{class:"space-y-1.5"},T(l,{className:"text-[11px] text-muted-foreground"},"Height"),T(n,{type:"number",className:"h-9 w-28 text-xs tabular-nums",value:String(u.scaledHeight),onInput:($)=>this.updateVariant(g,{scaledHeight:parseInt($.target.value)||0})})))),T("div",{class:"section-divider"}),T("div",{class:"space-y-3"},T("div",{class:"flex items-center justify-between"},T(l,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Video Bitrate"),T(v,{variant:"outline",className:"tabular-nums font-mono text-xs"},u.videoBitrate," kbps")),T("input",{type:"range",min:"200",max:"6000",step:"100",value:String(u.videoBitrate),onInput:($)=>this.updateVariant(g,{videoBitrate:parseInt($.target.value)})}),T("div",{class:"flex justify-between text-[10px] text-muted-foreground/40 px-1"},T("span",null,"200 kbps"),T("span",null,"6000 kbps"))),T("div",{class:"space-y-3"},T(l,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Framerate"),T("div",{class:"flex flex-wrap gap-2"},[24,30,60].map(($)=>{let B=u.framerate===$;return T("button",{key:$,class:U("pill-btn px-4 py-2 rounded-lg text-xs font-medium cursor-pointer",B&&"active"),onClick:()=>this.updateVariant(g,{framerate:$})},$," fps")}),T(n,{type:"number",className:"h-9 w-24 text-xs",placeholder:"Custom",value:[24,30,60].includes(u.framerate)?"":String(u.framerate),onInput:($)=>{let B=parseInt($.target.value);if(B>0)this.updateVariant(g,{framerate:B})}}))),T("div",{class:"section-divider"}),T("div",{class:"space-y-3"},T(l,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Encoding Speed"),T("div",{class:"grid grid-cols-1 sm:grid-cols-5 gap-2"},q6.map(($)=>{let B=u.cpuUsageLevel===$.value;return T("button",{key:$.value,class:U("radio-card rounded-lg px-3 py-3 text-center cursor-pointer",B&&"active"),onClick:()=>this.updateVariant(g,{cpuUsageLevel:$.value})},T("p",{class:U("text-xs font-semibold",B?"text-primary":"text-foreground")},$.label),T("p",{class:"text-[10px] text-muted-foreground mt-0.5 leading-tight"},$.description.split(",")[0]))})))),T("div",{class:"section-divider"}),T("div",{class:"flex items-center justify-between rounded-xl border border-border bg-muted/20 p-4"},T("div",{class:"pr-4"},T("p",{class:"text-sm font-medium text-foreground"},"Audio Passthrough"),T("p",{class:"text-xs text-muted-foreground mt-0.5"},"Re-use the inbound audio stream without re-encoding.")),T(p0,{checked:u.audioPassthrough,onChange:($)=>this.updateVariant(g,{audioPassthrough:$})})),!u.audioPassthrough&&T("div",{class:"space-y-3"},T("div",{class:"flex items-center justify-between"},T(l,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Audio Bitrate"),T(v,{variant:"outline",className:"tabular-nums font-mono text-xs"},u.audioBitrate," kbps")),T("input",{type:"range",min:"64",max:"320",step:"16",value:String(u.audioBitrate),onInput:($)=>this.updateVariant(g,{audioBitrate:parseInt($.target.value)})}),T("div",{class:"flex justify-between text-[10px] text-muted-foreground/40 px-1"},T("span",null,"64 kbps"),T("span",null,"320 kbps"))))))}render(){let{loading:u,saving:g,error:w,latencyLevel:z,variants:$,streamKey:B,showStreamKey:J,newStreamKey:Z,rtmpPort:q}=this.state;if(u)return T("div",{class:"max-w-3xl space-y-4"},T(y,{className:"h-8 w-64"}),T(y,{className:"h-4 w-96"}),T(y,{className:"h-48 rounded-xl"}),T(y,{className:"h-64 rounded-xl"}));return T("div",{class:"max-w-3xl space-y-6"},T("div",null,T("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Video Configuration"),T("p",{class:"text-sm text-muted-foreground mt-1"},"Configure video output quality, latency, and stream key.")),w&&T(u0,{variant:"destructive"},T(g0,null,w)),T(M,null,T(O,null,T(x,null,"Stream Key"),T(o,null,"Authenticate with your broadcasting software.")),T(s,{className:"space-y-4"},T("div",{class:"flex items-center gap-2"},T("div",{class:"flex-1 relative"},T(n,{type:J?"text":"password",value:B,readOnly:!0,className:"pr-20 font-mono text-xs"}),T("div",{class:"absolute right-1 top-1/2 -translate-y-1/2 flex gap-0.5"},T(f,{variant:"ghost",size:"icon-sm",className:"size-7",onClick:()=>this.setState({showStreamKey:!J})},J?T(W6,null):T(H6,null)),T(f,{variant:"ghost",size:"icon-sm",className:"size-7",onClick:()=>this.copyToClipboard(B)},T(f3,null))))),T("div",{class:"rounded-xl border border-border bg-muted/30 p-4"},T("p",{class:"text-[11px] text-muted-foreground mb-2 font-semibold uppercase tracking-wider"},"RTMP URL"),T("div",{class:"flex items-center gap-2"},T("code",{class:"text-xs text-foreground font-mono bg-background px-3 py-1.5 rounded-lg border border-border flex-1 truncate"},"rtmp://your-server:",q,"/live"),T(f,{variant:"outline",size:"icon-sm",className:"shrink-0",onClick:()=>this.copyToClipboard(`rtmp://your-server:${q}/live`)},T(f3,null)))),T("div",{class:"section-divider"}),T("div",{class:"space-y-2"},T(l,{className:"text-xs font-semibold text-muted-foreground"},"Change Stream Key"),T("div",{class:"flex gap-2"},T(n,{type:"text",className:"flex-1 text-xs",placeholder:"Enter new stream key",value:Z,onInput:(X)=>this.setState({newStreamKey:X.target.value})}),T(f,{size:"sm",onClick:this.handleStreamKeyChange,disabled:!Z.trim()},"Update"))))),T(M,null,T(O,null,T(x,null,"Latency"),T(o,null,"Lower latency is better for interactive streams. Higher latency produces better video quality.")),T(s,null,T("div",{class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Z6.map((X)=>{let Y=z===X.value;return T("button",{key:X.value,class:U("radio-card rounded-xl px-4 py-4 text-left cursor-pointer",Y&&"active"),onClick:()=>this.setState({latencyLevel:X.value})},T("div",{class:"flex items-center justify-between mb-1"},T("p",{class:U("text-sm font-semibold",Y?"text-primary":"text-foreground")},X.label),Y&&T("span",{class:"size-2.5 rounded-full bg-primary ring-2 ring-primary/30 shrink-0"})),T("p",{class:"text-xs text-muted-foreground leading-relaxed"},X.description))})))),T("div",{class:"flex items-center justify-between"},T("div",null,T("h2",{class:"text-lg font-semibold text-foreground"},"Output Variants"),T("p",{class:"text-xs text-muted-foreground mt-0.5"},"Each variant creates a separate quality option for viewers.")),T(f,{variant:"outline",size:"sm",onClick:this.addVariant,className:"gap-1.5"},T(Y6,null),"Add Variant")),T("div",{class:"space-y-4"},$.map((X,Y)=>this.renderVariantCard(X,Y))),T("div",{class:"flex items-center gap-4 pt-2 pb-8"},T(f,{onClick:this.handleSave,disabled:g,className:"px-8"},g?"Saving...":"Save Video Configuration"),T("p",{class:"text-xs text-muted-foreground"},"Changes take effect on next stream start.")))}}class b4 extends S{state={loading:!0,error:null,chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,chatSpamProtectionEnabled:!0,chatSlurFilterEnabled:!0,forbiddenUsernames:"",suggestedUsernames:"",hideViewerCount:!1,systemMessage:"",sendingMessage:!1};componentDidMount(){this.loadConfig()}async loadConfig(){try{let u=await C.admin.getConfig(this.props.token);this.setState({loading:!1,chatDisabled:u?.chatDisabled||!1,chatJoinMessagesEnabled:u?.chatJoinMessagesEnabled??!0,chatEstablishedUserMode:u?.chatEstablishedUserMode||!1,chatSpamProtectionEnabled:u?.chatSpamProtectionEnabled??!0,chatSlurFilterEnabled:u?.chatSlurFilterEnabled??!0,forbiddenUsernames:(u?.forbiddenUsernames||[]).join(`
`),suggestedUsernames:(u?.suggestedUsernames||[]).join(`
`),hideViewerCount:u?.hideViewerCount||!1})}catch(u){this.setState({error:u instanceof Error?u.message:"Failed to load config",loading:!1})}}async toggleSetting(u,g,w){try{await u(this.props.token,w),this.setState({[g]:w}),t({title:"Setting updated"})}catch(z){t({title:"Failed to update setting",variant:"destructive"})}}handleSaveForbiddenUsernames=async()=>{try{let u=this.state.forbiddenUsernames.split(`
`).map((g)=>g.trim()).filter(Boolean);await C.admin.updateForbiddenUsernames(this.props.token,u),t({title:"Forbidden usernames updated"})}catch{t({title:"Failed to save",variant:"destructive"})}};handleSaveSuggestedUsernames=async()=>{try{let u=this.state.suggestedUsernames.split(`
`).map((g)=>g.trim()).filter(Boolean);await C.admin.updateSuggestedUsernames(this.props.token,u),t({title:"Suggested usernames updated"})}catch{t({title:"Failed to save",variant:"destructive"})}};handleSendSystemMessage=async()=>{let u=this.state.systemMessage.trim();if(!u)return;this.setState({sendingMessage:!0});try{await C.admin.sendSystemMessage(this.props.token,u),this.setState({systemMessage:"",sendingMessage:!1}),t({title:"System message sent"})}catch{this.setState({sendingMessage:!1}),t({title:"Failed to send message",variant:"destructive"})}};renderToggle(u,g,w,z,$){return T("div",{class:"flex items-center justify-between rounded-xl border border-border bg-muted/20 p-4"},T("div",{class:"pr-4"},T("p",{class:"text-sm font-medium text-foreground"},u),T("p",{class:"text-xs text-muted-foreground mt-0.5 leading-relaxed"},g)),T(p0,{checked:w,onChange:(B)=>this.toggleSetting($,z,B)}))}render(){let{loading:u,error:g,chatDisabled:w,chatJoinMessagesEnabled:z,chatEstablishedUserMode:$,chatSpamProtectionEnabled:B,chatSlurFilterEnabled:J,forbiddenUsernames:Z,suggestedUsernames:q,hideViewerCount:X,systemMessage:Y,sendingMessage:R}=this.state;if(u)return T("div",{class:"max-w-3xl space-y-4"},T(y,{className:"h-8 w-64"}),T(y,{className:"h-4 w-96"}),T(y,{className:"h-48 rounded-xl"}),T(y,{className:"h-48 rounded-xl"}));return T("div",{class:"max-w-3xl space-y-6"},T("div",null,T("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Chat Configuration"),T("p",{class:"text-sm text-muted-foreground mt-1"},"Configure chat settings, moderation, and spam protection.")),g&&T(u0,{variant:"destructive"},T(g0,null,g)),T(M,null,T(O,null,T(x,null,"Send System Message"),T(o,null,"Broadcast to all connected chat users.")),T(s,null,T("div",{class:"flex gap-2"},T(n,{className:"flex-1 text-xs",placeholder:"Type a system message...",value:Y,onInput:(H)=>this.setState({systemMessage:H.target.value}),onKeyDown:(H)=>{if(H.key==="Enter")this.handleSendSystemMessage()}}),T(f,{size:"sm",onClick:this.handleSendSystemMessage,disabled:!Y.trim()||R},R?"Sending...":"Send")))),T(M,null,T(O,null,T(x,null,"General")),T(s,null,T("div",{class:"space-y-3"},this.renderToggle("Disable Chat","Completely hide the chat from your stream page.",w,"chatDisabled",C.admin.updateChatDisabled),this.renderToggle("Show Join Messages","Display a message when users join or leave the chat.",z,"chatJoinMessagesEnabled",C.admin.updateChatJoinMessages),this.renderToggle("Hide Viewer Count","Hide the number of current viewers from the public page.",X,"hideViewerCount",C.admin.updateHideViewerCount)))),T(M,null,T(O,null,T(x,null,"Moderation"),T(o,null,"Protect your chat from spam and unwanted content.")),T(s,null,T("div",{class:"space-y-3"},this.renderToggle("Established User Mode","Only allow users who have been registered for a while to chat. New users will need to wait before they can send messages.",$,"chatEstablishedUserMode",C.admin.updateChatEstablishedMode),this.renderToggle("Spam Protection","Automatically detect and block spam messages, including repeated messages and excessive links.",B,"chatSpamProtectionEnabled",C.admin.updateChatSpamProtection),this.renderToggle("Slur Filter","Automatically filter messages containing known slurs and offensive language.",J,"chatSlurFilterEnabled",C.admin.updateChatSlurFilter)))),T(M,null,T(O,null,T(x,null,"Usernames"),T(o,null,"Manage forbidden and suggested usernames for chat.")),T(s,null,T("div",{class:"space-y-5"},T("div",{class:"space-y-2"},T(l,null,"Forbidden Usernames"),T("p",{class:"text-sm text-muted-foreground"},"Users will not be able to register with these names. One per line."),T(k1,{className:"min-h-[80px] text-xs font-mono",placeholder:`admin
moderator
system`,value:Z,onInput:(H)=>this.setState({forbiddenUsernames:H.target.value})}),T(f,{size:"sm",variant:"secondary",onClick:this.handleSaveForbiddenUsernames},"Save Forbidden List")),T(t0,null),T("div",{class:"space-y-2"},T(l,null,"Suggested Usernames"),T("p",{class:"text-sm text-muted-foreground"},"Suggested names shown to new users when registering. One per line."),T(k1,{className:"min-h-[80px] text-xs font-mono",placeholder:`Viewer
Chatter
Lurker`,value:q,onInput:(H)=>this.setState({suggestedUsernames:H.target.value})}),T(f,{size:"sm",variant:"secondary",onClick:this.handleSaveSuggestedUsernames},"Save Suggested List"))))))}}var K6=()=>T("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),T("circle",{cx:"9",cy:"7",r:"4"}),T("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),T("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})),U6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("polyline",{points:"23 4 23 10 17 10"}),T("polyline",{points:"1 20 1 14 7 14"}),T("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})),A6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("circle",{cx:"12",cy:"12",r:"10"}),T("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),T("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})),Q6=()=>T("svg",{class:"size-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("circle",{cx:"12",cy:"12",r:"10"}),T("polyline",{points:"12 6 12 12 16 14"})),_6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),T("circle",{cx:"12",cy:"7",r:"4"}));class I4 extends S{pollTimer=null;state={loading:!0,error:null,viewers:[],chatClients:[],pollTimer:null};componentDidMount(){this.loadData(),this.pollTimer=setInterval(()=>this.loadData(),1e4)}componentWillUnmount(){if(this.pollTimer)clearInterval(this.pollTimer)}async loadData(){try{let[u,g]=await Promise.all([C.admin.getViewers(this.props.token).catch(()=>[]),C.admin.getConnectedClients(this.props.token).catch(()=>[])]);this.setState({loading:!1,error:null,viewers:Array.isArray(u)?u:[],chatClients:Array.isArray(g)?g:[]})}catch(u){this.setState({error:u instanceof Error?u.message:"Failed to load viewers",loading:!1})}}handleRefresh=()=>{this.setState({loading:!0}),this.loadData()};render(){let{loading:u,error:g,viewers:w,chatClients:z}=this.state,$=w.length,B=z.length;if(u&&w.length===0)return T("div",{class:"space-y-4"},T(y,{className:"h-8 w-48"}),T(y,{className:"h-4 w-96"}),T("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-3"},T(y,{className:"h-20 rounded-xl"}),T(y,{className:"h-20 rounded-xl"})),T(y,{className:"h-64 rounded-xl"}));return T("div",null,T("div",{class:"flex items-center justify-between mb-6"},T("div",null,T("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Viewers"),T("p",{class:"text-sm text-muted-foreground mt-1"},"Connected viewers and chat participants.")),T(f,{variant:"secondary",size:"sm",onClick:this.handleRefresh},T(U6,null),"Refresh")),g&&T(u0,{variant:"destructive",className:"mb-4"},T(g0,null,g)),T("div",{class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6"},T(M,null,T(O,null,T(o,null,"Stream Viewers"),T(x,{className:"text-2xl tabular-nums"},$))),T(M,null,T(O,null,T(o,null,"Chat Participants"),T(x,{className:"text-2xl tabular-nums"},B)))),T(M,{className:"mb-4"},T(O,null,T(x,null,"Connected Viewers")),T(s,null,$===0?T("div",{class:"text-center py-8"},T("div",{class:"size-12 rounded-full bg-muted/30 flex items-center justify-center mx-auto mb-3"},T(K6,null)),T("p",{class:"text-sm text-muted-foreground"},"No viewers connected"),T("p",{class:"text-xs text-muted-foreground mt-1"},"Viewers will appear here when someone watches your stream.")):T("div",{class:"rounded-lg border border-border/40 overflow-hidden"},T("div",{class:"grid grid-cols-12 gap-2 px-3 py-2 bg-muted/30 text-[10px] uppercase tracking-wider text-muted-foreground/50 font-semibold"},T("div",{class:"col-span-4"},"User"),T("div",{class:"col-span-3"},"Connected"),T("div",{class:"col-span-3"},"Location"),T("div",{class:"col-span-2"},"Client")),w.map((J,Z)=>T("div",{key:J.id||J.clientID||Z,class:U("grid grid-cols-12 gap-2 px-3 py-2.5 items-center",Z%2===0?"bg-background":"bg-muted/10")},T("div",{class:"col-span-4 flex items-center gap-2 min-w-0"},T(_6,null),T("div",{class:"min-w-0"},T("p",{class:"text-xs text-foreground truncate"},J.displayName||J.username||"Anonymous"),J.messageCount!=null&&J.messageCount>0&&T("p",{class:"text-[10px] text-muted-foreground"},J.messageCount," messages"))),T("div",{class:"col-span-3 flex items-center gap-1 text-xs text-muted-foreground"},T(Q6,null),J.connectedAt?L0(J.connectedAt):J.createdAt?L0(J.createdAt):""),T("div",{class:"col-span-3 flex items-center gap-1 text-xs text-muted-foreground"},T(A6,null),T("span",{class:"truncate"},J.geo||"")),T("div",{class:"col-span-2"},T("span",{class:"text-[10px] text-muted-foreground/60 truncate block"},J.userAgent?b6(J.userAgent):""))))))),T(M,null,T(O,null,T(x,null,"Chat Participants")),T(s,null,B===0?T("div",{class:"text-center py-6"},T("p",{class:"text-sm text-muted-foreground"},"No chat participants")):T("div",{class:"flex flex-wrap gap-2"},z.map((J,Z)=>T(v,{key:J.id||Z,variant:"secondary",className:"gap-1.5 py-1"},T("span",{class:"size-2 rounded-full bg-success"}),J.displayName||J.username||"Anonymous"))))),T("p",{class:"text-[10px] text-muted-foreground/30 mt-4 text-center"},"Auto-refreshes every 10 seconds"))}}function b6(u){if(u.includes("Firefox"))return"Firefox";if(u.includes("Chrome"))return"Chrome";if(u.includes("Safari"))return"Safari";if(u.includes("Edge"))return"Edge";if(u.includes("OBS"))return"OBS";if(u.includes("VLC"))return"VLC";if(u.length>20)return u.slice(0,20)+"";return u}var I6=()=>T("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),T("polyline",{points:"14 2 14 8 20 8"}),T("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),T("line",{x1:"16",y1:"17",x2:"8",y2:"17"})),L6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("polyline",{points:"23 4 23 10 17 10"}),T("polyline",{points:"1 20 1 14 7 14"}),T("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})),k6=()=>T("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),T("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),T("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"}));class L4 extends S{pollTimer=null;scrollRef=null;state={loading:!0,error:null,logs:[],warnings:[],activeView:"logs",filterLevel:"all",autoScroll:!0,search:""};componentDidMount(){this.loadData(),this.pollTimer=setInterval(()=>this.loadData(),5000)}componentWillUnmount(){if(this.pollTimer)clearInterval(this.pollTimer)}componentDidUpdate(u,g){if(this.state.autoScroll&&this.scrollRef&&g.logs.length!==this.state.logs.length)this.scrollRef.scrollTop=this.scrollRef.scrollHeight}async loadData(){try{let[u,g]=await Promise.all([C.admin.getLogEntries(this.props.token).catch(()=>[]),C.admin.getWarnings(this.props.token).catch(()=>[])]);this.setState({loading:!1,error:null,logs:Array.isArray(u)?u:[],warnings:Array.isArray(g)?g:[]})}catch(u){this.setState({error:u instanceof Error?u.message:"Failed to load logs",loading:!1})}}handleRefresh=()=>{this.loadData()};getFilteredLogs(){let{logs:u,warnings:g,activeView:w,filterLevel:z,search:$}=this.state,B=w==="warnings"?g:u;if(z!=="all")B=B.filter((J)=>J.level===z);if($.trim()){let J=$.toLowerCase();B=B.filter((Z)=>Z.message?.toLowerCase().includes(J))}return B}getLevelColor(u){switch(u?.toLowerCase()){case"error":return"text-destructive";case"warn":case"warning":return"text-warning";case"info":return"text-blue-400";case"debug":return"text-muted-foreground/50";default:return"text-foreground"}}getLevelBadge(u){let w={error:"bg-destructive/10 text-destructive border-destructive/20",warn:"bg-warning/10 text-warning border-warning/20",warning:"bg-warning/10 text-warning border-warning/20",info:"bg-blue-500/10 text-blue-400 border-blue-500/20",debug:"bg-muted text-muted-foreground border-border/50"}[u?.toLowerCase()]||"bg-muted text-muted-foreground border-border/50";return T("span",{class:U("inline-flex items-center px-1.5 py-0 rounded text-[9px] font-mono uppercase border",w)},(u||"log").slice(0,4))}formatLogTime(u){try{return new Date(u).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return u||""}}render(){let{loading:u,error:g,activeView:w,filterLevel:z,autoScroll:$,search:B,warnings:J}=this.state,Z=this.getFilteredLogs();if(u&&this.state.logs.length===0)return T("div",{class:"space-y-4"},T(y,{className:"h-8 w-48"}),T(y,{className:"h-4 w-96"}),T(y,{className:"h-96 rounded-xl"}));return T("div",null,T("div",{class:"flex items-center justify-between mb-6"},T("div",null,T("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Logs"),T("p",{class:"text-sm text-muted-foreground mt-1"},"Server logs and warnings.")),T("div",{class:"flex items-center gap-2"},T(f,{variant:"secondary",size:"sm",onClick:this.handleRefresh},T(L6,null),"Refresh"))),g&&T(u0,{variant:"destructive",className:"mb-4"},T(g0,null,g)),T("div",{class:"flex items-center gap-1 mb-4 p-1 bg-muted/30 rounded-lg w-fit"},T("button",{class:U("px-3 py-1.5 rounded-md text-xs font-medium transition-colors",w==="logs"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),onClick:()=>this.setState({activeView:"logs"})},"All Logs"),T("button",{class:U("px-3 py-1.5 rounded-md text-xs font-medium transition-colors flex items-center gap-1.5",w==="warnings"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),onClick:()=>this.setState({activeView:"warnings"})},T(k6,null),"Warnings",J.length>0&&T(v,{variant:"destructive",className:"text-[9px] px-1 py-0 h-4"},J.length))),T("div",{class:"flex items-center gap-3 mb-3"},T("div",{class:"flex items-center gap-1"},["all","error","warn","info","debug"].map((q)=>T("button",{key:q,class:U("px-2 py-1 rounded text-[10px] font-medium transition-colors uppercase",z===q?"bg-primary/15 text-primary":"text-muted-foreground/50 hover:text-muted-foreground hover:bg-muted/30"),onClick:()=>this.setState({filterLevel:q})},q))),T(t0,{orientation:"vertical",className:"h-5"}),T("input",{type:"text",class:"h-7 px-2 text-xs bg-background border border-border/40 rounded-md text-foreground placeholder:text-muted-foreground/40 flex-1 max-w-xs outline-none focus:border-primary/50",placeholder:"Search logs...",value:B,onInput:(q)=>this.setState({search:q.target.value})}),T("label",{class:"flex items-center gap-1.5 text-[10px] text-muted-foreground cursor-pointer select-none"},T("input",{type:"checkbox",checked:$,class:"accent-primary",onChange:(q)=>this.setState({autoScroll:q.target.checked})}),"Auto-scroll")),T("div",{ref:(q)=>{this.scrollRef=q},class:"rounded-xl border border-border bg-card/40 overflow-hidden"},T("div",{class:"overflow-y-auto font-mono text-[11px] leading-relaxed",style:{"max-height":"600px"}},Z.length===0?T("div",{class:"text-center py-12"},T("div",{class:"size-12 rounded-full bg-muted/30 flex items-center justify-center mx-auto mb-3"},T(I6,null)),T("p",{class:"text-sm text-muted-foreground"},"No log entries"),T("p",{class:"text-[11px] text-muted-foreground/50 mt-1"},B?"Try a different search term.":"Logs will appear here as the server runs.")):Z.map((q,X)=>T("div",{key:X,class:U("flex items-start gap-2 px-3 py-1.5 hover:bg-muted/20 transition-colors border-b border-border/10",q.level==="error"&&"bg-destructive/5",q.level==="warn"||q.level==="warning"?"bg-warning/5":"")},T("span",{class:"text-muted-foreground/40 shrink-0 w-16 text-right tabular-nums"},this.formatLogTime(q.time)),T("span",{class:"shrink-0 mt-0.5"},this.getLevelBadge(q.level)),T("span",{class:U("flex-1 break-all",this.getLevelColor(q.level))},q.message))))),T("p",{class:"text-[10px] text-muted-foreground/30 mt-3 text-center"},"Showing ",Z.length," entries  Auto-refreshes every 5 seconds"))}}var f6=()=>T("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})),F6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),T("line",{x1:"5",y1:"12",x2:"19",y2:"12"})),j6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("polyline",{points:"3 6 5 6 21 6"}),T("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})),j3=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),T("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})),P6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),T("circle",{cx:"12",cy:"12",r:"3"})),S6=()=>T("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},T("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),T("line",{x1:"1",y1:"1",x2:"23",y2:"23"}));class k4 extends S{state={loading:!0,error:null,tokens:[],showCreate:!1,newTokenName:"",creating:!1,newlyCreatedToken:null,revealedTokens:new Set,confirmDelete:null};componentDidMount(){this.loadTokens()}async loadTokens(){try{let u=await C.admin.getAccessTokens(this.props.token);this.setState({loading:!1,tokens:Array.isArray(u)?u:[]})}catch(u){this.setState({error:u instanceof Error?u.message:"Failed to load tokens",loading:!1})}}handleCreate=async()=>{let u=this.state.newTokenName.trim();if(!u)return;this.setState({creating:!0});try{let g=await C.admin.createAccessToken(this.props.token,{name:u,scopes:[]});this.setState({creating:!1,showCreate:!1,newTokenName:"",newlyCreatedToken:g?.accessToken||null}),this.loadTokens(),t({title:"Access token created"})}catch(g){this.setState({creating:!1}),t({title:"Failed to create token",variant:"destructive"})}};handleDelete=async(u)=>{try{await C.admin.deleteAccessToken(this.props.token,u),this.setState({confirmDelete:null}),this.loadTokens(),t({title:"Token deleted"})}catch{t({title:"Failed to delete token",variant:"destructive"})}};toggleReveal(u){let g=new Set(this.state.revealedTokens);if(g.has(u))g.delete(u);else g.add(u);this.setState({revealedTokens:g})}copyToClipboard(u){navigator.clipboard.writeText(u).then(()=>{t({title:"Copied to clipboard"})}).catch(()=>{})}maskToken(u){if(u.length<=8)return"";return u.slice(0,4)+""+u.slice(-4)}render(){let{loading:u,error:g,tokens:w,showCreate:z,newTokenName:$,creating:B,newlyCreatedToken:J,revealedTokens:Z,confirmDelete:q}=this.state;if(u)return T("div",{class:"space-y-4"},T(y,{className:"h-8 w-48"}),T(y,{className:"h-4 w-96"}),T(y,{className:"h-32 rounded-xl"}),T(y,{className:"h-32 rounded-xl"}));return T("div",{class:"max-w-3xl"},T("div",{class:"flex items-center justify-between mb-6"},T("div",null,T("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Access Tokens"),T("p",{class:"text-sm text-muted-foreground mt-1"},"Manage API access tokens for integrations and external tools.")),T(f,{variant:z?"outline":"secondary",size:"sm",onClick:()=>this.setState({showCreate:!z,newlyCreatedToken:null})},z?"Cancel":T("span",{class:"flex items-center gap-1.5"},T(F6,null)," New Token"))),g&&T(u0,{variant:"destructive",className:"mb-4"},T(g0,null,g)),J&&T(u0,{className:"mb-4 border-success/30 bg-success/5"},T(g0,null,T("div",{class:"space-y-2"},T("p",{class:"text-sm font-medium text-success"},"Token created successfully!"),T("p",{class:"text-sm text-muted-foreground"},"Copy this token now  you won't be able to see it again."),T("div",{class:"flex items-center gap-2"},T("code",{class:"text-xs font-mono bg-background px-2 py-1 rounded border border-border/40 flex-1 truncate text-foreground"},J),T(f,{variant:"secondary",size:"icon-sm",className:"shrink-0",onClick:()=>this.copyToClipboard(J)},T(j3,null)))))),z&&T(M,{className:"mb-4"},T(O,null,T(x,null,"Create Access Token"),T(o,null,"Create a new token for API access or integrations.")),T(s,null,T("div",{class:"space-y-3"},T("div",{class:"space-y-1.5"},T(l,null,"Token Name"),T(n,{type:"text",placeholder:"e.g. OBS Integration, Bot Access",value:$,onInput:(X)=>this.setState({newTokenName:X.target.value}),onKeyDown:(X)=>{if(X.key==="Enter")this.handleCreate()}}),T("p",{class:"text-xs text-muted-foreground"},"A descriptive name to identify this token.")),T(f,{onClick:this.handleCreate,disabled:!$.trim()||B},B?"Creating...":"Create Token")))),w.length===0?T(M,null,T(s,{className:"py-12"},T("div",{class:"flex flex-col items-center text-center"},T("div",{class:"size-14 rounded-full bg-muted/30 flex items-center justify-center mb-3"},T(f6,null)),T("p",{class:"text-sm font-medium text-foreground mb-1"},"No access tokens"),T("p",{class:"text-xs text-muted-foreground max-w-sm"},"Create an access token to allow external tools and integrations to interact with your server.")))):T("div",{class:"space-y-3"},w.map((X)=>{let Y=Z.has(X.accessToken),R=q===X.accessToken;return T(M,{key:X.accessToken},T(s,{className:"p-5"},T("div",{class:"flex items-start justify-between gap-3"},T("div",{class:"min-w-0 flex-1"},T("div",{class:"flex items-center gap-2 mb-1"},T("p",{class:"text-sm font-medium text-foreground"},X.displayName||"Unnamed Token"),X.scopes&&X.scopes.length>0&&X.scopes.map((H)=>T(v,{key:H,variant:"secondary",className:"text-[9px] px-1.5 py-0"},H.replace(/_/g," ")))),T("div",{class:"flex items-center gap-2 mb-2"},T("code",{class:"text-[11px] font-mono text-muted-foreground bg-muted/30 px-2 py-0.5 rounded"},Y?X.accessToken:this.maskToken(X.accessToken)),T("button",{class:"text-muted-foreground/50 hover:text-muted-foreground transition-colors",onClick:()=>this.toggleReveal(X.accessToken)},Y?T(S6,null):T(P6,null)),T("button",{class:"text-muted-foreground/50 hover:text-muted-foreground transition-colors",onClick:()=>this.copyToClipboard(X.accessToken)},T(j3,null))),T("div",{class:"flex items-center gap-3 text-[10px] text-muted-foreground/50"},X.createdAt&&T("span",null,"Created ",L0(X.createdAt)),X.lastUsed&&T("span",null,"Last used ",L0(X.lastUsed)))),T("div",{class:"shrink-0"},R?T("div",{class:"flex items-center gap-1.5"},T(f,{variant:"destructive",size:"xs",onClick:()=>this.handleDelete(X.accessToken)},"Confirm"),T(f,{variant:"ghost",size:"xs",onClick:()=>this.setState({confirmDelete:null})},"Cancel")):T(f,{variant:"ghost",size:"icon-sm",className:"text-destructive/60 hover:text-destructive hover:bg-destructive/10",onClick:()=>this.setState({confirmDelete:X.accessToken})},T(j6,null))))))})),T("div",{class:"mt-6"},T("p",{class:"text-sm text-muted-foreground leading-relaxed"},"Access tokens allow external applications to interact with your Oni server's API. Tokens with admin access can modify server configuration. Keep your tokens secure and revoke any that are no longer needed.")))}}class f4 extends S{unsubManager=null;unsubRelay=null;state={manager:h1(),relayState:pg(),newRelayUrl:"",newProfileName:"",showAddProfile:!1};componentDidMount(){this.unsubManager=$3(()=>{this.setState({manager:h1()})}),this.unsubRelay=u3(()=>{this.setState({relayState:pg()})})}componentWillUnmount(){this.unsubManager?.(),this.unsubRelay?.()}handleAddRelay=(u)=>{let g=this.state.newRelayUrl.trim();if(!g)return;C1(u,g),this.setState({newRelayUrl:""})};handleCreateProfile=()=>{let u=this.state.newProfileName.trim();if(!u)return;J3(u),this.setState({newProfileName:"",showAddProfile:!1})};getStatusColor(u){switch(this.state.relayState.statuses.get(u)){case"connected":return"bg-success";case"connecting":return"bg-warning";case"error":return"bg-destructive";default:return"bg-muted-foreground/30"}}getStatusLabel(u){return this.state.relayState.statuses.get(u)||"disconnected"}renderProfile(u,g){return T(M,{key:u.id,className:U(g&&"border-primary/40")},T(O,null,T("div",{class:"flex items-center justify-between"},T("div",{class:"flex items-center gap-2"},T("button",{class:U("text-sm font-semibold cursor-pointer bg-transparent border-none",g?"text-primary":"text-foreground hover:text-primary"),onClick:()=>B3(u.id)},u.name),g&&T(v,{variant:"default"},"Active"),u.builtin&&T(v,{variant:"secondary"},"Built-in")),T("div",{class:"flex items-center gap-2"},T(v,{variant:"outline"},u.relays.length," relays"),!u.builtin&&T(f,{variant:"ghost",size:"xs",className:"text-destructive hover:text-destructive",onClick:()=>Z3(u.id)},"Delete")))),T(s,null,T("div",{class:"space-y-1.5 mb-3"},u.relays.length===0?T("p",{class:"text-xs text-muted-foreground italic"},"No relays configured"):u.relays.map((w)=>T("div",{key:w,class:"flex items-center justify-between group px-2 py-1.5 rounded-md bg-background"},T("div",{class:"flex items-center gap-2 min-w-0"},T("span",{class:U("size-2 rounded-full shrink-0",this.getStatusColor(w))}),T("span",{class:"text-xs text-foreground truncate"},w),T(v,{variant:"ghost",className:"text-[10px] px-0"},this.getStatusLabel(w))),T(f,{variant:"ghost",size:"xs",className:"text-destructive hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity shrink-0",onClick:()=>fu(u.id,w)},"Remove")))),T("div",{class:"flex gap-2"},T(n,{className:"flex-1 h-8 text-xs",placeholder:"wss://relay.example.com",value:this.state.newRelayUrl,onInput:(w)=>this.setState({newRelayUrl:w.target.value}),onKeyDown:(w)=>{if(w.key==="Enter")this.handleAddRelay(u.id)}}),T(f,{size:"sm",className:"h-8",onClick:()=>this.handleAddRelay(u.id)},"Add"))))}render(){let{manager:u,showAddProfile:g,newProfileName:w}=this.state;return T("div",null,T("div",{class:"flex items-center justify-between mb-6"},T("div",null,T("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Relay Manager"),T("p",{class:"text-sm text-muted-foreground mt-1"},"Manage relay profiles and connections.")),T(f,{variant:g?"outline":"secondary",size:"sm",onClick:()=>this.setState({showAddProfile:!g})},g?"Cancel":"+ New Profile")),T("p",{class:"text-sm text-muted-foreground mb-4"},"Manage relay profiles for your Nostr identity. Outbox relays are where you publish events. Inbox relays are where others can find your posts. Indexers are used for bootstrapping."),g&&T("div",{class:"flex gap-2 mb-4"},T(n,{className:"flex-1",placeholder:"Profile name",value:w,onInput:(z)=>this.setState({newProfileName:z.target.value}),onKeyDown:(z)=>{if(z.key==="Enter")this.handleCreateProfile()}}),T(f,{onClick:this.handleCreateProfile},"Create")),T("div",{class:"space-y-4"},u.profiles.map((z)=>this.renderProfile(z,z.id===u.activeProfileId))))}}class F4 extends S{unsubAuth=null;unsubBootstrap=null;unsubLive=null;state={pubkey:T0().pubkey,authLoading:T0().isLoading,authError:T0().error,profile:X1().profile,bootstrapPhase:X1().phase,relayCount:X1().relayList.length,followingCount:X1().followingCount,liveEventsEnabled:V1().enabled,liveEventPublishing:V1().isPublishing,liveEventError:V1().error,lastPublished:V1().lastPublished};componentDidMount(){this.unsubAuth=q1(()=>{let u=T0();this.setState({pubkey:u.pubkey,authLoading:u.isLoading,authError:u.error})}),this.unsubBootstrap=Gu(()=>{let u=X1();this.setState({profile:u.profile,bootstrapPhase:u.phase,relayCount:u.relayList.length,followingCount:u.followingCount})}),this.unsubLive=_3(()=>{let u=V1();this.setState({liveEventsEnabled:u.enabled,liveEventPublishing:u.isPublishing,liveEventError:u.error,lastPublished:u.lastPublished})})}componentWillUnmount(){this.unsubAuth?.(),this.unsubBootstrap?.(),this.unsubLive?.()}render(){let{pubkey:u,authLoading:g,authError:w,profile:z,bootstrapPhase:$,relayCount:B,followingCount:J,liveEventsEnabled:Z,liveEventPublishing:q,liveEventError:X,lastPublished:Y}=this.state;return T("div",null,T("div",{class:"mb-6"},T("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Nostr Identity"),T("p",{class:"text-sm text-muted-foreground mt-1"},"Connect your Nostr account and manage live event publishing.")),T(M,{className:"mb-4"},T(O,null,T(x,null,"Account")),T(s,null,u?T("div",null,T("div",{class:"flex items-start gap-4 mb-4"},T(z1,{className:"size-16"},T(l0,{src:z?.picture,alt:""}),T($1,{className:"text-xl"},(z?.displayName||z?.name||u.charAt(0)).charAt(0).toUpperCase())),T("div",{class:"min-w-0"},T("p",{class:"text-lg font-semibold text-foreground truncate"},z?.displayName||z?.name||_u(u,8)),T("p",{class:"text-xs text-muted-foreground font-mono truncate mb-1"},D1(u)),z?.nip05&&T(v,{variant:"outline",className:"text-[10px] border-primary/30 text-primary"},z.nip05),z?.about&&T("p",{class:"text-xs text-muted-foreground mt-1 line-clamp-2"},z.about))),T("div",{class:"grid grid-cols-3 gap-3 mb-4"},T("div",{class:"text-center p-2 rounded-md bg-background"},T("p",{class:"text-lg font-semibold text-foreground"},B),T("p",{class:"text-xs text-muted-foreground"},"Relays")),T("div",{class:"text-center p-2 rounded-md bg-background"},T("p",{class:"text-lg font-semibold text-foreground"},J),T("p",{class:"text-xs text-muted-foreground"},"Following")),T("div",{class:"text-center p-2 rounded-md bg-background"},T("p",{class:"text-lg font-semibold text-foreground capitalize"},$),T("p",{class:"text-xs text-muted-foreground"},"Status"))),T(f,{variant:"destructive",size:"sm",onClick:()=>Fu()},"Sign Out")):T("div",null,T("p",{class:"text-sm text-muted-foreground mb-3"},"Connect your Nostr identity to publish NIP-53 live events and manage your stream's social presence."),T(f,{onClick:()=>O1(),disabled:g},g?"Connecting...":"Connect with Nostr"),w&&T("p",{class:"text-xs text-destructive mt-2"},w),T("p",{class:"text-xs text-muted-foreground mt-2"},"Requires a NIP-07 browser extension (nos2x-fox, Alby, etc.) or Amber on Android.")))),T(M,{className:"mb-4"},T(O,null,T("div",{class:"flex items-center justify-between"},T("div",null,T(x,null,"NIP-53 Live Events"),T(o,null,"Auto-publish live activity events to your outbox relays.")),T(p0,{checked:Z,onChange:(R)=>b3(R)}))),T(s,null,Z&&!u&&T(u0,{variant:"destructive",className:"mb-2"},T(g0,null,"You must connect a Nostr identity above to publish live events.")),q&&T("p",{class:"text-xs text-primary"},"Publishing live event..."),X&&T("p",{class:"text-xs text-destructive mt-1"},X),Y&&T("p",{class:"text-xs text-muted-foreground mt-1"},"Last published: ",new Date(Y).toLocaleTimeString()))),T(M,null,T(O,null,T(x,null,"How it works")),T(s,null,T("ul",{class:"text-sm text-muted-foreground space-y-1.5"},T("li",null," Your Nostr identity is bootstrapped by querying indexer relays for your profile (kind 0) and relay list (NIP-65 kind 10002)."),T("li",null," Outbox and inbox relays from your NIP-65 list are automatically populated in the Relay Manager."),T("li",null," NIP-53 live events are published to your outbox relays so followers can discover your stream."),T("li",null," Indexer relays are discovered via rstate API or NIP-66 monitor relays as a fallback."),T("li",null," This is the same identity system used by Mycelium (app.mycelium.social).")))))}}class j4 extends S{unsubAuth=null;state={activeTab:"overview",token:"",authenticated:!1,authChecking:!0,authError:null,streamKeyInput:""};componentDidMount(){ju(),this.unsubAuth=q1(()=>this.onAuthChange()),this.onAuthChange()}componentWillUnmount(){this.unsubAuth?.()}async onAuthChange(){let u=T0();if(u.pubkey)await this.verifyBearerToken(u.pubkey);else if(!u.isLoading)this.setState({authChecking:!1})}async verifyBearerToken(u){this.setState({authChecking:!0,authError:null});try{if(!(await fetch("/api/admin/serverconfig",{headers:{Authorization:`Bearer ${u}`}})).ok)throw new Error("Not authorized");this.setState({authenticated:!0,token:u,authChecking:!1,authError:null})}catch{this.setState({authenticated:!1,authChecking:!1,authError:"Your Nostr identity is not authorized as admin."})}}handleStreamKeyLogin=async(u)=>{u.preventDefault();let g=this.state.streamKeyInput.trim();if(!g)return;this.setState({authChecking:!0,authError:null});try{if(!(await fetch("/api/admin/serverconfig",{headers:{Authorization:"Basic "+btoa("admin:"+g)}})).ok)throw new Error("Invalid stream key");this.setState({authenticated:!0,token:g,authChecking:!1,authError:null})}catch{this.setState({authenticated:!1,authChecking:!1,authError:"Invalid stream key."})}};handleNostrLogin=()=>{O1()};handleTabChange=(u)=>{this.setState({activeTab:u})};getAuthHeaders(){let{token:u}=this.state;if(u.length===64)return{Authorization:`Bearer ${u}`};return{Authorization:"Basic "+btoa("admin:"+u)}}renderTab(){let{activeTab:u,token:g}=this.state;switch(u){case"overview":return T(A4,{token:g});case"general":return T(Q4,{token:g});case"video":return T(_4,{token:g});case"chat":return T(b4,{token:g});case"viewers":return T(I4,{token:g});case"logs":return T(L4,{token:g});case"tokens":return T(k4,{token:g});case"nostr":return T(F4,null);case"relays":return T(f4,null);default:return null}}render(){let{authenticated:u,authChecking:g,authError:w,streamKeyInput:z}=this.state,$=T0();if(g)return T("div",{class:"flex items-center justify-center min-h-screen bg-background"},T("div",{class:"flex flex-col items-center gap-4"},T(i0,{size:"lg"}),T("p",{class:"text-sm text-muted-foreground"},"Checking authorization...")));if(!u)return T("div",{class:"flex items-center justify-center min-h-screen bg-background"},T(M,{className:"w-full max-w-sm py-6 gap-5 mx-4"},T(O,{className:"text-center"},T("div",{class:"mx-auto size-14 rounded-2xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center mb-3 ring-1 ring-primary/10"},T("svg",{class:"size-7 text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},T("polygon",{points:"5 3 19 12 5 21 5 3"}))),T(x,{className:"text-xl font-bold"},"Oni Admin"),T(o,{className:"text-sm mt-1"},$.pubkey?"Your Nostr identity is not authorized. Use the stream key instead.":"Sign in with Nostr or enter your stream key.")),T(s,{className:"space-y-5"},!$.pubkey&&T(f,{onClick:this.handleNostrLogin,className:"w-full h-10 gap-2 font-semibold",variant:"outline",disabled:$.isLoading},$.isLoading?T(i0,{size:"sm",className:"mr-1"}):T("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})),"Sign in with Nostr"),T("div",{class:"relative"},T("div",{class:"absolute inset-0 flex items-center"},T("span",{class:"w-full border-t border-border"})),T("div",{class:"relative flex justify-center text-xs uppercase"},T("span",{class:"bg-card px-3 text-muted-foreground/50 font-medium tracking-wider"},"or stream key"))),T("form",{onSubmit:this.handleStreamKeyLogin,class:"space-y-3"},T("div",{class:"space-y-2"},T(l,{className:"text-xs font-semibold text-muted-foreground/70"},"Stream Key"),T(n,{type:"password",value:z,onInput:(B)=>this.setState({streamKeyInput:B.target.value}),placeholder:"Enter your stream key",className:"h-10"})),w&&T(u0,{variant:"destructive",className:"py-2.5 border-destructive/20 bg-destructive/5"},T(g0,{className:"text-xs"},w)),T(f,{type:"submit",className:"w-full h-10 font-semibold"},"Sign In"))),T(Wg,{className:"justify-center pt-2"},T("a",{href:"/",class:"text-xs font-medium text-muted-foreground/50 hover:text-foreground transition-colors flex items-center gap-1.5"},T("svg",{class:"size-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})),"Back to stream"))));return T(U4,{activeTab:this.state.activeTab,onTabChange:this.handleTabChange},this.renderTab())}}var P3=document.getElementById("root");if(P3){let u=window.location.pathname.startsWith("/admin");J5(u?T(j4,null):T(K4,null),P3)}

//# debugId=FC7FA6B14BBDB9E964756E2164756E21
//# sourceMappingURL=main-pf3wxgkr.js.map
