import{a as aY,b as tY}from"../chunk-tvrdndbw.js";var l2=Array.isArray;function e5($){let J=typeof $;return J==="string"||J==="number"}function u($){return $===void 0||$===null}function i2($){return $===null||$===!1||$===!0||$===void 0}function o($){return typeof $==="function"}function n2($){return typeof $==="string"}function eq($){return typeof $==="number"}function g0($){return $===null}function $3($){return $===void 0}function k8($){return!g0($)&&typeof $==="object"}var C0={},e2="$F";class J2{constructor(){this.componentDidAppear=[],this.componentWillDisappear=[],this.componentWillMove=[]}}function f8($){return $.substring(2).toLowerCase()}function _7($,J){$.appendChild(J)}function q4($,J,Z){if(g0(Z))_7($,J);else $.insertBefore(J,Z)}function J3($,J){if(J)return document.createElementNS("http://www.w3.org/2000/svg",$);return document.createElement($)}function Z3($,J,Z){$.replaceChild(J,Z)}function D7($,J){$.removeChild(J)}function L7($){for(let J=0;J<$.length;J++)$[J]()}function q3($,J,Z){let q=$.children;if((Z&4)!==0)return q.$LI;if((Z&8192)!==0)return $.childFlags===2?q:q[J?0:q.length-1];return q}function a0($,J){let Z,q=$;while(!u(q)){if(Z=q.flags,(Z&1521)!==0)return q.dom;q=q3(q,J,Z)}return null}function Q4($,J){let Z=$.length,q;while((q=$.pop())!==void 0)q(()=>{if(--Z<=0&&o(J))J()})}function Q3($){for(let J=0;J<$.length;J++)$[J].fn();for(let J=0;J<$.length;J++){let Z=$[J];q4(Z.parent,Z.dom,Z.next)}$.splice(0,$.length)}function Y4($,J,Z){while(!u($)){let q=$.flags;if((q&1521)!==0){if(!Z||$.dom.parentNode===J)D7(J,$.dom);return}let Q=$.children;if((q&4)!==0)$=Q.$LI;if((q&8)!==0)$=Q;if((q&8192)!==0)if($.childFlags===2)$=Q;else{for(let Y=0,X=Q.length;Y<X;++Y)Y4(Q[Y],J,!1);return}}}function Y3($,J){return function(){Y4($,J,!0)}}function X4($,J,Z){if(Z.componentWillDisappear.length>0)Q4(Z.componentWillDisappear,Y3($,J));else Y4($,J,!1)}function X3($,J,Z,q,Q,Y,X,K){$.componentWillMove.push({dom:q,fn:()=>{if((X&4)!==0)Z.componentWillMove(J,Q,q);else if((X&8)!==0)Z.onComponentWillMove(J,Q,q,K)},next:Y,parent:Q})}function V7($,J,Z,q,Q){let Y,X,K=J.flags;while(!u(J)){let G=J.flags;if((G&1521)!==0){if(!u(Y)&&(o(Y.componentWillMove)||o(Y.onComponentWillMove)))X3(Q,$,Y,J.dom,Z,q,K,X);else q4(Z,J.dom,q);return}let w=J.children;if((G&4)!==0)Y=J.children,X=J.props,J=w.$LI;else if((G&8)!==0)Y=J.ref,X=J.props,J=w;else if((G&8192)!==0)if(J.childFlags===2)J=w;else{for(let B=0,M=w.length;B<M;++B)V7($,w[B],Z,q,Q);return}}}function P7($,J,Z){if(o($.constructor.getDerivedStateFromProps))return{...Z,...$.constructor.getDerivedStateFromProps(J,Z)};return Z}var a2={v:!1},$4={createVNode:null};function s2($,J){$.textContent=J}function I7($,J){return k8($)&&$.event===J.event&&$.data===J.data}function S7($,J){for(let Z in J)if($3($[Z]))$[Z]=J[Z];return $}function b8($,J){return o($)&&($(J),!0)}var o2="$";function U4($,J,Z,q,Q,Y,X,K){this.childFlags=$,this.children=J,this.className=Z,this.dom=null,this.flags=q,this.key=Q===void 0?null:Q,this.props=Y===void 0?null:Y,this.ref=X===void 0?null:X,this.type=K}function v8($,J,Z,q,Q,Y,X,K){let G=Q===void 0?1:Q,w=new U4(G,q,Z,$,X,Y,K,J);if($4.createVNode)$4.createVNode(w);if(G===0)B3(w,w.children);return w}function U3($,J,Z){if($&4)return Z;let q=($&32768?J.render:J).defaultHooks;if(u(q))return Z;if(u(Z))return q;return S7(Z,q)}function K3($,J,Z){let q=($&32768?J.render:J).defaultProps;if(u(q))return Z;if(u(Z))return{...q};return S7(Z,q)}function G3($,J){if($&12)return $;if(J.prototype?.render)return 4;if(J.render)return 32776;return 8}function C7($,J,Z,q,Q){$=G3($,J);let Y=new U4(1,null,null,$,q,K3($,J,Z),U3($,J,Q),J);if(o($4.createVNode))$4.createVNode(Y);return Y}function $5($,J){return new U4(1,u($)||$===!0||$===!1?"":$,null,16,J,null,null,null)}function K4($,J,Z){let q=v8(8192,8192,null,$,J,null,Z,null);switch(q.childFlags){case 1:q.children=G4(),q.childFlags=2;break;case 16:q.children=[$5($)],q.childFlags=4;break}return q}function w3($){let{children:J,childFlags:Z}=$;return K4(Z===2?P0(J):J.map(P0),Z,$.key)}function P0($){let J=$.flags&-16385,Z=$.props;if(J&14){if(!g0(Z)){let q=Z;Z={};for(let Q in q)Z[Q]=q[Q]}}if((J&8192)===0)return new U4($.childFlags,$.children,$.className,J,$.key,Z,$.ref,$.type);return w3($)}function G4(){return $5("",null)}function N7($,J,Z,q){for(let Q=$.length;Z<Q;Z++){let Y=$[Z];if(!i2(Y)){let X=q+o2+Z;if(l2(Y))N7(Y,J,0,X);else{if(e5(Y))Y=$5(Y,X);else{let K=Y.key,G=n2(K)&&K[0]===o2;if(Y.flags&81920||G)Y=P0(Y);if(Y.flags|=65536,!G)if(g0(K))Y.key=X;else Y.key=q+K;else if(K.substring(0,q.length)!==q)Y.key=q+K}J.push(Y)}}}}function O7($){switch($){case"svg":return 32;case"input":return 64;case"select":return 256;case"textarea":return 128;case e2:return 8192;default:return 1}}function B3($,J){let Z,q=1;if(i2(J))Z=J;else if(e5(J))q=16,Z=J;else if(l2(J)){let Q=J.length;for(let Y=0;Y<Q;++Y){let X=J[Y];if(i2(X)||l2(X)){Z=Z||J.slice(0,Y),N7(J,Z,Y,"");break}else if(e5(X))Z=Z||J.slice(0,Y),Z.push($5(X,o2+Y));else{let K=X.key,G=(X.flags&81920)>0,w=g0(K),B=n2(K)&&K[0]===o2;if(G||w||B){if(Z=Z||J.slice(0,Y),G||B)X=P0(X);if(w||B)X.key=o2+Y;Z.push(X)}else if(Z)Z.push(X);X.flags|=65536}}if(Z=Z||J,Z.length===0)q=1;else q=8}else{if(Z=J,Z.flags|=65536,J.flags&81920)Z=P0(J);q=2}return $.children=Z,$.childFlags=q,$}function y8($){if(i2($)||e5($))return $5($,null);if(l2($))return K4($,0,null);return $.flags&16384?P0($):$}var e1="http://www.w3.org/1999/xlink",C8="http://www.w3.org/XML/1998/namespace",z7={"xlink:actuate":e1,"xlink:arcrole":e1,"xlink:href":e1,"xlink:role":e1,"xlink:show":e1,"xlink:title":e1,"xlink:type":e1,"xml:base":C8,"xml:lang":C8,"xml:space":C8};function w4($){return{onClick:$,onDblClick:$,onFocusIn:$,onFocusOut:$,onKeyDown:$,onKeyPress:$,onKeyUp:$,onMouseDown:$,onMouseMove:$,onMouseUp:$,onTouchEnd:$,onTouchMove:$,onTouchStart:$}}var A7=w4(0),N8=w4(null),k7=w4(!0);function W7($,J){let Z=J.$EV;if(!Z)Z=J.$EV=w4(null);if(!Z[$]){if(++A7[$]===1)N8[$]=_3($)}return Z}function f7($,J){let Z=J.$EV;if(Z?.[$]){if(--A7[$]===0)document.removeEventListener(f8($),N8[$]),N8[$]=null;Z[$]=null}}function M3($,J,Z,q){if(o(Z))W7($,q)[$]=Z;else if(k8(Z)){if(I7(J,Z))return;W7($,q)[$]=Z}else f7($,q)}function T3($){return o($.composedPath)?$.composedPath()[0]:$.target}function z3($,J,Z,q){let Q=T3($);do{if(J&&Q.disabled)return;let Y=Q.$EV;if(!u(Y)){let X=Y[Z];if(X){if(q.dom=Q,X.event)X.event(X.data,$);else X($);if($.cancelBubble)return}}Q=Q.parentNode}while(!g0(Q))}function W3(){if(this.cancelBubble=!0,!this.immediatePropagationStopped)this.stopImmediatePropagation()}function H3(){return this.defaultPrevented}function F3(){return this.cancelBubble}function j3($){let J={dom:document};return $.isDefaultPrevented=H3,$.isPropagationStopped=F3,$.stopPropagation=W3,Object.defineProperty($,"currentTarget",{configurable:!0,get:function Z(){return J.dom}}),J}function R3($){let J=$==="onClick"||$==="onDblClick";return function(Z){z3(Z,J,$,j3(Z))}}function _3($){let J=R3($);return document.addEventListener(f8($),J),J}function D3($,J){let Z=document.createElement("i");return Z.innerHTML=J,Z.innerHTML===$.innerHTML}function H7($,J,Z){let q=$[J];if(q)if(q.event)q.event(q.data,Z);else q(Z);else{let Q=J.toLowerCase();if(o($[Q]))$[Q](Z)}}function J5($,J){let Z=function q(Q){let Y=this.$V;if(u(Y))return;let X=Y.props??C0,K=Y.dom;if(n2($))H7(X,$,Q);else for(let G=0;G<$.length;++G)H7(X,$[G],Q);if(o(J)){let G=this.$V,w=G.props??C0;J(w,K,!1,G)}};return Object.defineProperty(Z,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),Z}function $2($,J,Z){let q=`$${J}`,Q=$[q];if(Q){if(Q[1].wrapped)return;$.removeEventListener(Q[0],Q[1]),$[q]=null}if(o(Z))$.addEventListener(J,Z),$[q]=[J,Z]}function E8($){return $==="checkbox"||$==="radio"}var L3=J5("onInput",g8),V3=J5(["onClick","onChange"],g8);function b7($){$.stopPropagation()}b7.wrapped=!0;function P3($,J){if(E8(J.type))$2($,"change",V3),$2($,"click",b7);else $2($,"input",L3)}function g8($,J){let{type:Z,value:q,checked:Q,multiple:Y,defaultValue:X}=$,K=!u(q);if(Z!=null&&Z!==J.type)J.setAttribute("type",Z);if(!u(Y)&&Y!==J.multiple)J.multiple=Y;if(!u(X)&&!K)J.defaultValue=X+"";if(E8(Z)){if(K)J.value=q;if(!u(Q))J.checked=Q}else if(K&&J.value!==q)J.defaultValue=q,J.value=q;else if(!u(Q))J.checked=Q}function r2($,J){if($.type==="option")I3($,J);else{let{children:Z,flags:q}=$;if((q&4)!==0)r2(Z.$LI,J);else if((q&8)!==0)r2(Z,J);else if($.childFlags===2)r2(Z,J);else if(($.childFlags&12)!==0)for(let Q=0,Y=Z.length;Q<Y;++Q)r2(Z[Q],J)}}function I3($,J){let Z=$.props??C0,q=Z.value,Q=$.dom;if(Q.value=q,q===J||l2(J)&&J.includes(q))Q.selected=!0;else if(!u(J)||!u(Z.selected))Q.selected=Boolean(Z.selected)}var S3=J5("onChange",v7);function C3($){$2($,"change",S3)}function v7($,J,Z,q){let Q=Boolean($.multiple);if(!u($.multiple)&&Q!==J.multiple)J.multiple=Q;let Y=$.selectedIndex;if(Y===-1)J.selectedIndex=-1;if(q.childFlags!==1){let K=$.value;if(eq(Y)&&Y>-1&&!u(J.options[Y]))K=J.options[Y].value;if(Z&&u(K))K=$.defaultValue;r2(q,K)}}var N3=J5("onInput",y7),O3=J5("onChange");function A3($,J){if($2($,"input",N3),o(J.onChange))$2($,"change",O3)}function y7($,J,Z){let q=$.value,Q=J.value;if(u(q)){if(Z){let Y=$.defaultValue;if(!u(Y)&&Y!==Q)J.defaultValue=Y,J.value=Y}}else if(Q!==q)J.defaultValue=q,J.value=q}function E7($,J,Z,q,Q,Y){if(($&64)!==0)g8(q,Z);else if(($&256)!==0)v7(q,Z,Q,J);else if(($&128)!==0)y7(q,Z,Q);if(Y)Z.$V=J}function k3($,J,Z){if(($&64)!==0)P3(J,Z);else if(($&256)!==0)C3(J);else if(($&128)!==0)A3(J,Z)}function g7($){return E8($.type)?!u($.checked):!u($.value)}function J4($){if(!u($)){if(!b8($,null)&&$.current)$.current=null}}function B4($,J,Z){if(!u($)&&(o($)||$.current!==void 0))Z.push(()=>{if(!b8($,J)&&$.current!==void 0)$.current=J})}function Y1($,J,Z){j1($,Z),X4($,J,Z)}function j1($,J){let{flags:Z,children:q}=$,Q;if((Z&481)!==0){Q=$.ref;let Y=$.props;J4(Q);let X=$.childFlags;if(!g0(Y)){let K=Object.keys(Y);for(let G=0,w=K.length;G<w;G++){let B=K[G];if(k7[B])f7(B,$.dom)}}if(X&12)t2(q,J);else if(X===2)j1(q,J)}else if(q){if(Z&4){if(o(q.componentWillUnmount))q.componentWillUnmount();let Y=J;if(o(q.componentWillDisappear))Y=new J2,F7(J,q,q.$LI.dom,Z,void 0);J4($.ref),q.$UN=!0,j1(q.$LI,Y)}else if(Z&8){let Y=J;if(Q=$.ref,!u(Q)){let X=null;if(o(Q.onComponentWillUnmount))X=a0($,!0),Q.onComponentWillUnmount(X,$.props||C0);if(o(Q.onComponentWillDisappear))Y=new J2,X=X||a0($,!0),F7(J,Q,X,Z,$.props)}j1(q,Y)}else if(Z&1024)Y1(q,$.ref,J);else if(Z&8192){if($.childFlags&12)t2(q,J)}}}function t2($,J){for(let Z=0,q=$.length;Z<q;++Z)j1($[Z],J)}function f3($,J){return function(){if(J)for(let Z=0;Z<$.length;Z++){let q=$[Z];Y4(q,J,!1)}}}function a5($,J,Z){if(Z.componentWillDisappear.length>0)Q4(Z.componentWillDisappear,f3(J,$));else $.textContent=""}function Z4($,J,Z,q){if(t2(Z,q),J.flags&8192)X4(J,$,q);else a5($,Z,q)}function F7($,J,Z,q,Q){$.componentWillDisappear.push((Y)=>{if(q&4)J.componentWillDisappear(Z,Y);else if(q&8)J.onComponentWillDisappear(Z,Q,Y)})}function b3($){let J=$.event;return function(Z){J($.data,Z)}}function v3($,J,Z,q){if(k8(Z)){if(I7(J,Z))return;Z=b3(Z)}$2(q,f8($),Z)}function y3($,J,Z){if(u(J)){Z.removeAttribute("style");return}let q=Z.style,Q,Y;if(n2(J)){q.cssText=J;return}if(!u($)&&!n2($)){for(Q in J)if(Y=J[Q],Y!==$[Q])q.setProperty(Q,Y);for(Q in $)if(u(J[Q]))q.removeProperty(Q)}else for(Q in J)Y=J[Q],q.setProperty(Q,Y)}function E3($,J,Z,q,Q){let Y=$?.__html||"",X=J?.__html||"";if(Y!==X){if(!u(X)&&!D3(q,X)){if(!g0(Z)){if(Z.childFlags&12)t2(Z.children,Q);else if(Z.childFlags===2)j1(Z.children,Q);Z.children=null,Z.childFlags=1}q.innerHTML=X}}}function g3($,J,Z){let q=u($)?"":$;if(J[Z]!==q)J[Z]=q}function O8($,J,Z,q,Q,Y,X,K){switch($){case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":case"selectedIndex":break;case"autoFocus":q.autofocus=!!Z;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":q[$]=!!Z;break;case"defaultChecked":case"value":case"volume":if(Y&&$==="value")break;g3(Z,q,$);break;case"style":y3(J,Z,q);break;case"dangerouslySetInnerHTML":E3(J,Z,X,q,K);break;default:if(k7[$])M3($,J,Z,q);else if($.charCodeAt(0)===111&&$.charCodeAt(1)===110)v3($,J,Z,q);else if(u(Z))q.removeAttribute($);else if(Q&&z7[$])q.setAttributeNS(z7[$],$,Z);else q.setAttribute($,Z);break}}function h3($,J,Z,q,Q,Y){let X=!1,K=(J&448)>0;if(K){if(X=g7(Z),X)k3(J,q,Z)}for(let G in Z)O8(G,null,Z[G],q,Q,X,null,Y);if(K)E7(J,$,q,Z,!0,X)}function h7($,J,Z){let q=y8($.render(J,$.state,Z)),Q=Z;if(o($.getChildContext))Q={...Z,...$.getChildContext()};return $.$CX=Q,q}function u3($,J,Z,q,Q,Y){let X=new J(Z,q),K=X.$N=Boolean(J.getDerivedStateFromProps||X.getSnapshotBeforeUpdate);if(X.$SVG=Q,X.$L=Y,$.children=X,X.$BS=!1,X.context=q,X.props===C0)X.props=Z;if(!K){if(o(X.componentWillMount)){X.$BR=!0,X.componentWillMount();let G=X.$PS;if(!g0(G)){let w=X.state;if(g0(w))X.state=G;else for(let B in G)w[B]=G[B];X.$PS=null}X.$BR=!1}}else X.state=P7(X,Z,X.state);return X.$LI=h7(X,Z,q),X}function u7($,J){let Z=$.props||C0;return $.flags&32768?$.type.render(Z,$.ref,J):$.type(Z,J)}function k0($,J,Z,q,Q,Y,X){let K=$.flags|=16384;if((K&481)!==0)p3($,J,Z,q,Q,Y,X);else if((K&4)!==0)d3($,J,Z,q,Q,Y,X);else if(K&8)c3($,J,Z,q,Q,Y,X);else if(K&16)x7($,J,Q);else if(K&8192)m3($,Z,J,q,Q,Y,X);else if(K&1024)x3($,Z,J,Q,Y,X)}function x3($,J,Z,q,Q,Y){k0($.children,$.ref,J,!1,null,Q,Y);let X=G4();x7(X,Z,q),$.dom=X.dom}function m3($,J,Z,q,Q,Y,X){let{children:K,childFlags:G}=$;if(G&12&&K.length===0)G=$.childFlags=2,K=$.children=G4();if(G===2)k0(K,Z,J,q,Q,Y,X);else Z2(K,Z,J,q,Q,Y,X)}function x7($,J,Z){let q=$.dom=document.createTextNode($.children);if(!g0(J))q4(J,q,Z)}function p3($,J,Z,q,Q,Y,X){let{flags:K,props:G,className:w,childFlags:B}=$,M=$.dom=J3($.type,q=q||(K&32)>0),T=$.children;if(!u(w)&&w!=="")if(q)M.setAttribute("class",w);else M.className=w;if(B===16)s2(M,T);else if(B!==1){let z=q&&$.type!=="foreignObject";if(B===2){if(T.flags&16384)$.children=T=P0(T);k0(T,M,Z,z,null,Y,X)}else if(B===8||B===4)Z2(T,M,Z,z,null,Y,X)}if(!g0(J))q4(J,M,Q);if(!g0(G))h3($,K,G,M,q,X);B4($.ref,M,Y)}function Z2($,J,Z,q,Q,Y,X){for(let K=0;K<$.length;++K){let G=$[K];if(G.flags&16384)$[K]=G=P0(G);k0(G,J,Z,q,Q,Y,X)}}function d3($,J,Z,q,Q,Y,X){let K=u3($,$.type,$.props||C0,Z,q,Y),G=X;if(o(K.componentDidAppear))G=new J2;k0(K.$LI,J,K.$CX,q,Q,Y,G),l3($.ref,K,Y,X)}function c3($,J,Z,q,Q,Y,X){let K=$.ref,G=X;if(!u(K)&&o(K.onComponentDidAppear))G=new J2;k0($.children=y8(u7($,Z)),J,Z,q,Q,Y,G),n3($,Y,X)}function r3($){return()=>{$.componentDidMount()}}function s3($,J,Z){$.componentDidAppear.push(()=>{J.componentDidAppear(Z)})}function o3($,J,Z,q){$.componentDidAppear.push(()=>{J.onComponentDidAppear(Z,q)})}function l3($,J,Z,q){if(B4($,J,Z),o(J.componentDidMount))Z.push(r3(J));if(o(J.componentDidAppear))s3(q,J,J.$LI.dom)}function i3($,J){return()=>{$.onComponentDidMount(a0(J,!0),J.props||C0)}}function n3($,J,Z){let q=$.ref;if(!u(q)){if(b8(q.onComponentWillMount,$.props||C0),o(q.onComponentDidMount))J.push(i3(q,$));if(o(q.onComponentDidAppear))o3(Z,q,a0($,!0),$.props)}}function a3($,J,Z,q,Q,Y,X){if(j1($,X),(J.flags&$.flags&1521)!==0)k0(J,null,q,Q,null,Y,X),Z3(Z,J.dom,$.dom);else k0(J,Z,q,Q,a0($,!0),Y,X),X4($,Z,X)}function R1($,J,Z,q,Q,Y,X,K){let G=J.flags|=16384;if($.flags!==G||$.type!==J.type||$.key!==J.key||G&2048)if($.flags&16384)a3($,J,Z,q,Q,X,K);else k0(J,Z,q,Q,Y,X,K);else if(G&481)ZQ($,J,q,Q,X,K);else if(G&4)XQ($,J,Z,q,Q,Y,X,K);else if(G&8)UQ($,J,Z,q,Q,Y,X,K);else if(G&16)KQ($,J);else if(G&8192)$Q($,J,Z,q,Q,X,K);else JQ($,J,q,X,K)}function t3($,J,Z){if($!==J)if($!=="")Z.firstChild.nodeValue=J;else s2(Z,J)}function e3($,J){if($.textContent!==J)$.textContent=J}function $Q($,J,Z,q,Q,Y,X){let K=$.children,G=J.children,w=$.childFlags,B=J.childFlags,M=null;if(B&12&&G.length===0)B=J.childFlags=2,G=J.children=G4();let T=(B&2)!==0;if(w&12){let z=K.length;if(w&8&&B&8||T||!T&&G.length>z)M=a0(K[z-1],!1).nextSibling}h8(w,B,K,G,Z,q,Q,M,$,Y,X)}function JQ($,J,Z,q,Q){let Y=$.ref,X=J.ref,K=J.children;if(h8($.childFlags,J.childFlags,$.children,K,Y,Z,!1,null,$,q,Q),J.dom=$.dom,Y!==X&&!i2(K)){let G=K.dom;D7(Y,G),_7(X,G)}}function ZQ($,J,Z,q,Q,Y){let X=J.dom=$.dom,K=$.props,G=J.props,w=J.flags,B=!1,M=!1,T;if(q=q||(w&32)>0,K!==G){let j=K||C0;if(T=G||C0,T!==C0){if(B=(w&448)>0,B)M=g7(T);for(let R in T){let L=j[R],V=T[R];if(L!==V)O8(R,L,V,X,q,M,$,Y)}}if(j!==C0){for(let R in j)if(u(T[R])&&!u(j[R]))O8(R,j[R],null,X,q,M,$,Y)}}let{children:z,className:H}=J;if($.className!==H)if(u(H))X.removeAttribute("class");else if(q)X.setAttribute("class",H);else X.className=H;if(w&4096)e3(X,z);else h8($.childFlags,J.childFlags,$.children,z,X,Z,q&&J.type!=="foreignObject",null,$,Q,Y);if(B)E7(w,J,X,T,!1,M);let W=J.ref,F=$.ref;if(F!==W)J4(F),B4(W,X,Q)}function qQ($,J,Z,q,Q,Y,X){j1($,X),Z2(J,Z,q,Q,a0($,!0),Y,X),X4($,Z,X)}function QQ($,J,Z,q,Q,Y,X,K,G,w,B){let M=$.length|0,T=J.length|0;if(M===0){if(T>0)Z2(J,Z,q,Q,Y,X,K)}else if(T===0)Z4(Z,G,$,K);else if(w===8&&B===8)wQ($,J,Z,q,Q,M,T,Y,G,X,K);else GQ($,J,Z,q,Q,M,T,Y,X,K)}function h8($,J,Z,q,Q,Y,X,K,G,w,B){switch($){case 2:switch(J){case 2:R1(Z,q,Q,Y,X,K,w,B);break;case 1:Y1(Z,Q,B);break;case 16:j1(Z,B),s2(Q,q);break;default:qQ(Z,q,Q,Y,X,w,B);break}break;case 1:switch(J){case 2:k0(q,Q,Y,X,K,w,B);break;case 1:break;case 16:s2(Q,q);break;default:Z2(q,Q,Y,X,K,w,B);break}break;case 16:switch(J){case 16:t3(Z,q,Q);break;case 2:a5(Q,Z,B),k0(q,Q,Y,X,K,w,B);break;case 1:a5(Q,Z,B);break;default:a5(Q,Z,B),Z2(q,Q,Y,X,K,w,B);break}break;default:switch(J){case 16:t2(Z,B),s2(Q,q);break;case 2:Z4(Q,G,Z,B),k0(q,Q,Y,X,K,w,B);break;case 1:Z4(Q,G,Z,B);break;default:QQ(Z,q,Q,Y,X,K,w,B,G,J,$);break}break}}function YQ($,J,Z,q,Q){Q.push(()=>{$.componentDidUpdate(J,Z,q)})}function m7($,J,Z,q,Q,Y,X,K,G,w){let{state:B,props:M}=$,T=Boolean($.$N),z=o($.shouldComponentUpdate);if(T)J=P7($,Z,J!==B?{...B,...J}:J);if(X||!z||z&&$.shouldComponentUpdate(Z,J,Q)){if(!T&&o($.componentWillUpdate))$.componentWillUpdate(Z,J,Q);$.props=Z,$.state=J,$.context=Q;let H=null,W=h7($,Z,Q);if(T&&o($.getSnapshotBeforeUpdate))H=$.getSnapshotBeforeUpdate(M,B);if(R1($.$LI,W,q,$.$CX,Y,K,G,w),$.$LI=W,o($.componentDidUpdate))YQ($,M,B,H,G)}else $.props=Z,$.state=J,$.context=Q}function XQ($,J,Z,q,Q,Y,X,K){let G=J.children=$.children;if(g0(G))return;G.$L=X;let w=J.props||C0,B=J.ref,M=$.ref,T=G.state;if(!G.$N){if(o(G.componentWillReceiveProps)){if(G.$BR=!0,G.componentWillReceiveProps(w,q),G.$UN)return;G.$BR=!1}if(!g0(G.$PS))T={...T,...G.$PS},G.$PS=null}if(m7(G,T,w,Z,q,Q,!1,Y,X,K),M!==B)J4(M),B4(B,G,X)}function UQ($,J,Z,q,Q,Y,X,K){let G=!0,w=J.props||C0,B=J.ref,M=$.props,T=!u(B),z=$.children;if(T&&o(B.onComponentShouldUpdate))G=B.onComponentShouldUpdate(M,w);if(G){if(T&&o(B.onComponentWillUpdate))B.onComponentWillUpdate(M,w);let H=y8(u7(J,q));if(R1(z,H,Z,q,Q,Y,X,K),J.children=H,T&&o(B.onComponentDidUpdate))B.onComponentDidUpdate(M,w)}else J.children=z}function KQ($,J){let Z=J.children,q=J.dom=$.dom;if(Z!==$.children)q.nodeValue=Z}function GQ($,J,Z,q,Q,Y,X,K,G,w){let B=Y>X?X:Y,M=0,T,z;for(;M<B;++M){if(T=J[M],z=$[M],T.flags&16384)T=J[M]=P0(T);R1(z,T,Z,q,Q,K,G,w),$[M]=T}if(Y<X)for(M=B;M<X;++M){if(T=J[M],T.flags&16384)T=J[M]=P0(T);k0(T,Z,q,Q,K,G,w)}else if(Y>X)for(M=B;M<Y;++M)Y1($[M],Z,w)}function wQ($,J,Z,q,Q,Y,X,K,G,w,B){let M=Y-1,T=X-1,z=0,H=$[z],W=J[z],F,j;$:{while(H.key===W.key){if(W.flags&16384)J[z]=W=P0(W);if(R1(H,W,Z,q,Q,K,w,B),$[z]=W,++z,z>M||z>T)break $;H=$[z],W=J[z]}H=$[M],W=J[T];while(H.key===W.key){if(W.flags&16384)J[T]=W=P0(W);if(R1(H,W,Z,q,Q,K,w,B),$[M]=W,M--,T--,z>M||z>T)break $;H=$[M],W=J[T]}}if(z>M){if(z<=T){F=T+1,j=F<X?a0(J[F],!0):K;while(z<=T){if(W=J[z],W.flags&16384)J[z]=W=P0(W);++z,k0(W,Z,q,Q,j,w,B)}}}else if(z>T)while(z<=M)Y1($[z++],Z,B);else BQ($,J,q,Y,X,M,T,z,Z,Q,K,G,w,B)}function BQ($,J,Z,q,Q,Y,X,K,G,w,B,M,T,z){let H,W,F=0,j=0,R=K,L=K,V=Y-K+1,D=X-K+1,C=new Int32Array(D+1),S=V===q,P=!1,I=0,g=0;if(Q<4||(V|D)<32){for(j=R;j<=Y;++j)if(H=$[j],g<D){for(K=L;K<=X;K++)if(W=J[K],H.key===W.key){if(C[K-L]=j+1,S){S=!1;while(R<j)Y1($[R++],G,z)}if(I>K)P=!0;else I=K;if(W.flags&16384)J[K]=W=P0(W);R1(H,W,G,Z,w,B,T,z),++g;break}if(!S&&K>X)Y1(H,G,z)}else if(!S)Y1(H,G,z)}else{let E={};for(j=L;j<=X;++j)E[J[j].key]=j;for(j=R;j<=Y;++j)if(H=$[j],g<D){if(K=E[H.key],K!==void 0){if(S){S=!1;while(j>R)Y1($[R++],G,z)}if(C[K-L]=j+1,I>K)P=!0;else I=K;if(W=J[K],W.flags&16384)J[K]=W=P0(W);R1(H,W,G,Z,w,B,T,z),++g}else if(!S)Y1(H,G,z)}else if(!S)Y1(H,G,z)}if(S)Z4(G,M,$,z),Z2(J,G,Z,w,B,T,z);else if(P){let E=MQ(C);K=E.length-1;for(j=D-1;j>=0;j--)if(C[j]===0){if(I=j+L,W=J[I],W.flags&16384)J[I]=W=P0(W);F=I+1,k0(W,G,Z,w,F<Q?a0(J[F],!0):B,T,z)}else if(K<0||j!==E[K])I=j+L,W=J[I],F=I+1,V7(M,W,G,F<Q?a0(J[F],!0):B,z);else K--;if(z.componentWillMove.length>0)Q3(z.componentWillMove)}else if(g!==D){for(j=D-1;j>=0;j--)if(C[j]===0){if(I=j+L,W=J[I],W.flags&16384)J[I]=W=P0(W);F=I+1,k0(W,G,Z,w,F<Q?a0(J[F],!0):B,T,z)}}}var F1,n5,j7=0;function MQ($){let J=0,Z=0,q=0,Q=0,Y=0,X=0,K=0,G=$.length;if(G>j7)j7=G,F1=new Int32Array(G),n5=new Int32Array(G);for(;Z<G;++Z)if(J=$[Z],J!==0){if(q=F1[Q],$[q]<J){n5[Z]=q,F1[++Q]=Z;continue}Y=0,X=Q;while(Y<X)if(K=Y+X>>1,$[F1[K]]<J)Y=K+1;else X=K;if(J<$[F1[Y]]){if(Y>0)n5[Z]=F1[Y-1];F1[Y]=Z}}Y=Q+1;let w=new Int32Array(Y);X=F1[Y-1];while(Y-- >0)w[Y]=X,X=n5[X],F1[Y]=0;return w}var TQ=typeof document!=="undefined";if(TQ){if(window.Node)Node.prototype.$EV=null,Node.prototype.$V=null}function zQ($,J,Z,q){let Q=[],Y=new J2,X=J.$V;if(a2.v=!0,u(X)){if(!u($)){if(($.flags&16384)!==0)$=P0($);k0($,J,q,!1,null,Q,Y),J.$V=$,X=$}}else if(u($))Y1(X,J,Y),J.$V=null;else{if($.flags&16384)$=P0($);R1(X,$,J,q,!1,null,Q,Y),X=J.$V=$}if(L7(Q),Q4(Y.componentDidAppear),a2.v=!1,o(Z))Z()}function p7($,J,Z=null,q=C0){zQ($,J,Z,q)}var t5=[],WQ=Promise.resolve().then.bind(Promise.resolve()),A8=!1;function R7($,J,Z,q){let Q=$.$PS;if(o(J))J=J(Q?{...$.state,...Q}:$.state,$.props,$.context);if(u(Q))$.$PS=J;else for(let Y in J)Q[Y]=J[Y];if(!$.$BR){if(!a2.v){if(t5.length===0){if(d7($,q),o(Z))Z.call($);return}}if(!t5.includes($))t5.push($);if(q)$.$F=!0;if(!A8)A8=!0,WQ(FQ);if(o(Z)){let Y=$.$QU;if(!Y)Y=$.$QU=[];Y.push(Z)}}else if(o(Z))$.$L.push(Z.bind($))}function HQ($){let J=$.$QU;for(let Z=0;Z<J.length;++Z)J[Z].call($);$.$QU=null}function FQ(){let $;A8=!1;while($=t5.shift())if(!$.$UN){let J=$.$F;if($.$F=!1,d7($,J),$.$QU)HQ($)}}function d7($,J){if(J||!$.$BR){let Z=$.$PS;$.$PS=null;let q=[],Q=new J2;a2.v=!0,m7($,{...$.state,...Z},$.props,a0($.$LI,!0).parentNode,$.context,$.$SVG,J,null,q,Q),L7(q),Q4(Q.componentDidAppear),a2.v=!1}else $.state=$.$PS,$.$PS=null}class N{constructor($,J){this.state=null,this.props=void 0,this.context=void 0,this.displayName=void 0,this.$BR=!1,this.$BS=!0,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$QU=null,this.$N=!1,this.$SSR=void 0,this.$L=null,this.$SVG=!1,this.$F=!1,this.props=$||C0,this.context=J||C0}forceUpdate($){if(this.$UN)return;R7(this,{},$,!0)}setState($,J){if(this.$UN)return;if(!this.$BS)R7(this,$,J,!1)}render($,J,Z){return null}}N.defaultProps=null;function c7($){return $===void 0||$===null}function jQ($){return typeof $==="string"}function r7($){return $===void 0}function U($,J,...Z){let q,Q=null,Y=null,X=null,K,G,w=Z.length;if(w===1)q=Z[0];else if(w>1){q=[];for(let B=0;B<w;B++)q.push(Z[B])}if(jQ($)){if(K=O7($),!c7(J)){G={};for(let B in J)if(B==="className"||B==="class")X=J[B];else if(B==="key")Y=J.key;else if(B==="children"&&r7(q))q=J.children;else if(B==="ref")Q=J.ref;else{if(B==="contenteditable")K|=4096;G[B]=J[B]}}}else{if(K=2,!r7(q)){if(!J)J={};J.children=q}if(!c7(J)){G={};for(let B in J)if(B==="key")Y=J.key;else if(B==="ref")Q=J.ref;else switch(B){case"onComponentDidAppear":case"onComponentDidMount":case"onComponentDidUpdate":case"onComponentShouldUpdate":case"onComponentWillDisappear":case"onComponentWillMount":case"onComponentWillUnmount":case"onComponentWillUpdate":if(!Q)Q={};Q[B]=J[B];break;default:G[B]=J[B];break}}return C7(K,$,G,Y,Q)}if(K&8192)return K4(w===1?[q]:q,0,Y);return v8(K,$,X,q,0,G,Y,Q)}function s7($){var J,Z,q="";if(typeof $=="string"||typeof $=="number")q+=$;else if(typeof $=="object")if(Array.isArray($)){var Q=$.length;for(J=0;J<Q;J++)$[J]&&(Z=s7($[J]))&&(q&&(q+=" "),q+=Z)}else for(Z in $)$[Z]&&(q&&(q+=" "),q+=Z);return q}function Z5(){for(var $,J,Z=0,q="",Q=arguments.length;Z<Q;Z++)($=arguments[Z])&&(J=s7($))&&(q&&(q+=" "),q+=J);return q}var RQ=($,J)=>{let Z=new Array($.length+J.length);for(let q=0;q<$.length;q++)Z[q]=$[q];for(let q=0;q<J.length;q++)Z[$.length+q]=J[q];return Z},_Q=($,J)=>({classGroupId:$,validator:J}),a7=($=new Map,J=null,Z)=>({nextPart:$,validators:J,classGroupId:Z});var o7=[];var DQ=($)=>{let J=VQ($),{conflictingClassGroups:Z,conflictingClassGroupModifiers:q}=$;return{getClassGroupId:(X)=>{if(X.startsWith("[")&&X.endsWith("]"))return LQ(X);let K=X.split("-"),G=K[0]===""&&K.length>1?1:0;return t7(K,G,J)},getConflictingClassGroupIds:(X,K)=>{if(K){let G=q[X],w=Z[X];if(G){if(w)return RQ(w,G);return G}return w||o7}return Z[X]||o7}}},t7=($,J,Z)=>{if($.length-J===0)return Z.classGroupId;let Q=$[J],Y=Z.nextPart.get(Q);if(Y){let w=t7($,J+1,Y);if(w)return w}let X=Z.validators;if(X===null)return;let K=J===0?$.join("-"):$.slice(J).join("-"),G=X.length;for(let w=0;w<G;w++){let B=X[w];if(B.validator(K))return B.classGroupId}return},LQ=($)=>$.slice(1,-1).indexOf(":")===-1?void 0:(()=>{let J=$.slice(1,-1),Z=J.indexOf(":"),q=J.slice(0,Z);return q?"arbitrary.."+q:void 0})(),VQ=($)=>{let{theme:J,classGroups:Z}=$;return PQ(Z,J)},PQ=($,J)=>{let Z=a7();for(let q in $){let Q=$[q];m8(Q,Z,q,J)}return Z},m8=($,J,Z,q)=>{let Q=$.length;for(let Y=0;Y<Q;Y++){let X=$[Y];IQ(X,J,Z,q)}},IQ=($,J,Z,q)=>{if(typeof $==="string"){SQ($,J,Z);return}if(typeof $==="function"){CQ($,J,Z,q);return}NQ($,J,Z,q)},SQ=($,J,Z)=>{let q=$===""?J:e7(J,$);q.classGroupId=Z},CQ=($,J,Z,q)=>{if(OQ($)){m8($(q),J,Z,q);return}if(J.validators===null)J.validators=[];J.validators.push(_Q(Z,$))},NQ=($,J,Z,q)=>{let Q=Object.entries($),Y=Q.length;for(let X=0;X<Y;X++){let[K,G]=Q[X];m8(G,e7(J,K),Z,q)}},e7=($,J)=>{let Z=$,q=J.split("-"),Q=q.length;for(let Y=0;Y<Q;Y++){let X=q[Y],K=Z.nextPart.get(X);if(!K)K=a7(),Z.nextPart.set(X,K);Z=K}return Z},OQ=($)=>("isThemeGetter"in $)&&$.isThemeGetter===!0,AQ=($)=>{if($<1)return{get:()=>{return},set:()=>{}};let J=0,Z=Object.create(null),q=Object.create(null),Q=(Y,X)=>{if(Z[Y]=X,J++,J>$)J=0,q=Z,Z=Object.create(null)};return{get(Y){let X=Z[Y];if(X!==void 0)return X;if((X=q[Y])!==void 0)return Q(Y,X),X},set(Y,X){if(Y in Z)Z[Y]=X;else Q(Y,X)}}};var kQ=[],l7=($,J,Z,q,Q)=>({modifiers:$,hasImportantModifier:J,baseClassName:Z,maybePostfixModifierPosition:q,isExternal:Q}),fQ=($)=>{let{prefix:J,experimentalParseClassName:Z}=$,q=(Q)=>{let Y=[],X=0,K=0,G=0,w,B=Q.length;for(let W=0;W<B;W++){let F=Q[W];if(X===0&&K===0){if(F===":"){Y.push(Q.slice(G,W)),G=W+1;continue}if(F==="/"){w=W;continue}}if(F==="[")X++;else if(F==="]")X--;else if(F==="(")K++;else if(F===")")K--}let M=Y.length===0?Q:Q.slice(G),T=M,z=!1;if(M.endsWith("!"))T=M.slice(0,-1),z=!0;else if(M.startsWith("!"))T=M.slice(1),z=!0;let H=w&&w>G?w-G:void 0;return l7(Y,z,T,H)};if(J){let Q=J+":",Y=q;q=(X)=>X.startsWith(Q)?Y(X.slice(Q.length)):l7(kQ,!1,X,void 0,!0)}if(Z){let Q=q;q=(Y)=>Z({className:Y,parseClassName:Q})}return q},bQ=($)=>{let J=new Map;return $.orderSensitiveModifiers.forEach((Z,q)=>{J.set(Z,1e6+q)}),(Z)=>{let q=[],Q=[];for(let Y=0;Y<Z.length;Y++){let X=Z[Y],K=X[0]==="[",G=J.has(X);if(K||G){if(Q.length>0)Q.sort(),q.push(...Q),Q=[];q.push(X)}else Q.push(X)}if(Q.length>0)Q.sort(),q.push(...Q);return q}},vQ=($)=>({cache:AQ($.cacheSize),parseClassName:fQ($),sortModifiers:bQ($),...DQ($)}),yQ=/\s+/,EQ=($,J)=>{let{parseClassName:Z,getClassGroupId:q,getConflictingClassGroupIds:Q,sortModifiers:Y}=J,X=[],K=$.trim().split(yQ),G="";for(let w=K.length-1;w>=0;w-=1){let B=K[w],{isExternal:M,modifiers:T,hasImportantModifier:z,baseClassName:H,maybePostfixModifierPosition:W}=Z(B);if(M){G=B+(G.length>0?" "+G:G);continue}let F=!!W,j=q(F?H.substring(0,W):H);if(!j){if(!F){G=B+(G.length>0?" "+G:G);continue}if(j=q(H),!j){G=B+(G.length>0?" "+G:G);continue}F=!1}let R=T.length===0?"":T.length===1?T[0]:Y(T).join(":"),L=z?R+"!":R,V=L+j;if(X.indexOf(V)>-1)continue;X.push(V);let D=Q(j,F);for(let C=0;C<D.length;++C){let S=D[C];X.push(L+S)}G=B+(G.length>0?" "+G:G)}return G},gQ=(...$)=>{let J=0,Z,q,Q="";while(J<$.length)if(Z=$[J++]){if(q=$$(Z))Q&&(Q+=" "),Q+=q}return Q},$$=($)=>{if(typeof $==="string")return $;let J,Z="";for(let q=0;q<$.length;q++)if($[q]){if(J=$$($[q]))Z&&(Z+=" "),Z+=J}return Z},hQ=($,...J)=>{let Z,q,Q,Y,X=(G)=>{let w=J.reduce((B,M)=>M(B),$());return Z=vQ(w),q=Z.cache.get,Q=Z.cache.set,Y=K,K(G)},K=(G)=>{let w=q(G);if(w)return w;let B=EQ(G,Z);return Q(G,B),B};return Y=X,(...G)=>Y(gQ(...G))},uQ=[],I0=($)=>{let J=(Z)=>Z[$]||uQ;return J.isThemeGetter=!0,J},J$=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Z$=/^\((?:(\w[\w-]*):)?(.+)\)$/i,xQ=/^\d+\/\d+$/,mQ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,cQ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rQ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,F2=($)=>xQ.test($),r=($)=>!!$&&!Number.isNaN(Number($)),f1=($)=>!!$&&Number.isInteger(Number($)),u8=($)=>$.endsWith("%")&&r($.slice(0,-1)),_1=($)=>mQ.test($),sQ=()=>!0,oQ=($)=>pQ.test($)&&!dQ.test($),q$=()=>!1,lQ=($)=>cQ.test($),iQ=($)=>rQ.test($),nQ=($)=>!O($)&&!A($),aQ=($)=>j2($,X$,q$),O=($)=>J$.test($),q2=($)=>j2($,U$,oQ),x8=($)=>j2($,ZY,r),i7=($)=>j2($,Q$,q$),tQ=($)=>j2($,Y$,iQ),M4=($)=>j2($,K$,lQ),A=($)=>Z$.test($),q5=($)=>R2($,U$),eQ=($)=>R2($,qY),n7=($)=>R2($,Q$),$Y=($)=>R2($,X$),JY=($)=>R2($,Y$),T4=($)=>R2($,K$,!0),j2=($,J,Z)=>{let q=J$.exec($);if(q){if(q[1])return J(q[1]);return Z(q[2])}return!1},R2=($,J,Z=!1)=>{let q=Z$.exec($);if(q){if(q[1])return J(q[1]);return Z}return!1},Q$=($)=>$==="position"||$==="percentage",Y$=($)=>$==="image"||$==="url",X$=($)=>$==="length"||$==="size"||$==="bg-size",U$=($)=>$==="length",ZY=($)=>$==="number",qY=($)=>$==="family-name",K$=($)=>$==="shadow";var QY=()=>{let $=I0("color"),J=I0("font"),Z=I0("text"),q=I0("font-weight"),Q=I0("tracking"),Y=I0("leading"),X=I0("breakpoint"),K=I0("container"),G=I0("spacing"),w=I0("radius"),B=I0("shadow"),M=I0("inset-shadow"),T=I0("text-shadow"),z=I0("drop-shadow"),H=I0("blur"),W=I0("perspective"),F=I0("aspect"),j=I0("ease"),R=I0("animate"),L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...V(),A,O],C=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto","contain","none"],P=()=>[A,O,G],I=()=>[F2,"full","auto",...P()],g=()=>[f1,"none","subgrid",A,O],E=()=>["auto",{span:["full",f1,A,O]},f1,A,O],K0=()=>[f1,"auto",A,O],v0=()=>["auto","min","max","fr",A,O],Q0=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],e=()=>["start","end","center","stretch","center-safe","end-safe"],q0=()=>["auto",...P()],R0=()=>[F2,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],f=()=>[$,A,O],_0=()=>[...V(),n7,i7,{position:[A,O]}],t1=()=>["no-repeat",{repeat:["","x","y","space","round"]}],W1=()=>["auto","cover","contain",$Y,aQ,{size:[A,O]}],H1=()=>[u8,q5,q2],T0=()=>["","none","full",w,A,O],V0=()=>["",r,q5,q2],n0=()=>["solid","dashed","dotted","double"],M7=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],S0=()=>[r,u8,n7,i7],T7=()=>["","none",H,A,O],o5=()=>["none",r,A,O],l5=()=>["none",r,A,O],S8=()=>[r,A,O],i5=()=>[F2,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[_1],breakpoint:[_1],color:[sQ],container:[_1],"drop-shadow":[_1],ease:["in","out","in-out"],font:[nQ],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[_1],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[_1],shadow:[_1],spacing:["px",r],text:[_1],"text-shadow":[_1],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",F2,O,A,F]}],container:["container"],columns:[{columns:[r,O,A,K]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[f1,"auto",A,O]}],basis:[{basis:[F2,"full","auto",K,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[r,F2,"auto","initial","none",O]}],grow:[{grow:["",r,A,O]}],shrink:[{shrink:["",r,A,O]}],order:[{order:[f1,"first","last","none",A,O]}],"grid-cols":[{"grid-cols":g()}],"col-start-end":[{col:E()}],"col-start":[{"col-start":K0()}],"col-end":[{"col-end":K0()}],"grid-rows":[{"grid-rows":g()}],"row-start-end":[{row:E()}],"row-start":[{"row-start":K0()}],"row-end":[{"row-end":K0()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":v0()}],"auto-rows":[{"auto-rows":v0()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...Q0(),"normal"]}],"justify-items":[{"justify-items":[...e(),"normal"]}],"justify-self":[{"justify-self":["auto",...e()]}],"align-content":[{content:["normal",...Q0()]}],"align-items":[{items:[...e(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...e(),{baseline:["","last"]}]}],"place-content":[{"place-content":Q0()}],"place-items":[{"place-items":[...e(),"baseline"]}],"place-self":[{"place-self":["auto",...e()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:q0()}],mx:[{mx:q0()}],my:[{my:q0()}],ms:[{ms:q0()}],me:[{me:q0()}],mt:[{mt:q0()}],mr:[{mr:q0()}],mb:[{mb:q0()}],ml:[{ml:q0()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:R0()}],w:[{w:[K,"screen",...R0()]}],"min-w":[{"min-w":[K,"screen","none",...R0()]}],"max-w":[{"max-w":[K,"screen","none","prose",{screen:[X]},...R0()]}],h:[{h:["screen","lh",...R0()]}],"min-h":[{"min-h":["screen","lh","none",...R0()]}],"max-h":[{"max-h":["screen","lh",...R0()]}],"font-size":[{text:["base",Z,q5,q2]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[q,A,x8]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",u8,O]}],"font-family":[{font:[eQ,O,J]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[Q,A,O]}],"line-clamp":[{"line-clamp":[r,"none",A,x8]}],leading:[{leading:[Y,...P()]}],"list-image":[{"list-image":["none",A,O]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",A,O]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:f()}],"text-color":[{text:f()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...n0(),"wavy"]}],"text-decoration-thickness":[{decoration:[r,"from-font","auto",A,q2]}],"text-decoration-color":[{decoration:f()}],"underline-offset":[{"underline-offset":[r,"auto",A,O]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",A,O]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",A,O]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_0()}],"bg-repeat":[{bg:t1()}],"bg-size":[{bg:W1()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},f1,A,O],radial:["",A,O],conic:[f1,A,O]},JY,tQ]}],"bg-color":[{bg:f()}],"gradient-from-pos":[{from:H1()}],"gradient-via-pos":[{via:H1()}],"gradient-to-pos":[{to:H1()}],"gradient-from":[{from:f()}],"gradient-via":[{via:f()}],"gradient-to":[{to:f()}],rounded:[{rounded:T0()}],"rounded-s":[{"rounded-s":T0()}],"rounded-e":[{"rounded-e":T0()}],"rounded-t":[{"rounded-t":T0()}],"rounded-r":[{"rounded-r":T0()}],"rounded-b":[{"rounded-b":T0()}],"rounded-l":[{"rounded-l":T0()}],"rounded-ss":[{"rounded-ss":T0()}],"rounded-se":[{"rounded-se":T0()}],"rounded-ee":[{"rounded-ee":T0()}],"rounded-es":[{"rounded-es":T0()}],"rounded-tl":[{"rounded-tl":T0()}],"rounded-tr":[{"rounded-tr":T0()}],"rounded-br":[{"rounded-br":T0()}],"rounded-bl":[{"rounded-bl":T0()}],"border-w":[{border:V0()}],"border-w-x":[{"border-x":V0()}],"border-w-y":[{"border-y":V0()}],"border-w-s":[{"border-s":V0()}],"border-w-e":[{"border-e":V0()}],"border-w-t":[{"border-t":V0()}],"border-w-r":[{"border-r":V0()}],"border-w-b":[{"border-b":V0()}],"border-w-l":[{"border-l":V0()}],"divide-x":[{"divide-x":V0()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":V0()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...n0(),"hidden","none"]}],"divide-style":[{divide:[...n0(),"hidden","none"]}],"border-color":[{border:f()}],"border-color-x":[{"border-x":f()}],"border-color-y":[{"border-y":f()}],"border-color-s":[{"border-s":f()}],"border-color-e":[{"border-e":f()}],"border-color-t":[{"border-t":f()}],"border-color-r":[{"border-r":f()}],"border-color-b":[{"border-b":f()}],"border-color-l":[{"border-l":f()}],"divide-color":[{divide:f()}],"outline-style":[{outline:[...n0(),"none","hidden"]}],"outline-offset":[{"outline-offset":[r,A,O]}],"outline-w":[{outline:["",r,q5,q2]}],"outline-color":[{outline:f()}],shadow:[{shadow:["","none",B,T4,M4]}],"shadow-color":[{shadow:f()}],"inset-shadow":[{"inset-shadow":["none",M,T4,M4]}],"inset-shadow-color":[{"inset-shadow":f()}],"ring-w":[{ring:V0()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:f()}],"ring-offset-w":[{"ring-offset":[r,q2]}],"ring-offset-color":[{"ring-offset":f()}],"inset-ring-w":[{"inset-ring":V0()}],"inset-ring-color":[{"inset-ring":f()}],"text-shadow":[{"text-shadow":["none",T,T4,M4]}],"text-shadow-color":[{"text-shadow":f()}],opacity:[{opacity:[r,A,O]}],"mix-blend":[{"mix-blend":[...M7(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":M7()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[r]}],"mask-image-linear-from-pos":[{"mask-linear-from":S0()}],"mask-image-linear-to-pos":[{"mask-linear-to":S0()}],"mask-image-linear-from-color":[{"mask-linear-from":f()}],"mask-image-linear-to-color":[{"mask-linear-to":f()}],"mask-image-t-from-pos":[{"mask-t-from":S0()}],"mask-image-t-to-pos":[{"mask-t-to":S0()}],"mask-image-t-from-color":[{"mask-t-from":f()}],"mask-image-t-to-color":[{"mask-t-to":f()}],"mask-image-r-from-pos":[{"mask-r-from":S0()}],"mask-image-r-to-pos":[{"mask-r-to":S0()}],"mask-image-r-from-color":[{"mask-r-from":f()}],"mask-image-r-to-color":[{"mask-r-to":f()}],"mask-image-b-from-pos":[{"mask-b-from":S0()}],"mask-image-b-to-pos":[{"mask-b-to":S0()}],"mask-image-b-from-color":[{"mask-b-from":f()}],"mask-image-b-to-color":[{"mask-b-to":f()}],"mask-image-l-from-pos":[{"mask-l-from":S0()}],"mask-image-l-to-pos":[{"mask-l-to":S0()}],"mask-image-l-from-color":[{"mask-l-from":f()}],"mask-image-l-to-color":[{"mask-l-to":f()}],"mask-image-x-from-pos":[{"mask-x-from":S0()}],"mask-image-x-to-pos":[{"mask-x-to":S0()}],"mask-image-x-from-color":[{"mask-x-from":f()}],"mask-image-x-to-color":[{"mask-x-to":f()}],"mask-image-y-from-pos":[{"mask-y-from":S0()}],"mask-image-y-to-pos":[{"mask-y-to":S0()}],"mask-image-y-from-color":[{"mask-y-from":f()}],"mask-image-y-to-color":[{"mask-y-to":f()}],"mask-image-radial":[{"mask-radial":[A,O]}],"mask-image-radial-from-pos":[{"mask-radial-from":S0()}],"mask-image-radial-to-pos":[{"mask-radial-to":S0()}],"mask-image-radial-from-color":[{"mask-radial-from":f()}],"mask-image-radial-to-color":[{"mask-radial-to":f()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":V()}],"mask-image-conic-pos":[{"mask-conic":[r]}],"mask-image-conic-from-pos":[{"mask-conic-from":S0()}],"mask-image-conic-to-pos":[{"mask-conic-to":S0()}],"mask-image-conic-from-color":[{"mask-conic-from":f()}],"mask-image-conic-to-color":[{"mask-conic-to":f()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_0()}],"mask-repeat":[{mask:t1()}],"mask-size":[{mask:W1()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",A,O]}],filter:[{filter:["","none",A,O]}],blur:[{blur:T7()}],brightness:[{brightness:[r,A,O]}],contrast:[{contrast:[r,A,O]}],"drop-shadow":[{"drop-shadow":["","none",z,T4,M4]}],"drop-shadow-color":[{"drop-shadow":f()}],grayscale:[{grayscale:["",r,A,O]}],"hue-rotate":[{"hue-rotate":[r,A,O]}],invert:[{invert:["",r,A,O]}],saturate:[{saturate:[r,A,O]}],sepia:[{sepia:["",r,A,O]}],"backdrop-filter":[{"backdrop-filter":["","none",A,O]}],"backdrop-blur":[{"backdrop-blur":T7()}],"backdrop-brightness":[{"backdrop-brightness":[r,A,O]}],"backdrop-contrast":[{"backdrop-contrast":[r,A,O]}],"backdrop-grayscale":[{"backdrop-grayscale":["",r,A,O]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[r,A,O]}],"backdrop-invert":[{"backdrop-invert":["",r,A,O]}],"backdrop-opacity":[{"backdrop-opacity":[r,A,O]}],"backdrop-saturate":[{"backdrop-saturate":[r,A,O]}],"backdrop-sepia":[{"backdrop-sepia":["",r,A,O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",A,O]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[r,"initial",A,O]}],ease:[{ease:["linear","initial",j,A,O]}],delay:[{delay:[r,A,O]}],animate:[{animate:["none",R,A,O]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[W,A,O]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:o5()}],"rotate-x":[{"rotate-x":o5()}],"rotate-y":[{"rotate-y":o5()}],"rotate-z":[{"rotate-z":o5()}],scale:[{scale:l5()}],"scale-x":[{"scale-x":l5()}],"scale-y":[{"scale-y":l5()}],"scale-z":[{"scale-z":l5()}],"scale-3d":["scale-3d"],skew:[{skew:S8()}],"skew-x":[{"skew-x":S8()}],"skew-y":[{"skew-y":S8()}],transform:[{transform:[A,O,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:i5()}],"translate-x":[{"translate-x":i5()}],"translate-y":[{"translate-y":i5()}],"translate-z":[{"translate-z":i5()}],"translate-none":["translate-none"],accent:[{accent:f()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:f()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",A,O]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",A,O]}],fill:[{fill:["none",...f()]}],"stroke-w":[{stroke:[r,q5,q2,x8]}],stroke:[{stroke:["none",...f()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}};var G$=hQ(QY);function _(...$){return G$(Z5($))}var w$=($)=>typeof $==="boolean"?`${$}`:$===0?"0":$,B$=Z5,t0=($,J)=>(Z)=>{var q;if((J===null||J===void 0?void 0:J.variants)==null)return B$($,Z===null||Z===void 0?void 0:Z.class,Z===null||Z===void 0?void 0:Z.className);let{variants:Q,defaultVariants:Y}=J,X=Object.keys(Q).map((w)=>{let B=Z===null||Z===void 0?void 0:Z[w],M=Y===null||Y===void 0?void 0:Y[w];if(B===null)return null;let T=w$(B)||w$(M);return Q[w][T]}),K=Z&&Object.entries(Z).reduce((w,B)=>{let[M,T]=B;if(T===void 0)return w;return w[M]=T,w},{}),G=J===null||J===void 0?void 0:(q=J.compoundVariants)===null||q===void 0?void 0:q.reduce((w,B)=>{let{class:M,className:T,...z}=B;return Object.entries(z).every((H)=>{let[W,F]=H;return Array.isArray(F)?F.includes({...Y,...K}[W]):{...Y,...K}[W]===F})?[...w,M,T]:w},[]);return B$($,X,G,Z===null||Z===void 0?void 0:Z.class,Z===null||Z===void 0?void 0:Z.className)};var z4=t0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium cursor-pointer transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*=size-])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-ring/50 focus-visible:ring-[3px]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20",outline:"border-2 border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md gap-1.5 px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs",lg:"h-10 rounded-md px-6",icon:"size-9","icon-sm":"size-8"}},defaultVariants:{variant:"default",size:"default"}});function k($){let{variant:J,size:Z,className:q,disabled:Q,type:Y="button",onClick:X,children:K}=$;return U("button",{type:Y,disabled:Q,onClick:X,className:_(z4({variant:J,size:Z,className:q}))},K)}var M$=t0("inline-flex items-center justify-center rounded-full border border-transparent px-2.5 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none transition-colors overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground",secondary:"bg-secondary text-secondary-foreground",destructive:"bg-destructive text-white",outline:"border-border text-foreground",ghost:"text-muted-foreground"}},defaultVariants:{variant:"default"}});function h({variant:$,className:J,children:Z}){return U("span",{className:_(M$({variant:$}),J)},Z)}function v({className:$,children:J,onClick:Z}){return U("div",{"data-slot":"card",className:_("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",Z&&"cursor-pointer",$),onClick:Z},J)}function x({className:$,children:J}){return U("div",{"data-slot":"card-header",className:_("grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6",$)},J)}function d({className:$,children:J}){return U("div",{"data-slot":"card-title",className:_("leading-none font-semibold",$)},J)}function l({className:$,children:J}){return U("div",{"data-slot":"card-description",className:_("text-muted-foreground text-sm",$)},J)}function m({className:$,children:J}){return U("div",{"data-slot":"card-content",className:_("px-6",$)},J)}function p8({className:$,children:J}){return U("div",{"data-slot":"card-footer",className:_("flex items-center px-6",$)},J)}function t($){let{className:J,type:Z="text",...q}=$;return U("input",{"data-slot":"input",type:Z,...q,className:_("placeholder:text-muted-foreground border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-sm shadow-xs transition-[color,box-shadow] outline-none","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50",J)})}function D1($){let{className:J,rows:Z=3,...q}=$;return U("textarea",{"data-slot":"textarea",rows:Z,...q,className:_("border-input placeholder:text-muted-foreground flex min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-sm shadow-xs transition-[color,box-shadow] outline-none","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:cursor-not-allowed disabled:opacity-50","resize-none",J)})}function Y0({className:$,htmlFor:J,children:Z}){return U("label",{"data-slot":"label",for:J,className:_("flex items-center gap-2 text-sm leading-none font-medium select-none","peer-disabled:cursor-not-allowed peer-disabled:opacity-50",$)},Z)}function e0({className:$,checked:J=!1,disabled:Z=!1,onChange:q}){return U("button",{"data-slot":"switch",type:"button",role:"switch","aria-checked":J,disabled:Z,onClick:()=>q?.(!J),className:_("peer inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none cursor-pointer","focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:cursor-not-allowed disabled:opacity-50",J?"bg-primary":"bg-muted-foreground/40",$)},U("span",{"data-slot":"switch-thumb",className:_("pointer-events-none block size-4 rounded-full bg-background ring-0 transition-transform",J?"translate-x-4":"translate-x-0")}))}function b1({className:$,children:J}){return U("span",{"data-slot":"avatar",className:_("relative flex size-8 shrink-0 overflow-hidden rounded-full",$)},J)}class L1 extends N{constructor($){super($);this.state={failed:!1}}componentDidUpdate($){if($.src!==this.props.src)this.setState({failed:!1})}render(){if(this.state.failed||!this.props.src)return null;return U("img",{"data-slot":"avatar-image",src:this.props.src,alt:this.props.alt||"",onError:($)=>{this.setState({failed:!0}),this.props.onError?.($)},className:_("aspect-square size-full object-cover",this.props.className)})}}function v1({className:$,children:J}){return U("span",{"data-slot":"avatar-fallback",className:_("bg-muted flex size-full items-center justify-center rounded-full text-xs font-medium",$)},J)}function d8({className:$,children:J}){return U("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto"},U("table",{"data-slot":"table",className:_("w-full caption-bottom text-sm",$)},J))}function c8({className:$,children:J}){return U("thead",{"data-slot":"table-header",className:_("[&_tr]:border-b",$)},J)}function r8({className:$,children:J}){return U("tbody",{"data-slot":"table-body",className:_("[&_tr:last-child]:border-0",$)},J)}function W4({className:$,children:J}){return U("tr",{"data-slot":"table-row",className:_("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",$)},J)}function _2({className:$,children:J}){return U("th",{"data-slot":"table-head",className:_("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",$)},J)}function D2({className:$,children:J}){return U("td",{"data-slot":"table-cell",className:_("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",$)},J)}function N0({className:$,orientation:J="horizontal"}){return U("div",{"data-slot":"separator",role:"separator",className:_("shrink-0 bg-border",J==="horizontal"?"h-px w-full":"h-full w-px",$)})}var YY={sm:"size-4 border-2",default:"size-6 border-3",lg:"size-8 border-4"};function $1({className:$,size:J="default"}){return U("div",{"data-slot":"spinner",role:"status","aria-label":"Loading",className:_("animate-spin rounded-full border-muted border-t-primary",YY[J],$)})}function p({className:$}){return U("div",{"data-slot":"skeleton",className:_("bg-accent animate-pulse rounded-md",$)})}var T$=t0("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function H0({variant:$,className:J,children:Z}){return U("div",{"data-slot":"alert",role:"alert",className:_(T$({variant:$}),J)},Z)}function F0({className:$,children:J}){return U("div",{"data-slot":"alert-description",className:_("col-start-2 text-sm text-muted-foreground [&_p]:leading-relaxed",$)},J)}var z$=t0("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 outline-none focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:focus-visible:ring-destructive/20",{variants:{variant:{default:"bg-transparent hover:bg-muted hover:text-muted-foreground data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground data-[state=on]:bg-accent data-[state=on]:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});var y1=null,s8=new Set;function Q5($){y1=$,s8.forEach((J)=>J())}function XY($){return s8.add($),()=>{s8.delete($)}}var UY=0;class W$ extends N{id=`nmi-${++UY}`;unsub=null;ref=null;constructor($){super($);this.state={open:!1}}handleOutside=($)=>{if(y1===this.id&&this.ref&&!this.ref.contains($.target))Q5(null)};handleKey=($)=>{if($.key==="Escape"&&y1)Q5(null)};componentDidMount(){this.unsub=XY(()=>{let $=y1===this.id;if(this.state.open!==$)this.setState({open:$})}),document.addEventListener("mousedown",this.handleOutside),document.addEventListener("keydown",this.handleKey)}componentWillUnmount(){if(this.unsub?.(),document.removeEventListener("mousedown",this.handleOutside),document.removeEventListener("keydown",this.handleKey),y1===this.id)Q5(null)}handleClick=()=>{Q5(y1===this.id?null:this.id)};handleMouseEnter=()=>{if(y1&&y1!==this.id)Q5(this.id)};render(){let{className:$,children:J}=this.props,{open:Z}=this.state,q=Array.isArray(J)?J:[J],Q=null,Y=null,X=[];for(let K of q){if(!K)continue;if(K.type===o8||K.props&&K.props["data-slot"]==="navigation-menu-trigger")Q=K;else if(K.type===H$||K.props&&K.props["data-slot"]==="navigation-menu-content")Y=K;else X.push(K)}return U("li",{"data-slot":"navigation-menu-item",ref:(K)=>{this.ref=K},className:_("relative",$),onmouseenter:this.handleMouseEnter},Q?U(o8,{...Q.props||{},onClick:this.handleClick,"data-state":Z?"open":"closed"},Q.children!=null?Q.children:Q.props&&Q.props.children):null,Z&&Y?Y:null,...X)}}function o8($){let{className:J,onClick:Z,children:q,...Q}=$;return U("button",{"data-slot":"navigation-menu-trigger",type:"button",onClick:Z,className:_("group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors","hover:bg-accent hover:text-accent-foreground","focus-visible:outline-none","data-[state=open]:bg-accent/50",J),...Q},q,U("svg",{className:_("relative top-px ml-1 size-3 transition-transform duration-200","group-data-[state=open]:rotate-180"),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M6 9l6 6 6-6"})))}function H$({className:$,children:J}){return U("div",{"data-slot":"navigation-menu-content",className:_("absolute left-0 top-full w-full md:w-auto","mt-1.5 min-w-[400px] md:min-w-[500px] lg:min-w-[600px] rounded-md border bg-popover p-4 text-popover-foreground shadow-lg","animate-in fade-in-0 zoom-in-95",$)},J)}var L2=null,i8=new Set;function l8($){L2=$,i8.forEach((J)=>J())}function KY($){return i8.add($),()=>{i8.delete($)}}var GY=0;class F$ extends N{id=`mbm-${++GY}`;unsub=null;constructor($){super($);this.state={open:!1}}componentDidMount(){this.unsub=KY(()=>{let $=L2===this.id;if(this.state.open!==$)this.setState({open:$})})}componentWillUnmount(){if(this.unsub?.(),L2===this.id)l8(null)}handleClick=()=>{l8(L2===this.id?null:this.id)};handleMouseEnter=()=>{if(L2&&L2!==this.id)l8(this.id)};render(){let{children:$}=this.props,{open:J}=this.state,Z=Array.isArray($)?$:[$],q=null,Q=null,Y=[];for(let X of Z){if(!X)continue;if(X.type===n8||X.props&&X.props["data-slot"]==="menubar-trigger")q=X;else if(X.type===j$||X.props&&X.props["data-slot"]==="menubar-content")Q=X;else Y.push(X)}return U("div",{"data-slot":"menubar-menu",className:"relative",onmouseenter:this.handleMouseEnter},q?U(n8,{...q.props||{},onClick:this.handleClick,"data-state":J?"open":"closed"},q.children!=null?q.children:q.props&&q.props.children):null,J&&Q?Q:null,...Y)}}function n8($){let{className:J,onClick:Z,children:q,...Q}=$;return U("button",{"data-slot":"menubar-trigger",type:"button",onClick:Z,className:_("flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none","hover:bg-accent hover:text-accent-foreground","focus-visible:outline-none","data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",J),...Q},q)}function j$({className:$,children:J}){return U("div",{"data-slot":"menubar-content",role:"menu",className:_("absolute left-0 top-full z-50 mt-1 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","animate-in fade-in-0 zoom-in-95",$)},J)}var jT=t0("bg-background fixed z-50 flex flex-col gap-4 shadow-lg transition-transform duration-300 ease-in-out border",{variants:{side:{top:"inset-x-0 top-0 border-b",bottom:"inset-x-0 bottom-0 border-t",left:"inset-y-0 left-0 w-3/4 border-r sm:max-w-sm",right:"inset-y-0 right-0 w-3/4 border-l sm:max-w-sm"}},defaultVariants:{side:"right"}});class H4 extends N{raf=null;timer=null;constructor($){super($);this.state={mounted:$.open,visible:!1}}componentDidMount(){if(this.props.open)this.raf=requestAnimationFrame(()=>{this.raf=requestAnimationFrame(()=>{this.setState({visible:!0})})})}componentDidUpdate($){if(!$.open&&this.props.open)this.clearTimers(),this.setState({mounted:!0,visible:!1},()=>{this.raf=requestAnimationFrame(()=>{this.raf=requestAnimationFrame(()=>{this.setState({visible:!0})})})});else if($.open&&!this.props.open)this.setState({visible:!1}),this.timer=setTimeout(()=>this.setState({mounted:!1}),300)}componentWillUnmount(){this.clearTimers()}clearTimers(){if(this.raf)cancelAnimationFrame(this.raf),this.raf=null;if(this.timer)clearTimeout(this.timer),this.timer=null}render(){if(!this.state.mounted)return null;let{visible:$}=this.state,{onOpenChange:J,children:Z}=this.props;return U(wY,{visible:$,onClose:()=>J?.(!1)},Z)}}function wY({visible:$,onClose:J,children:Z}){return U("div",{"data-slot":"drawer-portal",className:"fixed inset-0 z-50"},U("div",{"data-slot":"drawer-overlay",className:"fixed inset-0 bg-black/50",style:{opacity:$?1:0,transition:"opacity 300ms cubic-bezier(0.4,0,0.2,1)"},onClick:J}),U("div",{"data-slot":"drawer-content",className:"bg-background fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border-t",style:{transform:$?"translateY(0)":"translateY(100%)",transition:"transform 300ms cubic-bezier(0.32,0.72,0,1)"}},U("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),Z))}function a8({className:$,children:J}){return U("div",{"data-slot":"drawer-content-inner",className:_("px-4",$)},J)}function t8({className:$,children:J}){return U("div",{"data-slot":"drawer-header",className:_("grid gap-1.5 p-4 text-center",$)},J)}function e8({className:$,children:J}){return U("h2",{"data-slot":"drawer-title",className:_("text-lg font-semibold leading-none tracking-tight",$)},J)}class V2 extends N{timer=null;constructor($){super($);this.state={visible:!1}}componentWillUnmount(){if(this.timer)clearTimeout(this.timer)}show=()=>{let $=this.props.delayMs??200;this.timer=setTimeout(()=>this.setState({visible:!0}),$)};hide=()=>{if(this.timer)clearTimeout(this.timer);this.timer=null,this.setState({visible:!1})};render(){let{content:$,side:J="top",className:Z,children:q}=this.props,{visible:Q}=this.state,Y={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"};return U("div",{"data-slot":"tooltip",className:"relative inline-flex",onMouseEnter:this.show,onMouseLeave:this.hide,onFocus:this.show,onBlur:this.hide},q,Q?U("div",{"data-slot":"tooltip-content",role:"tooltip",className:_("absolute z-50 w-fit rounded-md bg-popover border border-border px-3 py-1.5 text-xs text-popover-foreground shadow-md pointer-events-none whitespace-nowrap animate-in fade-in-0 zoom-in-95",Y[J],Z)},$):null)}}var Y5=[],F4=[],BY=0;function R$(){F4.forEach(($)=>$([...Y5]))}function X0($){let J=`toast-${++BY}`,Z={id:J,duration:4000,variant:"default",...$};return Y5=[...Y5,Z],R$(),setTimeout(()=>{$9(J)},Z.duration),J}function $9($){Y5=Y5.filter((J)=>J.id!==$),R$()}function MY($){return F4.push($),()=>{F4=F4.filter((J)=>J!==$)}}var TY=t0("group pointer-events-auto relative flex w-full items-center justify-between gap-4 overflow-hidden rounded-md border p-4 shadow-lg transition-all",{variants:{variant:{default:"bg-background text-foreground border-border",destructive:"bg-destructive text-white border-destructive group"}},defaultVariants:{variant:"default"}});function zY({data:$,onDismiss:J}){return U("div",{"data-slot":"toast",role:"alert",className:_(TY({variant:$.variant}))},U("div",{className:"grid gap-1"},$.title?U("div",{"data-slot":"toast-title",className:"text-sm font-semibold"},$.title):null,$.description?U("div",{"data-slot":"toast-description",className:"text-sm opacity-90"},$.description):null),U("button",{"data-slot":"toast-close",type:"button",onClick:()=>J($.id),className:_("absolute top-2 right-2 rounded-md p-1 opacity-0 transition-opacity group-hover:opacity-100","outline-none focus-visible:opacity-100 focus-visible:ring-ring/50 focus-visible:ring-[3px]","hover:text-foreground"),"aria-label":"Dismiss"},U("svg",{className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))))}class P2 extends N{unsub=null;constructor($){super($);this.state={toasts:[]}}componentDidMount(){this.unsub=MY(($)=>this.setState({toasts:$}))}componentWillUnmount(){this.unsub?.()}render(){let{toasts:$}=this.state;if($.length===0)return null;let J=3,Z=$.slice(-J),q=$.length-Z.length;return U("div",{"data-slot":"toaster",className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2 w-full max-w-sm pointer-events-none"},q>0?U("div",{className:"text-center text-xs text-muted-foreground py-1"},`+${q} more`):null,...Z.map((Q)=>U(zY,{key:Q.id,data:Q,onDismiss:$9})))}}var WY=1000,HY=30000,FY=1e4;class J9{ws=null;url;accessToken="";handlers=new Map;reconnectAttempts=0;reconnectTimer=null;pingTimer=null;connected=!1;constructor($){let J=window.location.protocol==="https:"?"wss:":"ws:",Z=$||window.location.host;this.url=`${J}//${Z}/ws`}setAccessToken($){this.accessToken=$}on($,J){let Z=this.handlers.get($)||[];Z.push(J),this.handlers.set($,Z)}off($,J){let Z=this.handlers.get($)||[];this.handlers.set($,Z.filter((q)=>q!==J))}connect(){if(this.ws)this.ws.close();let $=this.accessToken?`${this.url}?accessToken=${this.accessToken}`:this.url;this.ws=new WebSocket($),this.ws.onopen=()=>{this.connected=!0,this.reconnectAttempts=0,this.startPing(),console.log("[WS] Connected")},this.ws.onclose=(J)=>{this.connected=!1,this.stopPing(),console.log(`[WS] Disconnected (code=${J.code})`),this.scheduleReconnect()},this.ws.onerror=(J)=>{console.error("[WS] Error:",J)},this.ws.onmessage=(J)=>{try{let Z=JSON.parse(J.data);if(Z.type==="PONG")return;this.dispatch(Z)}catch(Z){console.error("[WS] Parse error:",Z)}}}disconnect(){if(this.stopPing(),this.reconnectTimer)clearTimeout(this.reconnectTimer),this.reconnectTimer=null;if(this.ws)this.ws.onclose=null,this.ws.close(),this.ws=null;this.connected=!1}send($){if(this.ws&&this.connected)this.ws.send($)}sendChat($){this.send(JSON.stringify({type:"CHAT",body:$}))}isConnected(){return this.connected}dispatch($){let J=this.handlers.get($.type);if(J)for(let q of J)q($);let Z=this.handlers.get("*");if(Z)for(let q of Z)q($)}startPing(){this.stopPing(),this.pingTimer=setInterval(()=>{this.send(JSON.stringify({type:"PING"}))},FY)}stopPing(){if(this.pingTimer)clearInterval(this.pingTimer),this.pingTimer=null}scheduleReconnect(){if(this.reconnectTimer)return;let $=Math.min(WY*Math.pow(2,this.reconnectAttempts),HY);this.reconnectAttempts++,console.log(`[WS] Reconnecting in ${$}ms (attempt ${this.reconnectAttempts})`),this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.connect()},$)}}async function j4($){let J=await fetch(`/api${$}`);if(!J.ok)throw new Error(`GET ${$} failed: ${J.status}`);return J.json()}async function jY($,J){let Z=await fetch(`/api${$}`,{method:"POST",headers:{"Content-Type":"application/json"},body:J?JSON.stringify(J):void 0});if(!Z.ok)throw new Error(`POST ${$} failed: ${Z.status}`);return Z.json()}async function RY($,J){let Z=await fetch(`/api${$}?accessToken=${J}`);if(!Z.ok)throw new Error(`GET ${$} failed: ${Z.status}`);return Z.json()}async function d0($,J){let Z=await fetch(`/api${$}`,{headers:{Authorization:`Bearer ${J}`}});if(!Z.ok)throw new Error(`GET ${$} failed: ${Z.status}`);return Z.json()}async function b($,J,Z){let q=await fetch(`/api${$}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${J}`},body:Z?JSON.stringify(Z):void 0});if(!q.ok)throw new Error(`POST ${$} failed: ${q.status}`);return q.json()}var y={getStatus:()=>j4("/status"),getConfig:()=>j4("/config"),getEmoji:()=>j4("/emoji"),getChatHistory:($)=>RY("/chat",$),registerChatUser:($)=>jY("/chat/register",{displayName:$}),getVideoVariants:()=>j4("/video/variants"),admin:{getConfig:($)=>d0("/admin/serverconfig",$),getStatus:($)=>d0("/admin/status",$),getLogs:($)=>d0("/admin/logs",$),getViewers:($)=>d0("/admin/viewers",$),getHardware:($)=>d0("/admin/hardwareinfo",$),getChatMessages:($)=>d0("/admin/chat/messages",$),getWebhooks:($)=>d0("/admin/webhooks",$),getAccessTokens:($)=>d0("/admin/accesstokens",$),getFederationFollowers:($)=>d0("/admin/followers",$),getFederationActions:($)=>d0("/admin/federation/actions",$),getConnectedClients:($)=>d0("/admin/chat/clients",$),getLogEntries:($)=>d0("/admin/logs",$),getWarnings:($)=>d0("/admin/logs/warnings",$),sendSystemMessage:($,J)=>b("/admin/chat/send",$,{body:J}),updateChatDisabled:($,J)=>b("/admin/config/chat/disable",$,{value:J}),updateChatJoinMessages:($,J)=>b("/admin/config/chat/joinmessagesenabled",$,{value:J}),updateChatEstablishedMode:($,J)=>b("/admin/config/chat/establishedusermode",$,{value:J}),updateChatSpamProtection:($,J)=>b("/admin/config/chat/spamprotectionenabled",$,{value:J}),updateChatSlurFilter:($,J)=>b("/admin/config/chat/slurfilterenabled",$,{value:J}),updateForbiddenUsernames:($,J)=>b("/admin/config/chat/forbiddenusernames",$,{value:J}),updateSuggestedUsernames:($,J)=>b("/admin/config/chat/suggestedusernames",$,{value:J}),updateHideViewerCount:($,J)=>b("/admin/config/hideviewercount",$,{value:J}),setStreamKeys:($,J)=>b("/admin/config/streamkeys",$,{value:J}),setServerName:($,J)=>b("/admin/config/name",$,{value:J}),setServerSummary:($,J)=>b("/admin/config/serversummary",$,{value:J}),setServerURL:($,J)=>b("/admin/config/serverurl",$,{value:J}),setStreamTitle:($,J)=>b("/admin/config/streamtitle",$,{value:J}),setTags:($,J)=>b("/admin/config/tags",$,J.map((Z)=>({value:Z}))),setLogo:($,J)=>b("/admin/config/logo",$,{value:J}),setOfflineMessage:($,J)=>b("/admin/config/offlinemessage",$,{value:J}),setWelcomeMessage:($,J)=>b("/admin/config/welcomemessage",$,{value:J}),setNSFW:($,J)=>b("/admin/config/nsfw",$,{value:J}),setExtraPageContent:($,J)=>b("/admin/config/pagecontent",$,{value:J}),setSocialHandles:($,J)=>b("/admin/config/socialhandles",$,{value:J}),setCustomStyles:($,J)=>b("/admin/config/customstyles",$,{value:J}),setCustomJavascript:($,J)=>b("/admin/config/customjavascript",$,{value:J}),setStreamLatencyLevel:($,J)=>b("/admin/config/video/streamlatencylevel",$,{value:J}),setStreamOutputVariants:($,J)=>b("/admin/config/video/streamoutputvariants",$,{value:J}),setVideoCodec:($,J)=>b("/admin/config/video/codec",$,{value:J}),setFfmpegPath:($,J)=>b("/admin/config/ffmpegpath",$,{value:J}),setRTMPPort:($,J)=>b("/admin/config/rtmpserverport",$,{value:J}),setWebServerPort:($,J)=>b("/admin/config/webserverport",$,{value:J}),setVideoServingEndpoint:($,J)=>b("/admin/config/videoservingendpoint",$,{value:J}),setS3Config:($,J)=>b("/admin/config/s3",$,{value:J}),setFederationEnabled:($,J)=>b("/admin/config/federation/enable",$,{value:J}),setFederationPrivate:($,J)=>b("/admin/config/federation/private",$,{value:J}),setFederationShowEngagement:($,J)=>b("/admin/config/federation/showengagement",$,{value:J}),setFederationUsername:($,J)=>b("/admin/config/federation/username",$,{value:J}),setFederationGoLiveMessage:($,J)=>b("/admin/config/federation/livemessage",$,{value:J}),setFederationBlockDomains:($,J)=>b("/admin/config/federation/blockdomains",$,J.map((Z)=>({value:Z}))),sendFederatedMessage:($,J)=>b("/admin/federation/send",$,{value:J}),setDiscordConfig:($,J)=>b("/admin/config/notifications/discord",$,{value:J}),setBrowserPushConfig:($,J)=>b("/admin/config/notifications/browser",$,{value:J}),setExternalActions:($,J)=>b("/admin/config/externalactions",$,{value:J}),createWebhook:($,J)=>b("/admin/webhooks/create",$,J),deleteWebhook:($,J)=>b("/admin/webhooks/delete",$,{id:J}),createAccessToken:($,J)=>b("/admin/accesstokens/create",$,J),deleteAccessToken:($,J)=>b("/admin/accesstokens/delete",$,{token:J}),setDirectoryEnabled:($,J)=>b("/admin/config/directoryenabled",$,{value:J}),setAdminPassword:($,J)=>b("/admin/config/adminpass",$,{value:J}),setDisableSearchIndexing:($,J)=>b("/admin/config/disablesearchindexing",$,{value:J}),setSocketHostOverride:($,J)=>b("/admin/config/sockethostoverride",$,{value:J}),updateConfig:($,J)=>b("/admin/config",$,J),setStreamKey:($,J)=>b("/admin/config/key",$,{value:J}),updateVideoConfig:($,J)=>b("/admin/config/video",$,J)}};function D$($){try{return new Date($).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}}function L$($){if($===1)return"1 viewer";return`${$} viewers`}function c0($){try{let J=new Date($),q=new Date().getTime()-J.getTime(),Q=Math.floor(q/60000);if(Q<1)return"just now";if(Q<60)return`${Q}m ago`;let Y=Math.floor(Q/60);if(Y<24)return`${Y}h ago`;return`${Math.floor(Y/24)}d ago`}catch{return""}}function X5($){try{return localStorage.getItem($)}catch{return null}}function U5($,J){try{localStorage.setItem($,J)}catch{}}function R4($){try{localStorage.removeItem($)}catch{}}var J1={accessToken:"oni-access-token",displayName:"oni-display-name",displayColor:"oni-display-color",userId:"oni-user-id",visitCount:"oni-visit-count",notifyModalShown:"oni-notify-modal-shown"};var _4=new Set,Z9=!1;function f0(){if(Z9)return;Z9=!0,queueMicrotask(()=>{Z9=!1;for(let $ of _4)$()})}var{configHydration:V$,statusHydration:_Y}=window,c={loading:!V$,config:V$||null,status:_Y||null,messages:[],currentUser:null,accessToken:X5(J1.accessToken),isMobile:window.innerWidth<=768,chatVisible:!0,error:null},D0=null,K5=null,P$=X5(J1.userId),I$=X5(J1.displayName),S$=X5(J1.displayColor);if(P$&&I$)c.currentUser={id:P$,displayName:I$,displayColor:S$?parseInt(S$,10):0};function C$(){let $=c.config?.socketHostOverride;if(D0=new J9($||void 0),c.accessToken)D0.setAccessToken(c.accessToken);D0.on("CHAT",(J)=>{let Z=J;c.messages=[...c.messages,Z],f0()}),D0.on("NAME_CHANGE",(J)=>{let Z=J;c.messages=[...c.messages,Z],f0()}),D0.on("USER_JOINED",(J)=>{let Z=J;c.messages=[...c.messages,Z],f0()}),D0.on("USER_PARTED",(J)=>{let Z=J;c.messages=[...c.messages,Z],f0()}),D0.on("SYSTEM",(J)=>{let Z=J;c.messages=[...c.messages,Z],f0()}),D0.on("FEDIVERSE_ENGAGEMENT_FOLLOW",(J)=>{let Z=J;c.messages=[...c.messages,Z],f0()}),D0.on("FEDIVERSE_ENGAGEMENT_LIKE",(J)=>{let Z=J;c.messages=[...c.messages,Z],f0()}),D0.on("FEDIVERSE_ENGAGEMENT_REPOST",(J)=>{let Z=J;c.messages=[...c.messages,Z],f0()}),D0.on("CONNECTED_USER_INFO",(J)=>{let Z=J;if(Z.user)c.currentUser={id:Z.user.id,displayName:Z.user.displayName,displayColor:Z.user.displayColor,isModerator:Z.user.isModerator},f0()}),D0.on("VISIBILITY-UPDATE",(J)=>{let Z=J;if(Z.ids&&Z.ids.length>0){let q=new Set(Z.ids);if(Z.visible===!1)c.messages=c.messages.filter((Q)=>!q.has(Q.id));f0()}}),D0.on("ERROR_NEEDS_REGISTRATION",()=>{c.currentUser=null,c.accessToken=null,R4(J1.accessToken),R4(J1.userId),R4(J1.displayName),f0()}),D0.connect()}function DY(){if(K5)return;K5=setInterval(async()=>{try{let $=await y.getStatus();c.status=$,f0()}catch($){console.error("[Store] Status poll error:",$)}},5000)}var n={getState(){return c},subscribe($){return _4.add($),()=>_4.delete($)},async init(){try{if(!c.config){let[$,J]=await Promise.all([y.getConfig(),y.getStatus()]);c.config=$,c.status=J}if(c.accessToken)try{let $=await y.getChatHistory(c.accessToken);if(Array.isArray($))c.messages=$}catch{}c.loading=!1,f0(),C$(),DY()}catch($){c.error=$ instanceof Error?$.message:"Failed to load",c.loading=!1,f0()}},async registerUser($){try{let J=await y.registerChatUser($);if(c.accessToken=J.accessToken,c.currentUser={id:J.id,displayName:J.displayName,displayColor:J.displayColor},U5(J1.accessToken,J.accessToken),U5(J1.userId,J.id),U5(J1.displayName,J.displayName),U5(J1.displayColor,String(J.displayColor)),D0)D0.disconnect();C$();try{let Z=await y.getChatHistory(J.accessToken);if(Array.isArray(Z))c.messages=Z}catch{}f0()}catch(J){throw console.error("[Store] Registration error:",J),J}},sendChat($){if(D0)D0.sendChat($)},toggleChat(){c.chatVisible=!c.chatVisible,f0()},setMobile($){if(c.isMobile!==$)c.isMobile=$,f0()},cleanup(){if(D0)D0.disconnect(),D0=null;if(K5)clearInterval(K5),K5=null;_4.clear()}};var D4=[];function N$(){D4.forEach(($)=>$())}function O$($){return D4.push($),()=>{D4=D4.filter((J)=>J!==$)}}var LY=new Set(["neutral","stone","zinc","gray","amber","blue","cyan","emerald","fuchsia","green","indigo","lime","orange","pink","purple","red","rose","sky","teal","violet"]);function L4(){let $=localStorage.getItem("ribbit_base_theme");if($&&LY.has($))return $;return"neutral"}function A$($){localStorage.setItem("ribbit_base_theme",$),q9(),N$()}function G5(){let $=localStorage.getItem("ribbit_dark_mode");if($!==null)return $==="true";return window.matchMedia("(prefers-color-scheme: dark)").matches}function VY($){localStorage.setItem("ribbit_dark_mode",String($)),q9(),N$()}function k$(){VY(!G5())}function q9(){let $=document.documentElement,J=G5(),Z=L4();if(J)$.classList.add("dark");else $.classList.remove("dark");if(Array.from($.classList).filter((q)=>q.startsWith("theme-")).forEach((q)=>$.classList.remove(q)),Z!=="neutral")$.classList.add(`theme-${Z}`)}function PY(){let $=localStorage.getItem("theme");if($&&localStorage.getItem("ribbit_dark_mode")===null)localStorage.setItem("ribbit_dark_mode",$==="dark"?"true":"false"),localStorage.removeItem("theme")}function f$(){PY(),q9()}var IY=[{id:"neutral",label:"Neutral",swatch:"bg-[oklch(0.205_0_0)] dark:bg-[oklch(0.922_0_0)]"},{id:"stone",label:"Stone",swatch:"bg-[oklch(0.216_0.006_56)] dark:bg-[oklch(0.923_0.003_49)]"},{id:"zinc",label:"Zinc",swatch:"bg-[oklch(0.21_0.006_286)] dark:bg-[oklch(0.92_0.004_286)]"},{id:"gray",label:"Gray",swatch:"bg-[oklch(0.21_0.034_265)] dark:bg-[oklch(0.928_0.006_265)]"}],SY=[{id:"amber",label:"Amber",swatch:"bg-[oklch(0.67_0.16_58)] dark:bg-[oklch(0.77_0.16_70)]"},{id:"blue",label:"Blue",swatch:"bg-[oklch(0.488_0.243_264)] dark:bg-[oklch(0.42_0.18_266)]"},{id:"cyan",label:"Cyan",swatch:"bg-[oklch(0.61_0.11_222)] dark:bg-[oklch(0.71_0.13_215)]"},{id:"emerald",label:"Emerald",swatch:"bg-[oklch(0.60_0.13_163)] dark:bg-[oklch(0.70_0.15_162)]"},{id:"fuchsia",label:"Fuchsia",swatch:"bg-[oklch(0.59_0.26_323)] dark:bg-[oklch(0.67_0.26_322)]"},{id:"green",label:"Green",swatch:"bg-[oklch(0.648_0.2_132)] dark:bg-[oklch(0.648_0.2_132)]"},{id:"indigo",label:"Indigo",swatch:"bg-[oklch(0.51_0.23_277)] dark:bg-[oklch(0.59_0.20_277)]"},{id:"lime",label:"Lime",swatch:"bg-[oklch(0.65_0.18_132)] dark:bg-[oklch(0.77_0.20_131)]"},{id:"orange",label:"Orange",swatch:"bg-[oklch(0.646_0.222_41)] dark:bg-[oklch(0.705_0.213_48)]"},{id:"pink",label:"Pink",swatch:"bg-[oklch(0.59_0.22_1)] dark:bg-[oklch(0.66_0.21_354)]"},{id:"purple",label:"Purple",swatch:"bg-[oklch(0.56_0.25_302)] dark:bg-[oklch(0.63_0.23_304)]"},{id:"red",label:"Red",swatch:"bg-[oklch(0.577_0.245_27)] dark:bg-[oklch(0.637_0.237_25)]"},{id:"rose",label:"Rose",swatch:"bg-[oklch(0.586_0.253_18)] dark:bg-[oklch(0.645_0.246_16)]"},{id:"sky",label:"Sky",swatch:"bg-[oklch(0.59_0.14_242)] dark:bg-[oklch(0.68_0.15_237)]"},{id:"teal",label:"Teal",swatch:"bg-[oklch(0.60_0.10_185)] dark:bg-[oklch(0.70_0.12_183)]"},{id:"violet",label:"Violet",swatch:"bg-[oklch(0.541_0.281_293)] dark:bg-[oklch(0.606_0.25_293)]"}];class w5 extends N{unsub=null;ref=null;constructor($){super($);this.state={active:L4(),dark:G5(),open:!1}}componentDidMount(){this.unsub=O$(()=>this.setState({active:L4(),dark:G5()})),document.addEventListener("mousedown",this.handleOutside),document.addEventListener("keydown",this.handleKey)}componentWillUnmount(){this.unsub?.(),document.removeEventListener("mousedown",this.handleOutside),document.removeEventListener("keydown",this.handleKey)}handleOutside=($)=>{if(this.state.open&&this.ref&&!this.ref.contains($.target))this.setState({open:!1})};handleKey=($)=>{if($.key==="Escape")this.setState({open:!1})};toggleOpen=($)=>{$.stopPropagation(),this.setState({open:!this.state.open})};select=($)=>{A$($),this.setState({open:!1})};renderSwatch($,J){let Z=J===$.id;return U("button",{key:$.id,type:"button",title:$.label,onClick:(q)=>{q.stopPropagation(),this.select($.id)},className:_("relative size-7 rounded-full border-2 cursor-pointer transition-all","outline-none focus-visible:ring-ring/50 focus-visible:ring-[3px]","hover:scale-110",Z?"border-primary ring-2 ring-primary/30":"border-transparent hover:border-muted-foreground/30",$.swatch)},Z?U("svg",{className:"absolute inset-0 m-auto size-3.5 text-white drop-shadow-[0_1px_2px_rgba(0,0,0,0.5)]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M20 6L9 17l-5-5"})):null)}render(){let{className:$}=this.props,{active:J,dark:Z,open:q}=this.state;return U("div",{ref:(Q)=>{this.ref=Q},className:"relative"},U("button",{type:"button",onClick:this.toggleOpen,className:_("inline-flex items-center justify-center size-8 rounded-md border border-input bg-background text-foreground shadow-xs cursor-pointer transition-colors hover:bg-accent hover:text-accent-foreground outline-none focus-visible:ring-ring/50 focus-visible:ring-[3px]",$)},U("svg",{className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}),U("circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}),U("circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}),U("circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}),U("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"}))),q?U("div",{className:"absolute right-0 top-full z-50 mt-1.5 w-60 rounded-lg border bg-popover p-3 shadow-lg"},U("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-border"},U("span",{className:"text-xs font-medium text-muted-foreground"},"Dark mode"),U("button",{type:"button",onClick:(Q)=>{Q.stopPropagation(),k$()},className:_("relative inline-flex h-5 w-9 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors",Z?"bg-primary":"bg-input")},U("span",{className:_("pointer-events-none block size-4 rounded-full bg-background shadow-lg ring-0 transition-transform",Z?"translate-x-4":"translate-x-0")}))),U("p",{className:"text-[10px] font-semibold uppercase tracking-wider text-muted-foreground mb-1.5"},"Neutrals"),U("div",{className:"flex gap-1.5 mb-3"},...IY.map((Q)=>this.renderSwatch(Q,J))),U("p",{className:"text-[10px] font-semibold uppercase tracking-wider text-muted-foreground mb-1.5"},"Colors"),U("div",{className:"flex flex-wrap gap-1.5"},...SY.map((Q)=>this.renderSwatch(Q,J)))):null)}}function CY($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function V4($,...J){if(!CY($))throw new Error("Uint8Array expected");if(J.length>0&&!J.includes($.length))throw new Error("Uint8Array expected of length "+J+", got length="+$.length)}function Q9($,J=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(J&&$.finished)throw new Error("Hash#digest() has already been called")}function b$($,J){V4($);let Z=J.outputLen;if($.length<Z)throw new Error("digestInto() expects output buffer of length at least "+Z)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function P4($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function X1($,J){return $<<32-J|$>>>J}var y$=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",NY=Array.from({length:256},($,J)=>J.toString(16).padStart(2,"0"));function Y9($){if(V4($),y$)return $.toHex();let J="";for(let Z=0;Z<$.length;Z++)J+=NY[$[Z]];return J}var V1={_0:48,_9:57,A:65,F:70,a:97,f:102};function v$($){if($>=V1._0&&$<=V1._9)return $-V1._0;if($>=V1.A&&$<=V1.F)return $-(V1.A-10);if($>=V1.a&&$<=V1.f)return $-(V1.a-10);return}function E$($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(y$)return Uint8Array.fromHex($);let J=$.length,Z=J/2;if(J%2)throw new Error("hex string expected, got unpadded hex of length "+J);let q=new Uint8Array(Z);for(let Q=0,Y=0;Q<Z;Q++,Y+=2){let X=v$($.charCodeAt(Y)),K=v$($.charCodeAt(Y+1));if(X===void 0||K===void 0){let G=$[Y]+$[Y+1];throw new Error('hex string expected, got non-hex character "'+G+'" at index '+Y)}q[Q]=X*16+K}return q}function OY($){if(typeof $!=="string")throw new Error("utf8ToBytes expected string, got "+typeof $);return new Uint8Array(new TextEncoder().encode($))}function X9($){if(typeof $==="string")$=OY($);return V4($),$}class U9{clone(){return this._cloneInto()}}function g$($){let J=(q)=>$().update(X9(q)).digest(),Z=$();return J.outputLen=Z.outputLen,J.blockLen=Z.blockLen,J.create=()=>$(),J}function AY($,J,Z,q){if(typeof $.setBigUint64==="function")return $.setBigUint64(J,Z,q);let Q=BigInt(32),Y=BigInt(4294967295),X=Number(Z>>Q&Y),K=Number(Z&Y),G=q?4:0,w=q?0:4;$.setUint32(J+G,X,q),$.setUint32(J+w,K,q)}function h$($,J,Z){return $&J^~$&Z}function u$($,J,Z){return $&J^$&Z^J&Z}class K9 extends U9{constructor($,J,Z,q){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=J,this.padOffset=Z,this.isLE=q,this.buffer=new Uint8Array($),this.view=P4(this.buffer)}update($){Q9(this);let{view:J,buffer:Z,blockLen:q}=this;$=X9($);let Q=$.length;for(let Y=0;Y<Q;){let X=Math.min(q-this.pos,Q-Y);if(X===q){let K=P4($);for(;q<=Q-Y;Y+=q)this.process(K,Y);continue}if(Z.set($.subarray(Y,Y+X),this.pos),this.pos+=X,Y+=X,this.pos===q)this.process(J,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){Q9(this),b$($,this),this.finished=!0;let{buffer:J,view:Z,blockLen:q,isLE:Q}=this,{pos:Y}=this;if(J[Y++]=128,this.buffer.subarray(Y).fill(0),this.padOffset>q-Y)this.process(Z,0),Y=0;for(let B=Y;B<q;B++)J[B]=0;AY(Z,q-8,BigInt(this.length*8),Q),this.process(Z,0);let X=P4($),K=this.outputLen;if(K%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let G=K/4,w=this.get();if(G>w.length)throw new Error("_sha2: outputLen bigger than state");for(let B=0;B<G;B++)X.setUint32(4*B,w[B],Q)}digest(){let{buffer:$,outputLen:J}=this;this.digestInto($);let Z=$.slice(0,J);return this.destroy(),Z}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:J,buffer:Z,length:q,finished:Q,destroyed:Y,pos:X}=this;if($.length=q,$.pos=X,$.finished=Q,$.destroyed=Y,q%J)$.buffer.set(Z);return $}}var kY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),E1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),g1=new Uint32Array(64);class x$ extends K9{constructor($=32){super(64,$,8,!1);this.A=E1[0]|0,this.B=E1[1]|0,this.C=E1[2]|0,this.D=E1[3]|0,this.E=E1[4]|0,this.F=E1[5]|0,this.G=E1[6]|0,this.H=E1[7]|0}get(){let{A:$,B:J,C:Z,D:q,E:Q,F:Y,G:X,H:K}=this;return[$,J,Z,q,Q,Y,X,K]}set($,J,Z,q,Q,Y,X,K){this.A=$|0,this.B=J|0,this.C=Z|0,this.D=q|0,this.E=Q|0,this.F=Y|0,this.G=X|0,this.H=K|0}process($,J){for(let B=0;B<16;B++,J+=4)g1[B]=$.getUint32(J,!1);for(let B=16;B<64;B++){let M=g1[B-15],T=g1[B-2],z=X1(M,7)^X1(M,18)^M>>>3,H=X1(T,17)^X1(T,19)^T>>>10;g1[B]=H+g1[B-7]+z+g1[B-16]|0}let{A:Z,B:q,C:Q,D:Y,E:X,F:K,G,H:w}=this;for(let B=0;B<64;B++){let M=X1(X,6)^X1(X,11)^X1(X,25),T=w+M+h$(X,K,G)+kY[B]+g1[B]|0,H=(X1(Z,2)^X1(Z,13)^X1(Z,22))+u$(Z,q,Q)|0;w=G,G=K,K=X,X=Y+T|0,Y=Q,Q=q,q=Z,Z=T+H|0}Z=Z+this.A|0,q=q+this.B|0,Q=Q+this.C|0,Y=Y+this.D|0,X=X+this.E|0,K=K+this.F|0,G=G+this.G|0,w=w+this.H|0,this.set(Z,q,Q,Y,X,K,G,w)}roundClean(){g1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}var m$=g$(()=>new x$);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function B9($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function s$($,J){if(!Array.isArray(J))return!1;if(J.length===0)return!0;if($)return J.every((Z)=>typeof Z==="string");else return J.every((Z)=>Number.isSafeInteger(Z))}function o$($){if(typeof $!=="function")throw new Error("function expected");return!0}function I2($,J){if(typeof J!=="string")throw new Error(`${$}: string expected`);return!0}function M5($){if(!Number.isSafeInteger($))throw new Error(`invalid integer: ${$}`)}function S4($){if(!Array.isArray($))throw new Error("array expected")}function C4($,J){if(!s$(!0,J))throw new Error(`${$}: array of strings expected`)}function M9($,J){if(!s$(!1,J))throw new Error(`${$}: array of numbers expected`)}function r0(...$){let J=(Y)=>Y,Z=(Y,X)=>(K)=>Y(X(K)),q=$.map((Y)=>Y.encode).reduceRight(Z,J),Q=$.map((Y)=>Y.decode).reduce(Z,J);return{encode:q,decode:Q}}function s0($){let J=typeof $==="string"?$.split(""):$,Z=J.length;C4("alphabet",J);let q=new Map(J.map((Q,Y)=>[Q,Y]));return{encode:(Q)=>{return S4(Q),Q.map((Y)=>{if(!Number.isSafeInteger(Y)||Y<0||Y>=Z)throw new Error(`alphabet.encode: digit index outside alphabet "${Y}". Allowed: ${$}`);return J[Y]})},decode:(Q)=>{return S4(Q),Q.map((Y)=>{I2("alphabet.decode",Y);let X=q.get(Y);if(X===void 0)throw new Error(`Unknown letter: "${Y}". Allowed: ${$}`);return X})}}}function o0($=""){return I2("join",$),{encode:(J)=>{return C4("join.decode",J),J.join($)},decode:(J)=>{return I2("join.decode",J),J.split($)}}}function O4($,J="="){return M5($),I2("padding",J),{encode(Z){C4("padding.encode",Z);while(Z.length*$%8)Z.push(J);return Z},decode(Z){C4("padding.decode",Z);let q=Z.length;if(q*$%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;q>0&&Z[q-1]===J;q--)if((q-1)*$%8===0)throw new Error("padding: invalid, string has too much padding");return Z.slice(0,q)}}}function l$($){return o$($),{encode:(J)=>J,decode:(J)=>$(J)}}function p$($,J,Z){if(J<2)throw new Error(`convertRadix: invalid from=${J}, base cannot be less than 2`);if(Z<2)throw new Error(`convertRadix: invalid to=${Z}, base cannot be less than 2`);if(S4($),!$.length)return[];let q=0,Q=[],Y=Array.from($,(K)=>{if(M5(K),K<0||K>=J)throw new Error(`invalid integer: ${K}`);return K}),X=Y.length;while(!0){let K=0,G=!0;for(let w=q;w<X;w++){let B=Y[w],M=J*K,T=M+B;if(!Number.isSafeInteger(T)||M/J!==K||T-B!==M)throw new Error("convertRadix: carry overflow");let z=T/Z;K=T%Z;let H=Math.floor(z);if(Y[w]=H,!Number.isSafeInteger(H)||H*Z+K!==T)throw new Error("convertRadix: carry overflow");if(!G)continue;else if(!H)q=w;else G=!1}if(Q.push(K),G)break}for(let K=0;K<$.length-1&&$[K]===0;K++)Q.push(0);return Q.reverse()}var i$=($,J)=>J===0?$:i$(J,$%J),N4=($,J)=>$+(J-i$($,J)),I4=(()=>{let $=[];for(let J=0;J<40;J++)$.push(2**J);return $})();function G9($,J,Z,q){if(S4($),J<=0||J>32)throw new Error(`convertRadix2: wrong from=${J}`);if(Z<=0||Z>32)throw new Error(`convertRadix2: wrong to=${Z}`);if(N4(J,Z)>32)throw new Error(`convertRadix2: carry overflow from=${J} to=${Z} carryBits=${N4(J,Z)}`);let Q=0,Y=0,X=I4[J],K=I4[Z]-1,G=[];for(let w of $){if(M5(w),w>=X)throw new Error(`convertRadix2: invalid data word=${w} from=${J}`);if(Q=Q<<J|w,Y+J>32)throw new Error(`convertRadix2: carry overflow pos=${Y} from=${J}`);Y+=J;for(;Y>=Z;Y-=Z)G.push((Q>>Y-Z&K)>>>0);let B=I4[Y];if(B===void 0)throw new Error("invalid carry");Q&=B-1}if(Q=Q<<Z-Y&K,!q&&Y>=J)throw new Error("Excess padding");if(!q&&Q>0)throw new Error(`Non-zero padding: ${Q}`);if(q&&Y>0)G.push(Q>>>0);return G}function fY($){M5($);let J=256;return{encode:(Z)=>{if(!B9(Z))throw new Error("radix.encode input should be Uint8Array");return p$(Array.from(Z),J,$)},decode:(Z)=>{return M9("radix.decode",Z),Uint8Array.from(p$(Z,$,J))}}}function Z1($,J=!1){if(M5($),$<=0||$>32)throw new Error("radix2: bits should be in (0..32]");if(N4(8,$)>32||N4($,8)>32)throw new Error("radix2: carry overflow");return{encode:(Z)=>{if(!B9(Z))throw new Error("radix2.encode input should be Uint8Array");return G9(Array.from(Z),8,$,!J)},decode:(Z)=>{return M9("radix2.decode",Z),Uint8Array.from(G9(Z,$,8,J))}}}function d$($){return o$($),function(...J){try{return $.apply(null,J)}catch(Z){}}}var zj=r0(Z1(4),s0("0123456789ABCDEF"),o0("")),Wj=r0(Z1(5),s0("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),O4(5),o0("")),Hj=r0(Z1(5),s0("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),o0("")),Fj=r0(Z1(5),s0("0123456789ABCDEFGHIJKLMNOPQRSTUV"),O4(5),o0("")),jj=r0(Z1(5),s0("0123456789ABCDEFGHIJKLMNOPQRSTUV"),o0("")),Rj=r0(Z1(5),s0("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o0(""),l$(($)=>$.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),_j=r0(Z1(6),s0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),O4(6),o0("")),Dj=r0(Z1(6),s0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o0("")),Lj=r0(Z1(6),s0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),O4(6),o0("")),Vj=r0(Z1(6),s0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),o0("")),T9=($)=>r0(fY(58),s0($),o0("")),Pj=T9("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Ij=T9("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),Sj=T9("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");var w9=r0(s0("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o0("")),c$=[996825010,642813549,513874426,1027748829,705979059];function B5($){let J=$>>25,Z=($&33554431)<<5;for(let q=0;q<c$.length;q++)if((J>>q&1)===1)Z^=c$[q];return Z}function r$($,J,Z=1){let q=$.length,Q=1;for(let Y=0;Y<q;Y++){let X=$.charCodeAt(Y);if(X<33||X>126)throw new Error(`Invalid prefix (${$})`);Q=B5(Q)^X>>5}Q=B5(Q);for(let Y=0;Y<q;Y++)Q=B5(Q)^$.charCodeAt(Y)&31;for(let Y of J)Q=B5(Q)^Y;for(let Y=0;Y<6;Y++)Q=B5(Q);return Q^=Z,w9.encode(G9([Q%I4[30]],30,5,!1))}function n$($){let J=$==="bech32"?1:734539939,Z=Z1(5),q=Z.decode,Q=Z.encode,Y=d$(q);function X(M,T,z=90){if(I2("bech32.encode prefix",M),B9(T))T=Array.from(T);M9("bech32.encode",T);let H=M.length;if(H===0)throw new TypeError(`Invalid prefix length ${H}`);let W=H+7+T.length;if(z!==!1&&W>z)throw new TypeError(`Length ${W} exceeds limit ${z}`);let F=M.toLowerCase(),j=r$(F,T,J);return`${F}1${w9.encode(T)}${j}`}function K(M,T=90){I2("bech32.decode input",M);let z=M.length;if(z<8||T!==!1&&z>T)throw new TypeError(`invalid string length: ${z} (${M}). Expected (8..${T})`);let H=M.toLowerCase();if(M!==H&&M!==M.toUpperCase())throw new Error("String must be lowercase or uppercase");let W=H.lastIndexOf("1");if(W===0||W===-1)throw new Error('Letter "1" must be present between prefix and data only');let F=H.slice(0,W),j=H.slice(W+1);if(j.length<6)throw new Error("Data must be at least 6 characters long");let R=w9.decode(j).slice(0,-6),L=r$(F,R,J);if(!j.endsWith(L))throw new Error(`Invalid checksum in ${M}: expected "${L}"`);return{prefix:F,words:R}}let G=d$(K);function w(M){let{prefix:T,words:z}=K(M,!1);return{prefix:T,words:z,bytes:q(z)}}function B(M,T){return X(M,Q(T))}return{encode:X,decode:K,encodeFromBytes:B,decodeToBytes:w,decodeUnsafe:G,fromWords:q,fromWordsUnsafe:Y,toWords:Q}}var z9=n$("bech32"),Cj=n$("bech32m");var Nj=r0(Z1(4),s0("0123456789abcdef"),o0(""),l$(($)=>{if(typeof $!=="string"||$.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof $} with length ${$.length}`);return $.toLowerCase()}));var bY=5000;function a$($){return new TextEncoder().encode($)}function T5(){return Math.floor(Date.now()/1000)}function vY($,J){let Z=E$(J),q=z9.toWords(Z);return z9.encode($,q,bY)}function S2($){return vY("npub",$)}function A4($,J=8){if($.length<=J*2)return $;return`${$.slice(0,J)}...${$.slice(-J)}`}function yY($){return JSON.stringify([0,$.pubkey,$.created_at,$.kind,$.tags,$.content])}function W9($){let J=yY($),Z=m$(a$(J));return Y9(Z)}function k4($,J,Z=[],q=""){return{pubkey:q,created_at:T5(),kind:$,tags:Z,content:J}}var h0={Metadata:0,Text:1,RecommendRelay:2,Contacts:3,EncryptedDM:4,EventDeletion:5,Repost:6,Reaction:7,ChannelCreation:40,ChannelMetadata:41,ChannelMessage:42,ChannelHideMessage:43,ChannelMuteUser:44,Comment:1111,ClientAuth:22242,RelayList:10002,LiveEvent:30311};function f4(){return typeof window!=="undefined"&&!!window.nostr}async function t$(){if(!f4())throw new Error("No NIP-07 extension found. Install Alby or nos2x.");return window.nostr.getPublicKey()}async function b4($){if(!f4())throw new Error("No NIP-07 extension found.");let J=W9($),Z={...$,id:J};return window.nostr.signEvent(Z)}function e$(){if(typeof navigator==="undefined")return!1;return/android/i.test(navigator.userAgent)}function EY($){return`${window.location.origin+window.location.pathname}?nip55_action=${$}&event=`}function $J(){let $=EY("get_public_key");window.location.href=`nostrsigner:?compressionType=none&returnType=signature&type=get_public_key&callbackUrl=${$}`}function JJ(){if(typeof window==="undefined")return null;let $=new URLSearchParams(window.location.search),J=$.get("nip55_action"),Z=$.get("event");if(!J||!Z)return null;return{action:J,result:Z}}function ZJ(){if(typeof window==="undefined")return;let $=new URL(window.location.href);$.searchParams.delete("nip55_action"),$.searchParams.delete("event");let J=$.pathname+($.search||"");window.history.replaceState({},"",J)}var gY=0;function hY(){return`sub_${++gY}_${Date.now().toString(36)}`}class l0{url;ws=null;subscriptions=new Map;pendingPublish=new Map;pendingMessages=[];reconnectTimer=null;reconnectDelay=1000;maxReconnectDelay=60000;reconnectAttempts=0;maxReconnectAttempts=5;_status="disconnected";statusListeners=new Set;_authSigner=null;_authenticated=!1;_authInProgress=!1;constructor($){this.url=$.replace(/\/$/,"")}setAuthSigner($){this._authSigner=$}get hasAuthSigner(){return this._authSigner!==null}get authenticated(){return this._authenticated}get status(){return this._status}setStatus($){this._status=$;for(let J of this.statusListeners)J($)}onStatusChange($){return this.statusListeners.add($),()=>this.statusListeners.delete($)}connect(){if(this.ws&&(this.ws.readyState===WebSocket.OPEN||this.ws.readyState===WebSocket.CONNECTING))return Promise.resolve();return new Promise(($)=>{this.setStatus("connecting");try{this.ws=new WebSocket(this.url)}catch(Z){this.setStatus("error"),$();return}let J=!1;this.ws.onopen=()=>{this.setStatus("connected"),this.reconnectDelay=1000,this.reconnectAttempts=0;for(let Z of this.pendingMessages)this.ws.send(Z);this.pendingMessages=[];for(let[Z,q]of this.subscriptions){let Q=JSON.stringify(["REQ",Z,...q.filters]);this.ws.send(Q)}if(!J)J=!0,$()},this.ws.onmessage=(Z)=>{this.handleMessage(Z.data)},this.ws.onerror=()=>{this.setStatus("error")},this.ws.onclose=()=>{if(this.setStatus("disconnected"),this.ws=null,!J)J=!0,$();this.scheduleReconnect()}})}disconnect(){if(this.reconnectTimer)clearTimeout(this.reconnectTimer),this.reconnectTimer=null;for(let[$,J]of this.pendingPublish)clearTimeout(J.timer),J.resolve({accepted:!1,message:"disconnected"});if(this.pendingPublish.clear(),this.subscriptions.clear(),this.pendingMessages=[],this.ws)this.ws.onclose=null,this.ws.close(),this.ws=null;this.setStatus("disconnected")}scheduleReconnect(){if(this.reconnectTimer)return;if(this.reconnectAttempts++,this.reconnectAttempts>this.maxReconnectAttempts){console.warn(`[Relay ${this.url}] Max reconnect attempts (${this.maxReconnectAttempts}) reached, giving up`),this.setStatus("error");return}this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.connect().catch(()=>{})},this.reconnectDelay),this.reconnectDelay=Math.min(this.reconnectDelay*2,this.maxReconnectDelay)}handleMessage($){let J;try{J=JSON.parse($)}catch{return}if(!Array.isArray(J)||J.length<2)return;switch(J[0]){case"EVENT":{let q=J[1],Q=J[2],Y=this.subscriptions.get(q);if(Y)Y.onEvent(Q);break}case"EOSE":{let q=J[1],Q=this.subscriptions.get(q);if(Q?.onEose)Q.onEose();break}case"OK":{let q=J[1],Q=this.pendingPublish.get(q);if(Q)clearTimeout(Q.timer),this.pendingPublish.delete(q),Q.resolve({accepted:!!J[2],message:J[3]||""});break}case"NOTICE":{console.warn(`[Relay ${this.url}] NOTICE:`,J[1]);break}case"CLOSED":{let q=J[1],Q=J[2]||"",Y=this.subscriptions.get(q);if(Y?.onClosed)Y.onClosed(Q);this.subscriptions.delete(q);break}case"AUTH":{let q=J[1];this.handleAuthChallenge(q);break}}}_authFailed=!1;async handleAuthChallenge($){if(!this._authSigner)return;if(this._authInProgress)return;if(this._authFailed)return;this._authInProgress=!0;try{let J=k4(h0.ClientAuth,"",[["relay",this.url],["challenge",$]]),Z=await this._authSigner(J);this.send(JSON.stringify(["AUTH",Z])),this._authenticated=!0}catch(J){this._authFailed=!0,console.warn(`[Relay ${this.url}] AUTH declined by signer`)}finally{this._authInProgress=!1}}send($){if(this.ws&&this.ws.readyState===WebSocket.OPEN)this.ws.send($);else this.pendingMessages.push($)}subscribe($,J,Z,q){let Q=hY();return this.subscriptions.set(Q,{id:Q,filters:$,onEvent:J,onEose:Z,onClosed:q}),this.send(JSON.stringify(["REQ",Q,...$])),Q}unsubscribe($){if(this.subscriptions.has($))this.send(JSON.stringify(["CLOSE",$])),this.subscriptions.delete($)}publish($){return new Promise((J)=>{let Z=setTimeout(()=>{this.pendingPublish.delete($.id),J({accepted:!1,message:"timeout"})},1e4);this.pendingPublish.set($.id,{resolve:J,timer:Z}),this.send(JSON.stringify(["EVENT",$]))})}get activeSubscriptions(){return this.subscriptions.size}}class H9{relays=new Map;seenEvents=new Set;maxSeen=50000;_authSigner=null;setAuthSigner($){this._authSigner=$;for(let J of this.relays.values())if(J.hasAuthSigner)J.setAuthSigner($)}clearSeenEvents(){this.seenEvents.clear()}addRelay($){let J=$.replace(/\/$/,"");if(this.relays.has(J))return this.relays.get(J);let Z=new l0(J);return this.relays.set(J,Z),Z}addRelayWithAuth($){let J=this.addRelay($);if(this._authSigner)J.setAuthSigner(this._authSigner);return J}removeRelay($){let J=$.replace(/\/$/,""),Z=this.relays.get(J);if(Z)Z.disconnect(),this.relays.delete(J)}getRelay($){return this.relays.get($.replace(/\/$/,""))}get allRelays(){return Array.from(this.relays.values())}async connectAll(){let $=this.allRelays.map((J)=>J.connect().catch((Z)=>{console.warn(`Failed to connect to ${J.url}:`,Z)}));await Promise.allSettled($)}disconnectAll(){for(let $ of this.relays.values())$.disconnect()}subscribe($,J,Z){let q=new Map,Q=`pool_${Date.now().toString(36)}`;for(let Y of this.relays.values()){let X=Y.subscribe($,(K)=>{if(this.seenEvents.has(K.id))return;this.trackSeen(K.id),J(K,Y)},()=>{if(Z)Z(Y)});q.set(Y,X)}return{id:Q,unsubscribe:()=>{for(let[Y,X]of q)Y.unsubscribe(X);q.clear()}}}subscribeToUrls($,J,Z,q){let Q=new Map,Y=`pool_targeted_${Date.now().toString(36)}`;for(let X of $){let K=X.replace(/\/$/,""),G=this.relays.get(K);if(!G)continue;let w=G.subscribe(J,(B)=>{if(this.seenEvents.has(B.id))return;this.trackSeen(B.id),Z(B,G)},()=>{if(q)q(G)});Q.set(G,w)}return{id:Y,unsubscribe:()=>{for(let[X,K]of Q)X.unsubscribe(K);Q.clear()}}}async publish($){let J=new Map,Z=this.allRelays.map(async(q)=>{try{let Q=await q.publish($);J.set(q.url,Q)}catch(Q){J.set(q.url,{accepted:!1,message:String(Q)})}});return await Promise.allSettled(Z),J}trackSeen($){if(this.seenEvents.add($),this.seenEvents.size>this.maxSeen){let J=Math.floor(this.maxSeen*0.4),Z=this.seenEvents.values();for(let q=0;q<J;q++){let Q=Z.next().value;if(Q)this.seenEvents.delete(Q)}}}getStatus(){let $=new Map;for(let[J,Z]of this.relays)$.set(J,Z.status);return $}}var F9=null,U1={statuses:new Map,isConnecting:!1},j9=new Set;function z5(){for(let $ of j9)$()}function R9(){return U1}function qJ($){return j9.add($),()=>j9.delete($)}function q1(){if(!F9)F9=new H9;return F9}async function QJ(){let $=q1();U1={...U1,isConnecting:!0},z5(),await $.connectAll(),U1={...U1,isConnecting:!1,statuses:$.getStatus()},z5()}function _9($){let J=q1(),Z=J.addRelay($);Z.onStatusChange(()=>{U1={...U1,statuses:J.getStatus()},z5()}),Z.connect().catch(()=>{}),U1={...U1,statuses:J.getStatus()},z5()}function YJ($){let J=q1();J.removeRelay($),U1={...U1,statuses:J.getStatus()},z5()}var XJ="oni_relay_profiles",v4=[{id:"outbox",name:"Outbox",relays:[],builtin:!0},{id:"inbox",name:"Inbox",relays:[],builtin:!0},{id:"indexers",name:"Indexers",relays:[],builtin:!0}],G0={profiles:[...v4],activeProfileId:"outbox"},D9=new Set;function Q2(){for(let $ of D9)$()}function C2(){if(typeof localStorage!=="undefined")localStorage.setItem(XJ,JSON.stringify(G0))}function UJ(){if(typeof localStorage==="undefined")return;try{let $=localStorage.getItem(XJ);if($){let J=JSON.parse($),Z=new Set(v4.map((Q)=>Q.id)),q=[];for(let Q of v4){let Y=J.profiles.find((X)=>X.id===Q.id);q.push(Y?{...Y,builtin:!0}:{...Q})}for(let Q of J.profiles)if(!Z.has(Q.id))q.push({...Q,builtin:!1});G0={profiles:q,activeProfileId:J.activeProfileId||"outbox"}}}catch{}Q2()}function P1(){return G0}function y4($){return D9.add($),()=>D9.delete($)}function uY(){return G0.profiles.find(($)=>$.id===G0.activeProfileId)||G0.profiles[0]}function KJ($){G0={...G0,activeProfileId:$},C2(),Q2(),L9()}function h1($,J){let Z=J.trim();if(!Z.startsWith("wss://")&&!Z.startsWith("ws://"))Z="wss://"+Z;if(Z=Z.replace(/\/+$/,""),G0={...G0,profiles:G0.profiles.map((q)=>q.id===$&&!q.relays.includes(Z)?{...q,relays:[...q.relays,Z]}:q)},C2(),Q2(),$===G0.activeProfileId)_9(Z)}function N2($,J){if(G0={...G0,profiles:G0.profiles.map((Z)=>Z.id===$?{...Z,relays:Z.relays.filter((q)=>q!==J)}:Z)},C2(),Q2(),$===G0.activeProfileId)YJ(J)}function E4($){let J="custom_"+Date.now()+"_"+Math.random().toString(36).slice(2,8);return G0={...G0,profiles:[...G0.profiles,{id:J,name:$,relays:[],builtin:!1}]},C2(),Q2(),J}function g4($){let J=G0.profiles.find((Z)=>Z.id===$);if(!J||J.builtin)return;G0={...G0,profiles:G0.profiles.filter((Z)=>Z.id!==$),activeProfileId:G0.activeProfileId===$?"outbox":G0.activeProfileId},C2(),Q2()}function L9(){let $=q1(),J=uY(),Z=new Set($.allRelays.map((Q)=>Q.url)),q=new Set(J.relays);for(let Q of Z)if(!q.has(Q))$.removeRelay(Q);for(let Q of q)if(!Z.has(Q))_9(Q)}function GJ(){G0={profiles:[...v4],activeProfileId:"outbox"},C2(),Q2()}var i0={pubkey:null,isLoading:!1,error:null},V9=new Set;function Y2(){for(let $ of V9)$()}function L0(){return i0}function u1($){return V9.add($),()=>V9.delete($)}async function O2(){if(f4()){i0={...i0,isLoading:!0,error:null},Y2();try{let $=await t$();if(i0={pubkey:$,isLoading:!1,error:null},typeof localStorage!=="undefined")localStorage.setItem("oni_pubkey",$)}catch($){i0={...i0,isLoading:!1,error:String($)}}Y2();return}if(e$()){i0={...i0,isLoading:!0,error:null},Y2(),$J();return}i0={...i0,error:"No Nostr signer found. Install a NIP-07 extension (desktop) or Amber (Android)."},Y2()}function P9(){q1().clearSeenEvents(),GJ()}function h4(){if(P9(),i0={pubkey:null,isLoading:!1,error:null},typeof localStorage!=="undefined")localStorage.removeItem("oni_pubkey");Y2()}function u4(){if(typeof localStorage==="undefined")return;let $=JJ();if($&&$.action==="get_public_key"&&$.result){let Z=$.result;localStorage.setItem("oni_pubkey",Z),i0={pubkey:Z,isLoading:!1,error:null},ZJ(),Y2();return}let J=localStorage.getItem("oni_pubkey");if(J)i0={pubkey:J,isLoading:!1,error:null},Y2()}var I1={urls:[],source:"none",isLoading:!1,error:null},C9=new Set,W5=null,I9=!1;function x4(){if(I9)return;I9=!0,queueMicrotask(()=>{I9=!1;for(let $ of C9)$()})}function wJ(){return I1}function H5(){return I1.urls}function BJ($){return C9.add($),()=>C9.delete($)}var xY=["wss://relay.damus.io","wss://relay.nostr.band","wss://nos.lol","wss://relay.snort.social","wss://purplepag.es","wss://relay.primal.net"],S9=["wss://relay.nostr.watch","wss://history.nostr.watch"];function m4($=10){if(I1.urls.length>0&&!I1.isLoading)return Promise.resolve();if(W5)return W5;return W5=mY($).finally(()=>{W5=null}),W5}async function mY($){I1={...I1,isLoading:!0,error:null},x4();try{let J=await pY($);if(J.length>0){console.log("[indexers] Discovered",J.length,"relays via rstate"),I1={urls:J,source:"rstate",isLoading:!1,error:null},x4();return}}catch(J){console.warn("[indexers] rstate unavailable:",J)}console.log("[indexers] Using fallback indexers"),I1={urls:xY.slice(0,$),source:"fallback",isLoading:!1,error:null},x4(),dY($)}async function pY($){let J=new AbortController,Z=setTimeout(()=>J.abort(),5000);try{let q=new URLSearchParams({limit:String($*3),offset:"0",sortBy:"lastSeen",sortOrder:"desc",format:"detailed"}),Q=await fetch(`/relays?${q}`,{signal:J.signal});if(!Q.ok)throw new Error(`rstate ${Q.status}`);let K=((await Q.json()).relays||[]).filter((B)=>{if(!B.relayUrl||!B.relayUrl.startsWith("wss://"))return!1;if(B.network?.value&&B.network.value!=="clearnet")return!1;return!0}).map((B)=>({url:B.relayUrl.replace(/\/+$/,""),rtt:B.rtt?.open?.value??9999,lastSeen:B.lastSeenAt??0})).sort((B,M)=>{if(B.rtt!==M.rtt)return B.rtt-M.rtt;return M.lastSeen-B.lastSeen}),G=new Set,w=[];for(let B of K){if(G.has(B.url))continue;if(G.add(B.url),w.push(B.url),w.length>=$)break}return w}finally{clearTimeout(Z)}}function dY($){let J=new Map,Z=0,q=setTimeout(()=>Q(),8000);function Q(){if(clearTimeout(q),J.size===0)return;let Y=Array.from(J.entries()).sort((X,K)=>X[1].rtt-K[1].rtt).map(([X])=>X).slice(0,$);if(Y.length>0)console.log("[indexers] Upgraded to",Y.length,"relays via NIP-66"),I1={urls:Y,source:"nip66",isLoading:!1,error:null},x4()}for(let Y of S9){let X=new l0(Y);X.connect().then(()=>{let K=X.subscribe([{kinds:[30166],limit:$*3}],(G)=>{let w=G.tags.find((H)=>H[0]==="d");if(!w||!w[1])return;let B=w[1].replace(/\/+$/,"");if(!B.startsWith("wss://"))return;let M=9999,T=G.tags.find((H)=>H[0]==="rtt"&&H[1]==="open");if(T&&T[2])M=parseInt(T[2],10)||9999;let z=J.get(B);if(!z||M<z.rtt)J.set(B,{rtt:M})},()=>{if(X.unsubscribe(K),X.disconnect(),Z++,Z>=S9.length)Q()})}).catch(()=>{if(Z++,Z>=S9.length)Q()})}}var a={phase:"idle",profile:null,profileEvent:null,relayList:[],relayListEvent:null,contactsEvent:null,followingCount:0,indexersQueried:0,indexersResponded:0,outboxConnected:0,inboxConnected:0,error:null},A9=new Set,N9=!1;function w1(){if(N9)return;N9=!0,queueMicrotask(()=>{N9=!1;for(let $ of A9)$()})}function x1(){return a}function p4($){return A9.add($),()=>A9.delete($)}var k9=[],O9=null,F5=null;async function TJ($){if(O9===$&&a.phase==="ready")return;if(O9===$&&F5)return F5;return O9=$,F5=cY($).finally(()=>{F5=null}),F5}async function cY($){if(a={phase:"discovering_indexers",profile:null,profileEvent:null,relayList:[],relayListEvent:null,contactsEvent:null,followingCount:0,indexersQueried:0,indexersResponded:0,outboxConnected:0,inboxConnected:0,error:null},w1(),wJ().urls.length===0)await m4(10);let Z=H5();if(Z.length===0){a={...a,phase:"error",error:"No indexer relays found"},w1();return}if(MJ(Z),BJ(()=>{let q=H5();if(q.length>0)MJ(q)}),a={...a,phase:"querying_indexers",indexersQueried:Z.length},w1(),await rY($,Z),a.relayList.length>0)a={...a,phase:"connecting_relays"},w1(),await sY(a.relayList);a={...a,phase:"ready"},w1(),oY()}function rY($,J){return new Promise((Z)=>{let q=0,Q=J.length,Y=setTimeout(()=>X(),8000);function X(){clearTimeout(Y),Z()}function K(){if(q++,a={...a,indexersResponded:q},w1(),q>=Q)X()}for(let G of J){let w=new l0(G);k9.push(w),w.connect().then(()=>{if(w.status!=="connected"){K();return}let B=w.subscribe([{kinds:[h0.Metadata],authors:[$],limit:1},{kinds:[h0.RelayList],authors:[$],limit:1},{kinds:[h0.Contacts],authors:[$],limit:1}],(M)=>{if(M.kind===h0.Metadata){if(!a.profileEvent||M.created_at>a.profileEvent.created_at)a={...a,profileEvent:M,profile:lY(M)},w1()}else if(M.kind===h0.RelayList){if(!a.relayListEvent||M.created_at>a.relayListEvent.created_at)a={...a,relayListEvent:M,relayList:iY(M)},w1()}else if(M.kind===h0.Contacts){if(!a.contactsEvent||M.created_at>a.contactsEvent.created_at){let T=M.tags.filter((z)=>z[0]==="p"&&z[1]).length;a={...a,contactsEvent:M,followingCount:T},w1()}}},()=>{w.unsubscribe(B),K()})}).catch(()=>{K()})}})}async function sY($){let J=q1(),Z=P1(),q=$.filter((w)=>w.write).map((w)=>w.url),Q=$.filter((w)=>w.read).map((w)=>w.url),Y=Z.profiles.find((w)=>w.id==="outbox"),X=Z.profiles.find((w)=>w.id==="inbox");for(let w of q)if(Y&&!Y.relays.includes(w))h1("outbox",w);for(let w of Q)if(X&&!X.relays.includes(w))h1("inbox",w);let K=new Set([...q,...Q]),G=[];for(let w of K)if(!J.getRelay(w)){let M=J.addRelayWithAuth(w);G.push(M.connect().then(()=>{if(q.includes(w))a={...a,outboxConnected:a.outboxConnected+1};if(Q.includes(w))a={...a,inboxConnected:a.inboxConnected+1};w1()}).catch((T)=>{console.warn(`[bootstrap] Failed to connect to ${w}:`,T)}))}await Promise.allSettled(G)}function MJ($){let Z=P1().profiles.find((q)=>q.id==="indexers");if(!Z)return;for(let q of Z.relays)if(!$.includes(q))N2("indexers",q);for(let q of $)if(!Z.relays.includes(q))h1("indexers",q)}function oY(){for(let $ of k9)if(!q1().getRelay($.url))$.disconnect();k9=[]}function lY($){let J={};try{J=JSON.parse($.content)}catch{}return{name:J.name||"",displayName:J.display_name||J.displayName||"",picture:J.picture||"",banner:J.banner||"",about:J.about||"",nip05:J.nip05||"",lud16:J.lud16||""}}function iY($){let J=[];for(let Z of $.tags){if(Z[0]!=="r"||!Z[1])continue;let q=Z[1].replace(/\/+$/,""),Q=Z[2];J.push({url:q,read:!Q||Q==="read",write:!Q||Q==="write"})}return J}var j5=new Map,d4=new Set,f9=new Set;function zJ(){for(let $ of f9)$()}function WJ($){return f9.add($),()=>f9.delete($)}function HJ($){let J=j5.get($);if(J)return J;return{pubkey:$,name:"",displayName:"",picture:"",banner:"",about:"",nip05:"",lud16:"",fetched:!1}}function FJ($){let J=HJ($);if(J.displayName)return J.displayName;if(J.name)return J.name;try{let Z=S2($);return Z.slice(0,12)+"..."+Z.slice(-4)}catch{return A4($,8)}}function jJ($){return HJ($).picture}function b9($){if(j5.has($)&&j5.get($).fetched)return;if(d4.has($))return;d4.add($);let J=H5();if(J.length===0){d4.delete($);return}let Z=J.slice(0,3),q=null,Q=0;function Y(){if(d4.delete($),q){let K=nY($,q);j5.set($,K),zJ()}else j5.set($,{pubkey:$,name:"",displayName:"",picture:"",banner:"",about:"",nip05:"",lud16:"",fetched:!0}),zJ()}let X=setTimeout(()=>Y(),6000);for(let K of Z){let G=new l0(K);G.connect().then(()=>{if(G.status!=="connected"){if(Q++,Q>=Z.length)clearTimeout(X),Y();return}let w=G.subscribe([{kinds:[h0.Metadata],authors:[$],limit:1}],(B)=>{if(!q||B.created_at>q.created_at)q=B},()=>{if(G.unsubscribe(w),G.disconnect(),Q++,Q>=Z.length)clearTimeout(X),Y()})}).catch(()=>{if(Q++,Q>=Z.length)clearTimeout(X),Y()})}}function nY($,J){let Z={};try{Z=JSON.parse(J.content)}catch{}return{pubkey:$,name:Z.name||"",displayName:Z.display_name||Z.displayName||"",picture:Z.picture||"",banner:Z.banner||"",about:Z.about||"",nip05:Z.nip05||"",lud16:Z.lud16||"",fetched:!0}}class v9 extends N{unsub=null;unsubAuth=null;unsubBootstrap=null;unsubProfiles=null;menuRef=null;state={config:n.getState().config,status:n.getState().status,chatVisible:n.getState().chatVisible,nostrPubkey:L0().pubkey,nostrLoading:L0().isLoading,userMenuOpen:!1,profileVersion:0};handleOutsideClick=($)=>{if(this.state.userMenuOpen&&this.menuRef&&!this.menuRef.contains($.target))this.setState({userMenuOpen:!1})};componentDidMount(){this.unsub=n.subscribe(()=>{let J=n.getState();this.setState({config:J.config,status:J.status,chatVisible:J.chatVisible})}),this.unsubAuth=u1(()=>{let J=L0();if(this.setState({nostrPubkey:J.pubkey,nostrLoading:J.isLoading}),J.pubkey)b9(J.pubkey)}),this.unsubBootstrap=p4(()=>{this.setState({profileVersion:this.state.profileVersion+1})}),this.unsubProfiles=WJ(()=>{this.setState({profileVersion:this.state.profileVersion+1})});let $=L0();if($.pubkey)b9($.pubkey);document.addEventListener("mousedown",this.handleOutsideClick)}componentWillUnmount(){this.unsub?.(),this.unsubAuth?.(),this.unsubBootstrap?.(),this.unsubProfiles?.(),document.removeEventListener("mousedown",this.handleOutsideClick)}handleLogin=()=>{O2()};handleLogout=()=>{h4(),this.setState({userMenuOpen:!1})};render(){let{config:$,status:J,chatVisible:Z,nostrPubkey:q,nostrLoading:Q,userMenuOpen:Y}=this.state,X=$?.name||"",K=J?.online||!1,G=J?.viewerCount||0,w=q?FJ(q):"",B=q?jJ(q):"";return U("header",{class:"sticky top-0 z-50 border-b border-border/30 bg-background/80 backdrop-blur-xl backdrop-saturate-150"},U("div",{class:"mx-auto flex h-14 items-center justify-between px-4 sm:px-6"},U("div",{class:"flex items-center gap-4"},U("a",{href:"/",class:"flex items-center gap-2.5 shrink-0"},U("span",{class:"text-xl"},"\uD83D\uDD25"),U("span",{class:"text-lg font-bold tracking-tight"},X||"oni")),K&&U(h,{variant:"default",className:"gap-1.5 bg-success text-success-foreground"},U("span",{class:"size-1.5 rounded-full bg-current live-dot"}),"Live"),K&&G>0&&U("span",{class:"hidden sm:inline text-sm text-muted-foreground tabular-nums"},G.toLocaleString()," watching"),U("nav",{class:"hidden sm:flex items-center gap-0.5"},U("a",{href:"https://mycelium.social",target:"_blank",rel:"noopener",class:"inline-flex h-9 items-center justify-center rounded-md px-3 py-2 text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground"},"Mycelium"))),U("div",{class:"flex items-center gap-1.5"},!$?.chatDisabled&&U(k,{variant:"ghost",size:"sm",onClick:()=>n.toggleChat(),className:_("gap-1.5 h-8",Z&&"bg-accent text-accent-foreground")},U("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),U("span",{class:"hidden sm:inline text-sm"},"Chat")),U(w5,{className:"hidden sm:inline-flex"}),q?U("div",{ref:(M)=>{this.menuRef=M},class:"relative"},U("button",{onClick:()=>this.setState({userMenuOpen:!Y}),class:"flex items-center gap-2 rounded-full border border-border px-1 py-1 pr-3 hover:bg-accent/50 transition-colors cursor-pointer"},U(b1,{className:"size-7"},U(L1,{src:B,alt:w}),U(v1,{className:"text-[10px]"},w.charAt(0).toUpperCase())),U("span",{class:"text-sm font-medium max-w-[120px] truncate hidden sm:block"},w),U("span",{class:"text-xs opacity-40"},"")),Y&&U("div",{class:"absolute right-0 top-full mt-2 w-72 bg-popover border border-border rounded-xl shadow-xl overflow-hidden z-50"},U("div",{class:"relative"},U("div",{class:"h-20 bg-gradient-to-br from-primary/30 via-primary/10 to-muted/50"}),U("div",{class:"absolute -bottom-5 left-4"},U(b1,{className:"size-10 ring-2 ring-popover"},U(L1,{src:B,alt:w}),U(v1,{className:"text-xs font-bold"},w.charAt(0).toUpperCase())))),U("div",{class:"pt-7 pb-3 px-4"},U("p",{class:"text-sm font-semibold truncate"},w),U("p",{class:"font-mono text-[10px] text-muted-foreground truncate"},(()=>{try{return S2(q).slice(0,24)+"..."}catch{return q.slice(0,24)+"..."}})())),U("div",{class:"border-t border-border"}),U("div",{class:"py-1"},U("a",{href:"/admin",onClick:()=>this.setState({userMenuOpen:!1}),class:"flex items-center gap-2.5 px-4 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-accent transition-colors"},U("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 010 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 010-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28z"}),U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})),"Admin Dashboard")),U("div",{class:"border-t border-border"}),U("div",{class:"py-1"},U("button",{onClick:this.handleLogout,class:"flex items-center gap-2.5 px-4 py-2 w-full text-sm text-destructive/70 hover:text-destructive hover:bg-destructive/5 transition-colors cursor-pointer"},U("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})),"Sign Out")))):U(k,{size:"sm",onClick:this.handleLogin,disabled:Q},Q?"Connecting...":"Sign In"))))}}class y9 extends N{videoRef=null;hlsInstance=null;state={isLoading:!0,hasError:!1};componentDidMount(){if(this.props.online)this.initPlayer()}componentDidUpdate($){if(this.props.online&&!$.online)this.setState({isLoading:!0,hasError:!1}),this.initPlayer();else if(!this.props.online&&$.online)this.destroyPlayer()}componentWillUnmount(){this.destroyPlayer()}async initPlayer(){let $=this.videoRef;if(!$)return;let J=this.props.source;if($.addEventListener("playing",()=>{this.setState({isLoading:!1})},{once:!0}),$.canPlayType("application/vnd.apple.mpegurl")){$.src=J,$.addEventListener("loadedmetadata",()=>{$.play().catch(()=>{})});return}try{let Z=(await import("../chunk-eyp45axx.js")).default;if(Z.isSupported())this.hlsInstance=new Z({enableWorker:!0,lowLatencyMode:!0,backBufferLength:90}),this.hlsInstance.loadSource(J),this.hlsInstance.attachMedia($),this.hlsInstance.on(Z.Events.MANIFEST_PARSED,()=>{$.play().catch(()=>{})}),this.hlsInstance.on(Z.Events.ERROR,(q,Q)=>{if(Q.fatal)switch(Q.type){case Z.ErrorTypes.NETWORK_ERROR:this.hlsInstance?.startLoad();break;case Z.ErrorTypes.MEDIA_ERROR:this.hlsInstance?.recoverMediaError();break;default:this.setState({hasError:!0,isLoading:!1}),this.destroyPlayer();break}})}catch{$.src=J}}destroyPlayer(){if(this.hlsInstance)this.hlsInstance.destroy(),this.hlsInstance=null;if(this.videoRef)this.videoRef.removeAttribute("src"),this.videoRef.load()}render(){let{online:$,title:J}=this.props,{isLoading:Z,hasError:q}=this.state;if(!$)return null;return U("div",{class:"relative w-full bg-black aspect-video group"},U("video",{ref:(Q)=>{this.videoRef=Q},class:"w-full h-full object-contain",controls:!0,playsInline:!0,title:J}),Z&&!q&&U("div",{class:"absolute inset-0 flex items-center justify-center bg-black/95 pointer-events-none"},U("div",{class:"absolute inset-0 bg-gradient-to-b from-primary/[0.04] via-transparent to-transparent"}),U("div",{class:"relative flex flex-col items-center gap-5"},U("div",{class:"relative"},U($1,{size:"lg"}),U("div",{class:"absolute -inset-4 rounded-full blur-2xl bg-primary/10"})),U("div",{class:"text-center"},U("p",{class:"text-sm font-semibold text-foreground/90"},"Connecting to stream"),U("p",{class:"text-xs text-muted-foreground/50 mt-1"},"Please wait...")))),q&&U("div",{class:"absolute inset-0 flex items-center justify-center bg-black/95"},U("div",{class:"absolute inset-0 bg-gradient-to-b from-destructive/[0.03] via-transparent to-transparent"}),U("div",{class:"relative flex flex-col items-center gap-5 text-center px-6"},U("div",{class:"size-16 rounded-2xl bg-destructive/10 border border-destructive/20 flex items-center justify-center"},U("svg",{class:"size-7 text-destructive",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))),U("div",null,U("p",{class:"text-base font-bold text-foreground"},"Stream unavailable"),U("p",{class:"text-sm text-muted-foreground/60 mt-1"},"The stream may have ended or encountered an error")),U(k,{size:"sm",className:"px-6 font-semibold",onClick:()=>{this.setState({isLoading:!0,hasError:!1}),this.initPlayer()}},"Try Again"))))}}class E9 extends N{render(){let{name:$,customText:J,lastDisconnectTime:Z,logo:q}=this.props;return U("div",{class:"flex flex-col items-center justify-center w-full aspect-video bg-muted/30"},U("div",{class:"flex flex-col items-center px-6 py-16 text-center max-w-lg animate-in"},U(b1,{className:"size-20 mb-6"},U(L1,{src:q,alt:$}),U(v1,{className:"text-3xl bg-card text-muted-foreground/30"},U("svg",{class:"size-10 text-muted-foreground/20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z"})))),U("h2",{class:"text-2xl font-bold tracking-tight mb-2"},$),U(h,{variant:"secondary",className:"mb-4"},U("span",{class:"size-1.5 rounded-full bg-muted-foreground/40 mr-1.5"}),"Offline"),U("p",{class:"text-sm text-muted-foreground leading-relaxed mb-5 max-w-sm"},J||"This stream is currently offline. Check back later!"),Z&&U(h,{variant:"outline",className:"gap-1.5"},U("svg",{class:"size-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})),"Last live ",c0(Z))))}}class g9 extends N{unsub=null;state={status:n.getState().status,config:n.getState().config};componentDidMount(){this.unsub=n.subscribe(()=>{let $=n.getState();this.setState({status:$.status,config:$.config})})}componentWillUnmount(){this.unsub?.()}render(){let{status:$,config:J}=this.state;if(!$?.online)return null;let Z=$.streamTitle||J?.name||"",q=J?.tags||[];return U("div",{class:"px-5 py-3.5 border-b border-border/50 bg-card"},U("div",{class:"flex items-start justify-between gap-4"},U("div",{class:"min-w-0 flex-1"},Z&&U("h2",{class:"text-[15px] font-semibold text-foreground tracking-tight truncate"},Z),q.length>0&&U("div",{class:"flex flex-wrap gap-1.5 mt-2.5"},q.slice(0,6).map((Q)=>U(h,{key:Q,variant:"secondary",className:"text-[11px]"},Q)))),U("div",{class:"flex items-center gap-3 shrink-0"},U(h,{variant:"outline",className:"tabular-nums gap-1.5"},U("svg",{class:"size-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})),L$($.viewerCount)),$.lastConnectTime&&U(h,{variant:"outline",className:"tabular-nums gap-1.5"},U("svg",{class:"size-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})),c0($.lastConnectTime)))))}}var h9=["#c084fc","#f472b6","#fb923c","#facc15","#4ade80","#22d3ee","#60a5fa","#a78bfa","#f87171","#34d399","#e879f9","#38bdf8","#fbbf24","#a3e635","#fb7185","#2dd4bf","#818cf8","#f97316","#14b8a6","#d946ef"];function c4($){return h9[$%h9.length]||h9[0]}class u9 extends N{render(){let{message:$,isModerator:J}=this.props,{type:Z,timestamp:q}=$,Q=D$(q);if(Z==="SYSTEM")return U("div",{class:"px-3 py-1.5 flex items-center gap-1.5"},U("svg",{class:"w-3 h-3 text-primary/60 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})),U("span",{class:"text-[11px] text-muted-foreground italic"},$.body));if(Z==="USER_JOINED"||Z==="USER_PARTED"){let w=Z==="USER_JOINED";return U("div",{class:"px-3 py-0.5 flex items-center gap-1"},U("span",{class:_("text-[10px]",w?"text-success/50":"text-muted-foreground/40")},w?"":""),U("span",{class:"text-[10px] text-muted-foreground/60"},U("span",{style:{color:c4($.user?.displayColor||0)},class:"opacity-60"},$.user?.displayName)," ",w?"joined":"left"))}if(Z==="NAME_CHANGE")return U("div",{class:"px-3 py-0.5 text-[10px] text-muted-foreground/60"},U("span",{style:{color:c4($.user?.displayColor||0)},class:"opacity-60"},$.oldName),"  ",U("span",{style:{color:c4($.user?.displayColor||0)},class:"opacity-80"},$.user?.displayName));if(Z==="FEDIVERSE_ENGAGEMENT_FOLLOW"||Z==="FEDIVERSE_ENGAGEMENT_LIKE"||Z==="FEDIVERSE_ENGAGEMENT_REPOST"){let w=Z==="FEDIVERSE_ENGAGEMENT_FOLLOW"?"followed":Z==="FEDIVERSE_ENGAGEMENT_LIKE"?"liked":"shared";return U("div",{class:"px-3 py-1.5 flex items-center gap-1.5 bg-primary/5 mx-2 my-1 rounded-md"},U("svg",{class:"w-3 h-3 text-primary shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},U("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})),U("span",{class:"text-[11px] text-primary/80"},$.user?.displayName," ",w," on the fediverse"))}let Y=c4($.user?.displayColor||0),X=$.user?.isModerator,K=$.user?.isBot,G=$.user?.authenticated;return U("div",{class:"group px-4 py-2 hover:bg-accent/50 transition-colors duration-150 animate-msg-in"},U("div",{class:"flex items-baseline gap-1.5 flex-wrap"},U("span",{class:"text-[12px] font-bold leading-tight",style:{color:Y}},X&&U(V2,{content:"Moderator",side:"top"},U(h,{className:"mr-1 align-middle text-[8px] py-0 px-1.5 uppercase tracking-wider"},"Mod")),K&&U(V2,{content:"Bot",side:"top"},U(h,{variant:"secondary",className:"mr-1 align-middle text-[8px] py-0 px-1.5 uppercase tracking-wider"},"Bot")),G&&U(V2,{content:"Verified",side:"top"},U("span",{class:"inline-flex items-center justify-center size-3.5 text-success mr-0.5 align-middle"},U("svg",{class:"size-2.5",fill:"currentColor",viewBox:"0 0 20 20"},U("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})))),$.user?.displayName),U("span",{class:"text-[10px] text-muted-foreground/40 leading-tight tabular-nums"},Q)),U("p",{class:"text-[13px] text-foreground/90 leading-relaxed break-words mt-0.5"},$.body))}}class x9 extends N{state={value:""};handleSubmit=($)=>{$.preventDefault();let J=this.state.value.trim();if(!J)return;this.props.onSend(J),this.setState({value:""})};handleInput=($)=>{this.setState({value:$.target.value})};handleKeyDown=($)=>{if($.key==="Enter"&&!$.shiftKey)$.preventDefault(),this.handleSubmit($)};render(){let $=this.state.value.trim().length>0;return U("form",{class:"flex items-center gap-2 p-3 border-t border-border/50 bg-card",onSubmit:this.handleSubmit},U(t,{className:"flex-1 h-9 text-sm",placeholder:"Send a message...",value:this.state.value,onInput:this.handleInput,onKeyDown:this.handleKeyDown}),U(k,{type:"submit",size:"icon-sm",disabled:!$},U("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))))}}class m9 extends N{state={name:"",loading:!1,error:null};handleSubmit=async($)=>{$.preventDefault();let J=this.state.name.trim();if(!J)return;this.setState({loading:!0,error:null});try{await n.registerUser(J)}catch(Z){this.setState({error:Z instanceof Error?Z.message:"Registration failed",loading:!1})}};handleInput=($)=>{this.setState({name:$.target.value})};render(){let{name:$,loading:J,error:Z}=this.state;return U("div",{class:"p-3 border-t border-border/50 bg-card"},U("form",{onSubmit:this.handleSubmit},U(Y0,{className:"text-muted-foreground mb-2"},"Pick a name to join the chat"),U("div",{class:"flex items-center gap-2"},U(t,{className:"flex-1 h-9 text-sm",placeholder:"Your name...",value:$,onInput:this.handleInput,disabled:J}),U(k,{type:"submit",size:"sm",disabled:!$.trim()||J,className:"h-9 px-5"},J?U($1,{size:"sm"}):"Join")),Z&&U("p",{class:"text-xs text-destructive mt-2"},Z)))}}class r4 extends N{unsub=null;messagesEndRef=null;scrollContainerRef=null;shouldAutoScroll=!0;state={messages:n.getState().messages,currentUser:n.getState().currentUser,chatDisabled:n.getState().config?.chatDisabled||!1,showScrollBtn:!1};componentDidMount(){this.unsub=n.subscribe(()=>{let $=n.getState();this.setState({messages:$.messages,currentUser:$.currentUser,chatDisabled:$.config?.chatDisabled||!1})})}componentDidUpdate($,J){if(J.messages.length!==this.state.messages.length&&this.shouldAutoScroll)this.scrollToBottom()}componentWillUnmount(){this.unsub?.()}scrollToBottom(){if(this.messagesEndRef)this.messagesEndRef.scrollIntoView({behavior:"smooth"})}handleScroll=($)=>{let J=$.target,Z=J.scrollHeight-J.scrollTop-J.clientHeight<50;this.shouldAutoScroll=Z,this.setState({showScrollBtn:!Z})};handleSend=($)=>{n.sendChat($)};render(){let{messages:$,currentUser:J,chatDisabled:Z,showScrollBtn:q}=this.state;if(Z)return null;return U("div",{class:"flex flex-col h-full"},U("div",{class:"flex items-center justify-between px-4 py-3 border-b border-border/50 bg-card"},U("div",{class:"flex items-center gap-2.5"},U("svg",{class:"size-4 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),U("h2",{class:"text-[13px] font-semibold text-foreground"},"Chat")),$.length>0&&U(h,{variant:"secondary",className:"text-[10px] tabular-nums"},$.length)),U("div",{ref:(Q)=>{this.scrollContainerRef=Q},class:"flex-1 overflow-y-auto overflow-x-hidden scroll-smooth",onScroll:this.handleScroll},$.length===0&&U("div",{class:"flex flex-col items-center justify-center h-full px-6 text-center"},U("svg",{class:"size-10 text-muted-foreground/20 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),U("p",{class:"text-sm font-medium text-muted-foreground/50"},"No messages yet"),U("p",{class:"text-xs text-muted-foreground/30 mt-1"},"Be the first to say something")),$.map((Q)=>U(u9,{key:Q.id,message:Q,isModerator:J?.isModerator})),U("div",{ref:(Q)=>{this.messagesEndRef=Q}})),q&&U("div",{class:"relative"},U("div",{class:"absolute bottom-3 left-1/2 -translate-x-1/2 z-10"},U(k,{size:"sm",onClick:()=>{this.shouldAutoScroll=!0,this.scrollToBottom()},className:"rounded-full shadow-lg px-4"},"New messages "))),J?U(x9,{onSend:this.handleSend}):U(m9,null))}}class p9 extends N{unsub=null;state={config:n.getState().config};componentDidMount(){this.unsub=n.subscribe(()=>{this.setState({config:n.getState().config})})}componentWillUnmount(){this.unsub?.()}render(){let{config:$}=this.state,J=!!$?.summary,Z=$?.tags&&$.tags.length>0,q=$?.socialHandles&&$.socialHandles.length>0,Q=!!$?.extraPageContent;return U("footer",{id:"footer",class:"border-t border-border/30 mt-auto"},U("div",{class:"mx-auto max-w-7xl px-4 sm:px-6 py-6"},(J||q||Z||Q)&&U("div",{class:"mb-6 max-w-2xl"},J&&U("p",{class:"text-sm text-muted-foreground leading-relaxed mb-4"},$.summary),q&&U("div",{class:"flex flex-wrap gap-2 mb-4"},$.socialHandles.map((Y)=>U("a",{key:Y.platform,href:Y.url,target:"_blank",rel:"noopener noreferrer",class:"no-underline"},U(k,{variant:"outline",size:"sm",className:"gap-2"},U("svg",{class:"size-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})),Y.platform)))),Z&&U("div",{class:"flex flex-wrap gap-1.5 mb-4"},$.tags.map((Y)=>U(h,{key:Y,variant:"outline",className:"text-xs"},"#",Y))),Q&&U("div",{class:"text-sm text-muted-foreground mb-4 [&_a]:text-foreground [&_a]:underline",innerHTML:$.extraPageContent})),U("div",{class:"flex flex-col items-center gap-4 sm:flex-row sm:justify-between text-sm text-muted-foreground"},U("div",{class:"flex items-center gap-2"},U("span",{class:"text-xl"},"\uD83D\uDD25"),U("span",{class:"font-medium text-foreground/80"},"oni"),U("span",{class:"text-border"},""),U("span",{class:"text-xs"},"Part of"," ",U("a",{href:"https://mycelium.social",target:"_blank",rel:"noopener noreferrer",class:"hover:text-foreground transition-colors"},"mycelium.social"))),U("div",{class:"flex items-center gap-4"},U("a",{href:"/admin",class:"text-xs hover:text-foreground transition-colors"},"Admin"),U("a",{href:"https://github.com/TekkadanPlays/oni",target:"_blank",rel:"noopener noreferrer",class:"text-xs hover:text-foreground transition-colors"},"GitHub")))))}}function eY($,J){let Z=J.identifier||`oni-${T5()}`,q=[["d",Z]];if(J.title)q.push(["title",J.title]);if(J.summary)q.push(["summary",J.summary]);if(J.image)q.push(["image",J.image]);if(J.streamingUrl)q.push(["streaming",J.streamingUrl]);if(J.recordingUrl)q.push(["recording",J.recordingUrl]);if(J.starts)q.push(["starts",J.starts.toString()]);if(J.ends)q.push(["ends",J.ends.toString()]);if(J.status)q.push(["status",J.status]);if(J.currentParticipants!==void 0)q.push(["current_participants",J.currentParticipants.toString()]);if(J.totalParticipants!==void 0)q.push(["total_participants",J.totalParticipants.toString()]);if(J.tags)for(let Q of J.tags)q.push(["t",Q]);if(J.participants)for(let Q of J.participants){let Y=["p",Q.pubkey];if(Q.relay)Y.push(Q.relay);if(Y.push(Q.role),Q.proof)Y.push(Q.proof);q.push(Y)}if(J.relays&&J.relays.length>0)q.push(["relays",...J.relays]);return q.push(["a",`${h0.LiveEvent}:${$}:${Z}`]),k4(h0.LiveEvent,"",q,$)}async function d9($,J){try{let Z=eY($,J);return await b4(Z)}catch(Z){return console.error("[nip53] Error creating live event:",Z),null}}async function s4($,J){if(!$||J.length===0)return{published:!1,results:new Map};let Z=[];try{let q=J.map(async(K)=>{let G=new l0(K);return Z.push(G),await G.connect(),G});await Promise.allSettled(q);let Q=new Map,Y=Z.filter((K)=>K.status==="connected").map(async(K)=>{try{let G=await K.publish($);Q.set(K.url,G)}catch(G){Q.set(K.url,{accepted:!1,message:String(G)})}});return await Promise.allSettled(Y),{published:Array.from(Q.values()).some((K)=>K.accepted),results:Q}}finally{for(let q of Z)q.disconnect()}}async function c9($,J,Z){let q=J.tags.find((K)=>K[0]==="d"),Q=q?q[1]:`oni-${T5()}`,Y={identifier:Q,status:"live"};for(let K of J.tags)switch(K[0]){case"title":Y.title=K[1];break;case"summary":Y.summary=K[1];break;case"image":Y.image=K[1];break;case"streaming":Y.streamingUrl=K[1];break;case"recording":Y.recordingUrl=K[1];break;case"starts":Y.starts=parseInt(K[1],10);break;case"ends":Y.ends=parseInt(K[1],10);break;case"status":Y.status=K[1];break;case"current_participants":Y.currentParticipants=parseInt(K[1],10);break}let X={...Y,...Z,identifier:Q};return d9($,X)}var RJ="oni_broadcast_relays_selected",O0={relays:[],selectedUrls:new Set,isLoading:!1,error:null,source:"none"},s9=new Set,R5=null;function _5(){for(let $ of s9)$()}function $X(){if(typeof localStorage!=="undefined")localStorage.setItem(RJ,JSON.stringify([...O0.selectedUrls]))}function JX(){if(typeof localStorage==="undefined")return;try{let $=localStorage.getItem(RJ);if($){let J=JSON.parse($);O0={...O0,selectedUrls:new Set(J)}}}catch{}}function o9(){return O0}function _J($){return s9.add($),()=>s9.delete($)}function DJ(){return[...O0.selectedUrls]}function LJ($){let J=new Set(O0.selectedUrls);if(J.has($))J.delete($);else J.add($);O0={...O0,selectedUrls:J},$X(),_5()}var ZX=[{url:"wss://relay.damus.io",rtt:100,nips:[1,11,53]},{url:"wss://nos.lol",rtt:100,nips:[1,11,53]},{url:"wss://relay.nostr.band",rtt:100,nips:[1,11,50,53]},{url:"wss://relay.snort.social",rtt:100,nips:[1,11,53]},{url:"wss://relay.primal.net",rtt:100,nips:[1,11,53]},{url:"wss://nostr.wine",rtt:150,nips:[1,11,53]},{url:"wss://relay.nostr.wirednet.jp",rtt:200,nips:[1,11,53]},{url:"wss://nostr-pub.wellorder.net",rtt:150,nips:[1,11]}],r9=["wss://relay.nostr.watch","wss://history.nostr.watch"];function l9($=20){if(O0.relays.length>0&&!O0.isLoading)return Promise.resolve();if(R5)return R5;return JX(),R5=qX($).finally(()=>{R5=null}),R5}async function qX($){O0={...O0,isLoading:!0,error:null},_5();try{let J=await QX($);if(J.length>0){console.log("[broadcast] Discovered",J.length,"broadcast relays via rstate"),O0={...O0,relays:J,source:"rstate",isLoading:!1,error:null},_5();return}}catch(J){console.warn("[broadcast] rstate unavailable:",J)}console.log("[broadcast] Using fallback broadcast relays"),O0={...O0,relays:ZX.slice(0,$),source:"fallback",isLoading:!1,error:null},_5(),YX($)}async function QX($){let J=new AbortController,Z=setTimeout(()=>J.abort(),5000);try{let q=new URLSearchParams({limit:String($*3),offset:"0",sortBy:"lastSeen",sortOrder:"desc",format:"detailed"}),Q=await fetch(`/relays?${q}`,{signal:J.signal});if(!Q.ok)throw new Error(`rstate ${Q.status}`);let K=((await Q.json()).relays||[]).filter((B)=>{if(!B.relayUrl||!B.relayUrl.startsWith("wss://"))return!1;if(B.network?.value&&B.network.value!=="clearnet")return!1;if(B.readOnly?.value===!0)return!1;return!0}).map((B)=>{let M=[];if(B.supportedNips?.value&&Array.isArray(B.supportedNips.value))for(let T of B.supportedNips.value)M.push(typeof T==="number"?T:parseInt(T,10));return{url:B.relayUrl.replace(/\/+$/,""),rtt:B.rtt?.open?.value??9999,nips:M}}).sort((B,M)=>{let T=B.nips.includes(53)?0:1,z=M.nips.includes(53)?0:1;if(T!==z)return T-z;return B.rtt-M.rtt}),G=new Set,w=[];for(let B of K){if(G.has(B.url))continue;if(G.add(B.url),w.push(B),w.length>=$)break}return w}finally{clearTimeout(Z)}}function YX($){let J=new Map,Z=0,q=setTimeout(()=>Q(),8000);function Q(){if(clearTimeout(q),J.size===0)return;let Y=Array.from(J.values()).sort((X,K)=>{let G=X.nips.includes(53)?0:1,w=K.nips.includes(53)?0:1;if(G!==w)return G-w;return X.rtt-K.rtt}).slice(0,$);if(Y.length>0)console.log("[broadcast] Upgraded to",Y.length,"relays via NIP-66"),O0={...O0,relays:Y,source:"nip66"},_5()}for(let Y of r9){let X=new l0(Y);X.connect().then(()=>{let K=X.subscribe([{kinds:[30166],limit:$*3}],(G)=>{let w=G.tags.find((F)=>F[0]==="d");if(!w||!w[1])return;let B=w[1].replace(/\/+$/,"");if(!B.startsWith("wss://"))return;if(G.tags.find((F)=>F[0]==="R"&&F[1]==="read"))return;let T=9999,z=G.tags.find((F)=>F[0]==="rtt"&&F[1]==="open");if(z&&z[2])T=parseInt(z[2],10)||9999;let H=[];for(let F of G.tags)if(F[0]==="N"&&F[1])H.push(parseInt(F[1],10));let W=J.get(B);if(!W||T<W.rtt)J.set(B,{url:B,rtt:T,nips:H})},()=>{if(X.unsubscribe(K),X.disconnect(),Z++,Z>=r9.length)Q()})}).catch(()=>{if(Z++,Z>=r9.length)Q()})}}var B0={currentEvent:null,isPublishing:!1,lastPublished:null,error:null,enabled:!1},i9=new Set,A2=null;function k2(){for(let $ of i9)$()}function f2(){return B0}function VJ($){return i9.add($),()=>i9.delete($)}function PJ($){if(B0={...B0,enabled:$},typeof localStorage!=="undefined")localStorage.setItem("oni_live_events_enabled",$?"1":"0");k2()}function IJ(){if(typeof localStorage==="undefined")return;let $=localStorage.getItem("oni_live_events_enabled");if($!==null)B0={...B0,enabled:$==="1"},k2()}function n9(){let J=x1().relayList.filter((X)=>X.write).map((X)=>X.url),Z=DJ(),q=J;try{let X=localStorage.getItem("oni_outbox_relays_selected");if(X){let K=new Set(JSON.parse(X));if(K.size>0)q=J.filter((G)=>K.has(G))}}catch{}let Q=new Set,Y=[];for(let X of[...q,...Z]){let K=X.replace(/\/+$/,"");if(!Q.has(K))Q.add(K),Y.push(K)}if(Y.length>0)return Y;return["wss://relay.damus.io","wss://nos.lol","wss://relay.nostr.band"]}async function SJ($,J){let Z=L0();if(!Z.pubkey||!B0.enabled)return;B0={...B0,isPublishing:!0,error:null},k2();try{let q=n9(),Q=await d9(Z.pubkey,{identifier:`oni-${Date.now()}`,title:$||"Live Stream",status:"live",streamingUrl:`${window.location.origin}/hls/stream.m3u8`,starts:Math.floor(Date.now()/1000),currentParticipants:J,participants:[{pubkey:Z.pubkey,role:"Host"}],relays:q});if(Q){let{published:Y}=await s4(Q,q);if(Y){if(console.log("[liveevents] Published live event:",Q.id),B0={...B0,currentEvent:Q,isPublishing:!1,lastPublished:new Date().toISOString()},A2)clearInterval(A2);A2=setInterval(()=>{XX($,J)},60000)}else B0={...B0,isPublishing:!1,error:"Failed to publish to any relay"}}else B0={...B0,isPublishing:!1,error:"Failed to create event (signer rejected?)"}}catch(q){B0={...B0,isPublishing:!1,error:String(q)}}k2()}async function CJ(){let $=L0();if(!$.pubkey||!B0.currentEvent)return;if(A2)clearInterval(A2),A2=null;try{let J=n9(),Z=await c9($.pubkey,B0.currentEvent,{status:"ended",ends:Math.floor(Date.now()/1000)});if(Z)await s4(Z,J),console.log("[liveevents] Published stream ended event")}catch(J){console.error("[liveevents] Error ending live event:",J)}B0={...B0,currentEvent:null},k2()}async function XX($,J){let Z=L0();if(!Z.pubkey||!B0.currentEvent)return;try{let q=n9(),Q=await c9(Z.pubkey,B0.currentEvent,{title:$||"Live Stream",currentParticipants:J,status:"live"});if(Q)B0={...B0,currentEvent:Q,lastPublished:new Date().toISOString()},await s4(Q,q),k2()}catch(q){console.error("[liveevents] Error updating live event:",q)}}class a9 extends N{unsub=null;unsubAuth=null;lastPubkey=null;wasOnline=!1;state={loading:!0,error:null,online:!1,chatVisible:!0,chatDisabled:!1,isMobile:window.innerWidth<=768,name:"",streamTitle:"",offlineMessage:"",lastDisconnectTime:"",logo:""};updateAuthSigner(){let $=L0(),J=q1();if($.pubkey)J.setAuthSigner((Z)=>b4(Z));else J.setAuthSigner(null)}onAuthChange(){let $=L0();if(this.updateAuthSigner(),$.pubkey&&this.lastPubkey&&$.pubkey!==this.lastPubkey)P9();if(this.lastPubkey=$.pubkey,$.pubkey)TJ($.pubkey).catch((J)=>console.warn("[oni] Bootstrap error:",J))}componentDidMount(){f$(),this.unsub=n.subscribe(()=>{let $=n.getState(),J=$.status?.online||!1,Z=this.wasOnline;if(this.setState({loading:$.loading,error:$.error,online:J,chatVisible:$.chatVisible,chatDisabled:$.config?.chatDisabled||!1,isMobile:$.isMobile,name:$.config?.name||"",streamTitle:$.status?.streamTitle||"",offlineMessage:$.config?.offlineMessage||"",lastDisconnectTime:$.status?.lastDisconnectTime||"",logo:$.config?.logo||""}),J&&!Z)this.wasOnline=!0,SJ($.status?.streamTitle||$.config?.name||"Live Stream",$.status?.viewerCount||0);else if(!J&&Z)this.wasOnline=!1,CJ()}),this.unsubAuth=u1(()=>this.onAuthChange()),UJ(),L9(),IJ(),m4(10).catch(($)=>console.warn("[oni] Indexer discovery error:",$)),u4(),this.updateAuthSigner(),QJ().then(()=>{this.onAuthChange()}).catch(($)=>console.warn("[oni] Relay connect error:",$)),window.addEventListener("resize",this.handleResize),n.init()}componentWillUnmount(){this.unsub?.(),this.unsubAuth?.(),window.removeEventListener("resize",this.handleResize),n.cleanup()}handleResize=()=>{n.setMobile(window.innerWidth<=768)};render(){let{loading:$,error:J,online:Z,chatVisible:q,chatDisabled:Q,isMobile:Y,name:X,streamTitle:K,offlineMessage:G,lastDisconnectTime:w,logo:B}=this.state;if(J)return U("div",{class:"flex items-center justify-center min-h-screen bg-background"},U(v,{className:"max-w-sm w-full mx-4 text-center"},U(m,{className:"pt-6"},U("div",{class:"size-12 rounded-lg bg-destructive/10 flex items-center justify-center mx-auto mb-4"},U("svg",{class:"size-5 text-destructive",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}))),U("h2",{class:"text-lg font-semibold mb-2"},"Unable to connect"),U("p",{class:"text-sm text-muted-foreground mb-6"},J),U(k,{onClick:()=>window.location.reload()},"Try Again"))));if($)return U("div",{class:"flex items-center justify-center min-h-screen bg-background"},U("div",{class:"text-center"},U($1,{size:"lg",className:"mx-auto mb-4"}),U("p",{class:"text-sm text-muted-foreground"},"Loading stream...")));return U("div",{class:"flex flex-col h-screen bg-background"},U(v9,null),U("div",{class:"flex flex-1 min-h-0"},U("div",{class:"flex flex-col flex-1 overflow-y-auto"},Z?U(y9,{source:"/hls/stream.m3u8",online:Z,title:K||X}):U(E9,{name:X,customText:G,lastDisconnectTime:w,logo:B?"/logo":void 0}),Z&&U(g9,null),U("div",{class:"flex-1"}),U(p9,null)),q&&!Q&&!Y&&U("div",{class:"w-[340px] shrink-0 border-l border-border bg-card"},U(r4,null))),U(H4,{open:Y&&!Q&&q,onOpenChange:(T)=>{if(!T)n.toggleChat()}},U(t8,null,U(e8,null,"Chat")),U(a8,{className:"h-[70vh]"},U(r4,null))),U(P2,null))}}var UX=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),U("polyline",{points:"9 22 9 12 15 12 15 22"})),KX=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("circle",{cx:"12",cy:"12",r:"3"}),U("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})),GX=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polygon",{points:"23 7 16 12 23 17 23 7"}),U("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),wX=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})),BX=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),U("circle",{cx:"9",cy:"7",r:"4"}),U("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),U("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})),MX=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),U("polyline",{points:"14 2 14 8 20 8"}),U("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),U("line",{x1:"16",y1:"17",x2:"8",y2:"17"})),TX=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})),zX=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})),WX=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("circle",{cx:"12",cy:"12",r:"2"}),U("path",{d:"M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"})),HX=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),U("polyline",{points:"12 19 5 12 12 5"})),FX=[{heading:"",items:[{id:"overview",label:"Dashboard",icon:UX},{id:"viewers",label:"Viewers",icon:BX}]},{heading:"Configuration",items:[{id:"general",label:"General",icon:KX},{id:"video",label:"Video",icon:GX},{id:"chat",label:"Chat",icon:wX}]},{heading:"Nostr",items:[{id:"nostr",label:"Identity",icon:zX},{id:"relays",label:"Relays",icon:WX}]},{heading:"Advanced",items:[{id:"logs",label:"Logs",icon:MX},{id:"tokens",label:"Access Tokens",icon:TX}]}];class t9 extends N{unsub=null;state={online:!1,name:"",streamTitle:"",viewerCount:0,sidebarOpen:!1};componentDidMount(){this.unsub=n.subscribe(()=>{let $=n.getState();this.setState({online:$.status?.online||!1,name:$.config?.name||"",streamTitle:$.status?.streamTitle||"",viewerCount:$.status?.viewerCount||0})})}componentWillUnmount(){this.unsub?.()}render(){let{activeTab:$,onTabChange:J,children:Z}=this.props,{online:q,name:Q,viewerCount:Y}=this.state;return U("div",{class:"min-h-screen bg-background"},U("header",{class:"sticky top-0 z-50 border-b border-border/30 bg-background/80 backdrop-blur-xl backdrop-saturate-150"},U("div",{class:"flex h-14 items-center justify-between px-4 sm:px-6"},U("div",{class:"flex items-center gap-4"},U("a",{href:"/",class:"flex items-center gap-2.5 shrink-0"},U("span",{class:"text-xl"},"\uD83D\uDD25"),U("span",{class:"text-lg font-bold tracking-tight"},Q||"oni")),U("nav",{class:"hidden md:flex items-center gap-0.5"},U("a",{href:"/",class:"inline-flex h-9 items-center justify-center rounded-md px-3 py-2 text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground"},"Stream"),U("a",{href:"https://mycelium.social",target:"_blank",rel:"noopener",class:"inline-flex h-9 items-center justify-center rounded-md px-3 py-2 text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground"},"Mycelium"))),U("div",{class:"flex items-center gap-2"},q&&Y>0&&U(h,{variant:"outline",className:"tabular-nums gap-1.5"},U("svg",{class:"size-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},U("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),U("circle",{cx:"12",cy:"12",r:"3"})),Y),U(h,{variant:q?"default":"secondary",className:_("gap-1.5",q&&"bg-success text-success-foreground")},U("span",{class:_("size-1.5 rounded-full",q?"bg-current live-dot":"bg-muted-foreground/50")}),q?"Live":"Offline"),U(w5,{className:"hidden sm:inline-flex"})))),U("div",{class:"flex"},U("aside",{class:"hidden md:block w-52 shrink-0 border-r border-border"},U("div",{class:"sticky top-[57px] py-4 px-3 space-y-4 h-[calc(100vh-57px)] overflow-y-auto"},FX.map((X)=>U("div",{key:X.heading},X.heading&&U("p",{class:"px-3 mb-1.5 text-[11px] font-semibold tracking-wider uppercase text-muted-foreground/50"},X.heading),X.items.map((K)=>{let G=K.icon,w=$===K.id;return U("button",{key:K.id,class:_("w-full flex items-center gap-2.5 px-3 py-2 rounded-md text-sm transition-colors cursor-pointer",w?"bg-accent text-foreground font-medium":"text-muted-foreground hover:text-foreground hover:bg-accent/80"),onClick:()=>J(K.id)},U("span",{class:_("text-sm",w?"text-foreground":"text-muted-foreground/60")},U(G,null)),K.label)}))),U(N0,null),U("button",{class:"w-full flex items-center gap-2.5 px-3 py-2 rounded-md text-sm text-muted-foreground hover:text-foreground hover:bg-accent/80 transition-colors cursor-pointer",onClick:()=>{window.location.href="/"}},U(HX,null),"Back to stream"))),U("main",{class:"flex-1 min-w-0"},U("div",{class:"mx-auto max-w-5xl px-5 sm:px-6 lg:px-8 py-6"},Z))),U(P2,null))}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function L5($){return $+0.5|0}var m1=($,J,Z)=>Math.max(Math.min($,Z),J);function D5($){return m1(L5($*2.55),0,255)}function p1($){return m1(L5($*255),0,255)}function S1($){return m1(L5($/2.55)/100,0,1)}function NJ($){return m1(L5($*100),0,100)}var Q1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$6=[..."0123456789ABCDEF"],jX=($)=>$6[$&15],RX=($)=>$6[($&240)>>4]+$6[$&15],o4=($)=>($&240)>>4===($&15),_X=($)=>o4($.r)&&o4($.g)&&o4($.b)&&o4($.a);function DX($){var J=$.length,Z;if($[0]==="#"){if(J===4||J===5)Z={r:255&Q1[$[1]]*17,g:255&Q1[$[2]]*17,b:255&Q1[$[3]]*17,a:J===5?Q1[$[4]]*17:255};else if(J===7||J===9)Z={r:Q1[$[1]]<<4|Q1[$[2]],g:Q1[$[3]]<<4|Q1[$[4]],b:Q1[$[5]]<<4|Q1[$[6]],a:J===9?Q1[$[7]]<<4|Q1[$[8]]:255}}return Z}var LX=($,J)=>$<255?J($):"";function VX($){var J=_X($)?jX:RX;return $?"#"+J($.r)+J($.g)+J($.b)+LX($.a,J):void 0}var PX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function fJ($,J,Z){let q=J*Math.min(Z,1-Z),Q=(Y,X=(Y+$/30)%12)=>Z-q*Math.max(Math.min(X-3,9-X,1),-1);return[Q(0),Q(8),Q(4)]}function IX($,J,Z){let q=(Q,Y=(Q+$/60)%6)=>Z-Z*J*Math.max(Math.min(Y,4-Y,1),0);return[q(5),q(3),q(1)]}function SX($,J,Z){let q=fJ($,1,0.5),Q;if(J+Z>1)Q=1/(J+Z),J*=Q,Z*=Q;for(Q=0;Q<3;Q++)q[Q]*=1-J-Z,q[Q]+=J;return q}function CX($,J,Z,q,Q){if($===Q)return(J-Z)/q+(J<Z?6:0);if(J===Q)return(Z-$)/q+2;return($-J)/q+4}function J6($){let Z=$.r/255,q=$.g/255,Q=$.b/255,Y=Math.max(Z,q,Q),X=Math.min(Z,q,Q),K=(Y+X)/2,G,w,B;if(Y!==X)B=Y-X,w=K>0.5?B/(2-Y-X):B/(Y+X),G=CX(Z,q,Q,B,Y),G=G*60+0.5;return[G|0,w||0,K]}function Z6($,J,Z,q){return(Array.isArray(J)?$(J[0],J[1],J[2]):$(J,Z,q)).map(p1)}function q6($,J,Z){return Z6(fJ,$,J,Z)}function NX($,J,Z){return Z6(SX,$,J,Z)}function OX($,J,Z){return Z6(IX,$,J,Z)}function bJ($){return($%360+360)%360}function AX($){let J=PX.exec($),Z=255,q;if(!J)return;if(J[5]!==q)Z=J[6]?D5(+J[5]):p1(+J[5]);let Q=bJ(+J[2]),Y=+J[3]/100,X=+J[4]/100;if(J[1]==="hwb")q=NX(Q,Y,X);else if(J[1]==="hsv")q=OX(Q,Y,X);else q=q6(Q,Y,X);return{r:q[0],g:q[1],b:q[2],a:Z}}function kX($,J){var Z=J6($);Z[0]=bJ(Z[0]+J),Z=q6(Z),$.r=Z[0],$.g=Z[1],$.b=Z[2]}function fX($){if(!$)return;let J=J6($),Z=J[0],q=NJ(J[1]),Q=NJ(J[2]);return $.a<255?`hsla(${Z}, ${q}%, ${Q}%, ${S1($.a)})`:`hsl(${Z}, ${q}%, ${Q}%)`}var OJ={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},AJ={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function bX(){let $={},J=Object.keys(AJ),Z=Object.keys(OJ),q,Q,Y,X,K;for(q=0;q<J.length;q++){X=K=J[q];for(Q=0;Q<Z.length;Q++)Y=Z[Q],K=K.replace(Y,OJ[Y]);Y=parseInt(AJ[X],16),$[K]=[Y>>16&255,Y>>8&255,Y&255]}return $}var l4;function vX($){if(!l4)l4=bX(),l4.transparent=[0,0,0,0];let J=l4[$.toLowerCase()];return J&&{r:J[0],g:J[1],b:J[2],a:J.length===4?J[3]:255}}var yX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function EX($){let J=yX.exec($),Z=255,q,Q,Y;if(!J)return;if(J[7]!==q){let X=+J[7];Z=J[8]?D5(X):m1(X*255,0,255)}return q=+J[1],Q=+J[3],Y=+J[5],q=255&(J[2]?D5(q):m1(q,0,255)),Q=255&(J[4]?D5(Q):m1(Q,0,255)),Y=255&(J[6]?D5(Y):m1(Y,0,255)),{r:q,g:Q,b:Y,a:Z}}function gX($){return $&&($.a<255?`rgba(${$.r}, ${$.g}, ${$.b}, ${S1($.a)})`:`rgb(${$.r}, ${$.g}, ${$.b})`)}var e9=($)=>$<=0.0031308?$*12.92:Math.pow($,0.4166666666666667)*1.055-0.055,b2=($)=>$<=0.04045?$/12.92:Math.pow(($+0.055)/1.055,2.4);function hX($,J,Z){let q=b2(S1($.r)),Q=b2(S1($.g)),Y=b2(S1($.b));return{r:p1(e9(q+Z*(b2(S1(J.r))-q))),g:p1(e9(Q+Z*(b2(S1(J.g))-Q))),b:p1(e9(Y+Z*(b2(S1(J.b))-Y))),a:$.a+Z*(J.a-$.a)}}function i4($,J,Z){if($){let q=J6($);q[J]=Math.max(0,Math.min(q[J]+q[J]*Z,J===0?360:1)),q=q6(q),$.r=q[0],$.g=q[1],$.b=q[2]}}function vJ($,J){return $?Object.assign(J||{},$):$}function kJ($){var J={r:0,g:0,b:0,a:255};if(Array.isArray($)){if($.length>=3){if(J={r:$[0],g:$[1],b:$[2],a:255},$.length>3)J.a=p1($[3])}}else J=vJ($,{r:0,g:0,b:0,a:1}),J.a=p1(J.a);return J}function uX($){if($.charAt(0)==="r")return EX($);return AX($)}class v2{constructor($){if($ instanceof v2)return $;let J=typeof $,Z;if(J==="object")Z=kJ($);else if(J==="string")Z=DX($)||vX($)||uX($);this._rgb=Z,this._valid=!!Z}get valid(){return this._valid}get rgb(){var $=vJ(this._rgb);if($)$.a=S1($.a);return $}set rgb($){this._rgb=kJ($)}rgbString(){return this._valid?gX(this._rgb):void 0}hexString(){return this._valid?VX(this._rgb):void 0}hslString(){return this._valid?fX(this._rgb):void 0}mix($,J){if($){let Z=this.rgb,q=$.rgb,Q,Y=J===Q?0.5:J,X=2*Y-1,K=Z.a-q.a,G=((X*K===-1?X:(X+K)/(1+X*K))+1)/2;Q=1-G,Z.r=255&G*Z.r+Q*q.r+0.5,Z.g=255&G*Z.g+Q*q.g+0.5,Z.b=255&G*Z.b+Q*q.b+0.5,Z.a=Y*Z.a+(1-Y)*q.a,this.rgb=Z}return this}interpolate($,J){if($)this._rgb=hX(this._rgb,$._rgb,J);return this}clone(){return new v2(this.rgb)}alpha($){return this._rgb.a=p1($),this}clearer($){let J=this._rgb;return J.a*=1-$,this}greyscale(){let $=this._rgb,J=L5($.r*0.3+$.g*0.59+$.b*0.11);return $.r=$.g=$.b=J,this}opaquer($){let J=this._rgb;return J.a*=1+$,this}negate(){let $=this._rgb;return $.r=255-$.r,$.g=255-$.g,$.b=255-$.b,this}lighten($){return i4(this._rgb,2,$),this}darken($){return i4(this._rgb,2,-$),this}saturate($){return i4(this._rgb,1,$),this}desaturate($){return i4(this._rgb,1,-$),this}rotate($){return kX(this._rgb,$),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function M1(){}var rJ=(()=>{let $=0;return()=>$++})();function J0($){return $===null||$===void 0}function M0($){if(Array.isArray&&Array.isArray($))return!0;let J=Object.prototype.toString.call($);if(J.slice(0,7)==="[object"&&J.slice(-6)==="Array]")return!0;return!1}function i($){return $!==null&&Object.prototype.toString.call($)==="[object Object]"}function z0($){return(typeof $==="number"||$ instanceof Number)&&isFinite(+$)}function u0($,J){return z0($)?$:J}function s($,J){return typeof $==="undefined"?J:$}var sJ=($,J)=>typeof $==="string"&&$.endsWith("%")?parseFloat($)/100:+$/J,X6=($,J)=>typeof $==="string"&&$.endsWith("%")?parseFloat($)/100*J:+$;function U0($,J,Z){if($&&typeof $.call==="function")return $.apply(Z,J)}function Z0($,J,Z,q){let Q,Y,X;if(M0($))if(Y=$.length,q)for(Q=Y-1;Q>=0;Q--)J.call(Z,$[Q],Q);else for(Q=0;Q<Y;Q++)J.call(Z,$[Q],Q);else if(i($)){X=Object.keys($),Y=X.length;for(Q=0;Q<Y;Q++)J.call(Z,$[X[Q]],X[Q])}}function I5($,J){let Z,q,Q,Y;if(!$||!J||$.length!==J.length)return!1;for(Z=0,q=$.length;Z<q;++Z)if(Q=$[Z],Y=J[Z],Q.datasetIndex!==Y.datasetIndex||Q.index!==Y.index)return!1;return!0}function e4($){if(M0($))return $.map(e4);if(i($)){let J=Object.create(null),Z=Object.keys($),q=Z.length,Q=0;for(;Q<q;++Q)J[Z[Q]]=e4($[Z[Q]]);return J}return $}function oJ($){return["__proto__","prototype","constructor"].indexOf($)===-1}function xX($,J,Z,q){if(!oJ($))return;let Q=J[$],Y=Z[$];if(i(Q)&&i(Y))E2(Q,Y,q);else J[$]=e4(Y)}function E2($,J,Z){let q=M0(J)?J:[J],Q=q.length;if(!i($))return $;Z=Z||{};let Y=Z.merger||xX,X;for(let K=0;K<Q;++K){if(X=q[K],!i(X))continue;let G=Object.keys(X);for(let w=0,B=G.length;w<B;++w)Y(G[w],$,X,Z)}return $}function h2($,J){return E2($,J,{merger:mX})}function mX($,J,Z){if(!oJ($))return;let q=J[$],Q=Z[$];if(i(q)&&i(Q))h2(q,Q);else if(!Object.prototype.hasOwnProperty.call(J,$))J[$]=e4(Q)}var yJ={"":($)=>$,x:($)=>$.x,y:($)=>$.y};function pX($){let J=$.split("."),Z=[],q="";for(let Q of J)if(q+=Q,q.endsWith("\\"))q=q.slice(0,-1)+".";else Z.push(q),q="";return Z}function dX($){let J=pX($);return(Z)=>{for(let q of J){if(q==="")break;Z=Z&&Z[q]}return Z}}function u2($,J){return(yJ[J]||(yJ[J]=dX(J)))($)}function q8($){return $.charAt(0).toUpperCase()+$.slice(1)}var S5=($)=>typeof $!=="undefined",C1=($)=>typeof $==="function",U6=($,J)=>{if($.size!==J.size)return!1;for(let Z of $)if(!J.has(Z))return!1;return!0};function lJ($){return $.type==="mouseup"||$.type==="click"||$.type==="contextmenu"}var $0=Math.PI,w0=2*$0,cX=w0+$0,$8=Number.POSITIVE_INFINITY,rX=$0/180,j0=$0/2,X2=$0/4,EJ=$0*2/3,N1=Math.log10,K2=Math.sign;function x2($,J,Z){return Math.abs($-J)<Z}function K6($){let J=Math.round($);$=x2($,J,$/1000)?J:$;let Z=Math.pow(10,Math.floor(N1($))),q=$/Z;return(q<=1?1:q<=2?2:q<=5?5:10)*Z}function iJ($){let J=[],Z=Math.sqrt($),q;for(q=1;q<Z;q++)if($%q===0)J.push(q),J.push($/q);if(Z===(Z|0))J.push(Z);return J.sort((Q,Y)=>Q-Y).pop(),J}function sX($){return typeof $==="symbol"||typeof $==="object"&&$!==null&&!((Symbol.toPrimitive in $)||("toString"in $)||("valueOf"in $))}function m2($){return!sX($)&&!isNaN(parseFloat($))&&isFinite($)}function nJ($,J){let Z=Math.round($);return Z-J<=$&&Z+J>=$}function G6($,J,Z){let q,Q,Y;for(q=0,Q=$.length;q<Q;q++)if(Y=$[q][Z],!isNaN(Y))J.min=Math.min(J.min,Y),J.max=Math.max(J.max,Y)}function K1($){return $*($0/180)}function Q8($){return $*(180/$0)}function w6($){if(!z0($))return;let J=1,Z=0;while(Math.round($*J)/J!==$)J*=10,Z++;return Z}function B6($,J){let Z=J.x-$.x,q=J.y-$.y,Q=Math.sqrt(Z*Z+q*q),Y=Math.atan2(q,Z);if(Y<-0.5*$0)Y+=w0;return{angle:Y,distance:Q}}function J8($,J){return Math.sqrt(Math.pow(J.x-$.x,2)+Math.pow(J.y-$.y,2))}function oX($,J){return($-J+cX)%w0-$0}function b0($){return($%w0+w0)%w0}function p2($,J,Z,q){let Q=b0($),Y=b0(J),X=b0(Z),K=b0(Y-Q),G=b0(X-Q),w=b0(Q-Y),B=b0(Q-X);return Q===Y||Q===X||q&&Y===X||K>G&&w<B}function y0($,J,Z){return Math.max(J,Math.min(Z,$))}function aJ($){return y0($,-32768,32767)}function s1($,J,Z,q=0.000001){return $>=Math.min(J,Z)-q&&$<=Math.max(J,Z)+q}function Y8($,J,Z){Z=Z||((X)=>$[X]<J);let q=$.length-1,Q=0,Y;while(q-Q>1)if(Y=Q+q>>1,Z(Y))Q=Y;else q=Y;return{lo:Q,hi:q}}var c1=($,J,Z,q)=>Y8($,Z,q?(Q)=>{let Y=$[Q][J];return Y<Z||Y===Z&&$[Q+1][J]===Z}:(Q)=>$[Q][J]<Z),tJ=($,J,Z)=>Y8($,Z,(q)=>$[q][J]>=Z);function eJ($,J,Z){let q=0,Q=$.length;while(q<Q&&$[q]<J)q++;while(Q>q&&$[Q-1]>Z)Q--;return q>0||Q<$.length?$.slice(q,Q):$}var $Z=["push","pop","shift","splice","unshift"];function JZ($,J){if($._chartjs){$._chartjs.listeners.push(J);return}Object.defineProperty($,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[J]}}),$Z.forEach((Z)=>{let q="_onData"+q8(Z),Q=$[Z];Object.defineProperty($,Z,{configurable:!0,enumerable:!1,value(...Y){let X=Q.apply(this,Y);return $._chartjs.listeners.forEach((K)=>{if(typeof K[q]==="function")K[q](...Y)}),X}})})}function M6($,J){let Z=$._chartjs;if(!Z)return;let q=Z.listeners,Q=q.indexOf(J);if(Q!==-1)q.splice(Q,1);if(q.length>0)return;$Z.forEach((Y)=>{delete $[Y]}),delete $._chartjs}function ZZ($){let J=new Set($);if(J.size===$.length)return $;return Array.from(J)}var T6=function(){if(typeof window==="undefined")return function($){return $()};return window.requestAnimationFrame}();function z6($,J){let Z=[],q=!1;return function(...Q){if(Z=Q,!q)q=!0,T6.call(window,()=>{q=!1,$.apply(J,Z)})}}function qZ($,J){let Z;return function(...q){if(J)clearTimeout(Z),Z=setTimeout($,J,q);else $.apply(this,q);return J}}var W6=($)=>$==="start"?"left":$==="end"?"right":"center",x0=($,J,Z)=>$==="start"?J:$==="end"?Z:(J+Z)/2,QZ=($,J,Z,q)=>{return $===(q?"left":"right")?Z:$==="center"?(J+Z)/2:J};function YZ($,J,Z){let q=J.length,Q=0,Y=q;if($._sorted){let{iScale:X,vScale:K,_parsed:G}=$,w=$.dataset?$.dataset.options?$.dataset.options.spanGaps:null:null,B=X.axis,{min:M,max:T,minDefined:z,maxDefined:H}=X.getUserBounds();if(z){if(Q=Math.min(c1(G,B,M).lo,Z?q:c1(J,B,X.getPixelForValue(M)).lo),w){let W=G.slice(0,Q+1).reverse().findIndex((F)=>!J0(F[K.axis]));Q-=Math.max(0,W)}Q=y0(Q,0,q-1)}if(H){let W=Math.max(c1(G,X.axis,T,!0).hi+1,Z?0:c1(J,B,X.getPixelForValue(T),!0).hi+1);if(w){let F=G.slice(W-1).findIndex((j)=>!J0(j[K.axis]));W+=Math.max(0,F)}Y=y0(W,Q,q)-Q}else Y=q-Q}return{start:Q,count:Y}}function XZ($){let{xScale:J,yScale:Z,_scaleRanges:q}=$,Q={xmin:J.min,xmax:J.max,ymin:Z.min,ymax:Z.max};if(!q)return $._scaleRanges=Q,!0;let Y=q.xmin!==J.min||q.xmax!==J.max||q.ymin!==Z.min||q.ymax!==Z.max;return Object.assign(q,Q),Y}var n4=($)=>$===0||$===1,gJ=($,J,Z)=>-(Math.pow(2,10*($-=1))*Math.sin(($-J)*w0/Z)),hJ=($,J,Z)=>Math.pow(2,-10*$)*Math.sin(($-J)*w0/Z)+1,y2={linear:($)=>$,easeInQuad:($)=>$*$,easeOutQuad:($)=>-$*($-2),easeInOutQuad:($)=>($/=0.5)<1?0.5*$*$:-0.5*(--$*($-2)-1),easeInCubic:($)=>$*$*$,easeOutCubic:($)=>($-=1)*$*$+1,easeInOutCubic:($)=>($/=0.5)<1?0.5*$*$*$:0.5*(($-=2)*$*$+2),easeInQuart:($)=>$*$*$*$,easeOutQuart:($)=>-(($-=1)*$*$*$-1),easeInOutQuart:($)=>($/=0.5)<1?0.5*$*$*$*$:-0.5*(($-=2)*$*$*$-2),easeInQuint:($)=>$*$*$*$*$,easeOutQuint:($)=>($-=1)*$*$*$*$+1,easeInOutQuint:($)=>($/=0.5)<1?0.5*$*$*$*$*$:0.5*(($-=2)*$*$*$*$+2),easeInSine:($)=>-Math.cos($*j0)+1,easeOutSine:($)=>Math.sin($*j0),easeInOutSine:($)=>-0.5*(Math.cos($0*$)-1),easeInExpo:($)=>$===0?0:Math.pow(2,10*($-1)),easeOutExpo:($)=>$===1?1:-Math.pow(2,-10*$)+1,easeInOutExpo:($)=>n4($)?$:$<0.5?0.5*Math.pow(2,10*($*2-1)):0.5*(-Math.pow(2,-10*($*2-1))+2),easeInCirc:($)=>$>=1?$:-(Math.sqrt(1-$*$)-1),easeOutCirc:($)=>Math.sqrt(1-($-=1)*$),easeInOutCirc:($)=>($/=0.5)<1?-0.5*(Math.sqrt(1-$*$)-1):0.5*(Math.sqrt(1-($-=2)*$)+1),easeInElastic:($)=>n4($)?$:gJ($,0.075,0.3),easeOutElastic:($)=>n4($)?$:hJ($,0.075,0.3),easeInOutElastic($){return n4($)?$:$<0.5?0.5*gJ($*2,0.1125,0.45):0.5+0.5*hJ($*2-1,0.1125,0.45)},easeInBack($){return $*$*(2.70158*$-1.70158)},easeOutBack($){return($-=1)*$*(2.70158*$+1.70158)+1},easeInOutBack($){let J=1.70158;if(($/=0.5)<1)return 0.5*($*$*(((J*=1.525)+1)*$-J));return 0.5*(($-=2)*$*(((J*=1.525)+1)*$+J)+2)},easeInBounce:($)=>1-y2.easeOutBounce(1-$),easeOutBounce($){if($<0.36363636363636365)return 7.5625*$*$;if($<0.7272727272727273)return 7.5625*($-=0.5454545454545454)*$+0.75;if($<0.9090909090909091)return 7.5625*($-=0.8181818181818182)*$+0.9375;return 7.5625*($-=0.9545454545454546)*$+0.984375},easeInOutBounce:($)=>$<0.5?y2.easeInBounce($*2)*0.5:y2.easeOutBounce($*2-1)*0.5+0.5};function H6($){if($&&typeof $==="object"){let J=$.toString();return J==="[object CanvasPattern]"||J==="[object CanvasGradient]"}return!1}function F6($){return H6($)?$:new v2($)}function Q6($){return H6($)?$:new v2($).saturate(0.5).darken(0.1).hexString()}var lX=["x","y","borderWidth","radius","tension"],iX=["color","borderColor","backgroundColor"];function nX($){$.set("animation",{delay:void 0,duration:1000,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),$.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:(J)=>J!=="onProgress"&&J!=="onComplete"&&J!=="fn"}),$.set("animations",{colors:{type:"color",properties:iX},numbers:{type:"number",properties:lX}}),$.describe("animations",{_fallback:"animation"}),$.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:(J)=>J|0}}}})}function aX($){$.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var uJ=new Map;function tX($,J){J=J||{};let Z=$+JSON.stringify(J),q=uJ.get(Z);if(!q)q=new Intl.NumberFormat($,J),uJ.set(Z,q);return q}function C5($,J,Z){return tX(J,Z).format($)}var UZ={values($){return M0($)?$:""+$},numeric($,J,Z){if($===0)return"0";let q=this.chart.options.locale,Q,Y=$;if(Z.length>1){let w=Math.max(Math.abs(Z[0].value),Math.abs(Z[Z.length-1].value));if(w<0.0001||w>1000000000000000)Q="scientific";Y=eX($,Z)}let X=N1(Math.abs(Y)),K=isNaN(X)?1:Math.max(Math.min(-1*Math.floor(X),20),0),G={notation:Q,minimumFractionDigits:K,maximumFractionDigits:K};return Object.assign(G,this.options.ticks.format),C5($,q,G)},logarithmic($,J,Z){if($===0)return"0";let q=Z[J].significand||$/Math.pow(10,Math.floor(N1($)));if([1,2,3,5,10,15].includes(q)||J>0.8*Z.length)return UZ.numeric.call(this,$,J,Z);return""}};function eX($,J){let Z=J.length>3?J[2].value-J[1].value:J[1].value-J[0].value;if(Math.abs(Z)>=1&&$!==Math.floor($))Z=$-Math.floor($);return Z}var N5={formatters:UZ};function $U($){$.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(J,Z)=>Z.lineWidth,tickColor:(J,Z)=>Z.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:N5.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),$.route("scale.ticks","color","","color"),$.route("scale.grid","color","","borderColor"),$.route("scale.border","color","","borderColor"),$.route("scale.title","color","","color"),$.describe("scale",{_fallback:!1,_scriptable:(J)=>!J.startsWith("before")&&!J.startsWith("after")&&J!=="callback"&&J!=="parser",_indexable:(J)=>J!=="borderDash"&&J!=="tickBorderDash"&&J!=="dash"}),$.describe("scales",{_fallback:"scale"}),$.describe("scale.ticks",{_scriptable:(J)=>J!=="backdropPadding"&&J!=="callback",_indexable:(J)=>J!=="backdropPadding"})}var o1=Object.create(null),X8=Object.create(null);function V5($,J){if(!J)return $;let Z=J.split(".");for(let q=0,Q=Z.length;q<Q;++q){let Y=Z[q];$=$[Y]||($[Y]=Object.create(null))}return $}function Y6($,J,Z){if(typeof J==="string")return E2(V5($,J),Z);return E2(V5($,""),J)}class KZ{constructor($,J){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=(Z)=>Z.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(Z,q)=>Q6(q.backgroundColor),this.hoverBorderColor=(Z,q)=>Q6(q.borderColor),this.hoverColor=(Z,q)=>Q6(q.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe($),this.apply(J)}set($,J){return Y6(this,$,J)}get($){return V5(this,$)}describe($,J){return Y6(X8,$,J)}override($,J){return Y6(o1,$,J)}route($,J,Z,q){let Q=V5(this,$),Y=V5(this,Z),X="_"+J;Object.defineProperties(Q,{[X]:{value:Q[J],writable:!0},[J]:{enumerable:!0,get(){let K=this[X],G=Y[q];if(i(K))return Object.assign({},G,K);return s(K,G)},set(K){this[X]=K}}})}apply($){$.forEach((J)=>J(this))}}var W0=new KZ({_scriptable:($)=>!$.startsWith("on"),_indexable:($)=>$!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[nX,aX,$U]);function JU($){if(!$||J0($.size)||J0($.family))return null;return($.style?$.style+" ":"")+($.weight?$.weight+" ":"")+$.size+"px "+$.family}function P5($,J,Z,q,Q){let Y=J[Q];if(!Y)Y=J[Q]=$.measureText(Q).width,Z.push(Q);if(Y>q)q=Y;return q}function GZ($,J,Z,q){q=q||{};let Q=q.data=q.data||{},Y=q.garbageCollect=q.garbageCollect||[];if(q.font!==J)Q=q.data={},Y=q.garbageCollect=[],q.font=J;$.save(),$.font=J;let X=0,K=Z.length,G,w,B,M,T;for(G=0;G<K;G++)if(M=Z[G],M!==void 0&&M!==null&&!M0(M))X=P5($,Q,Y,X,M);else if(M0(M)){for(w=0,B=M.length;w<B;w++)if(T=M[w],T!==void 0&&T!==null&&!M0(T))X=P5($,Q,Y,X,T)}$.restore();let z=Y.length/2;if(z>Z.length){for(G=0;G<z;G++)delete Q[Y[G]];Y.splice(0,z)}return X}function l1($,J,Z){let q=$.currentDevicePixelRatio,Q=Z!==0?Math.max(Z/2,0.5):0;return Math.round((J-Q)*q)/q+Q}function j6($,J){if(!J&&!$)return;J=J||$.getContext("2d"),J.save(),J.resetTransform(),J.clearRect(0,0,$.width,$.height),J.restore()}function U8($,J,Z,q){R6($,J,Z,q,null)}function R6($,J,Z,q,Q){let Y,X,K,G,w,B,M,T,z=J.pointStyle,H=J.rotation,W=J.radius,F=(H||0)*rX;if(z&&typeof z==="object"){if(Y=z.toString(),Y==="[object HTMLImageElement]"||Y==="[object HTMLCanvasElement]"){$.save(),$.translate(Z,q),$.rotate(F),$.drawImage(z,-z.width/2,-z.height/2,z.width,z.height),$.restore();return}}if(isNaN(W)||W<=0)return;switch($.beginPath(),z){default:if(Q)$.ellipse(Z,q,Q/2,W,0,0,w0);else $.arc(Z,q,W,0,w0);$.closePath();break;case"triangle":B=Q?Q/2:W,$.moveTo(Z+Math.sin(F)*B,q-Math.cos(F)*W),F+=EJ,$.lineTo(Z+Math.sin(F)*B,q-Math.cos(F)*W),F+=EJ,$.lineTo(Z+Math.sin(F)*B,q-Math.cos(F)*W),$.closePath();break;case"rectRounded":w=W*0.516,G=W-w,X=Math.cos(F+X2)*G,M=Math.cos(F+X2)*(Q?Q/2-w:G),K=Math.sin(F+X2)*G,T=Math.sin(F+X2)*(Q?Q/2-w:G),$.arc(Z-M,q-K,w,F-$0,F-j0),$.arc(Z+T,q-X,w,F-j0,F),$.arc(Z+M,q+K,w,F,F+j0),$.arc(Z-T,q+X,w,F+j0,F+$0),$.closePath();break;case"rect":if(!H){G=Math.SQRT1_2*W,B=Q?Q/2:G,$.rect(Z-B,q-G,2*B,2*G);break}F+=X2;case"rectRot":M=Math.cos(F)*(Q?Q/2:W),X=Math.cos(F)*W,K=Math.sin(F)*W,T=Math.sin(F)*(Q?Q/2:W),$.moveTo(Z-M,q-K),$.lineTo(Z+T,q-X),$.lineTo(Z+M,q+K),$.lineTo(Z-T,q+X),$.closePath();break;case"crossRot":F+=X2;case"cross":M=Math.cos(F)*(Q?Q/2:W),X=Math.cos(F)*W,K=Math.sin(F)*W,T=Math.sin(F)*(Q?Q/2:W),$.moveTo(Z-M,q-K),$.lineTo(Z+M,q+K),$.moveTo(Z+T,q-X),$.lineTo(Z-T,q+X);break;case"star":M=Math.cos(F)*(Q?Q/2:W),X=Math.cos(F)*W,K=Math.sin(F)*W,T=Math.sin(F)*(Q?Q/2:W),$.moveTo(Z-M,q-K),$.lineTo(Z+M,q+K),$.moveTo(Z+T,q-X),$.lineTo(Z-T,q+X),F+=X2,M=Math.cos(F)*(Q?Q/2:W),X=Math.cos(F)*W,K=Math.sin(F)*W,T=Math.sin(F)*(Q?Q/2:W),$.moveTo(Z-M,q-K),$.lineTo(Z+M,q+K),$.moveTo(Z+T,q-X),$.lineTo(Z-T,q+X);break;case"line":X=Q?Q/2:Math.cos(F)*W,K=Math.sin(F)*W,$.moveTo(Z-X,q-K),$.lineTo(Z+X,q+K);break;case"dash":$.moveTo(Z,q),$.lineTo(Z+Math.cos(F)*(Q?Q/2:W),q+Math.sin(F)*W);break;case!1:$.closePath();break}if($.fill(),J.borderWidth>0)$.stroke()}function B1($,J,Z){return Z=Z||0.5,!J||$&&$.x>J.left-Z&&$.x<J.right+Z&&$.y>J.top-Z&&$.y<J.bottom+Z}function O5($,J){$.save(),$.beginPath(),$.rect(J.left,J.top,J.right-J.left,J.bottom-J.top),$.clip()}function A5($){$.restore()}function wZ($,J,Z,q,Q){if(!J)return $.lineTo(Z.x,Z.y);if(Q==="middle"){let Y=(J.x+Z.x)/2;$.lineTo(Y,J.y),$.lineTo(Y,Z.y)}else if(Q==="after"!==!!q)$.lineTo(J.x,Z.y);else $.lineTo(Z.x,J.y);$.lineTo(Z.x,Z.y)}function BZ($,J,Z,q){if(!J)return $.lineTo(Z.x,Z.y);$.bezierCurveTo(q?J.cp1x:J.cp2x,q?J.cp1y:J.cp2y,q?Z.cp2x:Z.cp1x,q?Z.cp2y:Z.cp1y,Z.x,Z.y)}function ZU($,J){if(J.translation)$.translate(J.translation[0],J.translation[1]);if(!J0(J.rotation))$.rotate(J.rotation);if(J.color)$.fillStyle=J.color;if(J.textAlign)$.textAlign=J.textAlign;if(J.textBaseline)$.textBaseline=J.textBaseline}function qU($,J,Z,q,Q){if(Q.strikethrough||Q.underline){let Y=$.measureText(q),X=J-Y.actualBoundingBoxLeft,K=J+Y.actualBoundingBoxRight,G=Z-Y.actualBoundingBoxAscent,w=Z+Y.actualBoundingBoxDescent,B=Q.strikethrough?(G+w)/2:w;$.strokeStyle=$.fillStyle,$.beginPath(),$.lineWidth=Q.decorationWidth||2,$.moveTo(X,B),$.lineTo(K,B),$.stroke()}}function QU($,J){let Z=$.fillStyle;$.fillStyle=J.color,$.fillRect(J.left,J.top,J.width,J.height),$.fillStyle=Z}function w2($,J,Z,q,Q,Y={}){let X=M0(J)?J:[J],K=Y.strokeWidth>0&&Y.strokeColor!=="",G,w;$.save(),$.font=Q.string,ZU($,Y);for(G=0;G<X.length;++G){if(w=X[G],Y.backdrop)QU($,Y.backdrop);if(K){if(Y.strokeColor)$.strokeStyle=Y.strokeColor;if(!J0(Y.strokeWidth))$.lineWidth=Y.strokeWidth;$.strokeText(w,Z,q,Y.maxWidth)}$.fillText(w,Z,q,Y.maxWidth),qU($,Z,q,w,Y),q+=Number(Q.lineHeight)}$.restore()}function k5($,J){let{x:Z,y:q,w:Q,h:Y,radius:X}=J;$.arc(Z+X.topLeft,q+X.topLeft,X.topLeft,1.5*$0,$0,!0),$.lineTo(Z,q+Y-X.bottomLeft),$.arc(Z+X.bottomLeft,q+Y-X.bottomLeft,X.bottomLeft,$0,j0,!0),$.lineTo(Z+Q-X.bottomRight,q+Y),$.arc(Z+Q-X.bottomRight,q+Y-X.bottomRight,X.bottomRight,j0,0,!0),$.lineTo(Z+Q,q+X.topRight),$.arc(Z+Q-X.topRight,q+X.topRight,X.topRight,0,-j0,!0),$.lineTo(Z+X.topLeft,q)}var YU=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,XU=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function UU($,J){let Z=(""+$).match(YU);if(!Z||Z[1]==="normal")return J*1.2;switch($=+Z[2],Z[3]){case"px":return $;case"%":$/=100;break}return J*$}var KU=($)=>+$||0;function K8($,J){let Z={},q=i(J),Q=q?Object.keys(J):J,Y=i($)?q?(X)=>s($[X],$[J[X]]):(X)=>$[X]:()=>$;for(let X of Q)Z[X]=KU(Y(X));return Z}function MZ($){return K8($,{top:"y",right:"x",bottom:"y",left:"x"})}function B2($){return K8($,["topLeft","topRight","bottomLeft","bottomRight"])}function E0($){let J=MZ($);return J.width=J.left+J.right,J.height=J.top+J.bottom,J}function A0($,J){$=$||{},J=J||W0.font;let Z=s($.size,J.size);if(typeof Z==="string")Z=parseInt(Z,10);let q=s($.style,J.style);if(q&&!(""+q).match(XU))console.warn('Invalid font style specified: "'+q+'"'),q=void 0;let Q={family:s($.family,J.family),lineHeight:UU(s($.lineHeight,J.lineHeight),Z),size:Z,style:q,weight:s($.weight,J.weight),string:""};return Q.string=JU(Q),Q}function f5($,J,Z,q){let Q=!0,Y,X,K;for(Y=0,X=$.length;Y<X;++Y){if(K=$[Y],K===void 0)continue;if(J!==void 0&&typeof K==="function")K=K(J),Q=!1;if(Z!==void 0&&M0(K))K=K[Z%K.length],Q=!1;if(K!==void 0){if(q&&!Q)q.cacheable=!1;return K}}}function TZ($,J,Z){let{min:q,max:Q}=$,Y=X6(J,(Q-q)/2),X=(K,G)=>Z&&K===0?0:K+G;return{min:X(q,-Math.abs(Y)),max:X(Q,Y)}}function O1($,J){return Object.assign(Object.create($),J)}function G8($,J=[""],Z,q,Q=()=>$[0]){let Y=Z||$;if(typeof q==="undefined")q=HZ("_fallback",$);let X={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:$,_rootScopes:Y,_fallback:q,_getTarget:Q,override:(K)=>G8([K,...$],J,Y,q)};return new Proxy(X,{deleteProperty(K,G){return delete K[G],delete K._keys,delete $[0][G],!0},get(K,G){return zZ(K,G,()=>HU(G,J,$,K))},getOwnPropertyDescriptor(K,G){return Reflect.getOwnPropertyDescriptor(K._scopes[0],G)},getPrototypeOf(){return Reflect.getPrototypeOf($[0])},has(K,G){return mJ(K).includes(G)},ownKeys(K){return mJ(K)},set(K,G,w){let B=K._storage||(K._storage=Q());return K[G]=B[G]=w,delete K._keys,!0}})}function G2($,J,Z,q){let Q={_cacheable:!1,_proxy:$,_context:J,_subProxy:Z,_stack:new Set,_descriptors:_6($,q),setContext:(Y)=>G2($,Y,Z,q),override:(Y)=>G2($.override(Y),J,Z,q)};return new Proxy(Q,{deleteProperty(Y,X){return delete Y[X],delete $[X],!0},get(Y,X,K){return zZ(Y,X,()=>wU(Y,X,K))},getOwnPropertyDescriptor(Y,X){return Y._descriptors.allKeys?Reflect.has($,X)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor($,X)},getPrototypeOf(){return Reflect.getPrototypeOf($)},has(Y,X){return Reflect.has($,X)},ownKeys(){return Reflect.ownKeys($)},set(Y,X,K){return $[X]=K,delete Y[X],!0}})}function _6($,J={scriptable:!0,indexable:!0}){let{_scriptable:Z=J.scriptable,_indexable:q=J.indexable,_allKeys:Q=J.allKeys}=$;return{allKeys:Q,scriptable:Z,indexable:q,isScriptable:C1(Z)?Z:()=>Z,isIndexable:C1(q)?q:()=>q}}var GU=($,J)=>$?$+q8(J):J,D6=($,J)=>i(J)&&$!=="adapters"&&(Object.getPrototypeOf(J)===null||J.constructor===Object);function zZ($,J,Z){if(Object.prototype.hasOwnProperty.call($,J)||J==="constructor")return $[J];let q=Z();return $[J]=q,q}function wU($,J,Z){let{_proxy:q,_context:Q,_subProxy:Y,_descriptors:X}=$,K=q[J];if(C1(K)&&X.isScriptable(J))K=BU(J,K,$,Z);if(M0(K)&&K.length)K=MU(J,K,$,X.isIndexable);if(D6(J,K))K=G2(K,Q,Y&&Y[J],X);return K}function BU($,J,Z,q){let{_proxy:Q,_context:Y,_subProxy:X,_stack:K}=Z;if(K.has($))throw new Error("Recursion detected: "+Array.from(K).join("->")+"->"+$);K.add($);let G=J(Y,X||q);if(K.delete($),D6($,G))G=L6(Q._scopes,Q,$,G);return G}function MU($,J,Z,q){let{_proxy:Q,_context:Y,_subProxy:X,_descriptors:K}=Z;if(typeof Y.index!=="undefined"&&q($))return J[Y.index%J.length];else if(i(J[0])){let G=J,w=Q._scopes.filter((B)=>B!==G);J=[];for(let B of G){let M=L6(w,Q,$,B);J.push(G2(M,Y,X&&X[$],K))}}return J}function WZ($,J,Z){return C1($)?$(J,Z):$}var TU=($,J)=>$===!0?J:typeof $==="string"?u2(J,$):void 0;function zU($,J,Z,q,Q){for(let Y of J){let X=TU(Z,Y);if(X){$.add(X);let K=WZ(X._fallback,Z,Q);if(typeof K!=="undefined"&&K!==Z&&K!==q)return K}else if(X===!1&&typeof q!=="undefined"&&Z!==q)return null}return!1}function L6($,J,Z,q){let Q=J._rootScopes,Y=WZ(J._fallback,Z,q),X=[...$,...Q],K=new Set;K.add(q);let G=xJ(K,X,Z,Y||Z,q);if(G===null)return!1;if(typeof Y!=="undefined"&&Y!==Z){if(G=xJ(K,X,Y,G,q),G===null)return!1}return G8(Array.from(K),[""],Q,Y,()=>WU(J,Z,q))}function xJ($,J,Z,q,Q){while(Z)Z=zU($,J,Z,q,Q);return Z}function WU($,J,Z){let q=$._getTarget();if(!(J in q))q[J]={};let Q=q[J];if(M0(Q)&&i(Z))return Z;return Q||{}}function HU($,J,Z,q){let Q;for(let Y of J)if(Q=HZ(GU(Y,$),Z),typeof Q!=="undefined")return D6($,Q)?L6(Z,q,$,Q):Q}function HZ($,J){for(let Z of J){if(!Z)continue;let q=Z[$];if(typeof q!=="undefined")return q}}function mJ($){let J=$._keys;if(!J)J=$._keys=FU($._scopes);return J}function FU($){let J=new Set;for(let Z of $)for(let q of Object.keys(Z).filter((Q)=>!Q.startsWith("_")))J.add(q);return Array.from(J)}var jU=Number.EPSILON||0.00000000000001,g2=($,J)=>J<$.length&&!$[J].skip&&$[J],FZ=($)=>$==="x"?"y":"x";function RU($,J,Z,q){let Q=$.skip?J:$,Y=J,X=Z.skip?J:Z,K=J8(Y,Q),G=J8(X,Y),w=K/(K+G),B=G/(K+G);w=isNaN(w)?0:w,B=isNaN(B)?0:B;let M=q*w,T=q*B;return{previous:{x:Y.x-M*(X.x-Q.x),y:Y.y-M*(X.y-Q.y)},next:{x:Y.x+T*(X.x-Q.x),y:Y.y+T*(X.y-Q.y)}}}function _U($,J,Z){let q=$.length,Q,Y,X,K,G,w=g2($,0);for(let B=0;B<q-1;++B){if(G=w,w=g2($,B+1),!G||!w)continue;if(x2(J[B],0,jU)){Z[B]=Z[B+1]=0;continue}if(Q=Z[B]/J[B],Y=Z[B+1]/J[B],K=Math.pow(Q,2)+Math.pow(Y,2),K<=9)continue;X=3/Math.sqrt(K),Z[B]=Q*X*J[B],Z[B+1]=Y*X*J[B]}}function DU($,J,Z="x"){let q=FZ(Z),Q=$.length,Y,X,K,G=g2($,0);for(let w=0;w<Q;++w){if(X=K,K=G,G=g2($,w+1),!K)continue;let B=K[Z],M=K[q];if(X)Y=(B-X[Z])/3,K[`cp1${Z}`]=B-Y,K[`cp1${q}`]=M-Y*J[w];if(G)Y=(G[Z]-B)/3,K[`cp2${Z}`]=B+Y,K[`cp2${q}`]=M+Y*J[w]}}function LU($,J="x"){let Z=FZ(J),q=$.length,Q=Array(q).fill(0),Y=Array(q),X,K,G,w=g2($,0);for(X=0;X<q;++X){if(K=G,G=w,w=g2($,X+1),!G)continue;if(w){let B=w[J]-G[J];Q[X]=B!==0?(w[Z]-G[Z])/B:0}Y[X]=!K?Q[X]:!w?Q[X-1]:K2(Q[X-1])!==K2(Q[X])?0:(Q[X-1]+Q[X])/2}_U($,Q,Y),DU($,Y,J)}function a4($,J,Z){return Math.max(Math.min($,Z),J)}function VU($,J){let Z,q,Q,Y,X,K=B1($[0],J);for(Z=0,q=$.length;Z<q;++Z){if(X=Y,Y=K,K=Z<q-1&&B1($[Z+1],J),!Y)continue;if(Q=$[Z],X)Q.cp1x=a4(Q.cp1x,J.left,J.right),Q.cp1y=a4(Q.cp1y,J.top,J.bottom);if(K)Q.cp2x=a4(Q.cp2x,J.left,J.right),Q.cp2y=a4(Q.cp2y,J.top,J.bottom)}}function jZ($,J,Z,q,Q){let Y,X,K,G;if(J.spanGaps)$=$.filter((w)=>!w.skip);if(J.cubicInterpolationMode==="monotone")LU($,Q);else{let w=q?$[$.length-1]:$[0];for(Y=0,X=$.length;Y<X;++Y)K=$[Y],G=RU(w,K,$[Math.min(Y+1,X-(q?0:1))%X],J.tension),K.cp1x=G.previous.x,K.cp1y=G.previous.y,K.cp2x=G.next.x,K.cp2y=G.next.y,w=K}if(J.capBezierPoints)VU($,Z)}function w8(){return typeof window!=="undefined"&&typeof document!=="undefined"}function B8($){let J=$.parentNode;if(J&&J.toString()==="[object ShadowRoot]")J=J.host;return J}function Z8($,J,Z){let q;if(typeof $==="string"){if(q=parseInt($,10),$.indexOf("%")!==-1)q=q/100*J.parentNode[Z]}else q=$;return q}var M8=($)=>$.ownerDocument.defaultView.getComputedStyle($,null);function PU($,J){return M8($).getPropertyValue(J)}var IU=["top","right","bottom","left"];function U2($,J,Z){let q={};Z=Z?"-"+Z:"";for(let Q=0;Q<4;Q++){let Y=IU[Q];q[Y]=parseFloat($[J+"-"+Y+Z])||0}return q.width=q.left+q.right,q.height=q.top+q.bottom,q}var SU=($,J,Z)=>($>0||J>0)&&(!Z||!Z.shadowRoot);function CU($,J){let Z=$.touches,q=Z&&Z.length?Z[0]:$,{offsetX:Q,offsetY:Y}=q,X=!1,K,G;if(SU(Q,Y,$.target))K=Q,G=Y;else{let w=J.getBoundingClientRect();K=q.clientX-w.left,G=q.clientY-w.top,X=!0}return{x:K,y:G,box:X}}function i1($,J){if("native"in $)return $;let{canvas:Z,currentDevicePixelRatio:q}=J,Q=M8(Z),Y=Q.boxSizing==="border-box",X=U2(Q,"padding"),K=U2(Q,"border","width"),{x:G,y:w,box:B}=CU($,Z),M=X.left+(B&&K.left),T=X.top+(B&&K.top),{width:z,height:H}=J;if(Y)z-=X.width+K.width,H-=X.height+K.height;return{x:Math.round((G-M)/z*Z.width/q),y:Math.round((w-T)/H*Z.height/q)}}function NU($,J,Z){let q,Q;if(J===void 0||Z===void 0){let Y=$&&B8($);if(!Y)J=$.clientWidth,Z=$.clientHeight;else{let X=Y.getBoundingClientRect(),K=M8(Y),G=U2(K,"border","width"),w=U2(K,"padding");J=X.width-w.width-G.width,Z=X.height-w.height-G.height,q=Z8(K.maxWidth,Y,"clientWidth"),Q=Z8(K.maxHeight,Y,"clientHeight")}}return{width:J,height:Z,maxWidth:q||$8,maxHeight:Q||$8}}var r1=($)=>Math.round($*10)/10;function RZ($,J,Z,q){let Q=M8($),Y=U2(Q,"margin"),X=Z8(Q.maxWidth,$,"clientWidth")||$8,K=Z8(Q.maxHeight,$,"clientHeight")||$8,G=NU($,J,Z),{width:w,height:B}=G;if(Q.boxSizing==="content-box"){let T=U2(Q,"border","width"),z=U2(Q,"padding");w-=z.width+T.width,B-=z.height+T.height}if(w=Math.max(0,w-Y.width),B=Math.max(0,q?w/q:B-Y.height),w=r1(Math.min(w,X,G.maxWidth)),B=r1(Math.min(B,K,G.maxHeight)),w&&!B)B=r1(w/2);if((J!==void 0||Z!==void 0)&&q&&G.height&&B>G.height)B=G.height,w=r1(Math.floor(B*q));return{width:w,height:B}}function V6($,J,Z){let q=J||1,Q=r1($.height*q),Y=r1($.width*q);$.height=r1($.height),$.width=r1($.width);let X=$.canvas;if(X.style&&(Z||!X.style.height&&!X.style.width))X.style.height=`${$.height}px`,X.style.width=`${$.width}px`;if($.currentDevicePixelRatio!==q||X.height!==Q||X.width!==Y)return $.currentDevicePixelRatio=q,X.height=Q,X.width=Y,$.ctx.setTransform(q,0,0,q,0,0),!0;return!1}var _Z=function(){let $=!1;try{let J={get passive(){return $=!0,!1}};if(w8())window.addEventListener("test",null,J),window.removeEventListener("test",null,J)}catch(J){}return $}();function P6($,J){let Z=PU($,J),q=Z&&Z.match(/^(\d+)(\.\d+)?px$/);return q?+q[1]:void 0}function d1($,J,Z,q){return{x:$.x+Z*(J.x-$.x),y:$.y+Z*(J.y-$.y)}}function DZ($,J,Z,q){return{x:$.x+Z*(J.x-$.x),y:q==="middle"?Z<0.5?$.y:J.y:q==="after"?Z<1?$.y:J.y:Z>0?J.y:$.y}}function LZ($,J,Z,q){let Q={x:$.cp2x,y:$.cp2y},Y={x:J.cp1x,y:J.cp1y},X=d1($,Q,Z),K=d1(Q,Y,Z),G=d1(Y,J,Z),w=d1(X,K,Z),B=d1(K,G,Z);return d1(w,B,Z)}var OU=function($,J){return{x(Z){return $+$+J-Z},setWidth(Z){J=Z},textAlign(Z){if(Z==="center")return Z;return Z==="right"?"left":"right"},xPlus(Z,q){return Z-q},leftForLtr(Z,q){return Z-q}}},AU=function(){return{x($){return $},setWidth($){},textAlign($){return $},xPlus($,J){return $+J},leftForLtr($,J){return $}}};function M2($,J,Z){return $?OU(J,Z):AU()}function I6($,J){let Z,q;if(J==="ltr"||J==="rtl")Z=$.canvas.style,q=[Z.getPropertyValue("direction"),Z.getPropertyPriority("direction")],Z.setProperty("direction",J,"important"),$.prevTextDirection=q}function S6($,J){if(J!==void 0)delete $.prevTextDirection,$.canvas.style.setProperty("direction",J[0],J[1])}function VZ($){if($==="angle")return{between:p2,compare:oX,normalize:b0};return{between:s1,compare:(J,Z)=>J-Z,normalize:(J)=>J}}function pJ({start:$,end:J,count:Z,loop:q,style:Q}){return{start:$%Z,end:J%Z,loop:q&&(J-$+1)%Z===0,style:Q}}function kU($,J,Z){let{property:q,start:Q,end:Y}=Z,{between:X,normalize:K}=VZ(q),G=J.length,{start:w,end:B,loop:M}=$,T,z;if(M){w+=G,B+=G;for(T=0,z=G;T<z;++T){if(!X(K(J[w%G][q]),Q,Y))break;w--,B--}w%=G,B%=G}if(B<w)B+=G;return{start:w,end:B,loop:M,style:$.style}}function C6($,J,Z){if(!Z)return[$];let{property:q,start:Q,end:Y}=Z,X=J.length,{compare:K,between:G,normalize:w}=VZ(q),{start:B,end:M,loop:T,style:z}=kU($,J,Z),H=[],W=!1,F=null,j,R,L,V=()=>G(Q,L,j)&&K(Q,L)!==0,D=()=>K(Y,j)===0||G(Y,L,j),C=()=>W||V(),S=()=>!W||D();for(let P=B,I=B;P<=M;++P){if(R=J[P%X],R.skip)continue;if(j=w(R[q]),j===L)continue;if(W=G(j,Q,Y),F===null&&C())F=K(j,Q)===0?P:I;if(F!==null&&S())H.push(pJ({start:F,end:P,loop:T,count:X,style:z})),F=null;I=P,L=j}if(F!==null)H.push(pJ({start:F,end:M,loop:T,count:X,style:z}));return H}function N6($,J){let Z=[],q=$.segments;for(let Q=0;Q<q.length;Q++){let Y=C6(q[Q],$.points,J);if(Y.length)Z.push(...Y)}return Z}function fU($,J,Z,q){let Q=0,Y=J-1;if(Z&&!q)while(Q<J&&!$[Q].skip)Q++;while(Q<J&&$[Q].skip)Q++;if(Q%=J,Z)Y+=Q;while(Y>Q&&$[Y%J].skip)Y--;return Y%=J,{start:Q,end:Y}}function bU($,J,Z,q){let Q=$.length,Y=[],X=J,K=$[J],G;for(G=J+1;G<=Z;++G){let w=$[G%Q];if(w.skip||w.stop){if(!K.skip)q=!1,Y.push({start:J%Q,end:(G-1)%Q,loop:q}),J=X=w.stop?G:null}else if(X=G,K.skip)J=G;K=w}if(X!==null)Y.push({start:J%Q,end:X%Q,loop:q});return Y}function PZ($,J){let Z=$.points,q=$.options.spanGaps,Q=Z.length;if(!Q)return[];let Y=!!$._loop,{start:X,end:K}=fU(Z,Q,Y,q);if(q===!0)return dJ($,[{start:X,end:K,loop:Y}],Z,J);let G=K<X?K+Q:K,w=!!$._fullLoop&&X===0&&K===Q-1;return dJ($,bU(Z,X,G,w),Z,J)}function dJ($,J,Z,q){if(!q||!q.setContext||!Z)return J;return vU($,J,Z,q)}function vU($,J,Z,q){let Q=$._chart.getContext(),Y=cJ($.options),{_datasetIndex:X,options:{spanGaps:K}}=$,G=Z.length,w=[],B=Y,M=J[0].start,T=M;function z(H,W,F,j){let R=K?-1:1;if(H===W)return;H+=G;while(Z[H%G].skip)H-=R;while(Z[W%G].skip)W+=R;if(H%G!==W%G)w.push({start:H%G,end:W%G,loop:F,style:j}),B=j,M=W%G}for(let H of J){M=K?M:H.start;let W=Z[M%G],F;for(T=M+1;T<=H.end;T++){let j=Z[T%G];if(F=cJ(q.setContext(O1(Q,{type:"segment",p0:W,p1:j,p0DataIndex:(T-1)%G,p1DataIndex:T%G,datasetIndex:X}))),yU(F,B))z(M,T-1,H.loop,B);W=j,B=F}if(M<T-1)z(M,T-1,H.loop,B)}return w}function cJ($){return{backgroundColor:$.backgroundColor,borderCapStyle:$.borderCapStyle,borderDash:$.borderDash,borderDashOffset:$.borderDashOffset,borderJoinStyle:$.borderJoinStyle,borderWidth:$.borderWidth,borderColor:$.borderColor}}function yU($,J){if(!J)return!1;let Z=[],q=function(Q,Y){if(!H6(Y))return Y;if(!Z.includes(Y))Z.push(Y);return Z.indexOf(Y)};return JSON.stringify($,q)!==JSON.stringify(J,q)}function t4($,J,Z){return $.options.clip?$[Z]:J[Z]}function EU($,J){let{xScale:Z,yScale:q}=$;if(Z&&q)return{left:t4(Z,J,"left"),right:t4(Z,J,"right"),top:t4(q,J,"top"),bottom:t4(q,J,"bottom")};return J}function O6($,J){let Z=J._clip;if(Z.disabled)return!1;let q=EU(J,$.chartArea);return{left:Z.left===!1?0:q.left-(Z.left===!0?0:Z.left),right:Z.right===!1?$.width:q.right+(Z.right===!0?0:Z.right),top:Z.top===!1?0:q.top-(Z.top===!0?0:Z.top),bottom:Z.bottom===!1?$.height:q.bottom+(Z.bottom===!0?0:Z.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class jq{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify($,J,Z,q){let Q=J.listeners[q],Y=J.duration;Q.forEach((X)=>X({chart:$,initial:J.initial,numSteps:Y,currentStep:Math.min(Z-J.start,Y)}))}_refresh(){if(this._request)return;this._running=!0,this._request=T6.call(window,()=>{if(this._update(),this._request=null,this._running)this._refresh()})}_update($=Date.now()){let J=0;if(this._charts.forEach((Z,q)=>{if(!Z.running||!Z.items.length)return;let Q=Z.items,Y=Q.length-1,X=!1,K;for(;Y>=0;--Y)if(K=Q[Y],K._active){if(K._total>Z.duration)Z.duration=K._total;K.tick($),X=!0}else Q[Y]=Q[Q.length-1],Q.pop();if(X)q.draw(),this._notify(q,Z,$,"progress");if(!Q.length)Z.running=!1,this._notify(q,Z,$,"complete"),Z.initial=!1;J+=Q.length}),this._lastDate=$,J===0)this._running=!1}_getAnims($){let J=this._charts,Z=J.get($);if(!Z)Z={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},J.set($,Z);return Z}listen($,J,Z){this._getAnims($).listeners[J].push(Z)}add($,J){if(!J||!J.length)return;this._getAnims($).items.push(...J)}has($){return this._getAnims($).items.length>0}start($){let J=this._charts.get($);if(!J)return;J.running=!0,J.start=Date.now(),J.duration=J.items.reduce((Z,q)=>Math.max(Z,q._duration),0),this._refresh()}running($){if(!this._running)return!1;let J=this._charts.get($);if(!J||!J.running||!J.items.length)return!1;return!0}stop($){let J=this._charts.get($);if(!J||!J.items.length)return;let Z=J.items,q=Z.length-1;for(;q>=0;--q)Z[q].cancel();J.items=[],this._notify($,J,Date.now(),"complete")}remove($){return this._charts.delete($)}}var A1=new jq,IZ="transparent",gU={boolean($,J,Z){return Z>0.5?J:$},color($,J,Z){let q=F6($||IZ),Q=q.valid&&F6(J||IZ);return Q&&Q.valid?Q.mix(q,Z).hexString():J},number($,J,Z){return $+(J-$)*Z}};class Rq{constructor($,J,Z,q){let Q=J[Z];q=f5([$.to,q,Q,$.from]);let Y=f5([$.from,Q,q]);this._active=!0,this._fn=$.fn||gU[$.type||typeof Y],this._easing=y2[$.easing]||y2.linear,this._start=Math.floor(Date.now()+($.delay||0)),this._duration=this._total=Math.floor($.duration),this._loop=!!$.loop,this._target=J,this._prop=Z,this._from=Y,this._to=q,this._promises=void 0}active(){return this._active}update($,J,Z){if(this._active){this._notify(!1);let q=this._target[this._prop],Q=Z-this._start,Y=this._duration-Q;this._start=Z,this._duration=Math.floor(Math.max(Y,$.duration)),this._total+=Q,this._loop=!!$.loop,this._to=f5([$.to,J,q,$.from]),this._from=f5([$.from,q,J])}}cancel(){if(this._active)this.tick(Date.now()),this._active=!1,this._notify(!1)}tick($){let J=$-this._start,Z=this._duration,q=this._prop,Q=this._from,Y=this._loop,X=this._to,K;if(this._active=Q!==X&&(Y||J<Z),!this._active){this._target[q]=X,this._notify(!0);return}if(J<0){this._target[q]=Q;return}K=J/Z%2,K=Y&&K>1?2-K:K,K=this._easing(Math.min(1,Math.max(0,K))),this._target[q]=this._fn(Q,X,K)}wait(){let $=this._promises||(this._promises=[]);return new Promise((J,Z)=>{$.push({res:J,rej:Z})})}_notify($){let J=$?"res":"rej",Z=this._promises||[];for(let q=0;q<Z.length;q++)Z[q][J]()}}class s6{constructor($,J){this._chart=$,this._properties=new Map,this.configure(J)}configure($){if(!i($))return;let J=Object.keys(W0.animation),Z=this._properties;Object.getOwnPropertyNames($).forEach((q)=>{let Q=$[q];if(!i(Q))return;let Y={};for(let X of J)Y[X]=Q[X];(M0(Q.properties)&&Q.properties||[q]).forEach((X)=>{if(X===q||!Z.has(X))Z.set(X,Y)})})}_animateOptions($,J){let Z=J.options,q=uU($,Z);if(!q)return[];let Q=this._createAnimations(q,Z);if(Z.$shared)hU($.options.$animations,Z).then(()=>{$.options=Z},()=>{});return Q}_createAnimations($,J){let Z=this._properties,q=[],Q=$.$animations||($.$animations={}),Y=Object.keys(J),X=Date.now(),K;for(K=Y.length-1;K>=0;--K){let G=Y[K];if(G.charAt(0)==="$")continue;if(G==="options"){q.push(...this._animateOptions($,J));continue}let w=J[G],B=Q[G],M=Z.get(G);if(B)if(M&&B.active()){B.update(M,w,X);continue}else B.cancel();if(!M||!M.duration){$[G]=w;continue}Q[G]=B=new Rq(M,$,G,w),q.push(B)}return q}update($,J){if(this._properties.size===0){Object.assign($,J);return}let Z=this._createAnimations($,J);if(Z.length)return A1.add(this._chart,Z),!0}}function hU($,J){let Z=[],q=Object.keys(J);for(let Q=0;Q<q.length;Q++){let Y=$[q[Q]];if(Y&&Y.active())Z.push(Y.wait())}return Promise.all(Z)}function uU($,J){if(!J)return;let Z=$.options;if(!Z){$.options=J;return}if(Z.$shared)$.options=Z=Object.assign({},Z,{$shared:!1,$animations:{}});return Z}function SZ($,J){let Z=$&&$.options||{},q=Z.reverse,Q=Z.min===void 0?J:0,Y=Z.max===void 0?J:0;return{start:q?Y:Q,end:q?Q:Y}}function xU($,J,Z){if(Z===!1)return!1;let q=SZ($,Z),Q=SZ(J,Z);return{top:Q.end,right:q.end,bottom:Q.start,left:q.start}}function mU($){let J,Z,q,Q;if(i($))J=$.top,Z=$.right,q=$.bottom,Q=$.left;else J=Z=q=Q=$;return{top:J,right:Z,bottom:q,left:Q,disabled:$===!1}}function _q($,J){let Z=[],q=$._getSortedDatasetMetas(J),Q,Y;for(Q=0,Y=q.length;Q<Y;++Q)Z.push(q[Q].index);return Z}function CZ($,J,Z,q={}){let Q=$.keys,Y=q.mode==="single",X,K,G,w;if(J===null)return;let B=!1;for(X=0,K=Q.length;X<K;++X){if(G=+Q[X],G===Z){if(B=!0,q.all)continue;break}if(w=$.values[G],z0(w)&&(Y||J===0||K2(J)===K2(w)))J+=w}if(!B&&!q.all)return 0;return J}function pU($,J){let{iScale:Z,vScale:q}=J,Q=Z.axis==="x"?"x":"y",Y=q.axis==="x"?"x":"y",X=Object.keys($),K=new Array(X.length),G,w,B;for(G=0,w=X.length;G<w;++G)B=X[G],K[G]={[Q]:B,[Y]:$[B]};return K}function A6($,J){let Z=$&&$.options.stacked;return Z||Z===void 0&&J.stack!==void 0}function dU($,J,Z){return`${$.id}.${J.id}.${Z.stack||Z.type}`}function cU($){let{min:J,max:Z,minDefined:q,maxDefined:Q}=$.getUserBounds();return{min:q?J:Number.NEGATIVE_INFINITY,max:Q?Z:Number.POSITIVE_INFINITY}}function rU($,J,Z){let q=$[J]||($[J]={});return q[Z]||(q[Z]={})}function NZ($,J,Z,q){for(let Q of J.getMatchingVisibleMetas(q).reverse()){let Y=$[Q.index];if(Z&&Y>0||!Z&&Y<0)return Q.index}return null}function OZ($,J){let{chart:Z,_cachedMeta:q}=$,Q=Z._stacks||(Z._stacks={}),{iScale:Y,vScale:X,index:K}=q,G=Y.axis,w=X.axis,B=dU(Y,X,q),M=J.length,T;for(let z=0;z<M;++z){let H=J[z],{[G]:W,[w]:F}=H,j=H._stacks||(H._stacks={});T=j[w]=rU(Q,B,W),T[K]=F,T._top=NZ(T,X,!0,q.type),T._bottom=NZ(T,X,!1,q.type);let R=T._visualValues||(T._visualValues={});R[K]=F}}function k6($,J){let Z=$.scales;return Object.keys(Z).filter((q)=>Z[q].axis===J).shift()}function sU($,J){return O1($,{active:!1,dataset:void 0,datasetIndex:J,index:J,mode:"default",type:"dataset"})}function oU($,J,Z){return O1($,{active:!1,dataIndex:J,parsed:void 0,raw:void 0,element:Z,index:J,mode:"default",type:"data"})}function b5($,J){let Z=$.controller.index,q=$.vScale&&$.vScale.axis;if(!q)return;J=J||$._parsed;for(let Q of J){let Y=Q._stacks;if(!Y||Y[q]===void 0||Y[q][Z]===void 0)return;if(delete Y[q][Z],Y[q]._visualValues!==void 0&&Y[q]._visualValues[Z]!==void 0)delete Y[q]._visualValues[Z]}}var f6=($)=>$==="reset"||$==="none",AZ=($,J)=>J?$:Object.assign({},$),lU=($,J,Z)=>$&&!J.hidden&&J._stacked&&{keys:_q(Z,!0),values:null};class L8{static defaults={};static datasetElementType=null;static dataElementType=null;constructor($,J){this.chart=$,this._ctx=$.ctx,this.index=J,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let $=this._cachedMeta;if(this.configure(),this.linkScales(),$._stacked=A6($.vScale,$),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler"))console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex($){if(this.index!==$)b5(this._cachedMeta);this.index=$}linkScales(){let $=this.chart,J=this._cachedMeta,Z=this.getDataset(),q=(B,M,T,z)=>B==="x"?M:B==="r"?z:T,Q=J.xAxisID=s(Z.xAxisID,k6($,"x")),Y=J.yAxisID=s(Z.yAxisID,k6($,"y")),X=J.rAxisID=s(Z.rAxisID,k6($,"r")),K=J.indexAxis,G=J.iAxisID=q(K,Q,Y,X),w=J.vAxisID=q(K,Y,Q,X);J.xScale=this.getScaleForId(Q),J.yScale=this.getScaleForId(Y),J.rScale=this.getScaleForId(X),J.iScale=this.getScaleForId(G),J.vScale=this.getScaleForId(w)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId($){return this.chart.scales[$]}_getOtherScale($){let J=this._cachedMeta;return $===J.iScale?J.vScale:J.iScale}reset(){this._update("reset")}_destroy(){let $=this._cachedMeta;if(this._data)M6(this._data,this);if($._stacked)b5($)}_dataCheck(){let $=this.getDataset(),J=$.data||($.data=[]),Z=this._data;if(i(J)){let q=this._cachedMeta;this._data=pU(J,q)}else if(Z!==J){if(Z){M6(Z,this);let q=this._cachedMeta;b5(q),q._parsed=[]}if(J&&Object.isExtensible(J))JZ(J,this);this._syncList=[],this._data=J}}addElements(){let $=this._cachedMeta;if(this._dataCheck(),this.datasetElementType)$.dataset=new this.datasetElementType}buildOrUpdateElements($){let J=this._cachedMeta,Z=this.getDataset(),q=!1;this._dataCheck();let Q=J._stacked;if(J._stacked=A6(J.vScale,J),J.stack!==Z.stack)q=!0,b5(J),J.stack=Z.stack;if(this._resyncElements($),q||Q!==J._stacked)OZ(this,J._parsed),J._stacked=A6(J.vScale,J)}configure(){let $=this.chart.config,J=$.datasetScopeKeys(this._type),Z=$.getOptionScopes(this.getDataset(),J,!0);this.options=$.createResolver(Z,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse($,J){let{_cachedMeta:Z,_data:q}=this,{iScale:Q,_stacked:Y}=Z,X=Q.axis,K=$===0&&J===q.length?!0:Z._sorted,G=$>0&&Z._parsed[$-1],w,B,M;if(this._parsing===!1)Z._parsed=q,Z._sorted=!0,M=q;else{if(M0(q[$]))M=this.parseArrayData(Z,q,$,J);else if(i(q[$]))M=this.parseObjectData(Z,q,$,J);else M=this.parsePrimitiveData(Z,q,$,J);let T=()=>B[X]===null||G&&B[X]<G[X];for(w=0;w<J;++w)if(Z._parsed[w+$]=B=M[w],K){if(T())K=!1;G=B}Z._sorted=K}if(Y)OZ(this,M)}parsePrimitiveData($,J,Z,q){let{iScale:Q,vScale:Y}=$,X=Q.axis,K=Y.axis,G=Q.getLabels(),w=Q===Y,B=new Array(q),M,T,z;for(M=0,T=q;M<T;++M)z=M+Z,B[M]={[X]:w||Q.parse(G[z],z),[K]:Y.parse(J[z],z)};return B}parseArrayData($,J,Z,q){let{xScale:Q,yScale:Y}=$,X=new Array(q),K,G,w,B;for(K=0,G=q;K<G;++K)w=K+Z,B=J[w],X[K]={x:Q.parse(B[0],w),y:Y.parse(B[1],w)};return X}parseObjectData($,J,Z,q){let{xScale:Q,yScale:Y}=$,{xAxisKey:X="x",yAxisKey:K="y"}=this._parsing,G=new Array(q),w,B,M,T;for(w=0,B=q;w<B;++w)M=w+Z,T=J[M],G[w]={x:Q.parse(u2(T,X),M),y:Y.parse(u2(T,K),M)};return G}getParsed($){return this._cachedMeta._parsed[$]}getDataElement($){return this._cachedMeta.data[$]}applyStack($,J,Z){let q=this.chart,Q=this._cachedMeta,Y=J[$.axis],X={keys:_q(q,!0),values:J._stacks[$.axis]._visualValues};return CZ(X,Y,Q.index,{mode:Z})}updateRangeFromParsed($,J,Z,q){let Q=Z[J.axis],Y=Q===null?NaN:Q,X=q&&Z._stacks[J.axis];if(q&&X)q.values=X,Y=CZ(q,Q,this._cachedMeta.index);$.min=Math.min($.min,Y),$.max=Math.max($.max,Y)}getMinMax($,J){let Z=this._cachedMeta,q=Z._parsed,Q=Z._sorted&&$===Z.iScale,Y=q.length,X=this._getOtherScale($),K=lU(J,Z,this.chart),G={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:w,max:B}=cU(X),M,T;function z(){T=q[M];let H=T[X.axis];return!z0(T[$.axis])||w>H||B<H}for(M=0;M<Y;++M){if(z())continue;if(this.updateRangeFromParsed(G,$,T,K),Q)break}if(Q)for(M=Y-1;M>=0;--M){if(z())continue;this.updateRangeFromParsed(G,$,T,K);break}return G}getAllParsedValues($){let J=this._cachedMeta._parsed,Z=[],q,Q,Y;for(q=0,Q=J.length;q<Q;++q)if(Y=J[q][$.axis],z0(Y))Z.push(Y);return Z}getMaxOverflow(){return!1}getLabelAndValue($){let J=this._cachedMeta,Z=J.iScale,q=J.vScale,Q=this.getParsed($);return{label:Z?""+Z.getLabelForValue(Q[Z.axis]):"",value:q?""+q.getLabelForValue(Q[q.axis]):""}}_update($){let J=this._cachedMeta;this.update($||"default"),J._clip=mU(s(this.options.clip,xU(J.xScale,J.yScale,this.getMaxOverflow())))}update($){}draw(){let $=this._ctx,J=this.chart,Z=this._cachedMeta,q=Z.data||[],Q=J.chartArea,Y=[],X=this._drawStart||0,K=this._drawCount||q.length-X,G=this.options.drawActiveElementsOnTop,w;if(Z.dataset)Z.dataset.draw($,Q,X,K);for(w=X;w<X+K;++w){let B=q[w];if(B.hidden)continue;if(B.active&&G)Y.push(B);else B.draw($,Q)}for(w=0;w<Y.length;++w)Y[w].draw($,Q)}getStyle($,J){let Z=J?"active":"default";return $===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(Z):this.resolveDataElementOptions($||0,Z)}getContext($,J,Z){let q=this.getDataset(),Q;if($>=0&&$<this._cachedMeta.data.length){let Y=this._cachedMeta.data[$];Q=Y.$context||(Y.$context=oU(this.getContext(),$,Y)),Q.parsed=this.getParsed($),Q.raw=q.data[$],Q.index=Q.dataIndex=$}else Q=this.$context||(this.$context=sU(this.chart.getContext(),this.index)),Q.dataset=q,Q.index=Q.datasetIndex=this.index;return Q.active=!!J,Q.mode=Z,Q}resolveDatasetElementOptions($){return this._resolveElementOptions(this.datasetElementType.id,$)}resolveDataElementOptions($,J){return this._resolveElementOptions(this.dataElementType.id,J,$)}_resolveElementOptions($,J="default",Z){let q=J==="active",Q=this._cachedDataOpts,Y=$+"-"+J,X=Q[Y],K=this.enableOptionSharing&&S5(Z);if(X)return AZ(X,K);let G=this.chart.config,w=G.datasetElementScopeKeys(this._type,$),B=q?[`${$}Hover`,"hover",$,""]:[$,""],M=G.getOptionScopes(this.getDataset(),w),T=Object.keys(W0.elements[$]),z=()=>this.getContext(Z,q,J),H=G.resolveNamedOptions(M,T,z,B);if(H.$shared)H.$shared=K,Q[Y]=Object.freeze(AZ(H,K));return H}_resolveAnimations($,J,Z){let q=this.chart,Q=this._cachedDataOpts,Y=`animation-${J}`,X=Q[Y];if(X)return X;let K;if(q.options.animation!==!1){let w=this.chart.config,B=w.datasetAnimationScopeKeys(this._type,J),M=w.getOptionScopes(this.getDataset(),B);K=w.createResolver(M,this.getContext($,Z,J))}let G=new s6(q,K&&K.animations);if(K&&K._cacheable)Q[Y]=Object.freeze(G);return G}getSharedOptions($){if(!$.$shared)return;return this._sharedOptions||(this._sharedOptions=Object.assign({},$))}includeOptions($,J){return!J||f6($)||this.chart._animationsDisabled}_getSharedOptions($,J){let Z=this.resolveDataElementOptions($,J),q=this._sharedOptions,Q=this.getSharedOptions(Z),Y=this.includeOptions(J,Q)||Q!==q;return this.updateSharedOptions(Q,J,Z),{sharedOptions:Q,includeOptions:Y}}updateElement($,J,Z,q){if(f6(q))Object.assign($,Z);else this._resolveAnimations(J,q).update($,Z)}updateSharedOptions($,J,Z){if($&&!f6(J))this._resolveAnimations(void 0,J).update($,Z)}_setStyle($,J,Z,q){$.active=q;let Q=this.getStyle(J,q);this._resolveAnimations(J,Z,q).update($,{options:!q&&this.getSharedOptions(Q)||Q})}removeHoverStyle($,J,Z){this._setStyle($,Z,"active",!1)}setHoverStyle($,J,Z){this._setStyle($,Z,"active",!0)}_removeDatasetHoverStyle(){let $=this._cachedMeta.dataset;if($)this._setStyle($,void 0,"active",!1)}_setDatasetHoverStyle(){let $=this._cachedMeta.dataset;if($)this._setStyle($,void 0,"active",!0)}_resyncElements($){let J=this._data,Z=this._cachedMeta.data;for(let[X,K,G]of this._syncList)this[X](K,G);this._syncList=[];let q=Z.length,Q=J.length,Y=Math.min(Q,q);if(Y)this.parse(0,Y);if(Q>q)this._insertElements(q,Q-q,$);else if(Q<q)this._removeElements(Q,q-Q)}_insertElements($,J,Z=!0){let q=this._cachedMeta,Q=q.data,Y=$+J,X,K=(G)=>{G.length+=J;for(X=G.length-1;X>=Y;X--)G[X]=G[X-J]};K(Q);for(X=$;X<Y;++X)Q[X]=new this.dataElementType;if(this._parsing)K(q._parsed);if(this.parse($,J),Z)this.updateElements(Q,$,J,"reset")}updateElements($,J,Z,q){}_removeElements($,J){let Z=this._cachedMeta;if(this._parsing){let q=Z._parsed.splice($,J);if(Z._stacked)b5(Z,q)}Z.data.splice($,J)}_sync($){if(this._parsing)this._syncList.push($);else{let[J,Z,q]=$;this[J](Z,q)}this.chart._dataChanges.push([this.index,...$])}_onDataPush(){let $=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-$,$])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice($,J){if(J)this._sync(["_removeElements",$,J]);let Z=arguments.length-2;if(Z)this._sync(["_insertElements",$,Z])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function iU($,J,Z){let q=1,Q=1,Y=0,X=0;if(J<w0){let K=$,G=K+J,w=Math.cos(K),B=Math.sin(K),M=Math.cos(G),T=Math.sin(G),z=(L,V,D)=>p2(L,K,G,!0)?1:Math.max(V,V*Z,D,D*Z),H=(L,V,D)=>p2(L,K,G,!0)?-1:Math.min(V,V*Z,D,D*Z),W=z(0,w,M),F=z(j0,B,T),j=H($0,w,M),R=H($0+j0,B,T);q=(W-j)/2,Q=(F-R)/2,Y=-(W+j)/2,X=-(F+R)/2}return{ratioX:q,ratioY:Q,offsetX:Y,offsetY:X}}class o6 extends L8{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:($)=>$!=="spacing",_indexable:($)=>$!=="spacing"&&!$.startsWith("borderDash")&&!$.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels($){let J=$.data,{labels:{pointStyle:Z,textAlign:q,color:Q,useBorderRadius:Y,borderRadius:X}}=$.legend.options;if(J.labels.length&&J.datasets.length)return J.labels.map((K,G)=>{let B=$.getDatasetMeta(0).controller.getStyle(G);return{text:K,fillStyle:B.backgroundColor,fontColor:Q,hidden:!$.getDataVisibility(G),lineDash:B.borderDash,lineDashOffset:B.borderDashOffset,lineJoin:B.borderJoinStyle,lineWidth:B.borderWidth,strokeStyle:B.borderColor,textAlign:q,pointStyle:Z,borderRadius:Y&&(X||B.borderRadius),index:G}});return[]}},onClick($,J,Z){Z.chart.toggleDataVisibility(J.index),Z.chart.update()}}}};constructor($,J){super($,J);this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse($,J){let Z=this.getDataset().data,q=this._cachedMeta;if(this._parsing===!1)q._parsed=Z;else{let Q=(K)=>+Z[K];if(i(Z[$])){let{key:K="value"}=this._parsing;Q=(G)=>+u2(Z[G],K)}let Y,X;for(Y=$,X=$+J;Y<X;++Y)q._parsed[Y]=Q(Y)}}_getRotation(){return K1(this.options.rotation-90)}_getCircumference(){return K1(this.options.circumference)}_getRotationExtents(){let $=w0,J=-w0;for(let Z=0;Z<this.chart.data.datasets.length;++Z)if(this.chart.isDatasetVisible(Z)&&this.chart.getDatasetMeta(Z).type===this._type){let q=this.chart.getDatasetMeta(Z).controller,Q=q._getRotation(),Y=q._getCircumference();$=Math.min($,Q),J=Math.max(J,Q+Y)}return{rotation:$,circumference:J-$}}update($){let J=this.chart,{chartArea:Z}=J,q=this._cachedMeta,Q=q.data,Y=this.getMaxBorderWidth()+this.getMaxOffset(Q)+this.options.spacing,X=Math.max((Math.min(Z.width,Z.height)-Y)/2,0),K=Math.min(sJ(this.options.cutout,X),1),G=this._getRingWeight(this.index),{circumference:w,rotation:B}=this._getRotationExtents(),{ratioX:M,ratioY:T,offsetX:z,offsetY:H}=iU(B,w,K),W=(Z.width-Y)/M,F=(Z.height-Y)/T,j=Math.max(Math.min(W,F)/2,0),R=X6(this.options.radius,j),L=Math.max(R*K,0),V=(R-L)/this._getVisibleDatasetWeightTotal();this.offsetX=z*R,this.offsetY=H*R,q.total=this.calculateTotal(),this.outerRadius=R-V*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-V*G,0),this.updateElements(Q,0,Q.length,$)}_circumference($,J){let Z=this.options,q=this._cachedMeta,Q=this._getCircumference();if(J&&Z.animation.animateRotate||!this.chart.getDataVisibility($)||q._parsed[$]===null||q.data[$].hidden)return 0;return this.calculateCircumference(q._parsed[$]*Q/w0)}updateElements($,J,Z,q){let Q=q==="reset",Y=this.chart,X=Y.chartArea,G=Y.options.animation,w=(X.left+X.right)/2,B=(X.top+X.bottom)/2,M=Q&&G.animateScale,T=M?0:this.innerRadius,z=M?0:this.outerRadius,{sharedOptions:H,includeOptions:W}=this._getSharedOptions(J,q),F=this._getRotation(),j;for(j=0;j<J;++j)F+=this._circumference(j,Q);for(j=J;j<J+Z;++j){let R=this._circumference(j,Q),L=$[j],V={x:w+this.offsetX,y:B+this.offsetY,startAngle:F,endAngle:F+R,circumference:R,outerRadius:z,innerRadius:T};if(W)V.options=H||this.resolveDataElementOptions(j,L.active?"active":q);F+=R,this.updateElement(L,j,V,q)}}calculateTotal(){let $=this._cachedMeta,J=$.data,Z=0,q;for(q=0;q<J.length;q++){let Q=$._parsed[q];if(Q!==null&&!isNaN(Q)&&this.chart.getDataVisibility(q)&&!J[q].hidden)Z+=Math.abs(Q)}return Z}calculateCircumference($){let J=this._cachedMeta.total;if(J>0&&!isNaN($))return w0*(Math.abs($)/J);return 0}getLabelAndValue($){let J=this._cachedMeta,Z=this.chart,q=Z.data.labels||[],Q=C5(J._parsed[$],Z.options.locale);return{label:q[$]||"",value:Q}}getMaxBorderWidth($){let J=0,Z=this.chart,q,Q,Y,X,K;if(!$){for(q=0,Q=Z.data.datasets.length;q<Q;++q)if(Z.isDatasetVisible(q)){Y=Z.getDatasetMeta(q),$=Y.data,X=Y.controller;break}}if(!$)return 0;for(q=0,Q=$.length;q<Q;++q)if(K=X.resolveDataElementOptions(q),K.borderAlign!=="inner")J=Math.max(J,K.borderWidth||0,K.hoverBorderWidth||0);return J}getMaxOffset($){let J=0;for(let Z=0,q=$.length;Z<q;++Z){let Q=this.resolveDataElementOptions(Z);J=Math.max(J,Q.offset||0,Q.hoverOffset||0)}return J}_getRingWeightOffset($){let J=0;for(let Z=0;Z<$;++Z)if(this.chart.isDatasetVisible(Z))J+=this._getRingWeight(Z);return J}_getRingWeight($){return Math.max(s(this.chart.data.datasets[$].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class l6 extends L8{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update($){let J=this._cachedMeta,{dataset:Z,data:q=[],_dataset:Q}=J,Y=this.chart._animationsDisabled,{start:X,count:K}=YZ(J,q,Y);if(this._drawStart=X,this._drawCount=K,XZ(J))X=0,K=q.length;Z._chart=this.chart,Z._datasetIndex=this.index,Z._decimated=!!Q._decimated,Z.points=q;let G=this.resolveDatasetElementOptions($);if(!this.options.showLine)G.borderWidth=0;G.segment=this.options.segment,this.updateElement(Z,void 0,{animated:!Y,options:G},$),this.updateElements(q,X,K,$)}updateElements($,J,Z,q){let Q=q==="reset",{iScale:Y,vScale:X,_stacked:K,_dataset:G}=this._cachedMeta,{sharedOptions:w,includeOptions:B}=this._getSharedOptions(J,q),M=Y.axis,T=X.axis,{spanGaps:z,segment:H}=this.options,W=m2(z)?z:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||Q||q==="none",j=J+Z,R=$.length,L=J>0&&this.getParsed(J-1);for(let V=0;V<R;++V){let D=$[V],C=F?D:{};if(V<J||V>=j){C.skip=!0;continue}let S=this.getParsed(V),P=J0(S[T]),I=C[M]=Y.getPixelForValue(S[M],V),g=C[T]=Q||P?X.getBasePixel():X.getPixelForValue(K?this.applyStack(X,S,K):S[T],V);if(C.skip=isNaN(I)||isNaN(g)||P,C.stop=V>0&&Math.abs(S[M]-L[M])>W,H)C.parsed=S,C.raw=G.data[V];if(B)C.options=w||this.resolveDataElementOptions(V,D.active?"active":q);if(!F)this.updateElement(D,V,C,q);L=S}}getMaxOverflow(){let $=this._cachedMeta,J=$.dataset,Z=J.options&&J.options.borderWidth||0,q=$.data||[];if(!q.length)return Z;let Q=q[0].size(this.resolveDataElementOptions(0)),Y=q[q.length-1].size(this.resolveDataElementOptions(q.length-1));return Math.max(Z,Q,Y)/2}draw(){let $=this._cachedMeta;$.dataset.updateControlPoints(this.chart.chartArea,$.iScale.axis),super.draw()}}function T2(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class i6{static override($){Object.assign(i6.prototype,$)}options;constructor($){this.options=$||{}}init(){}formats(){return T2()}parse(){return T2()}format(){return T2()}add(){return T2()}diff(){return T2()}startOf(){return T2()}endOf(){return T2()}}var nU={_date:i6};function aU($,J,Z,q){let{controller:Q,data:Y,_sorted:X}=$,K=Q._cachedMeta.iScale,G=$.dataset?$.dataset.options?$.dataset.options.spanGaps:null:null;if(K&&J===K.axis&&J!=="r"&&X&&Y.length){let w=K._reversePixels?tJ:c1;if(!q){let B=w(Y,J,Z);if(G){let{vScale:M}=Q._cachedMeta,{_parsed:T}=$,z=T.slice(0,B.lo+1).reverse().findIndex((W)=>!J0(W[M.axis]));B.lo-=Math.max(0,z);let H=T.slice(B.hi).findIndex((W)=>!J0(W[M.axis]));B.hi+=Math.max(0,H)}return B}else if(Q._sharedOptions){let B=Y[0],M=typeof B.getRange==="function"&&B.getRange(J);if(M){let T=w(Y,J,Z-M),z=w(Y,J,Z+M);return{lo:T.lo,hi:z.hi}}}}return{lo:0,hi:Y.length-1}}function c5($,J,Z,q,Q){let Y=$.getSortedVisibleDatasetMetas(),X=Z[J];for(let K=0,G=Y.length;K<G;++K){let{index:w,data:B}=Y[K],{lo:M,hi:T}=aU(Y[K],J,X,Q);for(let z=M;z<=T;++z){let H=B[z];if(!H.skip)q(H,w,z)}}}function tU($){let J=$.indexOf("x")!==-1,Z=$.indexOf("y")!==-1;return function(q,Q){let Y=J?Math.abs(q.x-Q.x):0,X=Z?Math.abs(q.y-Q.y):0;return Math.sqrt(Math.pow(Y,2)+Math.pow(X,2))}}function b6($,J,Z,q,Q){let Y=[];if(!Q&&!$.isPointInArea(J))return Y;return c5($,Z,J,function(K,G,w){if(!Q&&!B1(K,$.chartArea,0))return;if(K.inRange(J.x,J.y,q))Y.push({element:K,datasetIndex:G,index:w})},!0),Y}function eU($,J,Z,q){let Q=[];function Y(X,K,G){let{startAngle:w,endAngle:B}=X.getProps(["startAngle","endAngle"],q),{angle:M}=B6(X,{x:J.x,y:J.y});if(p2(M,w,B))Q.push({element:X,datasetIndex:K,index:G})}return c5($,Z,J,Y),Q}function $K($,J,Z,q,Q,Y){let X=[],K=tU(Z),G=Number.POSITIVE_INFINITY;function w(B,M,T){let z=B.inRange(J.x,J.y,Q);if(q&&!z)return;let H=B.getCenterPoint(Q);if(!(!!Y||$.isPointInArea(H))&&!z)return;let F=K(J,H);if(F<G)X=[{element:B,datasetIndex:M,index:T}],G=F;else if(F===G)X.push({element:B,datasetIndex:M,index:T})}return c5($,Z,J,w),X}function v6($,J,Z,q,Q,Y){if(!Y&&!$.isPointInArea(J))return[];return Z==="r"&&!q?eU($,J,Z,Q):$K($,J,Z,q,Q,Y)}function kZ($,J,Z,q,Q){let Y=[],X=Z==="x"?"inXRange":"inYRange",K=!1;if(c5($,Z,J,(G,w,B)=>{if(G[X]&&G[X](J[Z],Q))Y.push({element:G,datasetIndex:w,index:B}),K=K||G.inRange(J.x,J.y,Q)}),q&&!K)return[];return Y}var JK={evaluateInteractionItems:c5,modes:{index($,J,Z,q){let Q=i1(J,$),Y=Z.axis||"x",X=Z.includeInvisible||!1,K=Z.intersect?b6($,Q,Y,q,X):v6($,Q,Y,!1,q,X),G=[];if(!K.length)return[];return $.getSortedVisibleDatasetMetas().forEach((w)=>{let B=K[0].index,M=w.data[B];if(M&&!M.skip)G.push({element:M,datasetIndex:w.index,index:B})}),G},dataset($,J,Z,q){let Q=i1(J,$),Y=Z.axis||"xy",X=Z.includeInvisible||!1,K=Z.intersect?b6($,Q,Y,q,X):v6($,Q,Y,!1,q,X);if(K.length>0){let G=K[0].datasetIndex,w=$.getDatasetMeta(G).data;K=[];for(let B=0;B<w.length;++B)K.push({element:w[B],datasetIndex:G,index:B})}return K},point($,J,Z,q){let Q=i1(J,$),Y=Z.axis||"xy",X=Z.includeInvisible||!1;return b6($,Q,Y,q,X)},nearest($,J,Z,q){let Q=i1(J,$),Y=Z.axis||"xy",X=Z.includeInvisible||!1;return v6($,Q,Y,Z.intersect,q,X)},x($,J,Z,q){let Q=i1(J,$);return kZ($,Q,"x",Z.intersect,q)},y($,J,Z,q){let Q=i1(J,$);return kZ($,Q,"y",Z.intersect,q)}}},Dq=["left","top","right","bottom"];function v5($,J){return $.filter((Z)=>Z.pos===J)}function fZ($,J){return $.filter((Z)=>Dq.indexOf(Z.pos)===-1&&Z.box.axis===J)}function y5($,J){return $.sort((Z,q)=>{let Q=J?q:Z,Y=J?Z:q;return Q.weight===Y.weight?Q.index-Y.index:Q.weight-Y.weight})}function ZK($){let J=[],Z,q,Q,Y,X,K;for(Z=0,q=($||[]).length;Z<q;++Z)Q=$[Z],{position:Y,options:{stack:X,stackWeight:K=1}}=Q,J.push({index:Z,box:Q,pos:Y,horizontal:Q.isHorizontal(),weight:Q.weight,stack:X&&Y+X,stackWeight:K});return J}function qK($){let J={};for(let Z of $){let{stack:q,pos:Q,stackWeight:Y}=Z;if(!q||!Dq.includes(Q))continue;let X=J[q]||(J[q]={count:0,placed:0,weight:0,size:0});X.count++,X.weight+=Y}return J}function QK($,J){let Z=qK($),{vBoxMaxWidth:q,hBoxMaxHeight:Q}=J,Y,X,K;for(Y=0,X=$.length;Y<X;++Y){K=$[Y];let{fullSize:G}=K.box,w=Z[K.stack],B=w&&K.stackWeight/w.weight;if(K.horizontal)K.width=B?B*q:G&&J.availableWidth,K.height=Q;else K.width=q,K.height=B?B*Q:G&&J.availableHeight}return Z}function YK($){let J=ZK($),Z=y5(J.filter((w)=>w.box.fullSize),!0),q=y5(v5(J,"left"),!0),Q=y5(v5(J,"right")),Y=y5(v5(J,"top"),!0),X=y5(v5(J,"bottom")),K=fZ(J,"x"),G=fZ(J,"y");return{fullSize:Z,leftAndTop:q.concat(Y),rightAndBottom:Q.concat(G).concat(X).concat(K),chartArea:v5(J,"chartArea"),vertical:q.concat(Q).concat(G),horizontal:Y.concat(X).concat(K)}}function bZ($,J,Z,q){return Math.max($[Z],J[Z])+Math.max($[q],J[q])}function Lq($,J){$.top=Math.max($.top,J.top),$.left=Math.max($.left,J.left),$.bottom=Math.max($.bottom,J.bottom),$.right=Math.max($.right,J.right)}function XK($,J,Z,q){let{pos:Q,box:Y}=Z,X=$.maxPadding;if(!i(Q)){if(Z.size)$[Q]-=Z.size;let M=q[Z.stack]||{size:0,count:1};M.size=Math.max(M.size,Z.horizontal?Y.height:Y.width),Z.size=M.size/M.count,$[Q]+=Z.size}if(Y.getPadding)Lq(X,Y.getPadding());let K=Math.max(0,J.outerWidth-bZ(X,$,"left","right")),G=Math.max(0,J.outerHeight-bZ(X,$,"top","bottom")),w=K!==$.w,B=G!==$.h;return $.w=K,$.h=G,Z.horizontal?{same:w,other:B}:{same:B,other:w}}function UK($){let J=$.maxPadding;function Z(q){let Q=Math.max(J[q]-$[q],0);return $[q]+=Q,Q}$.y+=Z("top"),$.x+=Z("left"),Z("right"),Z("bottom")}function KK($,J){let Z=J.maxPadding;function q(Q){let Y={left:0,top:0,right:0,bottom:0};return Q.forEach((X)=>{Y[X]=Math.max(J[X],Z[X])}),Y}return $?q(["left","right"]):q(["top","bottom"])}function h5($,J,Z,q){let Q=[],Y,X,K,G,w,B;for(Y=0,X=$.length,w=0;Y<X;++Y){K=$[Y],G=K.box,G.update(K.width||J.w,K.height||J.h,KK(K.horizontal,J));let{same:M,other:T}=XK(J,Z,K,q);if(w|=M&&Q.length,B=B||T,!G.fullSize)Q.push(K)}return w&&h5(Q,J,Z,q)||B}function T8($,J,Z,q,Q){$.top=Z,$.left=J,$.right=J+q,$.bottom=Z+Q,$.width=q,$.height=Q}function vZ($,J,Z,q){let Q=Z.padding,{x:Y,y:X}=J;for(let K of $){let G=K.box,w=q[K.stack]||{count:1,placed:0,weight:1},B=K.stackWeight/w.weight||1;if(K.horizontal){let M=J.w*B,T=w.size||G.height;if(S5(w.start))X=w.start;if(G.fullSize)T8(G,Q.left,X,Z.outerWidth-Q.right-Q.left,T);else T8(G,J.left+w.placed,X,M,T);w.start=X,w.placed+=M,X=G.bottom}else{let M=J.h*B,T=w.size||G.width;if(S5(w.start))Y=w.start;if(G.fullSize)T8(G,Y,Q.top,T,Z.outerHeight-Q.bottom-Q.top);else T8(G,Y,J.top+w.placed,T,M);w.start=Y,w.placed+=M,Y=G.right}}J.x=Y,J.y=X}var n1={addBox($,J){if(!$.boxes)$.boxes=[];J.fullSize=J.fullSize||!1,J.position=J.position||"top",J.weight=J.weight||0,J._layers=J._layers||function(){return[{z:0,draw(Z){J.draw(Z)}}]},$.boxes.push(J)},removeBox($,J){let Z=$.boxes?$.boxes.indexOf(J):-1;if(Z!==-1)$.boxes.splice(Z,1)},configure($,J,Z){J.fullSize=Z.fullSize,J.position=Z.position,J.weight=Z.weight},update($,J,Z,q){if(!$)return;let Q=E0($.options.layout.padding),Y=Math.max(J-Q.width,0),X=Math.max(Z-Q.height,0),K=YK($.boxes),G=K.vertical,w=K.horizontal;Z0($.boxes,(W)=>{if(typeof W.beforeLayout==="function")W.beforeLayout()});let B=G.reduce((W,F)=>F.box.options&&F.box.options.display===!1?W:W+1,0)||1,M=Object.freeze({outerWidth:J,outerHeight:Z,padding:Q,availableWidth:Y,availableHeight:X,vBoxMaxWidth:Y/2/B,hBoxMaxHeight:X/2}),T=Object.assign({},Q);Lq(T,E0(q));let z=Object.assign({maxPadding:T,w:Y,h:X,x:Q.left,y:Q.top},Q),H=QK(G.concat(w),M);if(h5(K.fullSize,z,M,H),h5(G,z,M,H),h5(w,z,M,H))h5(G,z,M,H);UK(z),vZ(K.leftAndTop,z,M,H),z.x+=z.w,z.y+=z.h,vZ(K.rightAndBottom,z,M,H),$.chartArea={left:z.left,top:z.top,right:z.left+z.w,bottom:z.top+z.h,height:z.h,width:z.w},Z0(K.chartArea,(W)=>{let F=W.box;Object.assign(F,$.chartArea),F.update(z.w,z.h,{left:0,top:0,right:0,bottom:0})})}};class n6{acquireContext($,J){}releaseContext($){return!1}addEventListener($,J,Z){}removeEventListener($,J,Z){}getDevicePixelRatio(){return 1}getMaximumSize($,J,Z,q){return J=Math.max(0,J||$.width),Z=Z||$.height,{width:J,height:Math.max(0,q?Math.floor(J/q):Z)}}isAttached($){return!0}updateConfig($){}}class Vq extends n6{acquireContext($){return $&&$.getContext&&$.getContext("2d")||null}updateConfig($){$.options.animation=!1}}var j8="$chartjs",GK={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},yZ=($)=>$===null||$==="";function wK($,J){let Z=$.style,q=$.getAttribute("height"),Q=$.getAttribute("width");if($[j8]={initial:{height:q,width:Q,style:{display:Z.display,height:Z.height,width:Z.width}}},Z.display=Z.display||"block",Z.boxSizing=Z.boxSizing||"border-box",yZ(Q)){let Y=P6($,"width");if(Y!==void 0)$.width=Y}if(yZ(q))if($.style.height==="")$.height=$.width/(J||2);else{let Y=P6($,"height");if(Y!==void 0)$.height=Y}return $}var Pq=_Z?{passive:!0}:!1;function BK($,J,Z){if($)$.addEventListener(J,Z,Pq)}function MK($,J,Z){if($&&$.canvas)$.canvas.removeEventListener(J,Z,Pq)}function TK($,J){let Z=GK[$.type]||$.type,{x:q,y:Q}=i1($,J);return{type:Z,chart:J,native:$,x:q!==void 0?q:null,y:Q!==void 0?Q:null}}function _8($,J){for(let Z of $)if(Z===J||Z.contains(J))return!0}function zK($,J,Z){let q=$.canvas,Q=new MutationObserver((Y)=>{let X=!1;for(let K of Y)X=X||_8(K.addedNodes,q),X=X&&!_8(K.removedNodes,q);if(X)Z()});return Q.observe(document,{childList:!0,subtree:!0}),Q}function WK($,J,Z){let q=$.canvas,Q=new MutationObserver((Y)=>{let X=!1;for(let K of Y)X=X||_8(K.removedNodes,q),X=X&&!_8(K.addedNodes,q);if(X)Z()});return Q.observe(document,{childList:!0,subtree:!0}),Q}var m5=new Map,EZ=0;function Iq(){let $=window.devicePixelRatio;if($===EZ)return;EZ=$,m5.forEach((J,Z)=>{if(Z.currentDevicePixelRatio!==$)J()})}function HK($,J){if(!m5.size)window.addEventListener("resize",Iq);m5.set($,J)}function FK($){if(m5.delete($),!m5.size)window.removeEventListener("resize",Iq)}function jK($,J,Z){let q=$.canvas,Q=q&&B8(q);if(!Q)return;let Y=z6((K,G)=>{let w=Q.clientWidth;if(Z(K,G),w<Q.clientWidth)Z()},window),X=new ResizeObserver((K)=>{let G=K[0],w=G.contentRect.width,B=G.contentRect.height;if(w===0&&B===0)return;Y(w,B)});return X.observe(Q),HK($,Y),X}function y6($,J,Z){if(Z)Z.disconnect();if(J==="resize")FK($)}function RK($,J,Z){let q=$.canvas,Q=z6((Y)=>{if($.ctx!==null)Z(TK(Y,$))},$);return BK(q,J,Q),Q}class Sq extends n6{acquireContext($,J){let Z=$&&$.getContext&&$.getContext("2d");if(Z&&Z.canvas===$)return wK($,J),Z;return null}releaseContext($){let J=$.canvas;if(!J[j8])return!1;let Z=J[j8].initial;["height","width"].forEach((Q)=>{let Y=Z[Q];if(J0(Y))J.removeAttribute(Q);else J.setAttribute(Q,Y)});let q=Z.style||{};return Object.keys(q).forEach((Q)=>{J.style[Q]=q[Q]}),J.width=J.width,delete J[j8],!0}addEventListener($,J,Z){this.removeEventListener($,J);let q=$.$proxies||($.$proxies={}),Y={attach:zK,detach:WK,resize:jK}[J]||RK;q[J]=Y($,J,Z)}removeEventListener($,J){let Z=$.$proxies||($.$proxies={}),q=Z[J];if(!q)return;({attach:y6,detach:y6,resize:y6}[J]||MK)($,J,q),Z[J]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize($,J,Z,q){return RZ($,J,Z,q)}isAttached($){let J=$&&B8($);return!!(J&&J.isConnected)}}function _K($){if(!w8()||typeof OffscreenCanvas!=="undefined"&&$ instanceof OffscreenCanvas)return Vq;return Sq}class a1{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition($){let{x:J,y:Z}=this.getProps(["x","y"],$);return{x:J,y:Z}}hasValue(){return m2(this.x)&&m2(this.y)}getProps($,J){let Z=this.$animations;if(!J||!Z)return this;let q={};return $.forEach((Q)=>{q[Q]=Z[Q]&&Z[Q].active()?Z[Q]._to:this[Q]}),q}}function DK($,J){let Z=$.options.ticks,q=LK($),Q=Math.min(Z.maxTicksLimit||q,q),Y=Z.major.enabled?PK(J):[],X=Y.length,K=Y[0],G=Y[X-1],w=[];if(X>Q)return IK(J,w,Y,X/Q),w;let B=VK(Y,J,Q);if(X>0){let M,T,z=X>1?Math.round((G-K)/(X-1)):null;z8(J,w,B,J0(z)?0:K-z,K);for(M=0,T=X-1;M<T;M++)z8(J,w,B,Y[M],Y[M+1]);return z8(J,w,B,G,J0(z)?J.length:G+z),w}return z8(J,w,B),w}function LK($){let J=$.options.offset,Z=$._tickSize(),q=$._length/Z+(J?0:1),Q=$._maxLength/Z;return Math.floor(Math.min(q,Q))}function VK($,J,Z){let q=SK($),Q=J.length/Z;if(!q)return Math.max(Q,1);let Y=iJ(q);for(let X=0,K=Y.length-1;X<K;X++){let G=Y[X];if(G>Q)return G}return Math.max(Q,1)}function PK($){let J=[],Z,q;for(Z=0,q=$.length;Z<q;Z++)if($[Z].major)J.push(Z);return J}function IK($,J,Z,q){let Q=0,Y=Z[0],X;q=Math.ceil(q);for(X=0;X<$.length;X++)if(X===Y)J.push($[X]),Q++,Y=Z[Q*q]}function z8($,J,Z,q,Q){let Y=s(q,0),X=Math.min(s(Q,$.length),$.length),K=0,G,w,B;if(Z=Math.ceil(Z),Q)G=Q-q,Z=G/Math.floor(G/Z);B=Y;while(B<0)K++,B=Math.round(Y+K*Z);for(w=Math.max(Y,0);w<X;w++)if(w===B)J.push($[w]),K++,B=Math.round(Y+K*Z)}function SK($){let J=$.length,Z,q;if(J<2)return!1;for(q=$[0],Z=1;Z<J;++Z)if($[Z]-$[Z-1]!==q)return!1;return q}var CK=($)=>$==="left"?"right":$==="right"?"left":$,gZ=($,J,Z)=>J==="top"||J==="left"?$[J]+Z:$[J]-Z,hZ=($,J)=>Math.min(J||$,$);function uZ($,J){let Z=[],q=$.length/J,Q=$.length,Y=0;for(;Y<Q;Y+=q)Z.push($[Math.floor(Y)]);return Z}function NK($,J,Z){let q=$.ticks.length,Q=Math.min(J,q-1),Y=$._startPixel,X=$._endPixel,K=0.000001,G=$.getPixelForTick(Q),w;if(Z){if(q===1)w=Math.max(G-Y,X-G);else if(J===0)w=($.getPixelForTick(1)-G)/2;else w=(G-$.getPixelForTick(Q-1))/2;if(G+=Q<J?w:-w,G<Y-0.000001||G>X+0.000001)return}return G}function OK($,J){Z0($,(Z)=>{let q=Z.gc,Q=q.length/2,Y;if(Q>J){for(Y=0;Y<Q;++Y)delete Z.data[q[Y]];q.splice(0,Q)}})}function E5($){return $.drawTicks?$.tickLength:0}function xZ($,J){if(!$.display)return 0;let Z=A0($.font,J),q=E0($.padding);return(M0($.text)?$.text.length:1)*Z.lineHeight+q.height}function AK($,J){return O1($,{scale:J,type:"scale"})}function kK($,J,Z){return O1($,{tick:Z,index:J,type:"tick"})}function fK($,J,Z){let q=W6($);if(Z&&J!=="right"||!Z&&J==="right")q=CK(q);return q}function bK($,J,Z,q){let{top:Q,left:Y,bottom:X,right:K,chart:G}=$,{chartArea:w,scales:B}=G,M=0,T,z,H,W=X-Q,F=K-Y;if($.isHorizontal()){if(z=x0(q,Y,K),i(Z)){let j=Object.keys(Z)[0],R=Z[j];H=B[j].getPixelForValue(R)+W-J}else if(Z==="center")H=(w.bottom+w.top)/2+W-J;else H=gZ($,Z,J);T=K-Y}else{if(i(Z)){let j=Object.keys(Z)[0],R=Z[j];z=B[j].getPixelForValue(R)-F+J}else if(Z==="center")z=(w.left+w.right)/2-F+J;else z=gZ($,Z,J);H=x0(q,X,Q),M=Z==="left"?-j0:j0}return{titleX:z,titleY:H,maxWidth:T,rotation:M}}class W2 extends a1{constructor($){super();this.id=$.id,this.type=$.type,this.options=void 0,this.ctx=$.ctx,this.chart=$.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init($){this.options=$.setContext(this.getContext()),this.axis=$.axis,this._userMin=this.parse($.min),this._userMax=this.parse($.max),this._suggestedMin=this.parse($.suggestedMin),this._suggestedMax=this.parse($.suggestedMax)}parse($,J){return $}getUserBounds(){let{_userMin:$,_userMax:J,_suggestedMin:Z,_suggestedMax:q}=this;return $=u0($,Number.POSITIVE_INFINITY),J=u0(J,Number.NEGATIVE_INFINITY),Z=u0(Z,Number.POSITIVE_INFINITY),q=u0(q,Number.NEGATIVE_INFINITY),{min:u0($,Z),max:u0(J,q),minDefined:z0($),maxDefined:z0(J)}}getMinMax($){let{min:J,max:Z,minDefined:q,maxDefined:Q}=this.getUserBounds(),Y;if(q&&Q)return{min:J,max:Z};let X=this.getMatchingVisibleMetas();for(let K=0,G=X.length;K<G;++K){if(Y=X[K].controller.getMinMax(this,$),!q)J=Math.min(J,Y.min);if(!Q)Z=Math.max(Z,Y.max)}return J=Q&&J>Z?Z:J,Z=q&&J>Z?J:Z,{min:u0(J,u0(Z,J)),max:u0(Z,u0(J,Z))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let $=this.chart.data;return this.options.labels||(this.isHorizontal()?$.xLabels:$.yLabels)||$.labels||[]}getLabelItems($=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems($))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){U0(this.options.beforeUpdate,[this])}update($,J,Z){let{beginAtZero:q,grace:Q,ticks:Y}=this.options,X=Y.sampleSize;if(this.beforeUpdate(),this.maxWidth=$,this.maxHeight=J,this._margins=Z=Object.assign({left:0,right:0,top:0,bottom:0},Z),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+Z.left+Z.right:this.height+Z.top+Z.bottom,!this._dataLimitsCached)this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=TZ(this,Q,q),this._dataLimitsCached=!0;this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let K=X<this.ticks.length;if(this._convertTicksToLabels(K?uZ(this.ticks,X):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),Y.display&&(Y.autoSkip||Y.source==="auto"))this.ticks=DK(this,this.ticks),this._labelSizes=null,this.afterAutoSkip();if(K)this._convertTicksToLabels(this.ticks);this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let $=this.options.reverse,J,Z;if(this.isHorizontal())J=this.left,Z=this.right;else J=this.top,Z=this.bottom,$=!$;this._startPixel=J,this._endPixel=Z,this._reversePixels=$,this._length=Z-J,this._alignToPixels=this.options.alignToPixels}afterUpdate(){U0(this.options.afterUpdate,[this])}beforeSetDimensions(){U0(this.options.beforeSetDimensions,[this])}setDimensions(){if(this.isHorizontal())this.width=this.maxWidth,this.left=0,this.right=this.width;else this.height=this.maxHeight,this.top=0,this.bottom=this.height;this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){U0(this.options.afterSetDimensions,[this])}_callHooks($){this.chart.notifyPlugins($,this.getContext()),U0(this.options[$],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){U0(this.options.beforeTickToLabelConversion,[this])}generateTickLabels($){let J=this.options.ticks,Z,q,Q;for(Z=0,q=$.length;Z<q;Z++)Q=$[Z],Q.label=U0(J.callback,[Q.value,Z,$],this)}afterTickToLabelConversion(){U0(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){U0(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let $=this.options,J=$.ticks,Z=hZ(this.ticks.length,$.ticks.maxTicksLimit),q=J.minRotation||0,Q=J.maxRotation,Y=q,X,K,G;if(!this._isVisible()||!J.display||q>=Q||Z<=1||!this.isHorizontal()){this.labelRotation=q;return}let w=this._getLabelSizes(),B=w.widest.width,M=w.highest.height,T=y0(this.chart.width-B,0,this.maxWidth);if(X=$.offset?this.maxWidth/Z:T/(Z-1),B+6>X)X=T/(Z-($.offset?0.5:1)),K=this.maxHeight-E5($.grid)-J.padding-xZ($.title,this.chart.options.font),G=Math.sqrt(B*B+M*M),Y=Q8(Math.min(Math.asin(y0((w.highest.height+6)/X,-1,1)),Math.asin(y0(K/G,-1,1))-Math.asin(y0(M/G,-1,1)))),Y=Math.max(q,Math.min(Q,Y));this.labelRotation=Y}afterCalculateLabelRotation(){U0(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){U0(this.options.beforeFit,[this])}fit(){let $={width:0,height:0},{chart:J,options:{ticks:Z,title:q,grid:Q}}=this,Y=this._isVisible(),X=this.isHorizontal();if(Y){let K=xZ(q,J.options.font);if(X)$.width=this.maxWidth,$.height=E5(Q)+K;else $.height=this.maxHeight,$.width=E5(Q)+K;if(Z.display&&this.ticks.length){let{first:G,last:w,widest:B,highest:M}=this._getLabelSizes(),T=Z.padding*2,z=K1(this.labelRotation),H=Math.cos(z),W=Math.sin(z);if(X){let F=Z.mirror?0:W*B.width+H*M.height;$.height=Math.min(this.maxHeight,$.height+F+T)}else{let F=Z.mirror?0:H*B.width+W*M.height;$.width=Math.min(this.maxWidth,$.width+F+T)}this._calculatePadding(G,w,W,H)}}if(this._handleMargins(),X)this.width=this._length=J.width-this._margins.left-this._margins.right,this.height=$.height;else this.width=$.width,this.height=this._length=J.height-this._margins.top-this._margins.bottom}_calculatePadding($,J,Z,q){let{ticks:{align:Q,padding:Y},position:X}=this.options,K=this.labelRotation!==0,G=X!=="top"&&this.axis==="x";if(this.isHorizontal()){let w=this.getPixelForTick(0)-this.left,B=this.right-this.getPixelForTick(this.ticks.length-1),M=0,T=0;if(K)if(G)M=q*$.width,T=Z*J.height;else M=Z*$.height,T=q*J.width;else if(Q==="start")T=J.width;else if(Q==="end")M=$.width;else if(Q!=="inner")M=$.width/2,T=J.width/2;this.paddingLeft=Math.max((M-w+Y)*this.width/(this.width-w),0),this.paddingRight=Math.max((T-B+Y)*this.width/(this.width-B),0)}else{let w=J.height/2,B=$.height/2;if(Q==="start")w=0,B=$.height;else if(Q==="end")w=J.height,B=0;this.paddingTop=w+Y,this.paddingBottom=B+Y}}_handleMargins(){if(this._margins)this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom)}afterFit(){U0(this.options.afterFit,[this])}isHorizontal(){let{axis:$,position:J}=this.options;return J==="top"||J==="bottom"||$==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels($){this.beforeTickToLabelConversion(),this.generateTickLabels($);let J,Z;for(J=0,Z=$.length;J<Z;J++)if(J0($[J].label))$.splice(J,1),Z--,J--;this.afterTickToLabelConversion()}_getLabelSizes(){let $=this._labelSizes;if(!$){let J=this.options.ticks.sampleSize,Z=this.ticks;if(J<Z.length)Z=uZ(Z,J);this._labelSizes=$=this._computeLabelSizes(Z,Z.length,this.options.ticks.maxTicksLimit)}return $}_computeLabelSizes($,J,Z){let{ctx:q,_longestTextCache:Q}=this,Y=[],X=[],K=Math.floor(J/hZ(J,Z)),G=0,w=0,B,M,T,z,H,W,F,j,R,L,V;for(B=0;B<J;B+=K){if(z=$[B].label,H=this._resolveTickFontOptions(B),q.font=W=H.string,F=Q[W]=Q[W]||{data:{},gc:[]},j=H.lineHeight,R=L=0,!J0(z)&&!M0(z))R=P5(q,F.data,F.gc,R,z),L=j;else if(M0(z)){for(M=0,T=z.length;M<T;++M)if(V=z[M],!J0(V)&&!M0(V))R=P5(q,F.data,F.gc,R,V),L+=j}Y.push(R),X.push(L),G=Math.max(R,G),w=Math.max(L,w)}OK(Q,J);let D=Y.indexOf(G),C=X.indexOf(w),S=(P)=>({width:Y[P]||0,height:X[P]||0});return{first:S(0),last:S(J-1),widest:S(D),highest:S(C),widths:Y,heights:X}}getLabelForValue($){return $}getPixelForValue($,J){return NaN}getValueForPixel($){}getPixelForTick($){let J=this.ticks;if($<0||$>J.length-1)return null;return this.getPixelForValue(J[$].value)}getPixelForDecimal($){if(this._reversePixels)$=1-$;let J=this._startPixel+$*this._length;return aJ(this._alignToPixels?l1(this.chart,J,0):J)}getDecimalForPixel($){let J=($-this._startPixel)/this._length;return this._reversePixels?1-J:J}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:$,max:J}=this;return $<0&&J<0?J:$>0&&J>0?$:0}getContext($){let J=this.ticks||[];if($>=0&&$<J.length){let Z=J[$];return Z.$context||(Z.$context=kK(this.getContext(),$,Z))}return this.$context||(this.$context=AK(this.chart.getContext(),this))}_tickSize(){let $=this.options.ticks,J=K1(this.labelRotation),Z=Math.abs(Math.cos(J)),q=Math.abs(Math.sin(J)),Q=this._getLabelSizes(),Y=$.autoSkipPadding||0,X=Q?Q.widest.width+Y:0,K=Q?Q.highest.height+Y:0;return this.isHorizontal()?K*Z>X*q?X/Z:K/q:K*q<X*Z?K/Z:X/q}_isVisible(){let $=this.options.display;if($!=="auto")return!!$;return this.getMatchingVisibleMetas().length>0}_computeGridLineItems($){let J=this.axis,Z=this.chart,q=this.options,{grid:Q,position:Y,border:X}=q,K=Q.offset,G=this.isHorizontal(),B=this.ticks.length+(K?1:0),M=E5(Q),T=[],z=X.setContext(this.getContext()),H=z.display?z.width:0,W=H/2,F=function(e){return l1(Z,e,H)},j,R,L,V,D,C,S,P,I,g,E,K0;if(Y==="top")j=F(this.bottom),C=this.bottom-M,P=j-W,g=F($.top)+W,K0=$.bottom;else if(Y==="bottom")j=F(this.top),g=$.top,K0=F($.bottom)-W,C=j+W,P=this.top+M;else if(Y==="left")j=F(this.right),D=this.right-M,S=j-W,I=F($.left)+W,E=$.right;else if(Y==="right")j=F(this.left),I=$.left,E=F($.right)-W,D=j+W,S=this.left+M;else if(J==="x"){if(Y==="center")j=F(($.top+$.bottom)/2+0.5);else if(i(Y)){let e=Object.keys(Y)[0],q0=Y[e];j=F(this.chart.scales[e].getPixelForValue(q0))}g=$.top,K0=$.bottom,C=j+W,P=C+M}else if(J==="y"){if(Y==="center")j=F(($.left+$.right)/2);else if(i(Y)){let e=Object.keys(Y)[0],q0=Y[e];j=F(this.chart.scales[e].getPixelForValue(q0))}D=j-W,S=D-M,I=$.left,E=$.right}let v0=s(q.ticks.maxTicksLimit,B),Q0=Math.max(1,Math.ceil(B/v0));for(R=0;R<B;R+=Q0){let e=this.getContext(R),q0=Q.setContext(e),R0=X.setContext(e),f=q0.lineWidth,_0=q0.color,t1=R0.dash||[],W1=R0.dashOffset,H1=q0.tickWidth,T0=q0.tickColor,V0=q0.tickBorderDash||[],n0=q0.tickBorderDashOffset;if(L=NK(this,R,K),L===void 0)continue;if(V=l1(Z,L,f),G)D=S=I=E=V;else C=P=g=K0=V;T.push({tx1:D,ty1:C,tx2:S,ty2:P,x1:I,y1:g,x2:E,y2:K0,width:f,color:_0,borderDash:t1,borderDashOffset:W1,tickWidth:H1,tickColor:T0,tickBorderDash:V0,tickBorderDashOffset:n0})}return this._ticksLength=B,this._borderValue=j,T}_computeLabelItems($){let J=this.axis,Z=this.options,{position:q,ticks:Q}=Z,Y=this.isHorizontal(),X=this.ticks,{align:K,crossAlign:G,padding:w,mirror:B}=Q,M=E5(Z.grid),T=M+w,z=B?-w:T,H=-K1(this.labelRotation),W=[],F,j,R,L,V,D,C,S,P,I,g,E,K0="middle";if(q==="top")D=this.bottom-z,C=this._getXAxisLabelAlignment();else if(q==="bottom")D=this.top+z,C=this._getXAxisLabelAlignment();else if(q==="left"){let Q0=this._getYAxisLabelAlignment(M);C=Q0.textAlign,V=Q0.x}else if(q==="right"){let Q0=this._getYAxisLabelAlignment(M);C=Q0.textAlign,V=Q0.x}else if(J==="x"){if(q==="center")D=($.top+$.bottom)/2+T;else if(i(q)){let Q0=Object.keys(q)[0],e=q[Q0];D=this.chart.scales[Q0].getPixelForValue(e)+T}C=this._getXAxisLabelAlignment()}else if(J==="y"){if(q==="center")V=($.left+$.right)/2-T;else if(i(q)){let Q0=Object.keys(q)[0],e=q[Q0];V=this.chart.scales[Q0].getPixelForValue(e)}C=this._getYAxisLabelAlignment(M).textAlign}if(J==="y"){if(K==="start")K0="top";else if(K==="end")K0="bottom"}let v0=this._getLabelSizes();for(F=0,j=X.length;F<j;++F){R=X[F],L=R.label;let Q0=Q.setContext(this.getContext(F));S=this.getPixelForTick(F)+Q.labelOffset,P=this._resolveTickFontOptions(F),I=P.lineHeight,g=M0(L)?L.length:1;let e=g/2,q0=Q0.color,R0=Q0.textStrokeColor,f=Q0.textStrokeWidth,_0=C;if(Y){if(V=S,C==="inner")if(F===j-1)_0=!this.options.reverse?"right":"left";else if(F===0)_0=!this.options.reverse?"left":"right";else _0="center";if(q==="top")if(G==="near"||H!==0)E=-g*I+I/2;else if(G==="center")E=-v0.highest.height/2-e*I+I;else E=-v0.highest.height+I/2;else if(G==="near"||H!==0)E=I/2;else if(G==="center")E=v0.highest.height/2-e*I;else E=v0.highest.height-g*I;if(B)E*=-1;if(H!==0&&!Q0.showLabelBackdrop)V+=I/2*Math.sin(H)}else D=S,E=(1-g)*I/2;let t1;if(Q0.showLabelBackdrop){let W1=E0(Q0.backdropPadding),H1=v0.heights[F],T0=v0.widths[F],V0=E-W1.top,n0=0-W1.left;switch(K0){case"middle":V0-=H1/2;break;case"bottom":V0-=H1;break}switch(C){case"center":n0-=T0/2;break;case"right":n0-=T0;break;case"inner":if(F===j-1)n0-=T0;else if(F>0)n0-=T0/2;break}t1={left:n0,top:V0,width:T0+W1.width,height:H1+W1.height,color:Q0.backdropColor}}W.push({label:L,font:P,textOffset:E,options:{rotation:H,color:q0,strokeColor:R0,strokeWidth:f,textAlign:_0,textBaseline:K0,translation:[V,D],backdrop:t1}})}return W}_getXAxisLabelAlignment(){let{position:$,ticks:J}=this.options;if(-K1(this.labelRotation))return $==="top"?"left":"right";let q="center";if(J.align==="start")q="left";else if(J.align==="end")q="right";else if(J.align==="inner")q="inner";return q}_getYAxisLabelAlignment($){let{position:J,ticks:{crossAlign:Z,mirror:q,padding:Q}}=this.options,Y=this._getLabelSizes(),X=$+Q,K=Y.widest.width,G,w;if(J==="left")if(q)if(w=this.right+Q,Z==="near")G="left";else if(Z==="center")G="center",w+=K/2;else G="right",w+=K;else if(w=this.right-X,Z==="near")G="right";else if(Z==="center")G="center",w-=K/2;else G="left",w=this.left;else if(J==="right")if(q)if(w=this.left+Q,Z==="near")G="right";else if(Z==="center")G="center",w-=K/2;else G="left",w-=K;else if(w=this.left+X,Z==="near")G="left";else if(Z==="center")G="center",w+=K/2;else G="right",w=this.right;else G="right";return{textAlign:G,x:w}}_computeLabelArea(){if(this.options.ticks.mirror)return;let $=this.chart,J=this.options.position;if(J==="left"||J==="right")return{top:0,left:this.left,bottom:$.height,right:this.right};if(J==="top"||J==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:$.width}}drawBackground(){let{ctx:$,options:{backgroundColor:J},left:Z,top:q,width:Q,height:Y}=this;if(J)$.save(),$.fillStyle=J,$.fillRect(Z,q,Q,Y),$.restore()}getLineWidthForValue($){let J=this.options.grid;if(!this._isVisible()||!J.display)return 0;let q=this.ticks.findIndex((Q)=>Q.value===$);if(q>=0)return J.setContext(this.getContext(q)).lineWidth;return 0}drawGrid($){let J=this.options.grid,Z=this.ctx,q=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems($)),Q,Y,X=(K,G,w)=>{if(!w.width||!w.color)return;Z.save(),Z.lineWidth=w.width,Z.strokeStyle=w.color,Z.setLineDash(w.borderDash||[]),Z.lineDashOffset=w.borderDashOffset,Z.beginPath(),Z.moveTo(K.x,K.y),Z.lineTo(G.x,G.y),Z.stroke(),Z.restore()};if(J.display)for(Q=0,Y=q.length;Q<Y;++Q){let K=q[Q];if(J.drawOnChartArea)X({x:K.x1,y:K.y1},{x:K.x2,y:K.y2},K);if(J.drawTicks)X({x:K.tx1,y:K.ty1},{x:K.tx2,y:K.ty2},{color:K.tickColor,width:K.tickWidth,borderDash:K.tickBorderDash,borderDashOffset:K.tickBorderDashOffset})}}drawBorder(){let{chart:$,ctx:J,options:{border:Z,grid:q}}=this,Q=Z.setContext(this.getContext()),Y=Z.display?Q.width:0;if(!Y)return;let X=q.setContext(this.getContext(0)).lineWidth,K=this._borderValue,G,w,B,M;if(this.isHorizontal())G=l1($,this.left,Y)-Y/2,w=l1($,this.right,X)+X/2,B=M=K;else B=l1($,this.top,Y)-Y/2,M=l1($,this.bottom,X)+X/2,G=w=K;J.save(),J.lineWidth=Q.width,J.strokeStyle=Q.color,J.beginPath(),J.moveTo(G,B),J.lineTo(w,M),J.stroke(),J.restore()}drawLabels($){if(!this.options.ticks.display)return;let Z=this.ctx,q=this._computeLabelArea();if(q)O5(Z,q);let Q=this.getLabelItems($);for(let Y of Q){let{options:X,font:K,label:G,textOffset:w}=Y;w2(Z,G,0,w,K,X)}if(q)A5(Z)}drawTitle(){let{ctx:$,options:{position:J,title:Z,reverse:q}}=this;if(!Z.display)return;let Q=A0(Z.font),Y=E0(Z.padding),X=Z.align,K=Q.lineHeight/2;if(J==="bottom"||J==="center"||i(J)){if(K+=Y.bottom,M0(Z.text))K+=Q.lineHeight*(Z.text.length-1)}else K+=Y.top;let{titleX:G,titleY:w,maxWidth:B,rotation:M}=bK(this,K,J,X);w2($,Z.text,0,0,Q,{color:Z.color,maxWidth:B,rotation:M,textAlign:fK(X,J,q),textBaseline:"middle",translation:[G,w]})}draw($){if(!this._isVisible())return;this.drawBackground(),this.drawGrid($),this.drawBorder(),this.drawTitle(),this.drawLabels($)}_layers(){let $=this.options,J=$.ticks&&$.ticks.z||0,Z=s($.grid&&$.grid.z,-1),q=s($.border&&$.border.z,0);if(!this._isVisible()||this.draw!==W2.prototype.draw)return[{z:J,draw:(Q)=>{this.draw(Q)}}];return[{z:Z,draw:(Q)=>{this.drawBackground(),this.drawGrid(Q),this.drawTitle()}},{z:q,draw:()=>{this.drawBorder()}},{z:J,draw:(Q)=>{this.drawLabels(Q)}}]}getMatchingVisibleMetas($){let J=this.chart.getSortedVisibleDatasetMetas(),Z=this.axis+"AxisID",q=[],Q,Y;for(Q=0,Y=J.length;Q<Y;++Q){let X=J[Q];if(X[Z]===this.id&&(!$||X.type===$))q.push(X)}return q}_resolveTickFontOptions($){let J=this.options.ticks.setContext(this.getContext($));return A0(J.font)}_maxDigits(){let $=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/$}}class u5{constructor($,J,Z){this.type=$,this.scope=J,this.override=Z,this.items=Object.create(null)}isForType($){return Object.prototype.isPrototypeOf.call(this.type.prototype,$.prototype)}register($){let J=Object.getPrototypeOf($),Z;if(EK(J))Z=this.register(J);let q=this.items,Q=$.id,Y=this.scope+"."+Q;if(!Q)throw new Error("class does not have id: "+$);if(Q in q)return Y;if(q[Q]=$,vK($,Y,Z),this.override)W0.override($.id,$.overrides);return Y}get($){return this.items[$]}unregister($){let J=this.items,Z=$.id,q=this.scope;if(Z in J)delete J[Z];if(q&&Z in W0[q]){if(delete W0[q][Z],this.override)delete o1[Z]}}}function vK($,J,Z){let q=E2(Object.create(null),[Z?W0.get(Z):{},W0.get(J),$.defaults]);if(W0.set(J,q),$.defaultRoutes)yK(J,$.defaultRoutes);if($.descriptors)W0.describe(J,$.descriptors)}function yK($,J){Object.keys(J).forEach((Z)=>{let q=Z.split("."),Q=q.pop(),Y=[$].concat(q).join("."),X=J[Z].split("."),K=X.pop(),G=X.join(".");W0.route(Y,Q,G,K)})}function EK($){return"id"in $&&"defaults"in $}class Cq{constructor(){this.controllers=new u5(L8,"datasets",!0),this.elements=new u5(a1,"elements"),this.plugins=new u5(Object,"plugins"),this.scales=new u5(W2,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...$){this._each("register",$)}remove(...$){this._each("unregister",$)}addControllers(...$){this._each("register",$,this.controllers)}addElements(...$){this._each("register",$,this.elements)}addPlugins(...$){this._each("register",$,this.plugins)}addScales(...$){this._each("register",$,this.scales)}getController($){return this._get($,this.controllers,"controller")}getElement($){return this._get($,this.elements,"element")}getPlugin($){return this._get($,this.plugins,"plugin")}getScale($){return this._get($,this.scales,"scale")}removeControllers(...$){this._each("unregister",$,this.controllers)}removeElements(...$){this._each("unregister",$,this.elements)}removePlugins(...$){this._each("unregister",$,this.plugins)}removeScales(...$){this._each("unregister",$,this.scales)}_each($,J,Z){[...J].forEach((q)=>{let Q=Z||this._getRegistryForType(q);if(Z||Q.isForType(q)||Q===this.plugins&&q.id)this._exec($,Q,q);else Z0(q,(Y)=>{let X=Z||this._getRegistryForType(Y);this._exec($,X,Y)})})}_exec($,J,Z){let q=q8($);U0(Z["before"+q],[],Z),J[$](Z),U0(Z["after"+q],[],Z)}_getRegistryForType($){for(let J=0;J<this._typedRegistries.length;J++){let Z=this._typedRegistries[J];if(Z.isForType($))return Z}return this.plugins}_get($,J,Z){let q=J.get($);if(q===void 0)throw new Error('"'+$+'" is not a registered '+Z+".");return q}}var z1=new Cq;class Nq{constructor(){this._init=void 0}notify($,J,Z,q){if(J==="beforeInit")this._init=this._createDescriptors($,!0),this._notify(this._init,$,"install");if(this._init===void 0)return;let Q=q?this._descriptors($).filter(q):this._descriptors($),Y=this._notify(Q,$,J,Z);if(J==="afterDestroy")this._notify(Q,$,"stop"),this._notify(this._init,$,"uninstall"),this._init=void 0;return Y}_notify($,J,Z,q){q=q||{};for(let Q of $){let Y=Q.plugin,X=Y[Z],K=[J,q,Q.options];if(U0(X,K,Y)===!1&&q.cancelable)return!1}return!0}invalidate(){if(!J0(this._cache))this._oldCache=this._cache,this._cache=void 0}_descriptors($){if(this._cache)return this._cache;let J=this._cache=this._createDescriptors($);return this._notifyStateChanges($),J}_createDescriptors($,J){let Z=$&&$.config,q=s(Z.options&&Z.options.plugins,{}),Q=gK(Z);return q===!1&&!J?[]:uK($,Q,q,J)}_notifyStateChanges($){let J=this._oldCache||[],Z=this._cache,q=(Q,Y)=>Q.filter((X)=>!Y.some((K)=>X.plugin.id===K.plugin.id));this._notify(q(J,Z),$,"stop"),this._notify(q(Z,J),$,"start")}}function gK($){let J={},Z=[],q=Object.keys(z1.plugins.items);for(let Y=0;Y<q.length;Y++)Z.push(z1.getPlugin(q[Y]));let Q=$.plugins||[];for(let Y=0;Y<Q.length;Y++){let X=Q[Y];if(Z.indexOf(X)===-1)Z.push(X),J[X.id]=!0}return{plugins:Z,localIds:J}}function hK($,J){if(!J&&$===!1)return null;if($===!0)return{};return $}function uK($,{plugins:J,localIds:Z},q,Q){let Y=[],X=$.getContext();for(let K of J){let G=K.id,w=hK(q[G],Q);if(w===null)continue;Y.push({plugin:K,options:xK($.config,{plugin:K,local:Z[G]},w,X)})}return Y}function xK($,{plugin:J,local:Z},q,Q){let Y=$.pluginScopeKeys(J),X=$.getOptionScopes(q,Y);if(Z&&J.defaults)X.push(J.defaults);return $.createResolver(X,Q,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function h6($,J){let Z=W0.datasets[$]||{};return((J.datasets||{})[$]||{}).indexAxis||J.indexAxis||Z.indexAxis||"x"}function mK($,J){let Z=$;if($==="_index_")Z=J;else if($==="_value_")Z=J==="x"?"y":"x";return Z}function pK($,J){return $===J?"_index_":"_value_"}function mZ($){if($==="x"||$==="y"||$==="r")return $}function dK($){if($==="top"||$==="bottom")return"x";if($==="left"||$==="right")return"y"}function u6($,...J){if(mZ($))return $;for(let Z of J){let q=Z.axis||dK(Z.position)||$.length>1&&mZ($[0].toLowerCase());if(q)return q}throw new Error(`Cannot determine type of '${$}' axis. Please provide 'axis' or 'position' option.`)}function pZ($,J,Z){if(Z[J+"AxisID"]===$)return{axis:J}}function cK($,J){if(J.data&&J.data.datasets){let Z=J.data.datasets.filter((q)=>q.xAxisID===$||q.yAxisID===$);if(Z.length)return pZ($,"x",Z[0])||pZ($,"y",Z[0])}return{}}function rK($,J){let Z=o1[$.type]||{scales:{}},q=J.scales||{},Q=h6($.type,J),Y=Object.create(null);return Object.keys(q).forEach((X)=>{let K=q[X];if(!i(K))return console.error(`Invalid scale configuration for scale: ${X}`);if(K._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${X}`);let G=u6(X,K,cK(X,$),W0.scales[K.type]),w=pK(G,Q),B=Z.scales||{};Y[X]=h2(Object.create(null),[{axis:G},K,B[G],B[w]])}),$.data.datasets.forEach((X)=>{let K=X.type||$.type,G=X.indexAxis||h6(K,J),B=(o1[K]||{}).scales||{};Object.keys(B).forEach((M)=>{let T=mK(M,G),z=X[T+"AxisID"]||T;Y[z]=Y[z]||Object.create(null),h2(Y[z],[{axis:T},q[z],B[M]])})}),Object.keys(Y).forEach((X)=>{let K=Y[X];h2(K,[W0.scales[K.type],W0.scale])}),Y}function Oq($){let J=$.options||($.options={});J.plugins=s(J.plugins,{}),J.scales=rK($,J)}function Aq($){return $=$||{},$.datasets=$.datasets||[],$.labels=$.labels||[],$}function sK($){return $=$||{},$.data=Aq($.data),Oq($),$}var dZ=new Map,kq=new Set;function W8($,J){let Z=dZ.get($);if(!Z)Z=J(),dZ.set($,Z),kq.add(Z);return Z}var g5=($,J,Z)=>{let q=u2(J,Z);if(q!==void 0)$.add(q)};class fq{constructor($){this._config=sK($),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type($){this._config.type=$}get data(){return this._config.data}set data($){this._config.data=Aq($)}get options(){return this._config.options}set options($){this._config.options=$}get plugins(){return this._config.plugins}update(){let $=this._config;this.clearCache(),Oq($)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys($){return W8($,()=>[[`datasets.${$}`,""]])}datasetAnimationScopeKeys($,J){return W8(`${$}.transition.${J}`,()=>[[`datasets.${$}.transitions.${J}`,`transitions.${J}`],[`datasets.${$}`,""]])}datasetElementScopeKeys($,J){return W8(`${$}-${J}`,()=>[[`datasets.${$}.elements.${J}`,`datasets.${$}`,`elements.${J}`,""]])}pluginScopeKeys($){let J=$.id,Z=this.type;return W8(`${Z}-plugin-${J}`,()=>[[`plugins.${J}`,...$.additionalOptionScopes||[]]])}_cachedScopes($,J){let Z=this._scopeCache,q=Z.get($);if(!q||J)q=new Map,Z.set($,q);return q}getOptionScopes($,J,Z){let{options:q,type:Q}=this,Y=this._cachedScopes($,Z),X=Y.get(J);if(X)return X;let K=new Set;J.forEach((w)=>{if($)K.add($),w.forEach((B)=>g5(K,$,B));w.forEach((B)=>g5(K,q,B)),w.forEach((B)=>g5(K,o1[Q]||{},B)),w.forEach((B)=>g5(K,W0,B)),w.forEach((B)=>g5(K,X8,B))});let G=Array.from(K);if(G.length===0)G.push(Object.create(null));if(kq.has(J))Y.set(J,G);return G}chartOptionScopes(){let{options:$,type:J}=this;return[$,o1[J]||{},W0.datasets[J]||{},{type:J},W0,X8]}resolveNamedOptions($,J,Z,q=[""]){let Q={$shared:!0},{resolver:Y,subPrefixes:X}=cZ(this._resolverCache,$,q),K=Y;if(lK(Y,J)){Q.$shared=!1,Z=C1(Z)?Z():Z;let G=this.createResolver($,Z,X);K=G2(Y,Z,G)}for(let G of J)Q[G]=K[G];return Q}createResolver($,J,Z=[""],q){let{resolver:Q}=cZ(this._resolverCache,$,Z);return i(J)?G2(Q,J,void 0,q):Q}}function cZ($,J,Z){let q=$.get(J);if(!q)q=new Map,$.set(J,q);let Q=Z.join(),Y=q.get(Q);if(!Y)Y={resolver:G8(J,Z),subPrefixes:Z.filter((K)=>!K.toLowerCase().includes("hover"))},q.set(Q,Y);return Y}var oK=($)=>i($)&&Object.getOwnPropertyNames($).some((J)=>C1($[J]));function lK($,J){let{isScriptable:Z,isIndexable:q}=_6($);for(let Q of J){let Y=Z(Q),X=q(Q),K=(X||Y)&&$[Q];if(Y&&(C1(K)||oK(K))||X&&M0(K))return!0}return!1}var iK="4.5.1",nK=["top","bottom","left","right","chartArea"];function rZ($,J){return $==="top"||$==="bottom"||nK.indexOf($)===-1&&J==="x"}function sZ($,J){return function(Z,q){return Z[$]===q[$]?Z[J]-q[J]:Z[$]-q[$]}}function oZ($){let J=$.chart,Z=J.options.animation;J.notifyPlugins("afterRender"),U0(Z&&Z.onComplete,[$],J)}function aK($){let J=$.chart,Z=J.options.animation;U0(Z&&Z.onProgress,[$],J)}function bq($){if(w8()&&typeof $==="string")$=document.getElementById($);else if($&&$.length)$=$[0];if($&&$.canvas)$=$.canvas;return $}var R8={},lZ=($)=>{let J=bq($);return Object.values(R8).filter((Z)=>Z.canvas===J).pop()};function tK($,J,Z){let q=Object.keys($);for(let Q of q){let Y=+Q;if(Y>=J){let X=$[Q];if(delete $[Q],Z>0||Y>J)$[Y+Z]=X}}}function eK($,J,Z,q){if(!Z||$.type==="mouseout")return null;if(q)return J;return $}class H2{static defaults=W0;static instances=R8;static overrides=o1;static registry=z1;static version=iK;static getChart=lZ;static register(...$){z1.add(...$),iZ()}static unregister(...$){z1.remove(...$),iZ()}constructor($,J){let Z=this.config=new fq(J),q=bq($),Q=lZ(q);if(Q)throw new Error("Canvas is already in use. Chart with ID '"+Q.id+"' must be destroyed before the canvas with ID '"+Q.canvas.id+"' can be reused.");let Y=Z.createResolver(Z.chartOptionScopes(),this.getContext());this.platform=new(Z.platform||_K(q)),this.platform.updateConfig(Z);let X=this.platform.acquireContext(q,Y.aspectRatio),K=X&&X.canvas,G=K&&K.height,w=K&&K.width;if(this.id=rJ(),this.ctx=X,this.canvas=K,this.width=w,this.height=G,this._options=Y,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Nq,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=qZ((B)=>this.update(B),Y.resizeDelay||0),this._dataChanges=[],R8[this.id]=this,!X||!K){console.error("Failed to create chart: can't acquire context from the given item");return}if(A1.listen(this,"complete",oZ),A1.listen(this,"progress",aK),this._initialize(),this.attached)this.update()}get aspectRatio(){let{options:{aspectRatio:$,maintainAspectRatio:J},width:Z,height:q,_aspectRatio:Q}=this;if(!J0($))return $;if(J&&Q)return Q;return q?Z/q:null}get data(){return this.config.data}set data($){this.config.data=$}get options(){return this._options}set options($){this.config.options=$}get registry(){return z1}_initialize(){if(this.notifyPlugins("beforeInit"),this.options.responsive)this.resize();else V6(this,this.options.devicePixelRatio);return this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return j6(this.canvas,this.ctx),this}stop(){return A1.stop(this),this}resize($,J){if(!A1.running(this))this._resize($,J);else this._resizeBeforeDraw={width:$,height:J}}_resize($,J){let Z=this.options,q=this.canvas,Q=Z.maintainAspectRatio&&this.aspectRatio,Y=this.platform.getMaximumSize(q,$,J,Q),X=Z.devicePixelRatio||this.platform.getDevicePixelRatio(),K=this.width?"resize":"attach";if(this.width=Y.width,this.height=Y.height,this._aspectRatio=this.aspectRatio,!V6(this,X,!0))return;if(this.notifyPlugins("resize",{size:Y}),U0(Z.onResize,[this,Y],this),this.attached){if(this._doResize(K))this.render()}}ensureScalesHaveIDs(){let J=this.options.scales||{};Z0(J,(Z,q)=>{Z.id=q})}buildOrUpdateScales(){let $=this.options,J=$.scales,Z=this.scales,q=Object.keys(Z).reduce((Y,X)=>{return Y[X]=!1,Y},{}),Q=[];if(J)Q=Q.concat(Object.keys(J).map((Y)=>{let X=J[Y],K=u6(Y,X),G=K==="r",w=K==="x";return{options:X,dposition:G?"chartArea":w?"bottom":"left",dtype:G?"radialLinear":w?"category":"linear"}}));Z0(Q,(Y)=>{let X=Y.options,K=X.id,G=u6(K,X),w=s(X.type,Y.dtype);if(X.position===void 0||rZ(X.position,G)!==rZ(Y.dposition))X.position=Y.dposition;q[K]=!0;let B=null;if(K in Z&&Z[K].type===w)B=Z[K];else B=new(z1.getScale(w))({id:K,type:w,ctx:this.ctx,chart:this}),Z[B.id]=B;B.init(X,$)}),Z0(q,(Y,X)=>{if(!Y)delete Z[X]}),Z0(Z,(Y)=>{n1.configure(this,Y,Y.options),n1.addBox(this,Y)})}_updateMetasets(){let $=this._metasets,J=this.data.datasets.length,Z=$.length;if($.sort((q,Q)=>q.index-Q.index),Z>J){for(let q=J;q<Z;++q)this._destroyDatasetMeta(q);$.splice(J,Z-J)}this._sortedMetasets=$.slice(0).sort(sZ("order","index"))}_removeUnreferencedMetasets(){let{_metasets:$,data:{datasets:J}}=this;if($.length>J.length)delete this._stacks;$.forEach((Z,q)=>{if(J.filter((Q)=>Q===Z._dataset).length===0)this._destroyDatasetMeta(q)})}buildOrUpdateControllers(){let $=[],J=this.data.datasets,Z,q;this._removeUnreferencedMetasets();for(Z=0,q=J.length;Z<q;Z++){let Q=J[Z],Y=this.getDatasetMeta(Z),X=Q.type||this.config.type;if(Y.type&&Y.type!==X)this._destroyDatasetMeta(Z),Y=this.getDatasetMeta(Z);if(Y.type=X,Y.indexAxis=Q.indexAxis||h6(X,this.options),Y.order=Q.order||0,Y.index=Z,Y.label=""+Q.label,Y.visible=this.isDatasetVisible(Z),Y.controller)Y.controller.updateIndex(Z),Y.controller.linkScales();else{let K=z1.getController(X),{datasetElementType:G,dataElementType:w}=W0.datasets[X];Object.assign(K,{dataElementType:z1.getElement(w),datasetElementType:G&&z1.getElement(G)}),Y.controller=new K(this,Z),$.push(Y.controller)}}return this._updateMetasets(),$}_resetElements(){Z0(this.data.datasets,($,J)=>{this.getDatasetMeta(J).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update($){let J=this.config;J.update();let Z=this._options=J.createResolver(J.chartOptionScopes(),this.getContext()),q=this._animationsDisabled=!Z.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:$,cancelable:!0})===!1)return;let Q=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let Y=0;for(let G=0,w=this.data.datasets.length;G<w;G++){let{controller:B}=this.getDatasetMeta(G),M=!q&&Q.indexOf(B)===-1;B.buildOrUpdateElements(M),Y=Math.max(+B.getMaxOverflow(),Y)}if(Y=this._minPadding=Z.layout.autoPadding?Y:0,this._updateLayout(Y),!q)Z0(Q,(G)=>{G.reset()});this._updateDatasets($),this.notifyPlugins("afterUpdate",{mode:$}),this._layers.sort(sZ("z","_idx"));let{_active:X,_lastEvent:K}=this;if(K)this._eventHandler(K,!0);else if(X.length)this._updateHoverStyles(X,X,!0);this.render()}_updateScales(){Z0(this.scales,($)=>{n1.removeBox(this,$)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let $=this.options,J=new Set(Object.keys(this._listeners)),Z=new Set($.events);if(!U6(J,Z)||!!this._responsiveListeners!==$.responsive)this.unbindEvents(),this.bindEvents()}_updateHiddenIndices(){let{_hiddenIndices:$}=this,J=this._getUniformDataChanges()||[];for(let{method:Z,start:q,count:Q}of J){let Y=Z==="_removeElements"?-Q:Q;tK($,q,Y)}}_getUniformDataChanges(){let $=this._dataChanges;if(!$||!$.length)return;this._dataChanges=[];let J=this.data.datasets.length,Z=(Q)=>new Set($.filter((Y)=>Y[0]===Q).map((Y,X)=>X+","+Y.splice(1).join(","))),q=Z(0);for(let Q=1;Q<J;Q++)if(!U6(q,Z(Q)))return;return Array.from(q).map((Q)=>Q.split(",")).map((Q)=>({method:Q[1],start:+Q[2],count:+Q[3]}))}_updateLayout($){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;n1.update(this,this.width,this.height,$);let J=this.chartArea,Z=J.width<=0||J.height<=0;this._layers=[],Z0(this.boxes,(q)=>{if(Z&&q.position==="chartArea")return;if(q.configure)q.configure();this._layers.push(...q._layers())},this),this._layers.forEach((q,Q)=>{q._idx=Q}),this.notifyPlugins("afterLayout")}_updateDatasets($){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:$,cancelable:!0})===!1)return;for(let J=0,Z=this.data.datasets.length;J<Z;++J)this.getDatasetMeta(J).controller.configure();for(let J=0,Z=this.data.datasets.length;J<Z;++J)this._updateDataset(J,C1($)?$({datasetIndex:J}):$);this.notifyPlugins("afterDatasetsUpdate",{mode:$})}_updateDataset($,J){let Z=this.getDatasetMeta($),q={meta:Z,index:$,mode:J,cancelable:!0};if(this.notifyPlugins("beforeDatasetUpdate",q)===!1)return;Z.controller._update(J),q.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",q)}render(){if(this.notifyPlugins("beforeRender",{cancelable:!0})===!1)return;if(A1.has(this)){if(this.attached&&!A1.running(this))A1.start(this)}else this.draw(),oZ({chart:this})}draw(){let $;if(this._resizeBeforeDraw){let{width:Z,height:q}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(Z,q)}if(this.clear(),this.width<=0||this.height<=0)return;if(this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let J=this._layers;for($=0;$<J.length&&J[$].z<=0;++$)J[$].draw(this.chartArea);this._drawDatasets();for(;$<J.length;++$)J[$].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas($){let J=this._sortedMetasets,Z=[],q,Q;for(q=0,Q=J.length;q<Q;++q){let Y=J[q];if(!$||Y.visible)Z.push(Y)}return Z}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let $=this.getSortedVisibleDatasetMetas();for(let J=$.length-1;J>=0;--J)this._drawDataset($[J]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset($){let J=this.ctx,Z={meta:$,index:$.index,cancelable:!0},q=O6(this,$);if(this.notifyPlugins("beforeDatasetDraw",Z)===!1)return;if(q)O5(J,q);if($.controller.draw(),q)A5(J);Z.cancelable=!1,this.notifyPlugins("afterDatasetDraw",Z)}isPointInArea($){return B1($,this.chartArea,this._minPadding)}getElementsAtEventForMode($,J,Z,q){let Q=JK.modes[J];if(typeof Q==="function")return Q(this,$,Z,q);return[]}getDatasetMeta($){let J=this.data.datasets[$],Z=this._metasets,q=Z.filter((Q)=>Q&&Q._dataset===J).pop();if(!q)q={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:J&&J.order||0,index:$,_dataset:J,_parsed:[],_sorted:!1},Z.push(q);return q}getContext(){return this.$context||(this.$context=O1(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible($){let J=this.data.datasets[$];if(!J)return!1;let Z=this.getDatasetMeta($);return typeof Z.hidden==="boolean"?!Z.hidden:!J.hidden}setDatasetVisibility($,J){let Z=this.getDatasetMeta($);Z.hidden=!J}toggleDataVisibility($){this._hiddenIndices[$]=!this._hiddenIndices[$]}getDataVisibility($){return!this._hiddenIndices[$]}_updateVisibility($,J,Z){let q=Z?"show":"hide",Q=this.getDatasetMeta($),Y=Q.controller._resolveAnimations(void 0,q);if(S5(J))Q.data[J].hidden=!Z,this.update();else this.setDatasetVisibility($,Z),Y.update(Q,{visible:Z}),this.update((X)=>X.datasetIndex===$?q:void 0)}hide($,J){this._updateVisibility($,J,!1)}show($,J){this._updateVisibility($,J,!0)}_destroyDatasetMeta($){let J=this._metasets[$];if(J&&J.controller)J.controller._destroy();delete this._metasets[$]}_stop(){let $,J;this.stop(),A1.remove(this);for($=0,J=this.data.datasets.length;$<J;++$)this._destroyDatasetMeta($)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:$,ctx:J}=this;if(this._stop(),this.config.clearCache(),$)this.unbindEvents(),j6($,J),this.platform.releaseContext(J),this.canvas=null,this.ctx=null;delete R8[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...$){return this.canvas.toDataURL(...$)}bindEvents(){if(this.bindUserEvents(),this.options.responsive)this.bindResponsiveEvents();else this.attached=!0}bindUserEvents(){let $=this._listeners,J=this.platform,Z=(Q,Y)=>{J.addEventListener(this,Q,Y),$[Q]=Y},q=(Q,Y,X)=>{Q.offsetX=Y,Q.offsetY=X,this._eventHandler(Q)};Z0(this.options.events,(Q)=>Z(Q,q))}bindResponsiveEvents(){if(!this._responsiveListeners)this._responsiveListeners={};let $=this._responsiveListeners,J=this.platform,Z=(K,G)=>{J.addEventListener(this,K,G),$[K]=G},q=(K,G)=>{if($[K])J.removeEventListener(this,K,G),delete $[K]},Q=(K,G)=>{if(this.canvas)this.resize(K,G)},Y,X=()=>{q("attach",X),this.attached=!0,this.resize(),Z("resize",Q),Z("detach",Y)};if(Y=()=>{this.attached=!1,q("resize",Q),this._stop(),this._resize(0,0),Z("attach",X)},J.isAttached(this.canvas))X();else Y()}unbindEvents(){Z0(this._listeners,($,J)=>{this.platform.removeEventListener(this,J,$)}),this._listeners={},Z0(this._responsiveListeners,($,J)=>{this.platform.removeEventListener(this,J,$)}),this._responsiveListeners=void 0}updateHoverStyle($,J,Z){let q=Z?"set":"remove",Q,Y,X,K;if(J==="dataset")Q=this.getDatasetMeta($[0].datasetIndex),Q.controller["_"+q+"DatasetHoverStyle"]();for(X=0,K=$.length;X<K;++X){Y=$[X];let G=Y&&this.getDatasetMeta(Y.datasetIndex).controller;if(G)G[q+"HoverStyle"](Y.element,Y.datasetIndex,Y.index)}}getActiveElements(){return this._active||[]}setActiveElements($){let J=this._active||[],Z=$.map(({datasetIndex:Q,index:Y})=>{let X=this.getDatasetMeta(Q);if(!X)throw new Error("No dataset found at index "+Q);return{datasetIndex:Q,element:X.data[Y],index:Y}});if(!I5(Z,J))this._active=Z,this._lastEvent=null,this._updateHoverStyles(Z,J)}notifyPlugins($,J,Z){return this._plugins.notify(this,$,J,Z)}isPluginEnabled($){return this._plugins._cache.filter((J)=>J.plugin.id===$).length===1}_updateHoverStyles($,J,Z){let q=this.options.hover,Q=(K,G)=>K.filter((w)=>!G.some((B)=>w.datasetIndex===B.datasetIndex&&w.index===B.index)),Y=Q(J,$),X=Z?$:Q($,J);if(Y.length)this.updateHoverStyle(Y,q.mode,!1);if(X.length&&q.mode)this.updateHoverStyle(X,q.mode,!0)}_eventHandler($,J){let Z={event:$,replay:J,cancelable:!0,inChartArea:this.isPointInArea($)},q=(Y)=>(Y.options.events||this.options.events).includes($.native.type);if(this.notifyPlugins("beforeEvent",Z,q)===!1)return;let Q=this._handleEvent($,J,Z.inChartArea);if(Z.cancelable=!1,this.notifyPlugins("afterEvent",Z,q),Q||Z.changed)this.render();return this}_handleEvent($,J,Z){let{_active:q=[],options:Q}=this,Y=J,X=this._getActiveElements($,q,Z,Y),K=lJ($),G=eK($,this._lastEvent,Z,K);if(Z){if(this._lastEvent=null,U0(Q.onHover,[$,X,this],this),K)U0(Q.onClick,[$,X,this],this)}let w=!I5(X,q);if(w||J)this._active=X,this._updateHoverStyles(X,q,J);return this._lastEvent=G,w}_getActiveElements($,J,Z,q){if($.type==="mouseout")return[];if(!Z)return J;let Q=this.options.hover;return this.getElementsAtEventForMode($,Q.mode,Q,q)}}function iZ(){return Z0(H2.instances,($)=>$._plugins.invalidate())}function $G($,J,Z){let{startAngle:q,x:Q,y:Y,outerRadius:X,innerRadius:K,options:G}=J,{borderWidth:w,borderJoinStyle:B}=G,M=Math.min(w/X,b0(q-Z));if($.beginPath(),$.arc(Q,Y,X-w/2,q+M/2,Z-M/2),K>0){let T=Math.min(w/K,b0(q-Z));$.arc(Q,Y,K+w/2,Z-T/2,q+T/2,!0)}else{let T=Math.min(w/2,X*b0(q-Z));if(B==="round")$.arc(Q,Y,T,Z-$0/2,q+$0/2,!0);else if(B==="bevel"){let z=2*T*T,H=-z*Math.cos(Z+$0/2)+Q,W=-z*Math.sin(Z+$0/2)+Y,F=z*Math.cos(q+$0/2)+Q,j=z*Math.sin(q+$0/2)+Y;$.lineTo(H,W),$.lineTo(F,j)}}$.closePath(),$.moveTo(0,0),$.rect(0,0,$.canvas.width,$.canvas.height),$.clip("evenodd")}function JG($,J,Z){let{startAngle:q,pixelMargin:Q,x:Y,y:X,outerRadius:K,innerRadius:G}=J,w=Q/K;if($.beginPath(),$.arc(Y,X,K,q-w,Z+w),G>Q)w=Q/G,$.arc(Y,X,G,Z+w,q-w,!0);else $.arc(Y,X,Q,Z+j0,q-j0);$.closePath(),$.clip()}function ZG($){return K8($,["outerStart","outerEnd","innerStart","innerEnd"])}function qG($,J,Z,q){let Q=ZG($.options.borderRadius),Y=(Z-J)/2,X=Math.min(Y,q*J/2),K=(G)=>{let w=(Z-Math.min(Y,G))*q/2;return y0(G,0,Math.min(Y,w))};return{outerStart:K(Q.outerStart),outerEnd:K(Q.outerEnd),innerStart:y0(Q.innerStart,0,X),innerEnd:y0(Q.innerEnd,0,X)}}function d2($,J,Z,q){return{x:Z+$*Math.cos(J),y:q+$*Math.sin(J)}}function D8($,J,Z,q,Q,Y){let{x:X,y:K,startAngle:G,pixelMargin:w,innerRadius:B}=J,M=Math.max(J.outerRadius+q+Z-w,0),T=B>0?B+q+Z+w:0,z=0,H=Q-G;if(q){let e=B>0?B-q:0,q0=M>0?M-q:0,R0=(e+q0)/2,f=R0!==0?H*R0/(R0+q):H;z=(H-f)/2}let W=Math.max(0.001,H*M-Z/$0)/M,F=(H-W)/2,j=G+F+z,R=Q-F-z,{outerStart:L,outerEnd:V,innerStart:D,innerEnd:C}=qG(J,T,M,R-j),S=M-L,P=M-V,I=j+L/S,g=R-V/P,E=T+D,K0=T+C,v0=j+D/E,Q0=R-C/K0;if($.beginPath(),Y){let e=(I+g)/2;if($.arc(X,K,M,I,e),$.arc(X,K,M,e,g),V>0){let _0=d2(P,g,X,K);$.arc(_0.x,_0.y,V,g,R+j0)}let q0=d2(K0,R,X,K);if($.lineTo(q0.x,q0.y),C>0){let _0=d2(K0,Q0,X,K);$.arc(_0.x,_0.y,C,R+j0,Q0+Math.PI)}let R0=(R-C/T+(j+D/T))/2;if($.arc(X,K,T,R-C/T,R0,!0),$.arc(X,K,T,R0,j+D/T,!0),D>0){let _0=d2(E,v0,X,K);$.arc(_0.x,_0.y,D,v0+Math.PI,j-j0)}let f=d2(S,j,X,K);if($.lineTo(f.x,f.y),L>0){let _0=d2(S,I,X,K);$.arc(_0.x,_0.y,L,j-j0,I)}}else{$.moveTo(X,K);let e=Math.cos(I)*M+X,q0=Math.sin(I)*M+K;$.lineTo(e,q0);let R0=Math.cos(g)*M+X,f=Math.sin(g)*M+K;$.lineTo(R0,f)}$.closePath()}function QG($,J,Z,q,Q){let{fullCircles:Y,startAngle:X,circumference:K}=J,G=J.endAngle;if(Y){D8($,J,Z,q,G,Q);for(let w=0;w<Y;++w)$.fill();if(!isNaN(K))G=X+(K%w0||w0)}return D8($,J,Z,q,G,Q),$.fill(),G}function YG($,J,Z,q,Q){let{fullCircles:Y,startAngle:X,circumference:K,options:G}=J,{borderWidth:w,borderJoinStyle:B,borderDash:M,borderDashOffset:T,borderRadius:z}=G,H=G.borderAlign==="inner";if(!w)return;if($.setLineDash(M||[]),$.lineDashOffset=T,H)$.lineWidth=w*2,$.lineJoin=B||"round";else $.lineWidth=w,$.lineJoin=B||"bevel";let W=J.endAngle;if(Y){D8($,J,Z,q,W,Q);for(let F=0;F<Y;++F)$.stroke();if(!isNaN(K))W=X+(K%w0||w0)}if(H)JG($,J,W);if(G.selfJoin&&W-X>=$0&&z===0&&B!=="miter")$G($,J,W);if(!Y)D8($,J,Z,q,W,Q),$.stroke()}class a6 extends a1{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:($)=>$!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor($){super();if(this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,$)Object.assign(this,$)}inRange($,J,Z){let q=this.getProps(["x","y"],Z),{angle:Q,distance:Y}=B6(q,{x:$,y:J}),{startAngle:X,endAngle:K,innerRadius:G,outerRadius:w,circumference:B}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],Z),M=(this.options.spacing+this.options.borderWidth)/2,T=s(B,K-X),z=p2(Q,X,K)&&X!==K,H=T>=w0||z,W=s1(Y,G+M,w+M);return H&&W}getCenterPoint($){let{x:J,y:Z,startAngle:q,endAngle:Q,innerRadius:Y,outerRadius:X}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],$),{offset:K,spacing:G}=this.options,w=(q+Q)/2,B=(Y+X+G+K)/2;return{x:J+Math.cos(w)*B,y:Z+Math.sin(w)*B}}tooltipPosition($){return this.getCenterPoint($)}draw($){let{options:J,circumference:Z}=this,q=(J.offset||0)/4,Q=(J.spacing||0)/2,Y=J.circular;if(this.pixelMargin=J.borderAlign==="inner"?0.33:0,this.fullCircles=Z>w0?Math.floor(Z/w0):0,Z===0||this.innerRadius<0||this.outerRadius<0)return;$.save();let X=(this.startAngle+this.endAngle)/2;$.translate(Math.cos(X)*q,Math.sin(X)*q);let K=1-Math.sin(Math.min($0,Z||0)),G=q*K;$.fillStyle=J.backgroundColor,$.strokeStyle=J.borderColor,QG($,this,G,Q,Y),YG($,this,G,Q,Y),$.restore()}}function vq($,J,Z=J){$.lineCap=s(Z.borderCapStyle,J.borderCapStyle),$.setLineDash(s(Z.borderDash,J.borderDash)),$.lineDashOffset=s(Z.borderDashOffset,J.borderDashOffset),$.lineJoin=s(Z.borderJoinStyle,J.borderJoinStyle),$.lineWidth=s(Z.borderWidth,J.borderWidth),$.strokeStyle=s(Z.borderColor,J.borderColor)}function XG($,J,Z){$.lineTo(Z.x,Z.y)}function UG($){if($.stepped)return wZ;if($.tension||$.cubicInterpolationMode==="monotone")return BZ;return XG}function yq($,J,Z={}){let q=$.length,{start:Q=0,end:Y=q-1}=Z,{start:X,end:K}=J,G=Math.max(Q,X),w=Math.min(Y,K),B=Q<X&&Y<X||Q>K&&Y>K;return{count:q,start:G,loop:J.loop,ilen:w<G&&!B?q+w-G:w-G}}function KG($,J,Z,q){let{points:Q,options:Y}=J,{count:X,start:K,loop:G,ilen:w}=yq(Q,Z,q),B=UG(Y),{move:M=!0,reverse:T}=q||{},z,H,W;for(z=0;z<=w;++z){if(H=Q[(K+(T?w-z:z))%X],H.skip)continue;else if(M)$.moveTo(H.x,H.y),M=!1;else B($,W,H,T,Y.stepped);W=H}if(G)H=Q[(K+(T?w:0))%X],B($,W,H,T,Y.stepped);return!!G}function GG($,J,Z,q){let Q=J.points,{count:Y,start:X,ilen:K}=yq(Q,Z,q),{move:G=!0,reverse:w}=q||{},B=0,M=0,T,z,H,W,F,j,R=(V)=>(X+(w?K-V:V))%Y,L=()=>{if(W!==F)$.lineTo(B,F),$.lineTo(B,W),$.lineTo(B,j)};if(G)z=Q[R(0)],$.moveTo(z.x,z.y);for(T=0;T<=K;++T){if(z=Q[R(T)],z.skip)continue;let{x:V,y:D}=z,C=V|0;if(C===H){if(D<W)W=D;else if(D>F)F=D;B=(M*B+V)/++M}else L(),$.lineTo(V,D),H=C,M=0,W=F=D;j=D}L()}function x6($){let J=$.options,Z=J.borderDash&&J.borderDash.length;return!$._decimated&&!$._loop&&!J.tension&&J.cubicInterpolationMode!=="monotone"&&!J.stepped&&!Z?GG:KG}function wG($){if($.stepped)return DZ;if($.tension||$.cubicInterpolationMode==="monotone")return LZ;return d1}function BG($,J,Z,q){let Q=J._path;if(!Q){if(Q=J._path=new Path2D,J.path(Q,Z,q))Q.closePath()}vq($,J.options),$.stroke(Q)}function MG($,J,Z,q){let{segments:Q,options:Y}=J,X=x6(J);for(let K of Q){if(vq($,Y,K.style),$.beginPath(),X($,J,K,{start:Z,end:Z+q-1}))$.closePath();$.stroke()}}var TG=typeof Path2D==="function";function zG($,J,Z,q){if(TG&&!J.options.segment)BG($,J,Z,q);else MG($,J,Z,q)}class c2 extends a1{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:($)=>$!=="borderDash"&&$!=="fill"};constructor($){super();if(this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,$)Object.assign(this,$)}updateControlPoints($,J){let Z=this.options;if((Z.tension||Z.cubicInterpolationMode==="monotone")&&!Z.stepped&&!this._pointsUpdated){let q=Z.spanGaps?this._loop:this._fullLoop;jZ(this._points,Z,$,q,J),this._pointsUpdated=!0}}set points($){this._points=$,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=PZ(this,this.options.segment))}first(){let $=this.segments,J=this.points;return $.length&&J[$[0].start]}last(){let $=this.segments,J=this.points,Z=$.length;return Z&&J[$[Z-1].end]}interpolate($,J){let Z=this.options,q=$[J],Q=this.points,Y=N6(this,{property:J,start:q,end:q});if(!Y.length)return;let X=[],K=wG(Z),G,w;for(G=0,w=Y.length;G<w;++G){let{start:B,end:M}=Y[G],T=Q[B],z=Q[M];if(T===z){X.push(T);continue}let H=Math.abs((q-T[J])/(z[J]-T[J])),W=K(T,z,H,Z.stepped);W[J]=$[J],X.push(W)}return X.length===1?X[0]:X}pathSegment($,J,Z){return x6(this)($,this,J,Z)}path($,J,Z){let q=this.segments,Q=x6(this),Y=this._loop;J=J||0,Z=Z||this.points.length-J;for(let X of q)Y&=Q($,this,X,{start:J,end:J+Z-1});return!!Y}draw($,J,Z,q){let Q=this.options||{};if((this.points||[]).length&&Q.borderWidth)$.save(),zG($,this,Z,q),$.restore();if(this.animated)this._pointsUpdated=!1,this._path=void 0}}function nZ($,J,Z,q){let Q=$.options,{[Z]:Y}=$.getProps([Z],q);return Math.abs(J-Y)<Q.radius+Q.hitRadius}class t6 extends a1{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor($){super();if(this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,$)Object.assign(this,$)}inRange($,J,Z){let q=this.options,{x:Q,y:Y}=this.getProps(["x","y"],Z);return Math.pow($-Q,2)+Math.pow(J-Y,2)<Math.pow(q.hitRadius+q.radius,2)}inXRange($,J){return nZ(this,$,"x",J)}inYRange($,J){return nZ(this,$,"y",J)}getCenterPoint($){let{x:J,y:Z}=this.getProps(["x","y"],$);return{x:J,y:Z}}size($){$=$||this.options||{};let J=$.radius||0;J=Math.max(J,J&&$.hoverRadius||0);let Z=J&&$.borderWidth||0;return(J+Z)*2}draw($,J){let Z=this.options;if(this.skip||Z.radius<0.1||!B1(this,J,this.size(Z)/2))return;$.strokeStyle=Z.borderColor,$.lineWidth=Z.borderWidth,$.fillStyle=Z.backgroundColor,U8($,Z,this.x,this.y)}getRange(){let $=this.options||{};return $.radius+$.hitRadius}}function WG($,J,Z){let{segments:q,points:Q}=$,Y=J.points,X=[];for(let K of q){let{start:G,end:w}=K;w=V8(G,w,Q);let B=m6(Z,Q[G],Q[w],K.loop);if(!J.segments){X.push({source:K,target:B,start:Q[G],end:Q[w]});continue}let M=N6(J,B);for(let T of M){let z=m6(Z,Y[T.start],Y[T.end],T.loop),H=C6(K,Q,z);for(let W of H)X.push({source:W,target:T,start:{[Z]:aZ(B,z,"start",Math.max)},end:{[Z]:aZ(B,z,"end",Math.min)}})}}return X}function m6($,J,Z,q){if(q)return;let Q=J[$],Y=Z[$];if($==="angle")Q=b0(Q),Y=b0(Y);return{property:$,start:Q,end:Y}}function HG($,J){let{x:Z=null,y:q=null}=$||{},Q=J.points,Y=[];return J.segments.forEach(({start:X,end:K})=>{K=V8(X,K,Q);let G=Q[X],w=Q[K];if(q!==null)Y.push({x:G.x,y:q}),Y.push({x:w.x,y:q});else if(Z!==null)Y.push({x:Z,y:G.y}),Y.push({x:Z,y:w.y})}),Y}function V8($,J,Z){for(;J>$;J--){let q=Z[J];if(!isNaN(q.x)&&!isNaN(q.y))break}return J}function aZ($,J,Z,q){if($&&J)return q($[Z],J[Z]);return $?$[Z]:J?J[Z]:0}function Eq($,J){let Z=[],q=!1;if(M0($))q=!0,Z=$;else Z=HG($,J);return Z.length?new c2({points:Z,options:{tension:0},_loop:q,_fullLoop:q}):null}function tZ($){return $&&$.fill!==!1}function FG($,J,Z){let Q=$[J].fill,Y=[J],X;if(!Z)return Q;while(Q!==!1&&Y.indexOf(Q)===-1){if(!z0(Q))return Q;if(X=$[Q],!X)return!1;if(X.visible)return Q;Y.push(Q),Q=X.fill}return!1}function jG($,J,Z){let q=LG($);if(i(q))return isNaN(q.value)?!1:q;let Q=parseFloat(q);if(z0(Q)&&Math.floor(Q)===Q)return RG(q[0],J,Q,Z);return["origin","start","end","stack","shape"].indexOf(q)>=0&&q}function RG($,J,Z,q){if($==="-"||$==="+")Z=J+Z;if(Z===J||Z<0||Z>=q)return!1;return Z}function _G($,J){let Z=null;if($==="start")Z=J.bottom;else if($==="end")Z=J.top;else if(i($))Z=J.getPixelForValue($.value);else if(J.getBasePixel)Z=J.getBasePixel();return Z}function DG($,J,Z){let q;if($==="start")q=Z;else if($==="end")q=J.options.reverse?J.min:J.max;else if(i($))q=$.value;else q=J.getBaseValue();return q}function LG($){let J=$.options,Z=J.fill,q=s(Z&&Z.target,Z);if(q===void 0)q=!!J.backgroundColor;if(q===!1||q===null)return!1;if(q===!0)return"origin";return q}function VG($){let{scale:J,index:Z,line:q}=$,Q=[],Y=q.segments,X=q.points,K=PG(J,Z);K.push(Eq({x:null,y:J.bottom},q));for(let G=0;G<Y.length;G++){let w=Y[G];for(let B=w.start;B<=w.end;B++)IG(Q,X[B],K)}return new c2({points:Q,options:{}})}function PG($,J){let Z=[],q=$.getMatchingVisibleMetas("line");for(let Q=0;Q<q.length;Q++){let Y=q[Q];if(Y.index===J)break;if(!Y.hidden)Z.unshift(Y.dataset)}return Z}function IG($,J,Z){let q=[];for(let Q=0;Q<Z.length;Q++){let Y=Z[Q],{first:X,last:K,point:G}=SG(Y,J,"x");if(!G||X&&K)continue;if(X)q.unshift(G);else if($.push(G),!K)break}$.push(...q)}function SG($,J,Z){let q=$.interpolate(J,Z);if(!q)return{};let Q=q[Z],Y=$.segments,X=$.points,K=!1,G=!1;for(let w=0;w<Y.length;w++){let B=Y[w],M=X[B.start][Z],T=X[B.end][Z];if(s1(Q,M,T)){K=Q===M,G=Q===T;break}}return{first:K,last:G,point:q}}class e6{constructor($){this.x=$.x,this.y=$.y,this.radius=$.radius}pathSegment($,J,Z){let{x:q,y:Q,radius:Y}=this;return J=J||{start:0,end:w0},$.arc(q,Q,Y,J.end,J.start,!0),!Z.bounds}interpolate($){let{x:J,y:Z,radius:q}=this,Q=$.angle;return{x:J+Math.cos(Q)*q,y:Z+Math.sin(Q)*q,angle:Q}}}function CG($){let{chart:J,fill:Z,line:q}=$;if(z0(Z))return NG(J,Z);if(Z==="stack")return VG($);if(Z==="shape")return!0;let Q=OG($);if(Q instanceof e6)return Q;return Eq(Q,q)}function NG($,J){let Z=$.getDatasetMeta(J);return Z&&$.isDatasetVisible(J)?Z.dataset:null}function OG($){if(($.scale||{}).getPointPositionForValue)return kG($);return AG($)}function AG($){let{scale:J={},fill:Z}=$,q=_G(Z,J);if(z0(q)){let Q=J.isHorizontal();return{x:Q?q:null,y:Q?null:q}}return null}function kG($){let{scale:J,fill:Z}=$,q=J.options,Q=J.getLabels().length,Y=q.reverse?J.max:J.min,X=DG(Z,J,Y),K=[];if(q.grid.circular){let G=J.getPointPositionForValue(0,Y);return new e6({x:G.x,y:G.y,radius:J.getDistanceFromCenterForValue(X)})}for(let G=0;G<Q;++G)K.push(J.getPointPositionForValue(G,X));return K}function E6($,J,Z){let q=CG(J),{chart:Q,index:Y,line:X,scale:K,axis:G}=J,w=X.options,B=w.fill,M=w.backgroundColor,{above:T=M,below:z=M}=B||{},H=Q.getDatasetMeta(Y),W=O6(Q,H);if(q&&X.points.length)O5($,Z),fG($,{line:X,target:q,above:T,below:z,area:Z,scale:K,axis:G,clip:W}),A5($)}function fG($,J){let{line:Z,target:q,above:Q,below:Y,area:X,scale:K,clip:G}=J,w=Z._loop?"angle":J.axis;$.save();let B=Y;if(Y!==Q){if(w==="x")eZ($,q,X.top),g6($,{line:Z,target:q,color:Q,scale:K,property:w,clip:G}),$.restore(),$.save(),eZ($,q,X.bottom);else if(w==="y")$q($,q,X.left),g6($,{line:Z,target:q,color:Y,scale:K,property:w,clip:G}),$.restore(),$.save(),$q($,q,X.right),B=Q}g6($,{line:Z,target:q,color:B,scale:K,property:w,clip:G}),$.restore()}function eZ($,J,Z){let{segments:q,points:Q}=J,Y=!0,X=!1;$.beginPath();for(let K of q){let{start:G,end:w}=K,B=Q[G],M=Q[V8(G,w,Q)];if(Y)$.moveTo(B.x,B.y),Y=!1;else $.lineTo(B.x,Z),$.lineTo(B.x,B.y);if(X=!!J.pathSegment($,K,{move:X}),X)$.closePath();else $.lineTo(M.x,Z)}$.lineTo(J.first().x,Z),$.closePath(),$.clip()}function $q($,J,Z){let{segments:q,points:Q}=J,Y=!0,X=!1;$.beginPath();for(let K of q){let{start:G,end:w}=K,B=Q[G],M=Q[V8(G,w,Q)];if(Y)$.moveTo(B.x,B.y),Y=!1;else $.lineTo(Z,B.y),$.lineTo(B.x,B.y);if(X=!!J.pathSegment($,K,{move:X}),X)$.closePath();else $.lineTo(Z,M.y)}$.lineTo(Z,J.first().y),$.closePath(),$.clip()}function g6($,J){let{line:Z,target:q,property:Q,color:Y,scale:X,clip:K}=J,G=WG(Z,q,Q);for(let{source:w,target:B,start:M,end:T}of G){let{style:{backgroundColor:z=Y}={}}=w,H=q!==!0;$.save(),$.fillStyle=z,bG($,X,K,H&&m6(Q,M,T)),$.beginPath();let W=!!Z.pathSegment($,w),F;if(H){if(W)$.closePath();else Jq($,q,T,Q);let j=!!q.pathSegment($,B,{move:W,reverse:!0});if(F=W&&j,!F)Jq($,q,M,Q)}$.closePath(),$.fill(F?"evenodd":"nonzero"),$.restore()}}function bG($,J,Z,q){let Q=J.chart.chartArea,{property:Y,start:X,end:K}=q||{};if(Y==="x"||Y==="y"){let G,w,B,M;if(Y==="x")G=X,w=Q.top,B=K,M=Q.bottom;else G=Q.left,w=X,B=Q.right,M=K;if($.beginPath(),Z)G=Math.max(G,Z.left),B=Math.min(B,Z.right),w=Math.max(w,Z.top),M=Math.min(M,Z.bottom);$.rect(G,w,B-G,M-w),$.clip()}}function Jq($,J,Z,q){let Q=J.interpolate(Z,q);if(Q)$.lineTo(Q.x,Q.y)}var gq={id:"filler",afterDatasetsUpdate($,J,Z){let q=($.data.datasets||[]).length,Q=[],Y,X,K,G;for(X=0;X<q;++X){if(Y=$.getDatasetMeta(X),K=Y.dataset,G=null,K&&K.options&&K instanceof c2)G={visible:$.isDatasetVisible(X),index:X,fill:jG(K,X,q),chart:$,axis:Y.controller.options.indexAxis,scale:Y.vScale,line:K};Y.$filler=G,Q.push(G)}for(X=0;X<q;++X){if(G=Q[X],!G||G.fill===!1)continue;G.fill=FG(Q,X,Z.propagate)}},beforeDraw($,J,Z){let q=Z.drawTime==="beforeDraw",Q=$.getSortedVisibleDatasetMetas(),Y=$.chartArea;for(let X=Q.length-1;X>=0;--X){let K=Q[X].$filler;if(!K)continue;if(K.line.updateControlPoints(Y,K.axis),q&&K.fill)E6($.ctx,K,Y)}},beforeDatasetsDraw($,J,Z){if(Z.drawTime!=="beforeDatasetsDraw")return;let q=$.getSortedVisibleDatasetMetas();for(let Q=q.length-1;Q>=0;--Q){let Y=q[Q].$filler;if(tZ(Y))E6($.ctx,Y,$.chartArea)}},beforeDatasetDraw($,J,Z){let q=J.meta.$filler;if(!tZ(q)||Z.drawTime!=="beforeDatasetDraw")return;E6($.ctx,q,$.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},Zq=($,J)=>{let{boxHeight:Z=J,boxWidth:q=J}=$;if($.usePointStyle)Z=Math.min(Z,J),q=$.pointStyleWidth||Math.min(q,J);return{boxWidth:q,boxHeight:Z,itemHeight:Math.max(J,Z)}},vG=($,J)=>$!==null&&J!==null&&$.datasetIndex===J.datasetIndex&&$.index===J.index;class p6 extends a1{constructor($){super();this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=$.chart,this.options=$.options,this.ctx=$.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update($,J,Z){this.maxWidth=$,this.maxHeight=J,this._margins=Z,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){if(this.isHorizontal())this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width;else this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height}buildLabels(){let $=this.options.labels||{},J=U0($.generateLabels,[this.chart],this)||[];if($.filter)J=J.filter((Z)=>$.filter(Z,this.chart.data));if($.sort)J=J.sort((Z,q)=>$.sort(Z,q,this.chart.data));if(this.options.reverse)J.reverse();this.legendItems=J}fit(){let{options:$,ctx:J}=this;if(!$.display){this.width=this.height=0;return}let Z=$.labels,q=A0(Z.font),Q=q.size,Y=this._computeTitleHeight(),{boxWidth:X,itemHeight:K}=Zq(Z,Q),G,w;if(J.font=q.string,this.isHorizontal())G=this.maxWidth,w=this._fitRows(Y,Q,X,K)+10;else w=this.maxHeight,G=this._fitCols(Y,q,X,K)+10;this.width=Math.min(G,$.maxWidth||this.maxWidth),this.height=Math.min(w,$.maxHeight||this.maxHeight)}_fitRows($,J,Z,q){let{ctx:Q,maxWidth:Y,options:{labels:{padding:X}}}=this,K=this.legendHitBoxes=[],G=this.lineWidths=[0],w=q+X,B=$;Q.textAlign="left",Q.textBaseline="middle";let M=-1,T=-w;return this.legendItems.forEach((z,H)=>{let W=Z+J/2+Q.measureText(z.text).width;if(H===0||G[G.length-1]+W+2*X>Y)B+=w,G[G.length-(H>0?0:1)]=0,T+=w,M++;K[H]={left:0,top:T,row:M,width:W,height:q},G[G.length-1]+=W+X}),B}_fitCols($,J,Z,q){let{ctx:Q,maxHeight:Y,options:{labels:{padding:X}}}=this,K=this.legendHitBoxes=[],G=this.columnSizes=[],w=Y-$,B=X,M=0,T=0,z=0,H=0;return this.legendItems.forEach((W,F)=>{let{itemWidth:j,itemHeight:R}=yG(Z,J,Q,W,q);if(F>0&&T+R+2*X>w)B+=M+X,G.push({width:M,height:T}),z+=M+X,H++,M=T=0;K[F]={left:z,top:T,col:H,width:j,height:R},M=Math.max(M,j),T+=R+X}),B+=M,G.push({width:M,height:T}),B}adjustHitBoxes(){if(!this.options.display)return;let $=this._computeTitleHeight(),{legendHitBoxes:J,options:{align:Z,labels:{padding:q},rtl:Q}}=this,Y=M2(Q,this.left,this.width);if(this.isHorizontal()){let X=0,K=x0(Z,this.left+q,this.right-this.lineWidths[X]);for(let G of J){if(X!==G.row)X=G.row,K=x0(Z,this.left+q,this.right-this.lineWidths[X]);G.top+=this.top+$+q,G.left=Y.leftForLtr(Y.x(K),G.width),K+=G.width+q}}else{let X=0,K=x0(Z,this.top+$+q,this.bottom-this.columnSizes[X].height);for(let G of J){if(G.col!==X)X=G.col,K=x0(Z,this.top+$+q,this.bottom-this.columnSizes[X].height);G.top=K,G.left+=this.left+q,G.left=Y.leftForLtr(Y.x(G.left),G.width),K+=G.height+q}}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let $=this.ctx;O5($,this),this._draw(),A5($)}}_draw(){let{options:$,columnSizes:J,lineWidths:Z,ctx:q}=this,{align:Q,labels:Y}=$,X=W0.color,K=M2($.rtl,this.left,this.width),G=A0(Y.font),{padding:w}=Y,B=G.size,M=B/2,T;this.drawTitle(),q.textAlign=K.textAlign("left"),q.textBaseline="middle",q.lineWidth=0.5,q.font=G.string;let{boxWidth:z,boxHeight:H,itemHeight:W}=Zq(Y,B),F=function(D,C,S){if(isNaN(z)||z<=0||isNaN(H)||H<0)return;q.save();let P=s(S.lineWidth,1);if(q.fillStyle=s(S.fillStyle,X),q.lineCap=s(S.lineCap,"butt"),q.lineDashOffset=s(S.lineDashOffset,0),q.lineJoin=s(S.lineJoin,"miter"),q.lineWidth=P,q.strokeStyle=s(S.strokeStyle,X),q.setLineDash(s(S.lineDash,[])),Y.usePointStyle){let I={radius:H*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:P},g=K.xPlus(D,z/2),E=C+M;R6(q,I,g,E,Y.pointStyleWidth&&z)}else{let I=C+Math.max((B-H)/2,0),g=K.leftForLtr(D,z),E=B2(S.borderRadius);if(q.beginPath(),Object.values(E).some((K0)=>K0!==0))k5(q,{x:g,y:I,w:z,h:H,radius:E});else q.rect(g,I,z,H);if(q.fill(),P!==0)q.stroke()}q.restore()},j=function(D,C,S){w2(q,S.text,D,C+W/2,G,{strikethrough:S.hidden,textAlign:K.textAlign(S.textAlign)})},R=this.isHorizontal(),L=this._computeTitleHeight();if(R)T={x:x0(Q,this.left+w,this.right-Z[0]),y:this.top+w+L,line:0};else T={x:this.left+w,y:x0(Q,this.top+L+w,this.bottom-J[0].height),line:0};I6(this.ctx,$.textDirection);let V=W+w;this.legendItems.forEach((D,C)=>{q.strokeStyle=D.fontColor,q.fillStyle=D.fontColor;let S=q.measureText(D.text).width,P=K.textAlign(D.textAlign||(D.textAlign=Y.textAlign)),I=z+M+S,g=T.x,E=T.y;if(K.setWidth(this.width),R){if(C>0&&g+I+w>this.right)E=T.y+=V,T.line++,g=T.x=x0(Q,this.left+w,this.right-Z[T.line])}else if(C>0&&E+V>this.bottom)g=T.x=g+J[T.line].width+w,T.line++,E=T.y=x0(Q,this.top+L+w,this.bottom-J[T.line].height);let K0=K.x(g);if(F(K0,E,D),g=QZ(P,g+z+M,R?g+I:this.right,$.rtl),j(K.x(g),E,D),R)T.x+=I+w;else if(typeof D.text!=="string"){let v0=G.lineHeight;T.y+=hq(D,v0)+w}else T.y+=V}),S6(this.ctx,$.textDirection)}drawTitle(){let $=this.options,J=$.title,Z=A0(J.font),q=E0(J.padding);if(!J.display)return;let Q=M2($.rtl,this.left,this.width),Y=this.ctx,X=J.position,K=Z.size/2,G=q.top+K,w,B=this.left,M=this.width;if(this.isHorizontal())M=Math.max(...this.lineWidths),w=this.top+G,B=x0($.align,B,this.right-M);else{let z=this.columnSizes.reduce((H,W)=>Math.max(H,W.height),0);w=G+x0($.align,this.top,this.bottom-z-$.labels.padding-this._computeTitleHeight())}let T=x0(X,B,B+M);Y.textAlign=Q.textAlign(W6(X)),Y.textBaseline="middle",Y.strokeStyle=J.color,Y.fillStyle=J.color,Y.font=Z.string,w2(Y,J.text,T,w,Z)}_computeTitleHeight(){let $=this.options.title,J=A0($.font),Z=E0($.padding);return $.display?J.lineHeight+Z.height:0}_getLegendItemAt($,J){let Z,q,Q;if(s1($,this.left,this.right)&&s1(J,this.top,this.bottom)){Q=this.legendHitBoxes;for(Z=0;Z<Q.length;++Z)if(q=Q[Z],s1($,q.left,q.left+q.width)&&s1(J,q.top,q.top+q.height))return this.legendItems[Z]}return null}handleEvent($){let J=this.options;if(!hG($.type,J))return;let Z=this._getLegendItemAt($.x,$.y);if($.type==="mousemove"||$.type==="mouseout"){let q=this._hoveredItem,Q=vG(q,Z);if(q&&!Q)U0(J.onLeave,[$,q,this],this);if(this._hoveredItem=Z,Z&&!Q)U0(J.onHover,[$,Z,this],this)}else if(Z)U0(J.onClick,[$,Z,this],this)}}function yG($,J,Z,q,Q){let Y=EG(q,$,J,Z),X=gG(Q,q,J.lineHeight);return{itemWidth:Y,itemHeight:X}}function EG($,J,Z,q){let Q=$.text;if(Q&&typeof Q!=="string")Q=Q.reduce((Y,X)=>Y.length>X.length?Y:X);return J+Z.size/2+q.measureText(Q).width}function gG($,J,Z){let q=$;if(typeof J.text!=="string")q=hq(J,Z);return q}function hq($,J){let Z=$.text?$.text.length:0;return J*Z}function hG($,J){if(($==="mousemove"||$==="mouseout")&&(J.onHover||J.onLeave))return!0;if(J.onClick&&($==="click"||$==="mouseup"))return!0;return!1}var uq={id:"legend",_element:p6,start($,J,Z){let q=$.legend=new p6({ctx:$.ctx,options:Z,chart:$});n1.configure($,q,Z),n1.addBox($,q)},stop($){n1.removeBox($,$.legend),delete $.legend},beforeUpdate($,J,Z){let q=$.legend;n1.configure($,q,Z),q.options=Z},afterUpdate($){let J=$.legend;J.buildLabels(),J.adjustHitBoxes()},afterEvent($,J){if(!J.replay)$.legend.handleEvent(J.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1000,onClick($,J,Z){let q=J.datasetIndex,Q=Z.chart;if(Q.isDatasetVisible(q))Q.hide(q),J.hidden=!0;else Q.show(q),J.hidden=!1},onHover:null,onLeave:null,labels:{color:($)=>$.chart.options.color,boxWidth:40,padding:10,generateLabels($){let J=$.data.datasets,{labels:{usePointStyle:Z,pointStyle:q,textAlign:Q,color:Y,useBorderRadius:X,borderRadius:K}}=$.legend.options;return $._getSortedDatasetMetas().map((G)=>{let w=G.controller.getStyle(Z?0:void 0),B=E0(w.borderWidth);return{text:J[G.index].label,fillStyle:w.backgroundColor,fontColor:Y,hidden:!G.visible,lineCap:w.borderCapStyle,lineDash:w.borderDash,lineDashOffset:w.borderDashOffset,lineJoin:w.borderJoinStyle,lineWidth:(B.width+B.height)/4,strokeStyle:w.borderColor,pointStyle:q||w.pointStyle,rotation:w.rotation,textAlign:Q||w.textAlign,borderRadius:X&&(K||w.borderRadius),datasetIndex:G.index}},this)}},title:{color:($)=>$.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:($)=>!$.startsWith("on"),labels:{_scriptable:($)=>!["generateLabels","filter","sort"].includes($)}}};var x5={average($){if(!$.length)return!1;let J,Z,q=new Set,Q=0,Y=0;for(J=0,Z=$.length;J<Z;++J){let K=$[J].element;if(K&&K.hasValue()){let G=K.tooltipPosition();q.add(G.x),Q+=G.y,++Y}}if(Y===0||q.size===0)return!1;return{x:[...q].reduce((K,G)=>K+G)/q.size,y:Q/Y}},nearest($,J){if(!$.length)return!1;let{x:Z,y:q}=J,Q=Number.POSITIVE_INFINITY,Y,X,K;for(Y=0,X=$.length;Y<X;++Y){let G=$[Y].element;if(G&&G.hasValue()){let w=G.getCenterPoint(),B=J8(J,w);if(B<Q)Q=B,K=G}}if(K){let G=K.tooltipPosition();Z=G.x,q=G.y}return{x:Z,y:q}}};function T1($,J){if(J)if(M0(J))Array.prototype.push.apply($,J);else $.push(J);return $}function k1($){if((typeof $==="string"||$ instanceof String)&&$.indexOf(`
`)>-1)return $.split(`
`);return $}function uG($,J){let{element:Z,datasetIndex:q,index:Q}=J,Y=$.getDatasetMeta(q).controller,{label:X,value:K}=Y.getLabelAndValue(Q);return{chart:$,label:X,parsed:Y.getParsed(Q),raw:$.data.datasets[q].data[Q],formattedValue:K,dataset:Y.getDataset(),dataIndex:Q,datasetIndex:q,element:Z}}function qq($,J){let Z=$.chart.ctx,{body:q,footer:Q,title:Y}=$,{boxWidth:X,boxHeight:K}=J,G=A0(J.bodyFont),w=A0(J.titleFont),B=A0(J.footerFont),M=Y.length,T=Q.length,z=q.length,H=E0(J.padding),W=H.height,F=0,j=q.reduce((V,D)=>V+D.before.length+D.lines.length+D.after.length,0);if(j+=$.beforeBody.length+$.afterBody.length,M)W+=M*w.lineHeight+(M-1)*J.titleSpacing+J.titleMarginBottom;if(j){let V=J.displayColors?Math.max(K,G.lineHeight):G.lineHeight;W+=z*V+(j-z)*G.lineHeight+(j-1)*J.bodySpacing}if(T)W+=J.footerMarginTop+T*B.lineHeight+(T-1)*J.footerSpacing;let R=0,L=function(V){F=Math.max(F,Z.measureText(V).width+R)};return Z.save(),Z.font=w.string,Z0($.title,L),Z.font=G.string,Z0($.beforeBody.concat($.afterBody),L),R=J.displayColors?X+2+J.boxPadding:0,Z0(q,(V)=>{Z0(V.before,L),Z0(V.lines,L),Z0(V.after,L)}),R=0,Z.font=B.string,Z0($.footer,L),Z.restore(),F+=H.width,{width:F,height:W}}function xG($,J){let{y:Z,height:q}=J;if(Z<q/2)return"top";else if(Z>$.height-q/2)return"bottom";return"center"}function mG($,J,Z,q){let{x:Q,width:Y}=q,X=Z.caretSize+Z.caretPadding;if($==="left"&&Q+Y+X>J.width)return!0;if($==="right"&&Q-Y-X<0)return!0}function pG($,J,Z,q){let{x:Q,width:Y}=Z,{width:X,chartArea:{left:K,right:G}}=$,w="center";if(q==="center")w=Q<=(K+G)/2?"left":"right";else if(Q<=Y/2)w="left";else if(Q>=X-Y/2)w="right";if(mG(w,$,J,Z))w="center";return w}function Qq($,J,Z){let q=Z.yAlign||J.yAlign||xG($,Z);return{xAlign:Z.xAlign||J.xAlign||pG($,J,Z,q),yAlign:q}}function dG($,J){let{x:Z,width:q}=$;if(J==="right")Z-=q;else if(J==="center")Z-=q/2;return Z}function cG($,J,Z){let{y:q,height:Q}=$;if(J==="top")q+=Z;else if(J==="bottom")q-=Q+Z;else q-=Q/2;return q}function Yq($,J,Z,q){let{caretSize:Q,caretPadding:Y,cornerRadius:X}=$,{xAlign:K,yAlign:G}=Z,w=Q+Y,{topLeft:B,topRight:M,bottomLeft:T,bottomRight:z}=B2(X),H=dG(J,K),W=cG(J,G,w);if(G==="center"){if(K==="left")H+=w;else if(K==="right")H-=w}else if(K==="left")H-=Math.max(B,T)+Q;else if(K==="right")H+=Math.max(M,z)+Q;return{x:y0(H,0,q.width-J.width),y:y0(W,0,q.height-J.height)}}function H8($,J,Z){let q=E0(Z.padding);return J==="center"?$.x+$.width/2:J==="right"?$.x+$.width-q.right:$.x+q.left}function Xq($){return T1([],k1($))}function rG($,J,Z){return O1($,{tooltip:J,tooltipItems:Z,type:"tooltip"})}function Uq($,J){let Z=J&&J.dataset&&J.dataset.tooltip&&J.dataset.tooltip.callbacks;return Z?$.override(Z):$}var xq={beforeTitle:M1,title($){if($.length>0){let J=$[0],Z=J.chart.data.labels,q=Z?Z.length:0;if(this&&this.options&&this.options.mode==="dataset")return J.dataset.label||"";else if(J.label)return J.label;else if(q>0&&J.dataIndex<q)return Z[J.dataIndex]}return""},afterTitle:M1,beforeBody:M1,beforeLabel:M1,label($){if(this&&this.options&&this.options.mode==="dataset")return $.label+": "+$.formattedValue||$.formattedValue;let J=$.dataset.label||"";if(J)J+=": ";let Z=$.formattedValue;if(!J0(Z))J+=Z;return J},labelColor($){let Z=$.chart.getDatasetMeta($.datasetIndex).controller.getStyle($.dataIndex);return{borderColor:Z.borderColor,backgroundColor:Z.backgroundColor,borderWidth:Z.borderWidth,borderDash:Z.borderDash,borderDashOffset:Z.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle($){let Z=$.chart.getDatasetMeta($.datasetIndex).controller.getStyle($.dataIndex);return{pointStyle:Z.pointStyle,rotation:Z.rotation}},afterLabel:M1,afterBody:M1,beforeFooter:M1,footer:M1,afterFooter:M1};function m0($,J,Z,q){let Q=$[J].call(Z,q);if(typeof Q==="undefined")return xq[J].call(Z,q);return Q}class d6 extends a1{static positioners=x5;constructor($){super();this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=$.chart,this.options=$.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize($){this.options=$,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let $=this._cachedAnimations;if($)return $;let J=this.chart,Z=this.options.setContext(this.getContext()),q=Z.enabled&&J.options.animation&&Z.animations,Q=new s6(this.chart,q);if(q._cacheable)this._cachedAnimations=Object.freeze(Q);return Q}getContext(){return this.$context||(this.$context=rG(this.chart.getContext(),this,this._tooltipItems))}getTitle($,J){let{callbacks:Z}=J,q=m0(Z,"beforeTitle",this,$),Q=m0(Z,"title",this,$),Y=m0(Z,"afterTitle",this,$),X=[];return X=T1(X,k1(q)),X=T1(X,k1(Q)),X=T1(X,k1(Y)),X}getBeforeBody($,J){return Xq(m0(J.callbacks,"beforeBody",this,$))}getBody($,J){let{callbacks:Z}=J,q=[];return Z0($,(Q)=>{let Y={before:[],lines:[],after:[]},X=Uq(Z,Q);T1(Y.before,k1(m0(X,"beforeLabel",this,Q))),T1(Y.lines,m0(X,"label",this,Q)),T1(Y.after,k1(m0(X,"afterLabel",this,Q))),q.push(Y)}),q}getAfterBody($,J){return Xq(m0(J.callbacks,"afterBody",this,$))}getFooter($,J){let{callbacks:Z}=J,q=m0(Z,"beforeFooter",this,$),Q=m0(Z,"footer",this,$),Y=m0(Z,"afterFooter",this,$),X=[];return X=T1(X,k1(q)),X=T1(X,k1(Q)),X=T1(X,k1(Y)),X}_createItems($){let J=this._active,Z=this.chart.data,q=[],Q=[],Y=[],X=[],K,G;for(K=0,G=J.length;K<G;++K)X.push(uG(this.chart,J[K]));if($.filter)X=X.filter((w,B,M)=>$.filter(w,B,M,Z));if($.itemSort)X=X.sort((w,B)=>$.itemSort(w,B,Z));return Z0(X,(w)=>{let B=Uq($.callbacks,w);q.push(m0(B,"labelColor",this,w)),Q.push(m0(B,"labelPointStyle",this,w)),Y.push(m0(B,"labelTextColor",this,w))}),this.labelColors=q,this.labelPointStyles=Q,this.labelTextColors=Y,this.dataPoints=X,X}update($,J){let Z=this.options.setContext(this.getContext()),q=this._active,Q,Y=[];if(!q.length){if(this.opacity!==0)Q={opacity:0}}else{let X=x5[Z.position].call(this,q,this._eventPosition);Y=this._createItems(Z),this.title=this.getTitle(Y,Z),this.beforeBody=this.getBeforeBody(Y,Z),this.body=this.getBody(Y,Z),this.afterBody=this.getAfterBody(Y,Z),this.footer=this.getFooter(Y,Z);let K=this._size=qq(this,Z),G=Object.assign({},X,K),w=Qq(this.chart,Z,G),B=Yq(Z,G,w,this.chart);this.xAlign=w.xAlign,this.yAlign=w.yAlign,Q={opacity:1,x:B.x,y:B.y,width:K.width,height:K.height,caretX:X.x,caretY:X.y}}if(this._tooltipItems=Y,this.$context=void 0,Q)this._resolveAnimations().update(this,Q);if($&&Z.external)Z.external.call(this,{chart:this.chart,tooltip:this,replay:J})}drawCaret($,J,Z,q){let Q=this.getCaretPosition($,Z,q);J.lineTo(Q.x1,Q.y1),J.lineTo(Q.x2,Q.y2),J.lineTo(Q.x3,Q.y3)}getCaretPosition($,J,Z){let{xAlign:q,yAlign:Q}=this,{caretSize:Y,cornerRadius:X}=Z,{topLeft:K,topRight:G,bottomLeft:w,bottomRight:B}=B2(X),{x:M,y:T}=$,{width:z,height:H}=J,W,F,j,R,L,V;if(Q==="center"){if(L=T+H/2,q==="left")W=M,F=W-Y,R=L+Y,V=L-Y;else W=M+z,F=W+Y,R=L-Y,V=L+Y;j=W}else{if(q==="left")F=M+Math.max(K,w)+Y;else if(q==="right")F=M+z-Math.max(G,B)-Y;else F=this.caretX;if(Q==="top")R=T,L=R-Y,W=F-Y,j=F+Y;else R=T+H,L=R+Y,W=F+Y,j=F-Y;V=R}return{x1:W,x2:F,x3:j,y1:R,y2:L,y3:V}}drawTitle($,J,Z){let q=this.title,Q=q.length,Y,X,K;if(Q){let G=M2(Z.rtl,this.x,this.width);$.x=H8(this,Z.titleAlign,Z),J.textAlign=G.textAlign(Z.titleAlign),J.textBaseline="middle",Y=A0(Z.titleFont),X=Z.titleSpacing,J.fillStyle=Z.titleColor,J.font=Y.string;for(K=0;K<Q;++K)if(J.fillText(q[K],G.x($.x),$.y+Y.lineHeight/2),$.y+=Y.lineHeight+X,K+1===Q)$.y+=Z.titleMarginBottom-X}}_drawColorBox($,J,Z,q,Q){let Y=this.labelColors[Z],X=this.labelPointStyles[Z],{boxHeight:K,boxWidth:G}=Q,w=A0(Q.bodyFont),B=H8(this,"left",Q),M=q.x(B),T=K<w.lineHeight?(w.lineHeight-K)/2:0,z=J.y+T;if(Q.usePointStyle){let H={radius:Math.min(G,K)/2,pointStyle:X.pointStyle,rotation:X.rotation,borderWidth:1},W=q.leftForLtr(M,G)+G/2,F=z+K/2;$.strokeStyle=Q.multiKeyBackground,$.fillStyle=Q.multiKeyBackground,U8($,H,W,F),$.strokeStyle=Y.borderColor,$.fillStyle=Y.backgroundColor,U8($,H,W,F)}else{$.lineWidth=i(Y.borderWidth)?Math.max(...Object.values(Y.borderWidth)):Y.borderWidth||1,$.strokeStyle=Y.borderColor,$.setLineDash(Y.borderDash||[]),$.lineDashOffset=Y.borderDashOffset||0;let H=q.leftForLtr(M,G),W=q.leftForLtr(q.xPlus(M,1),G-2),F=B2(Y.borderRadius);if(Object.values(F).some((j)=>j!==0))$.beginPath(),$.fillStyle=Q.multiKeyBackground,k5($,{x:H,y:z,w:G,h:K,radius:F}),$.fill(),$.stroke(),$.fillStyle=Y.backgroundColor,$.beginPath(),k5($,{x:W,y:z+1,w:G-2,h:K-2,radius:F}),$.fill();else $.fillStyle=Q.multiKeyBackground,$.fillRect(H,z,G,K),$.strokeRect(H,z,G,K),$.fillStyle=Y.backgroundColor,$.fillRect(W,z+1,G-2,K-2)}$.fillStyle=this.labelTextColors[Z]}drawBody($,J,Z){let{body:q}=this,{bodySpacing:Q,bodyAlign:Y,displayColors:X,boxHeight:K,boxWidth:G,boxPadding:w}=Z,B=A0(Z.bodyFont),M=B.lineHeight,T=0,z=M2(Z.rtl,this.x,this.width),H=function(S){J.fillText(S,z.x($.x+T),$.y+M/2),$.y+=M+Q},W=z.textAlign(Y),F,j,R,L,V,D,C;J.textAlign=Y,J.textBaseline="middle",J.font=B.string,$.x=H8(this,W,Z),J.fillStyle=Z.bodyColor,Z0(this.beforeBody,H),T=X&&W!=="right"?Y==="center"?G/2+w:G+2+w:0;for(L=0,D=q.length;L<D;++L){if(F=q[L],j=this.labelTextColors[L],J.fillStyle=j,Z0(F.before,H),R=F.lines,X&&R.length)this._drawColorBox(J,$,L,z,Z),M=Math.max(B.lineHeight,K);for(V=0,C=R.length;V<C;++V)H(R[V]),M=B.lineHeight;Z0(F.after,H)}T=0,M=B.lineHeight,Z0(this.afterBody,H),$.y-=Q}drawFooter($,J,Z){let q=this.footer,Q=q.length,Y,X;if(Q){let K=M2(Z.rtl,this.x,this.width);$.x=H8(this,Z.footerAlign,Z),$.y+=Z.footerMarginTop,J.textAlign=K.textAlign(Z.footerAlign),J.textBaseline="middle",Y=A0(Z.footerFont),J.fillStyle=Z.footerColor,J.font=Y.string;for(X=0;X<Q;++X)J.fillText(q[X],K.x($.x),$.y+Y.lineHeight/2),$.y+=Y.lineHeight+Z.footerSpacing}}drawBackground($,J,Z,q){let{xAlign:Q,yAlign:Y}=this,{x:X,y:K}=$,{width:G,height:w}=Z,{topLeft:B,topRight:M,bottomLeft:T,bottomRight:z}=B2(q.cornerRadius);if(J.fillStyle=q.backgroundColor,J.strokeStyle=q.borderColor,J.lineWidth=q.borderWidth,J.beginPath(),J.moveTo(X+B,K),Y==="top")this.drawCaret($,J,Z,q);if(J.lineTo(X+G-M,K),J.quadraticCurveTo(X+G,K,X+G,K+M),Y==="center"&&Q==="right")this.drawCaret($,J,Z,q);if(J.lineTo(X+G,K+w-z),J.quadraticCurveTo(X+G,K+w,X+G-z,K+w),Y==="bottom")this.drawCaret($,J,Z,q);if(J.lineTo(X+T,K+w),J.quadraticCurveTo(X,K+w,X,K+w-T),Y==="center"&&Q==="left")this.drawCaret($,J,Z,q);if(J.lineTo(X,K+B),J.quadraticCurveTo(X,K,X+B,K),J.closePath(),J.fill(),q.borderWidth>0)J.stroke()}_updateAnimationTarget($){let J=this.chart,Z=this.$animations,q=Z&&Z.x,Q=Z&&Z.y;if(q||Q){let Y=x5[$.position].call(this,this._active,this._eventPosition);if(!Y)return;let X=this._size=qq(this,$),K=Object.assign({},Y,this._size),G=Qq(J,$,K),w=Yq($,K,G,J);if(q._to!==w.x||Q._to!==w.y)this.xAlign=G.xAlign,this.yAlign=G.yAlign,this.width=X.width,this.height=X.height,this.caretX=Y.x,this.caretY=Y.y,this._resolveAnimations().update(this,w)}}_willRender(){return!!this.opacity}draw($){let J=this.options.setContext(this.getContext()),Z=this.opacity;if(!Z)return;this._updateAnimationTarget(J);let q={width:this.width,height:this.height},Q={x:this.x,y:this.y};Z=Math.abs(Z)<0.001?0:Z;let Y=E0(J.padding),X=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;if(J.enabled&&X)$.save(),$.globalAlpha=Z,this.drawBackground(Q,$,q,J),I6($,J.textDirection),Q.y+=Y.top,this.drawTitle(Q,$,J),this.drawBody(Q,$,J),this.drawFooter(Q,$,J),S6($,J.textDirection),$.restore()}getActiveElements(){return this._active||[]}setActiveElements($,J){let Z=this._active,q=$.map(({datasetIndex:X,index:K})=>{let G=this.chart.getDatasetMeta(X);if(!G)throw new Error("Cannot find a dataset at index "+X);return{datasetIndex:X,element:G.data[K],index:K}}),Q=!I5(Z,q),Y=this._positionChanged(q,J);if(Q||Y)this._active=q,this._eventPosition=J,this._ignoreReplayEvents=!0,this.update(!0)}handleEvent($,J,Z=!0){if(J&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let q=this.options,Q=this._active||[],Y=this._getActiveElements($,Q,J,Z),X=this._positionChanged(Y,$),K=J||!I5(Y,Q)||X;if(K){if(this._active=Y,q.enabled||q.external)this._eventPosition={x:$.x,y:$.y},this.update(!0,J)}return K}_getActiveElements($,J,Z,q){let Q=this.options;if($.type==="mouseout")return[];if(!q)return J.filter((X)=>this.chart.data.datasets[X.datasetIndex]&&this.chart.getDatasetMeta(X.datasetIndex).controller.getParsed(X.index)!==void 0);let Y=this.chart.getElementsAtEventForMode($,Q.mode,Q,Z);if(Q.reverse)Y.reverse();return Y}_positionChanged($,J){let{caretX:Z,caretY:q,options:Q}=this,Y=x5[Q.position].call(this,$,J);return Y!==!1&&(Z!==Y.x||q!==Y.y)}}var mq={id:"tooltip",_element:d6,positioners:x5,afterInit($,J,Z){if(Z)$.tooltip=new d6({chart:$,options:Z})},beforeUpdate($,J,Z){if($.tooltip)$.tooltip.initialize(Z)},reset($,J,Z){if($.tooltip)$.tooltip.initialize(Z)},afterDraw($){let J=$.tooltip;if(J&&J._willRender()){let Z={tooltip:J};if($.notifyPlugins("beforeTooltipDraw",{...Z,cancelable:!0})===!1)return;J.draw($.ctx),$.notifyPlugins("afterTooltipDraw",Z)}},afterEvent($,J){if($.tooltip){let Z=J.replay;if($.tooltip.handleEvent(J.event,Z,J.inChartArea))J.changed=!0}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:($,J)=>J.bodyFont.size,boxWidth:($,J)=>J.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:xq},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:($)=>$!=="filter"&&$!=="itemSort"&&$!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};var sG=($,J,Z,q)=>{if(typeof J==="string")Z=$.push(J)-1,q.unshift({index:Z,label:J});else if(isNaN(J))Z=null;return Z};function oG($,J,Z,q){let Q=$.indexOf(J);if(Q===-1)return sG($,J,Z,q);let Y=$.lastIndexOf(J);return Q!==Y?Z:Q}var lG=($,J)=>$===null?null:y0(Math.round($),0,J);function Kq($){let J=this.getLabels();if($>=0&&$<J.length)return J[$];return $}class $7 extends W2{static id="category";static defaults={ticks:{callback:Kq}};constructor($){super($);this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init($){let J=this._addedLabels;if(J.length){let Z=this.getLabels();for(let{index:q,label:Q}of J)if(Z[q]===Q)Z.splice(q,1);this._addedLabels=[]}super.init($)}parse($,J){if(J0($))return null;let Z=this.getLabels();return J=isFinite(J)&&Z[J]===$?J:oG(Z,$,s(J,$),this._addedLabels),lG(J,Z.length-1)}determineDataLimits(){let{minDefined:$,maxDefined:J}=this.getUserBounds(),{min:Z,max:q}=this.getMinMax(!0);if(this.options.bounds==="ticks"){if(!$)Z=0;if(!J)q=this.getLabels().length-1}this.min=Z,this.max=q}buildTicks(){let $=this.min,J=this.max,Z=this.options.offset,q=[],Q=this.getLabels();Q=$===0&&J===Q.length-1?Q:Q.slice($,J+1),this._valueRange=Math.max(Q.length-(Z?0:1),1),this._startValue=this.min-(Z?0.5:0);for(let Y=$;Y<=J;Y++)q.push({value:Y});return q}getLabelForValue($){return Kq.call(this,$)}configure(){if(super.configure(),!this.isHorizontal())this._reversePixels=!this._reversePixels}getPixelForValue($){if(typeof $!=="number")$=this.parse($);return $===null?NaN:this.getPixelForDecimal(($-this._startValue)/this._valueRange)}getPixelForTick($){let J=this.ticks;if($<0||$>J.length-1)return null;return this.getPixelForValue(J[$].value)}getValueForPixel($){return Math.round(this._startValue+this.getDecimalForPixel($)*this._valueRange)}getBasePixel(){return this.bottom}}function iG($,J){let Z=[],q=0.00000000000001,{bounds:Q,step:Y,min:X,max:K,precision:G,count:w,maxTicks:B,maxDigits:M,includeBounds:T}=$,z=Y||1,H=B-1,{min:W,max:F}=J,j=!J0(X),R=!J0(K),L=!J0(w),V=(F-W)/(M+1),D=K6((F-W)/H/z)*z,C,S,P,I;if(D<0.00000000000001&&!j&&!R)return[{value:W},{value:F}];if(I=Math.ceil(F/D)-Math.floor(W/D),I>H)D=K6(I*D/H/z)*z;if(!J0(G))C=Math.pow(10,G),D=Math.ceil(D*C)/C;if(Q==="ticks")S=Math.floor(W/D)*D,P=Math.ceil(F/D)*D;else S=W,P=F;if(j&&R&&Y&&nJ((K-X)/Y,D/1000))I=Math.round(Math.min((K-X)/D,B)),D=(K-X)/I,S=X,P=K;else if(L)S=j?X:S,P=R?K:P,I=w-1,D=(P-S)/I;else if(I=(P-S)/D,x2(I,Math.round(I),D/1000))I=Math.round(I);else I=Math.ceil(I);let g=Math.max(w6(D),w6(S));C=Math.pow(10,J0(G)?g:G),S=Math.round(S*C)/C,P=Math.round(P*C)/C;let E=0;if(j){if(T&&S!==X){if(Z.push({value:X}),S<X)E++;if(x2(Math.round((S+E*D)*C)/C,X,Gq(X,V,$)))E++}else if(S<X)E++}for(;E<I;++E){let K0=Math.round((S+E*D)*C)/C;if(R&&K0>K)break;Z.push({value:K0})}if(R&&T&&P!==K)if(Z.length&&x2(Z[Z.length-1].value,K,Gq(K,V,$)))Z[Z.length-1].value=K;else Z.push({value:K});else if(!R||P===K)Z.push({value:P});return Z}function Gq($,J,{horizontal:Z,minRotation:q}){let Q=K1(q),Y=(Z?Math.sin(Q):Math.cos(Q))||0.001,X=0.75*J*(""+$).length;return Math.min(J/Y,X)}class p5 extends W2{constructor($){super($);this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse($,J){if(J0($))return null;if((typeof $==="number"||$ instanceof Number)&&!isFinite(+$))return null;return+$}handleTickRangeOptions(){let{beginAtZero:$}=this.options,{minDefined:J,maxDefined:Z}=this.getUserBounds(),{min:q,max:Q}=this,Y=(K)=>q=J?q:K,X=(K)=>Q=Z?Q:K;if($){let K=K2(q),G=K2(Q);if(K<0&&G<0)X(0);else if(K>0&&G>0)Y(0)}if(q===Q){let K=Q===0?1:Math.abs(Q*0.05);if(X(Q+K),!$)Y(q-K)}this.min=q,this.max=Q}getTickLimit(){let $=this.options.ticks,{maxTicksLimit:J,stepSize:Z}=$,q;if(Z){if(q=Math.ceil(this.max/Z)-Math.floor(this.min/Z)+1,q>1000)console.warn(`scales.${this.id}.ticks.stepSize: ${Z} would result generating up to ${q} ticks. Limiting to 1000.`),q=1000}else q=this.computeTickLimit(),J=J||11;if(J)q=Math.min(J,q);return q}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let $=this.options,J=$.ticks,Z=this.getTickLimit();Z=Math.max(2,Z);let q={maxTicks:Z,bounds:$.bounds,min:$.min,max:$.max,precision:J.precision,step:J.stepSize,count:J.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:J.minRotation||0,includeBounds:J.includeBounds!==!1},Q=this._range||this,Y=iG(q,Q);if($.bounds==="ticks")G6(Y,this,"value");if($.reverse)Y.reverse(),this.start=this.max,this.end=this.min;else this.start=this.min,this.end=this.max;return Y}configure(){let $=this.ticks,J=this.min,Z=this.max;if(super.configure(),this.options.offset&&$.length){let q=(Z-J)/Math.max($.length-1,1)/2;J-=q,Z+=q}this._startValue=J,this._endValue=Z,this._valueRange=Z-J}getLabelForValue($){return C5($,this.chart.options.locale,this.options.ticks.format)}}class J7 extends p5{static id="linear";static defaults={ticks:{callback:N5.formatters.numeric}};determineDataLimits(){let{min:$,max:J}=this.getMinMax(!0);this.min=z0($)?$:0,this.max=z0(J)?J:1,this.handleTickRangeOptions()}computeTickLimit(){let $=this.isHorizontal(),J=$?this.width:this.height,Z=K1(this.options.ticks.minRotation),q=($?Math.sin(Z):Math.cos(Z))||0.001,Q=this._resolveTickFontOptions(0);return Math.ceil(J/Math.min(40,Q.lineHeight/q))}getPixelForValue($){return $===null?NaN:this.getPixelForDecimal(($-this._startValue)/this._valueRange)}getValueForPixel($){return this._startValue+this.getDecimalForPixel($)*this._valueRange}}var d5=($)=>Math.floor(N1($)),z2=($,J)=>Math.pow(10,d5($)+J);function wq($){return $/Math.pow(10,d5($))===1}function Bq($,J,Z){let q=Math.pow(10,Z),Q=Math.floor($/q);return Math.ceil(J/q)-Q}function nG($,J){let Z=J-$,q=d5(Z);while(Bq($,J,q)>10)q++;while(Bq($,J,q)<10)q--;return Math.min(q,d5($))}function aG($,{min:J,max:Z}){J=u0($.min,J);let q=[],Q=d5(J),Y=nG(J,Z),X=Y<0?Math.pow(10,Math.abs(Y)):1,K=Math.pow(10,Y),G=Q>Y?Math.pow(10,Q):0,w=Math.round((J-G)*X)/X,B=Math.floor((J-G)/K/10)*K*10,M=Math.floor((w-B)/Math.pow(10,Y)),T=u0($.min,Math.round((G+B+M*Math.pow(10,Y))*X)/X);while(T<Z){if(q.push({value:T,major:wq(T),significand:M}),M>=10)M=M<15?15:20;else M++;if(M>=20)Y++,M=2,X=Y>=0?1:X;T=Math.round((G+B+M*Math.pow(10,Y))*X)/X}let z=u0($.max,T);return q.push({value:z,major:wq(z),significand:M}),q}class tG extends W2{static id="logarithmic";static defaults={ticks:{callback:N5.formatters.logarithmic,major:{enabled:!0}}};constructor($){super($);this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse($,J){let Z=p5.prototype.parse.apply(this,[$,J]);if(Z===0){this._zero=!0;return}return z0(Z)&&Z>0?Z:null}determineDataLimits(){let{min:$,max:J}=this.getMinMax(!0);if(this.min=z0($)?Math.max(0,$):null,this.max=z0(J)?Math.max(0,J):null,this.options.beginAtZero)this._zero=!0;if(this._zero&&this.min!==this._suggestedMin&&!z0(this._userMin))this.min=$===z2(this.min,0)?z2(this.min,-1):z2(this.min,0);this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:$,maxDefined:J}=this.getUserBounds(),Z=this.min,q=this.max,Q=(X)=>Z=$?Z:X,Y=(X)=>q=J?q:X;if(Z===q)if(Z<=0)Q(1),Y(10);else Q(z2(Z,-1)),Y(z2(q,1));if(Z<=0)Q(z2(q,-1));if(q<=0)Y(z2(Z,1));this.min=Z,this.max=q}buildTicks(){let $=this.options,J={min:this._userMin,max:this._userMax},Z=aG(J,this);if($.bounds==="ticks")G6(Z,this,"value");if($.reverse)Z.reverse(),this.start=this.max,this.end=this.min;else this.start=this.min,this.end=this.max;return Z}getLabelForValue($){return $===void 0?"0":C5($,this.chart.options.locale,this.options.ticks.format)}configure(){let $=this.min;super.configure(),this._startValue=N1($),this._valueRange=N1(this.max)-N1($)}getPixelForValue($){if($===void 0||$===0)$=this.min;if($===null||isNaN($))return NaN;return this.getPixelForDecimal($===this.min?0:(N1($)-this._startValue)/this._valueRange)}getValueForPixel($){let J=this.getDecimalForPixel($);return Math.pow(10,this._startValue+J*this._valueRange)}}function c6($){let J=$.ticks;if(J.display&&$.display){let Z=E0(J.backdropPadding);return s(J.font&&J.font.size,W0.font.size)+Z.height}return 0}function eG($,J,Z){return Z=M0(Z)?Z:[Z],{w:GZ($,J.string,Z),h:Z.length*J.lineHeight}}function Mq($,J,Z,q,Q){if($===q||$===Q)return{start:J-Z/2,end:J+Z/2};else if($<q||$>Q)return{start:J-Z,end:J};return{start:J,end:J+Z}}function $w($){let J={l:$.left+$._padding.left,r:$.right-$._padding.right,t:$.top+$._padding.top,b:$.bottom-$._padding.bottom},Z=Object.assign({},J),q=[],Q=[],Y=$._pointLabels.length,X=$.options.pointLabels,K=X.centerPointLabels?$0/Y:0;for(let G=0;G<Y;G++){let w=X.setContext($.getPointLabelContext(G));Q[G]=w.padding;let B=$.getPointPosition(G,$.drawingArea+Q[G],K),M=A0(w.font),T=eG($.ctx,M,$._pointLabels[G]);q[G]=T;let z=b0($.getIndexAngle(G)+K),H=Math.round(Q8(z)),W=Mq(H,B.x,T.w,0,180),F=Mq(H,B.y,T.h,90,270);Jw(Z,J,z,W,F)}$.setCenterPoint(J.l-Z.l,Z.r-J.r,J.t-Z.t,Z.b-J.b),$._pointLabelItems=Qw($,q,Q)}function Jw($,J,Z,q,Q){let Y=Math.abs(Math.sin(Z)),X=Math.abs(Math.cos(Z)),K=0,G=0;if(q.start<J.l)K=(J.l-q.start)/Y,$.l=Math.min($.l,J.l-K);else if(q.end>J.r)K=(q.end-J.r)/Y,$.r=Math.max($.r,J.r+K);if(Q.start<J.t)G=(J.t-Q.start)/X,$.t=Math.min($.t,J.t-G);else if(Q.end>J.b)G=(Q.end-J.b)/X,$.b=Math.max($.b,J.b+G)}function Zw($,J,Z){let q=$.drawingArea,{extra:Q,additionalAngle:Y,padding:X,size:K}=Z,G=$.getPointPosition(J,q+Q+X,Y),w=Math.round(Q8(b0(G.angle+j0))),B=Uw(G.y,K.h,w),M=Yw(w),T=Xw(G.x,K.w,M);return{visible:!0,x:G.x,y:B,textAlign:M,left:T,top:B,right:T+K.w,bottom:B+K.h}}function qw($,J){if(!J)return!0;let{left:Z,top:q,right:Q,bottom:Y}=$;return!(B1({x:Z,y:q},J)||B1({x:Z,y:Y},J)||B1({x:Q,y:q},J)||B1({x:Q,y:Y},J))}function Qw($,J,Z){let q=[],Q=$._pointLabels.length,Y=$.options,{centerPointLabels:X,display:K}=Y.pointLabels,G={extra:c6(Y)/2,additionalAngle:X?$0/Q:0},w;for(let B=0;B<Q;B++){G.padding=Z[B],G.size=J[B];let M=Zw($,B,G);if(q.push(M),K==="auto"){if(M.visible=qw(M,w),M.visible)w=M}}return q}function Yw($){if($===0||$===180)return"center";else if($<180)return"left";return"right"}function Xw($,J,Z){if(Z==="right")$-=J;else if(Z==="center")$-=J/2;return $}function Uw($,J,Z){if(Z===90||Z===270)$-=J/2;else if(Z>270||Z<90)$-=J;return $}function Kw($,J,Z){let{left:q,top:Q,right:Y,bottom:X}=Z,{backdropColor:K}=J;if(!J0(K)){let G=B2(J.borderRadius),w=E0(J.backdropPadding);$.fillStyle=K;let B=q-w.left,M=Q-w.top,T=Y-q+w.width,z=X-Q+w.height;if(Object.values(G).some((H)=>H!==0))$.beginPath(),k5($,{x:B,y:M,w:T,h:z,radius:G}),$.fill();else $.fillRect(B,M,T,z)}}function Gw($,J){let{ctx:Z,options:{pointLabels:q}}=$;for(let Q=J-1;Q>=0;Q--){let Y=$._pointLabelItems[Q];if(!Y.visible)continue;let X=q.setContext($.getPointLabelContext(Q));Kw(Z,X,Y);let K=A0(X.font),{x:G,y:w,textAlign:B}=Y;w2(Z,$._pointLabels[Q],G,w+K.lineHeight/2,K,{color:X.color,textAlign:B,textBaseline:"middle"})}}function pq($,J,Z,q){let{ctx:Q}=$;if(Z)Q.arc($.xCenter,$.yCenter,J,0,w0);else{let Y=$.getPointPosition(0,J);Q.moveTo(Y.x,Y.y);for(let X=1;X<q;X++)Y=$.getPointPosition(X,J),Q.lineTo(Y.x,Y.y)}}function ww($,J,Z,q,Q){let Y=$.ctx,X=J.circular,{color:K,lineWidth:G}=J;if(!X&&!q||!K||!G||Z<0)return;Y.save(),Y.strokeStyle=K,Y.lineWidth=G,Y.setLineDash(Q.dash||[]),Y.lineDashOffset=Q.dashOffset,Y.beginPath(),pq($,Z,X,q),Y.closePath(),Y.stroke(),Y.restore()}function Bw($,J,Z){return O1($,{label:Z,index:J,type:"pointLabel"})}class Mw extends p5{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:N5.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback($){return $},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor($){super($);this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let $=this._padding=E0(c6(this.options)/2),J=this.width=this.maxWidth-$.width,Z=this.height=this.maxHeight-$.height;this.xCenter=Math.floor(this.left+J/2+$.left),this.yCenter=Math.floor(this.top+Z/2+$.top),this.drawingArea=Math.floor(Math.min(J,Z)/2)}determineDataLimits(){let{min:$,max:J}=this.getMinMax(!1);this.min=z0($)&&!isNaN($)?$:0,this.max=z0(J)&&!isNaN(J)?J:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/c6(this.options))}generateTickLabels($){p5.prototype.generateTickLabels.call(this,$),this._pointLabels=this.getLabels().map((J,Z)=>{let q=U0(this.options.pointLabels.callback,[J,Z],this);return q||q===0?q:""}).filter((J,Z)=>this.chart.getDataVisibility(Z))}fit(){let $=this.options;if($.display&&$.pointLabels.display)$w(this);else this.setCenterPoint(0,0,0,0)}setCenterPoint($,J,Z,q){this.xCenter+=Math.floor(($-J)/2),this.yCenter+=Math.floor((Z-q)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max($,J,Z,q))}getIndexAngle($){let J=w0/(this._pointLabels.length||1),Z=this.options.startAngle||0;return b0($*J+K1(Z))}getDistanceFromCenterForValue($){if(J0($))return NaN;let J=this.drawingArea/(this.max-this.min);if(this.options.reverse)return(this.max-$)*J;return($-this.min)*J}getValueForDistanceFromCenter($){if(J0($))return NaN;let J=$/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-J:this.min+J}getPointLabelContext($){let J=this._pointLabels||[];if($>=0&&$<J.length){let Z=J[$];return Bw(this.getContext(),$,Z)}}getPointPosition($,J,Z=0){let q=this.getIndexAngle($)-j0+Z;return{x:Math.cos(q)*J+this.xCenter,y:Math.sin(q)*J+this.yCenter,angle:q}}getPointPositionForValue($,J){return this.getPointPosition($,this.getDistanceFromCenterForValue(J))}getBasePosition($){return this.getPointPositionForValue($||0,this.getBaseValue())}getPointLabelPosition($){let{left:J,top:Z,right:q,bottom:Q}=this._pointLabelItems[$];return{left:J,top:Z,right:q,bottom:Q}}drawBackground(){let{backgroundColor:$,grid:{circular:J}}=this.options;if($){let Z=this.ctx;Z.save(),Z.beginPath(),pq(this,this.getDistanceFromCenterForValue(this._endValue),J,this._pointLabels.length),Z.closePath(),Z.fillStyle=$,Z.fill(),Z.restore()}}drawGrid(){let $=this.ctx,J=this.options,{angleLines:Z,grid:q,border:Q}=J,Y=this._pointLabels.length,X,K,G;if(J.pointLabels.display)Gw(this,Y);if(q.display)this.ticks.forEach((w,B)=>{if(B!==0||B===0&&this.min<0){K=this.getDistanceFromCenterForValue(w.value);let M=this.getContext(B),T=q.setContext(M),z=Q.setContext(M);ww(this,T,K,Y,z)}});if(Z.display){$.save();for(X=Y-1;X>=0;X--){let w=Z.setContext(this.getPointLabelContext(X)),{color:B,lineWidth:M}=w;if(!M||!B)continue;$.lineWidth=M,$.strokeStyle=B,$.setLineDash(w.borderDash),$.lineDashOffset=w.borderDashOffset,K=this.getDistanceFromCenterForValue(J.reverse?this.min:this.max),G=this.getPointPosition(X,K),$.beginPath(),$.moveTo(this.xCenter,this.yCenter),$.lineTo(G.x,G.y),$.stroke()}$.restore()}}drawBorder(){}drawLabels(){let $=this.ctx,J=this.options,Z=J.ticks;if(!Z.display)return;let q=this.getIndexAngle(0),Q,Y;$.save(),$.translate(this.xCenter,this.yCenter),$.rotate(q),$.textAlign="center",$.textBaseline="middle",this.ticks.forEach((X,K)=>{if(K===0&&this.min>=0&&!J.reverse)return;let G=Z.setContext(this.getContext(K)),w=A0(G.font);if(Q=this.getDistanceFromCenterForValue(this.ticks[K].value),G.showLabelBackdrop){$.font=w.string,Y=$.measureText(X.label).width,$.fillStyle=G.backdropColor;let B=E0(G.backdropPadding);$.fillRect(-Y/2-B.left,-Q-w.size/2-B.top,Y+B.width,w.size+B.height)}w2($,X.label,0,-Q,w,{color:G.color,strokeColor:G.textStrokeColor,strokeWidth:G.textStrokeWidth})}),$.restore()}drawTitle(){}}var P8={millisecond:{common:!0,size:1,steps:1000},second:{common:!0,size:1000,steps:60},minute:{common:!0,size:60000,steps:60},hour:{common:!0,size:3600000,steps:24},day:{common:!0,size:86400000,steps:30},week:{common:!1,size:604800000,steps:4},month:{common:!0,size:2628000000,steps:12},quarter:{common:!1,size:7884000000,steps:4},year:{common:!0,size:31540000000}},p0=Object.keys(P8);function Tq($,J){return $-J}function zq($,J){if(J0(J))return null;let Z=$._adapter,{parser:q,round:Q,isoWeekday:Y}=$._parseOpts,X=J;if(typeof q==="function")X=q(X);if(!z0(X))X=typeof q==="string"?Z.parse(X,q):Z.parse(X);if(X===null)return null;if(Q)X=Q==="week"&&(m2(Y)||Y===!0)?Z.startOf(X,"isoWeek",Y):Z.startOf(X,Q);return+X}function Wq($,J,Z,q){let Q=p0.length;for(let Y=p0.indexOf($);Y<Q-1;++Y){let X=P8[p0[Y]],K=X.steps?X.steps:Number.MAX_SAFE_INTEGER;if(X.common&&Math.ceil((Z-J)/(K*X.size))<=q)return p0[Y]}return p0[Q-1]}function Tw($,J,Z,q,Q){for(let Y=p0.length-1;Y>=p0.indexOf(Z);Y--){let X=p0[Y];if(P8[X].common&&$._adapter.diff(Q,q,X)>=J-1)return X}return p0[Z?p0.indexOf(Z):0]}function zw($){for(let J=p0.indexOf($)+1,Z=p0.length;J<Z;++J)if(P8[p0[J]].common)return p0[J]}function Hq($,J,Z){if(!Z)$[J]=!0;else if(Z.length){let{lo:q,hi:Q}=Y8(Z,J),Y=Z[q]>=J?Z[q]:Z[Q];$[Y]=!0}}function Ww($,J,Z,q){let Q=$._adapter,Y=+Q.startOf(J[0].value,q),X=J[J.length-1].value,K,G;for(K=Y;K<=X;K=+Q.add(K,1,q))if(G=Z[K],G>=0)J[G].major=!0;return J}function Fq($,J,Z){let q=[],Q={},Y=J.length,X,K;for(X=0;X<Y;++X)K=J[X],Q[K]=X,q.push({value:K,major:!1});return Y===0||!Z?q:Ww($,q,Q,Z)}class r6 extends W2{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor($){super($);this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init($,J={}){let Z=$.time||($.time={}),q=this._adapter=new nU._date($.adapters.date);q.init(J),h2(Z.displayFormats,q.formats()),this._parseOpts={parser:Z.parser,round:Z.round,isoWeekday:Z.isoWeekday},super.init($),this._normalized=J.normalized}parse($,J){if($===void 0)return null;return zq(this,$)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let $=this.options,J=this._adapter,Z=$.time.unit||"day",{min:q,max:Q,minDefined:Y,maxDefined:X}=this.getUserBounds();function K(G){if(!Y&&!isNaN(G.min))q=Math.min(q,G.min);if(!X&&!isNaN(G.max))Q=Math.max(Q,G.max)}if(!Y||!X){if(K(this._getLabelBounds()),$.bounds!=="ticks"||$.ticks.source!=="labels")K(this.getMinMax(!1))}q=z0(q)&&!isNaN(q)?q:+J.startOf(Date.now(),Z),Q=z0(Q)&&!isNaN(Q)?Q:+J.endOf(Date.now(),Z)+1,this.min=Math.min(q,Q-1),this.max=Math.max(q+1,Q)}_getLabelBounds(){let $=this.getLabelTimestamps(),J=Number.POSITIVE_INFINITY,Z=Number.NEGATIVE_INFINITY;if($.length)J=$[0],Z=$[$.length-1];return{min:J,max:Z}}buildTicks(){let $=this.options,J=$.time,Z=$.ticks,q=Z.source==="labels"?this.getLabelTimestamps():this._generate();if($.bounds==="ticks"&&q.length)this.min=this._userMin||q[0],this.max=this._userMax||q[q.length-1];let Q=this.min,Y=this.max,X=eJ(q,Q,Y);if(this._unit=J.unit||(Z.autoSkip?Wq(J.minUnit,this.min,this.max,this._getLabelCapacity(Q)):Tw(this,X.length,J.minUnit,this.min,this.max)),this._majorUnit=!Z.major.enabled||this._unit==="year"?void 0:zw(this._unit),this.initOffsets(q),$.reverse)X.reverse();return Fq(this,X,this._majorUnit)}afterAutoSkip(){if(this.options.offsetAfterAutoskip)this.initOffsets(this.ticks.map(($)=>+$.value))}initOffsets($=[]){let J=0,Z=0,q,Q;if(this.options.offset&&$.length){if(q=this.getDecimalForValue($[0]),$.length===1)J=1-q;else J=(this.getDecimalForValue($[1])-q)/2;if(Q=this.getDecimalForValue($[$.length-1]),$.length===1)Z=Q;else Z=(Q-this.getDecimalForValue($[$.length-2]))/2}let Y=$.length<3?0.5:0.25;J=y0(J,0,Y),Z=y0(Z,0,Y),this._offsets={start:J,end:Z,factor:1/(J+1+Z)}}_generate(){let $=this._adapter,J=this.min,Z=this.max,q=this.options,Q=q.time,Y=Q.unit||Wq(Q.minUnit,J,Z,this._getLabelCapacity(J)),X=s(q.ticks.stepSize,1),K=Y==="week"?Q.isoWeekday:!1,G=m2(K)||K===!0,w={},B=J,M,T;if(G)B=+$.startOf(B,"isoWeek",K);if(B=+$.startOf(B,G?"day":Y),$.diff(Z,J,Y)>1e5*X)throw new Error(J+" and "+Z+" are too far apart with stepSize of "+X+" "+Y);let z=q.ticks.source==="data"&&this.getDataTimestamps();for(M=B,T=0;M<Z;M=+$.add(M,X,Y),T++)Hq(w,M,z);if(M===Z||q.bounds==="ticks"||T===1)Hq(w,M,z);return Object.keys(w).sort(Tq).map((H)=>+H)}getLabelForValue($){let J=this._adapter,Z=this.options.time;if(Z.tooltipFormat)return J.format($,Z.tooltipFormat);return J.format($,Z.displayFormats.datetime)}format($,J){let q=this.options.time.displayFormats,Q=this._unit,Y=J||q[Q];return this._adapter.format($,Y)}_tickFormatFunction($,J,Z,q){let Q=this.options,Y=Q.ticks.callback;if(Y)return U0(Y,[$,J,Z],this);let X=Q.time.displayFormats,K=this._unit,G=this._majorUnit,w=K&&X[K],B=G&&X[G],M=Z[J],T=G&&B&&M&&M.major;return this._adapter.format($,q||(T?B:w))}generateTickLabels($){let J,Z,q;for(J=0,Z=$.length;J<Z;++J)q=$[J],q.label=this._tickFormatFunction(q.value,J,$)}getDecimalForValue($){return $===null?NaN:($-this.min)/(this.max-this.min)}getPixelForValue($){let J=this._offsets,Z=this.getDecimalForValue($);return this.getPixelForDecimal((J.start+Z)*J.factor)}getValueForPixel($){let J=this._offsets,Z=this.getDecimalForPixel($)/J.factor-J.end;return this.min+Z*(this.max-this.min)}_getLabelSize($){let J=this.options.ticks,Z=this.ctx.measureText($).width,q=K1(this.isHorizontal()?J.maxRotation:J.minRotation),Q=Math.cos(q),Y=Math.sin(q),X=this._resolveTickFontOptions(0).size;return{w:Z*Q+X*Y,h:Z*Y+X*Q}}_getLabelCapacity($){let J=this.options.time,Z=J.displayFormats,q=Z[J.unit]||Z.millisecond,Q=this._tickFormatFunction($,0,Fq(this,[$],this._majorUnit),q),Y=this._getLabelSize(Q),X=Math.floor(this.isHorizontal()?this.width/Y.w:this.height/Y.h)-1;return X>0?X:1}getDataTimestamps(){let $=this._cache.data||[],J,Z;if($.length)return $;let q=this.getMatchingVisibleMetas();if(this._normalized&&q.length)return this._cache.data=q[0].controller.getAllParsedValues(this);for(J=0,Z=q.length;J<Z;++J)$=$.concat(q[J].controller.getAllParsedValues(this));return this._cache.data=this.normalize($)}getLabelTimestamps(){let $=this._cache.labels||[],J,Z;if($.length)return $;let q=this.getLabels();for(J=0,Z=q.length;J<Z;++J)$.push(zq(this,q[J]));return this._cache.labels=this._normalized?$:this.normalize($)}normalize($){return ZZ($.sort(Tq))}}function F8($,J,Z){let q=0,Q=$.length-1,Y,X,K,G;if(Z){if(J>=$[q].pos&&J<=$[Q].pos)({lo:q,hi:Q}=c1($,"pos",J));({pos:Y,time:K}=$[q]),{pos:X,time:G}=$[Q]}else{if(J>=$[q].time&&J<=$[Q].time)({lo:q,hi:Q}=c1($,"time",J));({time:Y,pos:K}=$[q]),{time:X,pos:G}=$[Q]}let w=X-Y;return w?K+(G-K)*(J-Y)/w:K}class Hw extends r6{static id="timeseries";static defaults=r6.defaults;constructor($){super($);this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let $=this._getTimestampsForTable(),J=this._table=this.buildLookupTable($);this._minPos=F8(J,this.min),this._tableRange=F8(J,this.max)-this._minPos,super.initOffsets($)}buildLookupTable($){let{min:J,max:Z}=this,q=[],Q=[],Y,X,K,G,w;for(Y=0,X=$.length;Y<X;++Y)if(G=$[Y],G>=J&&G<=Z)q.push(G);if(q.length<2)return[{time:J,pos:0},{time:Z,pos:1}];for(Y=0,X=q.length;Y<X;++Y)if(w=q[Y+1],K=q[Y-1],G=q[Y],Math.round((w+K)/2)!==G)Q.push({time:G,pos:Y/(X-1)});return Q}_generate(){let $=this.min,J=this.max,Z=super.getDataTimestamps();if(!Z.includes($)||!Z.length)Z.splice(0,0,$);if(!Z.includes(J)||Z.length===1)Z.push(J);return Z.sort((q,Q)=>q-Q)}_getTimestampsForTable(){let $=this._cache.all||[];if($.length)return $;let J=this.getDataTimestamps(),Z=this.getLabelTimestamps();if(J.length&&Z.length)$=this.normalize(J.concat(Z));else $=J.length?J:Z;return $=this._cache.all=$,$}getDecimalForValue($){return(F8(this._table,$)-this._minPos)/this._tableRange}getValueForPixel($){let J=this._offsets,Z=this.getDecimalForPixel($)/J.factor-J.end;return F8(this._table,Z*this._tableRange+this._minPos,!0)}}H2.register(l6,c2,t6,J7,$7,gq,o6,a6,mq,uq);var r5=60;function s5($){return getComputedStyle(document.documentElement).getPropertyValue($).trim()}function I8($=1){let J=s5("--color-primary");if(!J)return`rgba(139,92,246,${$})`;return`oklch(${J} / ${$})`}function G1($=1){let J=s5("--color-muted");if(!J)return`rgba(100,100,100,${$})`;return`oklch(${J} / ${$})`}function Fw($=1){let J=s5("--color-destructive");if(!J)return`rgba(239,68,68,${$})`;return`oklch(${J} / ${$})`}function cq($=1){let J=s5("--color-warning");if(!J)return`rgba(234,179,8,${$})`;return`oklch(${J} / ${$})`}function rq($=1){let J=s5("--color-success");if(!J)return`rgba(34,197,94,${$})`;return`oklch(${J} / ${$})`}function dq($,J=1){if($>90)return Fw(J);if($>70)return cq(J);return rq(J)}var jw=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("circle",{cx:"12",cy:"12",r:"10"}),U("polyline",{points:"12 6 12 12 16 14"})),Rw=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),U("circle",{cx:"9",cy:"7",r:"4"}),U("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),U("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})),_w=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),U("polyline",{points:"17 6 23 6 23 12"})),Dw=()=>U("svg",{class:"size-8 text-muted-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},U("polygon",{points:"5 3 19 12 5 21 5 3"}));class Z7 extends N{pollTimer=null;viewerChart=null;cpuGauge=null;memGauge=null;diskGauge=null;resourceChart=null;viewerCanvasRef=null;cpuCanvasRef=null;memCanvasRef=null;diskCanvasRef=null;resourceCanvasRef=null;state={status:null,hardware:null,loading:!0,error:null,viewerHistory:[],cpuHistory:[],memHistory:[],diskHistory:[],labels:[]};componentDidMount(){this.loadData(),this.pollTimer=setInterval(()=>this.loadData(),5000)}componentWillUnmount(){if(this.pollTimer)clearInterval(this.pollTimer);this.destroyCharts()}destroyCharts(){this.viewerChart?.destroy(),this.viewerChart=null,this.cpuGauge?.destroy(),this.cpuGauge=null,this.memGauge?.destroy(),this.memGauge=null,this.diskGauge?.destroy(),this.diskGauge=null,this.resourceChart?.destroy(),this.resourceChart=null}async loadData(){try{let[$,J]=await Promise.all([y.admin.getStatus(this.props.token),y.admin.getHardware(this.props.token).catch(()=>null)]),Z=$,q=J,Q=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),Y=[...this.state.viewerHistory,Z?.viewerCount||0].slice(-r5),X=q?.cpu?.[0]?.percent!=null?Math.round(q.cpu[0].percent):0,K=q?.memory?Math.round(q.memory.percent):0,G=q?.disk?Math.round(q.disk.percent):0,w=[...this.state.cpuHistory,X].slice(-r5),B=[...this.state.memHistory,K].slice(-r5),M=[...this.state.diskHistory,G].slice(-r5),T=[...this.state.labels,Q].slice(-r5);this.setState({status:$,hardware:J,loading:!1,error:null,viewerHistory:Y,cpuHistory:w,memHistory:B,diskHistory:M,labels:T},()=>{this.updateCharts()})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load",loading:!1})}}updateCharts(){let{viewerHistory:$,cpuHistory:J,memHistory:Z,diskHistory:q,labels:Q,status:Y,hardware:X}=this.state;if((Y?.online||!1)&&this.viewerCanvasRef)if(!this.viewerChart)this.viewerChart=new H2(this.viewerCanvasRef,{type:"line",data:{labels:Q,datasets:[{label:"Viewers",data:$,borderColor:I8(1),backgroundColor:I8(0.1),borderWidth:2,fill:!0,tension:0.4,pointRadius:0,pointHoverRadius:4,pointHoverBackgroundColor:I8(1)}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:300},interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",titleFont:{size:11},bodyFont:{size:11},padding:8,cornerRadius:6}},scales:{x:{display:!0,grid:{color:G1(0.1)},ticks:{color:G1(0.5),font:{size:9},maxTicksLimit:8}},y:{display:!0,beginAtZero:!0,grid:{color:G1(0.1)},ticks:{color:G1(0.5),font:{size:10},stepSize:1,callback:(B)=>Number.isInteger(B)?B:""}}}}});else this.viewerChart.data.labels=Q,this.viewerChart.data.datasets[0].data=$,this.viewerChart.update("none");if(X&&this.resourceCanvasRef)if(!this.resourceChart)this.resourceChart=new H2(this.resourceCanvasRef,{type:"line",data:{labels:Q,datasets:[{label:"CPU",data:J,borderColor:I8(0.9),backgroundColor:"transparent",borderWidth:1.5,tension:0.3,pointRadius:0},{label:"Memory",data:Z,borderColor:cq(0.9),backgroundColor:"transparent",borderWidth:1.5,tension:0.3,pointRadius:0},{label:"Disk",data:q,borderColor:rq(0.9),backgroundColor:"transparent",borderWidth:1.5,tension:0.3,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:300},interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"bottom",labels:{color:G1(0.7),font:{size:10},boxWidth:12,boxHeight:2,padding:12}},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",titleFont:{size:11},bodyFont:{size:11},padding:8,cornerRadius:6,callbacks:{label:(B)=>`${B.dataset.label}: ${B.parsed.y}%`}}},scales:{x:{display:!0,grid:{color:G1(0.1)},ticks:{color:G1(0.5),font:{size:9},maxTicksLimit:8}},y:{display:!0,min:0,max:100,grid:{color:G1(0.1)},ticks:{color:G1(0.5),font:{size:10},stepSize:25,callback:(B)=>`${B}%`}}}}});else this.resourceChart.data.labels=Q,this.resourceChart.data.datasets[0].data=J,this.resourceChart.data.datasets[1].data=Z,this.resourceChart.data.datasets[2].data=q,this.resourceChart.update("none");let w=X;if(w){let B=w.cpu?.[0]?.percent!=null?Math.round(w.cpu[0].percent):0,M=w.memory?Math.round(w.memory.percent):0,T=w.disk?Math.round(w.disk.percent):0;this.updateGauge("cpu",this.cpuCanvasRef,B),this.updateGauge("mem",this.memCanvasRef,M),this.updateGauge("disk",this.diskCanvasRef,T)}}updateGauge($,J,Z){if(!J)return;let q=$==="cpu"?"cpuGauge":$==="mem"?"memGauge":"diskGauge",Q=this[q];if(!Q)this[q]=new H2(J,{type:"doughnut",data:{datasets:[{data:[Z,100-Z],backgroundColor:[dq(Z,0.8),G1(0.15)],borderWidth:0,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!0,cutout:"75%",rotation:-90,circumference:180,animation:{duration:400,easing:"easeOutQuart"},plugins:{legend:{display:!1},tooltip:{enabled:!1}}}});else Q.data.datasets[0].data=[Z,100-Z],Q.data.datasets[0].backgroundColor=[dq(Z,0.8),G1(0.15)],Q.update("none")}renderOnlineState($){let J=$?.viewerCount||0,Z=$?.sessionPeakViewerCount||0,q=$?.lastConnectTime,Q=$?.broadcaster,Y=Q?.streamDetails;return U("div",{class:"space-y-6"},U("div",{class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},U(v,null,U(x,null,U(l,{className:"flex items-center gap-1.5"},U(jw,null),"Stream started"),U(d,{className:"text-2xl tabular-nums"},q?c0(q):"Just now"))),U(v,null,U(x,null,U(l,{className:"flex items-center gap-1.5"},U(Rw,null),"Current viewers"),U(d,{className:"text-2xl tabular-nums"},J))),U(v,null,U(x,null,U(l,{className:"flex items-center gap-1.5"},U(_w,null),"Session peak"),U(d,{className:"text-2xl tabular-nums"},Z)))),U(v,null,U(x,null,U(d,null,"Viewers Over Time"),U(l,null,"Real-time viewer count  updates every 5s")),U(m,null,U("div",{style:{height:"220px"}},U("canvas",{ref:(X)=>{this.viewerCanvasRef=X}})))),U("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},U(v,null,U(x,null,U(d,null,"Inbound Stream"),U(l,null,"Details from the broadcasting source")),U(m,null,U("div",{class:"space-y-2"},Q?.remoteAddr&&U("div",{class:"flex justify-between text-sm"},U("span",{class:"text-muted-foreground"},"Source"),U("span",{class:"font-mono text-foreground"},Q.remoteAddr)),Y&&U(e2,null,U(N0,null),U("div",{class:"flex justify-between text-sm"},U("span",{class:"text-muted-foreground"},"Video"),U("span",{class:"text-foreground"},Y.videoCodec,"  ",Y.videoBitrate," kbps")),U("div",{class:"flex justify-between text-sm"},U("span",{class:"text-muted-foreground"},"Resolution"),U("span",{class:"text-foreground"},Y.width,"",Y.height," @ ",Y.framerate,"fps")),U("div",{class:"flex justify-between text-sm"},U("span",{class:"text-muted-foreground"},"Audio"),U("span",{class:"text-foreground"},Y.audioCodec,"  ",Y.audioBitrate," kbps"))),!Y&&!Q?.remoteAddr&&U("p",{class:"text-sm text-muted-foreground italic"},"No stream details available")))),this.renderHardwareGauges()),this.state.hardware&&U(v,null,U(x,null,U(d,null,"Resource History"),U(l,null,"CPU, memory, and disk usage over time")),U(m,null,U("div",{style:{height:"200px"}},U("canvas",{ref:(X)=>{this.resourceCanvasRef=X}})))))}renderOfflineState($){let J=$?.lastDisconnectTime;return U("div",{class:"space-y-6"},U(v,null,U(m,{className:"py-12"},U("div",{class:"flex flex-col items-center text-center"},U("div",{class:"flex size-12 items-center justify-center rounded-full bg-muted mb-4"},U(Dw,null)),U("h3",{class:"text-lg font-semibold"},"No active stream"),U("p",{class:"text-sm text-muted-foreground mt-1 mb-2 max-w-sm"},"Start streaming to see your dashboard come alive with real-time charts and stats."),J&&U(h,{variant:"outline",className:"mt-1"},"Last stream ended ",c0(J))))),U("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4"},U(v,null,U(x,null,U(d,null,"Broadcasting Software"),U(l,null,"Get started with OBS or Streamlabs")),U(m,null,U("p",{class:"text-sm text-muted-foreground leading-relaxed"},"Point your streaming software to your server's RTMP endpoint to begin broadcasting."))),U(v,null,U(x,null,U(d,null,"Stream Key"),U(l,null,"Found in Video configuration")),U(m,null,U("p",{class:"text-sm text-muted-foreground leading-relaxed"},"Your stream key is in the Video tab. Keep it secret  anyone with the key can stream to your server.")))),this.renderHardwareGauges(),this.state.hardware&&U(v,null,U(x,null,U(d,null,"Resource History"),U(l,null,"CPU, memory, and disk usage over time")),U(m,null,U("div",{style:{height:"200px"}},U("canvas",{ref:(Z)=>{this.resourceCanvasRef=Z}})))))}renderHardwareGauges(){let{hardware:$}=this.state;if(!$)return null;let J=$,Z=J.cpu?.[0]?.percent!=null?Math.round(J.cpu[0].percent):0,q=J.memory?Math.round(J.memory.percent):0,Q=J.disk?Math.round(J.disk.percent):0;return U(v,null,U(x,null,U(d,null,"System Resources"),U(l,null,J.cpu?.[0]?.modelName||"Server hardware")),U(m,null,U("div",{class:"grid grid-cols-3 gap-4"},U("div",{class:"flex flex-col items-center"},U("div",{class:"relative",style:{width:"100px",height:"60px"}},U("canvas",{ref:(Y)=>{this.cpuCanvasRef=Y}}),U("div",{class:"absolute inset-x-0 bottom-0 text-center"},U("span",{class:_("text-lg font-bold tabular-nums",Z>90?"text-destructive":"")},Z,"%"))),U("span",{class:"text-xs text-muted-foreground mt-1"},"CPU")),U("div",{class:"flex flex-col items-center"},U("div",{class:"relative",style:{width:"100px",height:"60px"}},U("canvas",{ref:(Y)=>{this.memCanvasRef=Y}}),U("div",{class:"absolute inset-x-0 bottom-0 text-center"},U("span",{class:_("text-lg font-bold tabular-nums",q>90?"text-destructive":"")},q,"%"))),U("span",{class:"text-xs text-muted-foreground mt-1"},"Memory")),U("div",{class:"flex flex-col items-center"},U("div",{class:"relative",style:{width:"100px",height:"60px"}},U("canvas",{ref:(Y)=>{this.diskCanvasRef=Y}}),U("div",{class:"absolute inset-x-0 bottom-0 text-center"},U("span",{class:_("text-lg font-bold tabular-nums",Q>90?"text-destructive":"")},Q,"%"))),U("span",{class:"text-xs text-muted-foreground mt-1"},"Disk")))))}render(){let{status:$,loading:J,error:Z}=this.state;if(J)return U("div",{class:"space-y-4"},U(p,{className:"h-8 w-48"}),U("div",{class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},U(p,{className:"h-24 rounded-xl"}),U(p,{className:"h-24 rounded-xl"}),U(p,{className:"h-24 rounded-xl"})),U(p,{className:"h-64 rounded-xl"}),U("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},U(p,{className:"h-48 rounded-xl"}),U(p,{className:"h-48 rounded-xl"})));if(Z)return U(H0,{variant:"destructive"},U(F0,null,Z));let q=$,Q=q?.online||!1;return U("div",null,U("div",{class:"mb-6"},U("h1",{class:"text-2xl font-bold tracking-tight"},"Dashboard"),U("p",{class:"text-sm text-muted-foreground mt-1"},Q?"Your stream is live.":"Server overview and quick actions.")),Q?this.renderOnlineState(q):this.renderOfflineState(q))}}class q7 extends N{state={loading:!0,saving:!1,error:null,name:"",streamTitle:"",summary:"",tags:"",serverURL:"",offlineMessage:"",welcomeMessage:"",extraPageContent:"",nsfw:!1,socialHandles:[],newSocialPlatform:"",newSocialURL:""};componentDidMount(){this.loadConfig()}async loadConfig(){try{let $=await y.admin.getConfig(this.props.token),J=$?.instanceDetails||{};this.setState({loading:!1,name:J.name||"",streamTitle:J.streamTitle||"",summary:J.summary||"",tags:(J.tags||[]).join(", "),serverURL:$?.yp?.instanceUrl||"",offlineMessage:J.offlineMessage||"",welcomeMessage:J.welcomeMessage||"",extraPageContent:J.extraPageContent||"",nsfw:J.nsfw||!1,socialHandles:J.socialHandles||[]})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load config",loading:!1})}}handleSave=async()=>{this.setState({saving:!0,error:null});try{let $=this.state.tags.split(",").map((J)=>J.trim()).filter(Boolean);await Promise.all([y.admin.setServerName(this.props.token,this.state.name),y.admin.setStreamTitle(this.props.token,this.state.streamTitle),y.admin.setServerSummary(this.props.token,this.state.summary),y.admin.setTags(this.props.token,$),y.admin.setOfflineMessage(this.props.token,this.state.offlineMessage),y.admin.setWelcomeMessage(this.props.token,this.state.welcomeMessage),y.admin.setNSFW(this.props.token,this.state.nsfw),y.admin.setSocialHandles(this.props.token,this.state.socialHandles),this.state.serverURL?y.admin.setServerURL(this.props.token,this.state.serverURL):Promise.resolve(),this.state.extraPageContent?y.admin.setExtraPageContent(this.props.token,this.state.extraPageContent):Promise.resolve()]),this.setState({saving:!1}),X0.success("Configuration saved",{description:"Your changes have been applied."})}catch($){let J=$ instanceof Error?$.message:"Failed to save";this.setState({saving:!1,error:J}),X0.error("Save failed",{description:J})}};handleInput=($)=>(J)=>{this.setState({[$]:J.target.value})};addSocialHandle=()=>{let $=this.state.newSocialPlatform.trim(),J=this.state.newSocialURL.trim();if(!$||!J)return;this.setState({socialHandles:[...this.state.socialHandles,{platform:$,url:J}],newSocialPlatform:"",newSocialURL:""})};removeSocialHandle=($)=>{this.setState({socialHandles:this.state.socialHandles.filter((J,Z)=>Z!==$)})};render(){let{loading:$,saving:J,error:Z,name:q,streamTitle:Q,summary:Y,tags:X,serverURL:K,offlineMessage:G,welcomeMessage:w,extraPageContent:B,nsfw:M,socialHandles:T,newSocialPlatform:z,newSocialURL:H}=this.state;if($)return U("div",{class:"max-w-3xl space-y-4"},U(p,{className:"h-8 w-64"}),U(p,{className:"h-4 w-96"}),U(p,{className:"h-64 rounded-xl"}),U(p,{className:"h-32 rounded-xl"}),U(p,{className:"h-20 rounded-xl"}));return U("div",{class:"max-w-3xl space-y-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"General Configuration"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Configure your server's public-facing information.")),Z&&U(H0,{variant:"destructive"},U(F0,null,Z)),U(v,null,U(x,null,U(d,null,"Instance Details"),U(l,null,"Basic information about your streaming server.")),U(m,null,U("div",{class:"space-y-4"},U("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4"},U("div",{class:"space-y-1.5"},U(Y0,null,"Server Name"),U(t,{type:"text",value:q,onInput:this.handleInput("name"),placeholder:"My Stream"}),U("p",{class:"text-xs text-muted-foreground"},"The public name of your server.")),U("div",{class:"space-y-1.5"},U(Y0,null,"Stream Title"),U(t,{type:"text",value:Q,onInput:this.handleInput("streamTitle"),placeholder:"What are you streaming?"}),U("p",{class:"text-xs text-muted-foreground"},"Shown when your stream is live. Can be changed while streaming."))),U("div",{class:"space-y-1.5"},U(Y0,null,"Server URL"),U(t,{type:"text",value:K,onInput:this.handleInput("serverURL"),placeholder:"https://live.mycelium.social"}),U("p",{class:"text-xs text-muted-foreground"},"The public URL of your Oni server. Used for federation and directory listing.")),U("div",{class:"space-y-1.5"},U(Y0,null,"Summary"),U(D1,{className:"min-h-[100px]",value:Y,onInput:this.handleInput("summary"),placeholder:"Tell viewers about your stream..."}),U("p",{class:"text-xs text-muted-foreground"},"A brief description shown on your stream page.")),U("div",{class:"space-y-1.5"},U(Y0,null,"Tags"),U(t,{type:"text",value:X,onInput:this.handleInput("tags"),placeholder:"gaming, music, art"}),U("p",{class:"text-xs text-muted-foreground"},"Comma-separated tags to help people discover your stream."))))),U(v,null,U(x,null,U(d,null,"Messages"),U(l,null,"Customize messages shown to viewers.")),U(m,null,U("div",{class:"space-y-4"},U("div",{class:"space-y-1.5"},U(Y0,null,"Offline Message"),U(D1,{className:"min-h-[80px]",value:G,onInput:this.handleInput("offlineMessage"),placeholder:"Custom message shown when stream is offline"}),U("p",{class:"text-xs text-muted-foreground"},"Displayed to visitors when you're not streaming.")),U(N0,null),U("div",{class:"space-y-1.5"},U(Y0,null,"Welcome Message"),U(D1,{className:"min-h-[80px]",value:w,onInput:this.handleInput("welcomeMessage"),placeholder:"Welcome to the stream!"}),U("p",{class:"text-xs text-muted-foreground"},"Shown to viewers when they first join the chat.")),U(N0,null),U("div",{class:"space-y-1.5"},U(Y0,null,"Extra Page Content"),U(D1,{className:"min-h-[100px] font-mono text-xs",value:B,onInput:this.handleInput("extraPageContent"),placeholder:"Markdown or HTML content..."}),U("p",{class:"text-xs text-muted-foreground"},"Additional content displayed below the video player. Supports Markdown."))))),U(v,null,U(x,null,U(d,null,"Social Links"),U(l,null,"Links to your social profiles shown on the stream page.")),U(m,{className:"space-y-3"},T.map((W,F)=>U("div",{key:F,class:"flex items-center gap-2"},U(h,{variant:"secondary",className:"shrink-0 capitalize"},W.platform),U("span",{class:"text-sm text-muted-foreground truncate flex-1"},W.url),U(k,{variant:"ghost",size:"icon-sm",className:"size-7 shrink-0 text-destructive/60 hover:text-destructive",onClick:()=>this.removeSocialHandle(F)},U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polyline",{points:"3 6 5 6 21 6"}),U("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}))))),U(N0,null),U("div",{class:"flex gap-2"},U(t,{type:"text",className:"w-32 text-xs",placeholder:"Platform",value:z,onInput:(W)=>this.setState({newSocialPlatform:W.target.value})}),U(t,{type:"text",className:"flex-1 text-xs",placeholder:"https://...",value:H,onInput:(W)=>this.setState({newSocialURL:W.target.value})}),U(k,{size:"sm",onClick:this.addSocialHandle,disabled:!z.trim()||!H.trim()},"Add")))),U(v,null,U(x,null,U(d,null,"Content Settings")),U(m,null,U("div",{class:"flex items-center justify-between rounded-lg border p-4"},U("div",null,U("p",{class:"text-sm font-medium"},"NSFW Content"),U("p",{class:"text-sm text-muted-foreground"},"Mark your stream as containing adult content.")),U(e0,{checked:M,onChange:(W)=>this.setState({nsfw:W})})))),U("div",{class:"flex items-center gap-4 pt-2 pb-8"},U(k,{onClick:this.handleSave,disabled:J,className:"px-8"},J?"Saving...":"Save Configuration")))}}var Lw=[{value:1,label:"Low Latency",description:"~4s delay. Best for interactive streams."},{value:2,label:"Medium",description:"~8s delay. Good balance of quality and latency."},{value:3,label:"High Quality",description:"~15s delay. Best video quality, higher latency."},{value:4,label:"Offline",description:"Optimized for VOD-style playback."}],Vw=[{value:1,label:"Fastest",description:"Lowest quality, minimal CPU"},{value:2,label:"Faster",description:"Low quality, low CPU"},{value:3,label:"Medium",description:"Balanced quality and CPU"},{value:4,label:"Slower",description:"High quality, more CPU"},{value:5,label:"Slowest",description:"Best quality, maximum CPU"}],Pw=[{label:"Source (passthrough)",width:0,height:0},{label:"1080p",width:1920,height:1080},{label:"720p",width:1280,height:720},{label:"480p",width:854,height:480},{label:"360p",width:640,height:360}];var sq=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),U("line",{x1:"5",y1:"12",x2:"19",y2:"12"})),oq=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polyline",{points:"3 6 5 6 21 6"}),U("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})),Iw=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),U("circle",{cx:"12",cy:"12",r:"3"})),Sw=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),U("line",{x1:"1",y1:"1",x2:"23",y2:"23"}));var lq=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),U("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}));function iq(){return{videoPassthrough:!1,audioPassthrough:!1,videoBitrate:1200,audioBitrate:128,scaledWidth:1280,scaledHeight:720,framerate:24,cpuUsageLevel:3}}class Q7 extends N{state={loading:!0,saving:!1,error:null,latencyLevel:2,variants:[],streamKeys:[],showStreamKeys:new Set,newKeyValue:"",newKeyComment:"",rtmpPort:1935,webPort:8080,serverURL:"",videoCodec:"",supportedCodecs:[],streamKeyOverridden:!1};componentDidMount(){this.loadConfig()}async loadConfig(){try{let $=await y.admin.getConfig(this.props.token),J=$?.videoSettings||{},q=($?.streamKeys||[]).map((Y)=>({key:Y.key||Y.Key||"",comment:Y.comment||Y.Comment||""}));if(q.length===0&&$?.streamKey)q.push({key:$.streamKey,comment:"Default"});let Q=$?.yp?.instanceUrl||window.location.origin;this.setState({loading:!1,latencyLevel:J.latencyLevel||2,variants:J.videoQualityVariants||[iq()],streamKeys:q,rtmpPort:$?.rtmpServerPort||1935,webPort:$?.webServerPort||8080,serverURL:Q,videoCodec:$?.videoCodec||"",supportedCodecs:$?.supportedCodecs||[],streamKeyOverridden:$?.streamKeyOverridden||!1})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load config",loading:!1})}}handleSave=async()=>{this.setState({saving:!0,error:null});try{await Promise.all([y.admin.setStreamLatencyLevel(this.props.token,this.state.latencyLevel),y.admin.setStreamOutputVariants(this.props.token,this.state.variants)]),this.setState({saving:!1}),X0.success("Video configuration saved",{description:"Changes will apply on next stream start."})}catch($){let J=$ instanceof Error?$.message:"Failed to save";this.setState({saving:!1,error:J}),X0.error("Save failed",{description:J})}};handleSaveStreamKeys=async()=>{try{await y.admin.setStreamKeys(this.props.token,this.state.streamKeys),X0.success("Stream keys saved")}catch($){X0.error("Failed to save stream keys")}};addStreamKey=()=>{let $=this.state.newKeyValue.trim();if(!$)return;let J=this.state.newKeyComment.trim()||`Key ${this.state.streamKeys.length+1}`;this.setState({streamKeys:[...this.state.streamKeys,{key:$,comment:J}],newKeyValue:"",newKeyComment:""},()=>this.handleSaveStreamKeys())};removeStreamKey=($)=>{let J=this.state.streamKeys.filter((Z,q)=>q!==$);this.setState({streamKeys:J},()=>this.handleSaveStreamKeys())};toggleShowKey($){let J=new Set(this.state.showStreamKeys);if(J.has($))J.delete($);else J.add($);this.setState({showStreamKeys:J})}getRtmpHost(){try{return new URL(this.state.serverURL).hostname}catch{return window.location.hostname}}handleVideoCodecChange=async($)=>{try{await y.admin.setVideoCodec(this.props.token,$),this.setState({videoCodec:$}),X0.success("Video codec updated")}catch{X0.error("Failed to update codec")}};updateVariant($,J){let Z=[...this.state.variants];Z[$]={...Z[$],...J},this.setState({variants:Z})}addVariant=()=>{this.setState({variants:[...this.state.variants,iq()]})};removeVariant=($)=>{if(this.state.variants.length<=1)return;let J=this.state.variants.filter((Z,q)=>q!==$);this.setState({variants:J})};copyToClipboard($){navigator.clipboard.writeText($).then(()=>{X0("Copied to clipboard")}).catch(()=>{})}renderVariantCard($,J){let Z=$.videoPassthrough,q=Z?"Source":$.scaledWidth===0?"Source":`${$.scaledWidth}${$.scaledHeight}`;return U(v,{key:J},U(x,null,U("div",{class:"flex items-center justify-between"},U("div",{class:"flex items-center gap-2"},U(d,null,"Output #",J+1),U(h,{variant:"secondary"},q),Z&&U(h,{variant:"outline"},"Passthrough")),this.state.variants.length>1&&U(k,{variant:"ghost",size:"icon-sm",className:"text-destructive/60 hover:text-destructive hover:bg-destructive/10",onClick:()=>this.removeVariant(J)},U(oq,null)))),U(m,null,U("div",{class:"space-y-6"},U("div",{class:"flex items-center justify-between rounded-lg border p-4"},U("div",{class:"pr-4"},U("p",{class:"text-sm font-medium"},"Video Passthrough"),U("p",{class:"text-sm text-muted-foreground mt-0.5"},"Re-use the inbound stream without re-encoding. Lowest CPU.")),U(e0,{checked:$.videoPassthrough,onChange:(Q)=>this.updateVariant(J,{videoPassthrough:Q})})),!$.videoPassthrough&&U(e2,null,U("div",{class:"space-y-3"},U(Y0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Resolution"),U("div",{class:"flex flex-wrap gap-2"},Pw.map((Q)=>{let Y=$.scaledWidth===Q.width&&$.scaledHeight===Q.height;return U("button",{key:Q.label,class:_("pill-btn px-4 py-2 rounded-lg text-xs font-medium cursor-pointer",Y&&"active"),onClick:()=>this.updateVariant(J,{scaledWidth:Q.width,scaledHeight:Q.height})},Q.label)})),$.scaledWidth>0&&U("div",{class:"flex gap-3 mt-1"},U("div",{class:"space-y-1.5"},U(Y0,{className:"text-[11px] text-muted-foreground"},"Width"),U(t,{type:"number",className:"h-9 w-28 text-xs tabular-nums",value:String($.scaledWidth),onInput:(Q)=>this.updateVariant(J,{scaledWidth:parseInt(Q.target.value)||0})})),U("div",{class:"space-y-1.5"},U(Y0,{className:"text-[11px] text-muted-foreground"},"Height"),U(t,{type:"number",className:"h-9 w-28 text-xs tabular-nums",value:String($.scaledHeight),onInput:(Q)=>this.updateVariant(J,{scaledHeight:parseInt(Q.target.value)||0})})))),U("div",{class:"section-divider"}),U("div",{class:"space-y-3"},U("div",{class:"flex items-center justify-between"},U(Y0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Video Bitrate"),U(h,{variant:"outline",className:"tabular-nums font-mono text-xs"},$.videoBitrate," kbps")),U("input",{type:"range",min:"200",max:"6000",step:"100",value:String($.videoBitrate),onInput:(Q)=>this.updateVariant(J,{videoBitrate:parseInt(Q.target.value)})}),U("div",{class:"flex justify-between text-[10px] text-muted-foreground/40 px-1"},U("span",null,"200 kbps"),U("span",null,"6000 kbps"))),U("div",{class:"space-y-3"},U(Y0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Framerate"),U("div",{class:"flex flex-wrap gap-2"},[24,30,60].map((Q)=>{let Y=$.framerate===Q;return U("button",{key:Q,class:_("pill-btn px-4 py-2 rounded-lg text-xs font-medium cursor-pointer",Y&&"active"),onClick:()=>this.updateVariant(J,{framerate:Q})},Q," fps")}),U(t,{type:"number",className:"h-9 w-24 text-xs",placeholder:"Custom",value:[24,30,60].includes($.framerate)?"":String($.framerate),onInput:(Q)=>{let Y=parseInt(Q.target.value);if(Y>0)this.updateVariant(J,{framerate:Y})}}))),U("div",{class:"section-divider"}),U("div",{class:"space-y-3"},U(Y0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Encoding Speed"),U("div",{class:"grid grid-cols-1 sm:grid-cols-5 gap-2"},Vw.map((Q)=>{let Y=$.cpuUsageLevel===Q.value;return U("button",{key:Q.value,class:_("radio-card rounded-lg px-3 py-3 text-center cursor-pointer",Y&&"active"),onClick:()=>this.updateVariant(J,{cpuUsageLevel:Q.value})},U("p",{class:_("text-xs font-semibold",Y?"text-primary":"text-foreground")},Q.label),U("p",{class:"text-[10px] text-muted-foreground mt-0.5 leading-tight"},Q.description.split(",")[0]))})))),U("div",{class:"section-divider"}),U("div",{class:"flex items-center justify-between rounded-xl border border-border bg-muted/20 p-4"},U("div",{class:"pr-4"},U("p",{class:"text-sm font-medium text-foreground"},"Audio Passthrough"),U("p",{class:"text-xs text-muted-foreground mt-0.5"},"Re-use the inbound audio stream without re-encoding.")),U(e0,{checked:$.audioPassthrough,onChange:(Q)=>this.updateVariant(J,{audioPassthrough:Q})})),!$.audioPassthrough&&U("div",{class:"space-y-3"},U("div",{class:"flex items-center justify-between"},U(Y0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Audio Bitrate"),U(h,{variant:"outline",className:"tabular-nums font-mono text-xs"},$.audioBitrate," kbps")),U("input",{type:"range",min:"64",max:"320",step:"16",value:String($.audioBitrate),onInput:(Q)=>this.updateVariant(J,{audioBitrate:parseInt(Q.target.value)})}),U("div",{class:"flex justify-between text-[10px] text-muted-foreground/40 px-1"},U("span",null,"64 kbps"),U("span",null,"320 kbps"))))))}render(){let{loading:$,saving:J,error:Z,latencyLevel:q,variants:Q,streamKeys:Y,showStreamKeys:X,newKeyValue:K,newKeyComment:G,rtmpPort:w,serverURL:B,videoCodec:M,supportedCodecs:T,streamKeyOverridden:z}=this.state;if($)return U("div",{class:"max-w-3xl space-y-4"},U(p,{className:"h-8 w-64"}),U(p,{className:"h-4 w-96"}),U(p,{className:"h-48 rounded-xl"}),U(p,{className:"h-64 rounded-xl"}));return U("div",{class:"max-w-3xl space-y-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Video Configuration"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Configure video output quality, latency, and stream key.")),Z&&U(H0,{variant:"destructive"},U(F0,null,Z)),U(v,null,U(x,null,U(d,null,"Stream Keys"),U(l,null,"Authenticate with your broadcasting software. You can have multiple keys for different devices or co-streamers.")),U(m,{className:"space-y-4"},z&&U(H0,null,U(F0,null,"Stream key is overridden by a command-line flag. Changes here won't take effect until the flag is removed.")),U("div",{class:"rounded-xl border border-border bg-muted/30 p-4 space-y-3"},U("p",{class:"text-[11px] text-muted-foreground font-semibold uppercase tracking-wider"},"RTMP URL"),U("div",{class:"flex items-center gap-2"},U("code",{class:"text-xs text-foreground font-mono bg-background px-3 py-1.5 rounded-lg border border-border flex-1 truncate"},"rtmp://",this.getRtmpHost(),":",w,"/live"),U(k,{variant:"outline",size:"icon-sm",className:"shrink-0",onClick:()=>this.copyToClipboard(`rtmp://${this.getRtmpHost()}:${w}/live`)},U(lq,null))),U("p",{class:"text-[10px] text-muted-foreground"},'Use this URL in OBS  Settings  Stream  Server. Put your stream key in the "Stream Key" field.')),U(N0,null),Y.length===0&&U(H0,{variant:"destructive"},U(F0,null,"No stream keys configured. You won't be able to stream until you add at least one key.")),U("div",{class:"space-y-2"},Y.map((H,W)=>U("div",{key:W,class:"flex items-center gap-2 rounded-lg border border-border p-3"},U("div",{class:"flex-1 min-w-0"},U("p",{class:"text-xs font-medium text-muted-foreground mb-1"},H.comment||`Key ${W+1}`),U("div",{class:"flex items-center gap-1"},U("code",{class:"text-xs font-mono truncate"},X.has(W)?H.key:""))),U(k,{variant:"ghost",size:"icon-sm",className:"size-7 shrink-0",onClick:()=>this.toggleShowKey(W)},X.has(W)?U(Sw,null):U(Iw,null)),U(k,{variant:"ghost",size:"icon-sm",className:"size-7 shrink-0",onClick:()=>this.copyToClipboard(H.key)},U(lq,null)),U(k,{variant:"ghost",size:"icon-sm",className:"size-7 shrink-0 text-destructive/60 hover:text-destructive",onClick:()=>this.removeStreamKey(W)},U(oq,null))))),U(N0,null),U("div",{class:"space-y-2"},U(Y0,{className:"text-xs font-semibold text-muted-foreground"},"Add Stream Key"),U("div",{class:"flex gap-2"},U(t,{type:"text",className:"flex-1 text-xs font-mono",placeholder:"Stream key value",value:K,onInput:(H)=>this.setState({newKeyValue:H.target.value})}),U(t,{type:"text",className:"w-36 text-xs",placeholder:"Label (optional)",value:G,onInput:(H)=>this.setState({newKeyComment:H.target.value})}),U(k,{size:"sm",onClick:this.addStreamKey,disabled:!K.trim(),className:"gap-1"},U(sq,null)," Add"))))),T.length>1&&U(v,null,U(x,null,U(d,null,"Video Codec"),U(l,null,"Hardware-accelerated codecs reduce CPU usage significantly.")),U(m,null,U("div",{class:"flex flex-wrap gap-2"},T.map((H)=>{return U("button",{key:H,class:_("pill-btn px-4 py-2 rounded-lg text-xs font-medium cursor-pointer",M===H&&"active"),onClick:()=>this.handleVideoCodecChange(H)},H)})))),U(v,null,U(x,null,U(d,null,"Latency"),U(l,null,"Lower latency is better for interactive streams. Higher latency produces better video quality.")),U(m,null,U("div",{class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Lw.map((H)=>{let W=q===H.value;return U("button",{key:H.value,class:_("radio-card rounded-xl px-4 py-4 text-left cursor-pointer",W&&"active"),onClick:()=>this.setState({latencyLevel:H.value})},U("div",{class:"flex items-center justify-between mb-1"},U("p",{class:_("text-sm font-semibold",W?"text-primary":"text-foreground")},H.label),W&&U("span",{class:"size-2.5 rounded-full bg-primary ring-2 ring-primary/30 shrink-0"})),U("p",{class:"text-xs text-muted-foreground leading-relaxed"},H.description))})))),U("div",{class:"flex items-center justify-between"},U("div",null,U("h2",{class:"text-lg font-semibold text-foreground"},"Output Variants"),U("p",{class:"text-xs text-muted-foreground mt-0.5"},"Each variant creates a separate quality option for viewers.")),U(k,{variant:"outline",size:"sm",onClick:this.addVariant,className:"gap-1.5"},U(sq,null),"Add Variant")),U("div",{class:"space-y-4"},Q.map((H,W)=>this.renderVariantCard(H,W))),U("div",{class:"flex items-center gap-4 pt-2 pb-8"},U(k,{onClick:this.handleSave,disabled:J,className:"px-8"},J?"Saving...":"Save Video Configuration"),U("p",{class:"text-xs text-muted-foreground"},"Changes take effect on next stream start.")))}}class Y7 extends N{state={loading:!0,error:null,chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,chatSpamProtectionEnabled:!0,chatSlurFilterEnabled:!0,forbiddenUsernames:"",suggestedUsernames:"",hideViewerCount:!1,systemMessage:"",sendingMessage:!1};componentDidMount(){this.loadConfig()}async loadConfig(){try{let $=await y.admin.getConfig(this.props.token);this.setState({loading:!1,chatDisabled:$?.chatDisabled||!1,chatJoinMessagesEnabled:$?.chatJoinMessagesEnabled??!0,chatEstablishedUserMode:$?.chatEstablishedUserMode||!1,chatSpamProtectionEnabled:$?.chatSpamProtectionEnabled??!0,chatSlurFilterEnabled:$?.chatSlurFilterEnabled??!0,forbiddenUsernames:($?.forbiddenUsernames||[]).join(`
`),suggestedUsernames:($?.suggestedUsernames||[]).join(`
`),hideViewerCount:$?.hideViewerCount||!1})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load config",loading:!1})}}async toggleSetting($,J,Z){try{await $(this.props.token,Z),this.setState({[J]:Z}),X0.success("Setting updated")}catch(q){X0.error("Failed to update setting")}}handleSaveForbiddenUsernames=async()=>{try{let $=this.state.forbiddenUsernames.split(`
`).map((J)=>J.trim()).filter(Boolean);await y.admin.updateForbiddenUsernames(this.props.token,$),X0.success("Forbidden usernames updated")}catch{X0.error("Failed to save")}};handleSaveSuggestedUsernames=async()=>{try{let $=this.state.suggestedUsernames.split(`
`).map((J)=>J.trim()).filter(Boolean);await y.admin.updateSuggestedUsernames(this.props.token,$),X0.success("Suggested usernames updated")}catch{X0.error("Failed to save")}};handleSendSystemMessage=async()=>{let $=this.state.systemMessage.trim();if(!$)return;this.setState({sendingMessage:!0});try{await y.admin.sendSystemMessage(this.props.token,$),this.setState({systemMessage:"",sendingMessage:!1}),X0.success("System message sent")}catch{this.setState({sendingMessage:!1}),X0.error("Failed to send message")}};renderToggle($,J,Z,q,Q){return U("div",{class:"flex items-center justify-between rounded-xl border border-border bg-muted/20 p-4"},U("div",{class:"pr-4"},U("p",{class:"text-sm font-medium text-foreground"},$),U("p",{class:"text-xs text-muted-foreground mt-0.5 leading-relaxed"},J)),U(e0,{checked:Z,onChange:(Y)=>this.toggleSetting(Q,q,Y)}))}render(){let{loading:$,error:J,chatDisabled:Z,chatJoinMessagesEnabled:q,chatEstablishedUserMode:Q,chatSpamProtectionEnabled:Y,chatSlurFilterEnabled:X,forbiddenUsernames:K,suggestedUsernames:G,hideViewerCount:w,systemMessage:B,sendingMessage:M}=this.state;if($)return U("div",{class:"max-w-3xl space-y-4"},U(p,{className:"h-8 w-64"}),U(p,{className:"h-4 w-96"}),U(p,{className:"h-48 rounded-xl"}),U(p,{className:"h-48 rounded-xl"}));return U("div",{class:"max-w-3xl space-y-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Chat Configuration"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Configure chat settings, moderation, and spam protection.")),J&&U(H0,{variant:"destructive"},U(F0,null,J)),U(v,null,U(x,null,U(d,null,"Send System Message"),U(l,null,"Broadcast to all connected chat users.")),U(m,null,U("div",{class:"flex gap-2"},U(t,{className:"flex-1 text-xs",placeholder:"Type a system message...",value:B,onInput:(T)=>this.setState({systemMessage:T.target.value}),onKeyDown:(T)=>{if(T.key==="Enter")this.handleSendSystemMessage()}}),U(k,{size:"sm",onClick:this.handleSendSystemMessage,disabled:!B.trim()||M},M?"Sending...":"Send")))),U(v,null,U(x,null,U(d,null,"General")),U(m,null,U("div",{class:"space-y-3"},this.renderToggle("Disable Chat","Completely hide the chat from your stream page.",Z,"chatDisabled",y.admin.updateChatDisabled),this.renderToggle("Show Join Messages","Display a message when users join or leave the chat.",q,"chatJoinMessagesEnabled",y.admin.updateChatJoinMessages),this.renderToggle("Hide Viewer Count","Hide the number of current viewers from the public page.",w,"hideViewerCount",y.admin.updateHideViewerCount)))),U(v,null,U(x,null,U(d,null,"Moderation"),U(l,null,"Protect your chat from spam and unwanted content.")),U(m,null,U("div",{class:"space-y-3"},this.renderToggle("Established User Mode","Only allow users who have been registered for a while to chat. New users will need to wait before they can send messages.",Q,"chatEstablishedUserMode",y.admin.updateChatEstablishedMode),this.renderToggle("Spam Protection","Automatically detect and block spam messages, including repeated messages and excessive links.",Y,"chatSpamProtectionEnabled",y.admin.updateChatSpamProtection),this.renderToggle("Slur Filter","Automatically filter messages containing known slurs and offensive language.",X,"chatSlurFilterEnabled",y.admin.updateChatSlurFilter)))),U(v,null,U(x,null,U(d,null,"Usernames"),U(l,null,"Manage forbidden and suggested usernames for chat.")),U(m,null,U("div",{class:"space-y-5"},U("div",{class:"space-y-2"},U(Y0,null,"Forbidden Usernames"),U("p",{class:"text-sm text-muted-foreground"},"Users will not be able to register with these names. One per line."),U(D1,{className:"min-h-[80px] text-xs font-mono",placeholder:`admin
moderator
system`,value:K,onInput:(T)=>this.setState({forbiddenUsernames:T.target.value})}),U(k,{size:"sm",variant:"secondary",onClick:this.handleSaveForbiddenUsernames},"Save Forbidden List")),U(N0,null),U("div",{class:"space-y-2"},U(Y0,null,"Suggested Usernames"),U("p",{class:"text-sm text-muted-foreground"},"Suggested names shown to new users when registering. One per line."),U(D1,{className:"min-h-[80px] text-xs font-mono",placeholder:`Viewer
Chatter
Lurker`,value:G,onInput:(T)=>this.setState({suggestedUsernames:T.target.value})}),U(k,{size:"sm",variant:"secondary",onClick:this.handleSaveSuggestedUsernames},"Save Suggested List"))))))}}var Cw=()=>U("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),U("circle",{cx:"9",cy:"7",r:"4"}),U("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),U("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})),Nw=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polyline",{points:"23 4 23 10 17 10"}),U("polyline",{points:"1 20 1 14 7 14"}),U("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})),Ow=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("circle",{cx:"12",cy:"12",r:"10"}),U("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),U("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})),Aw=()=>U("svg",{class:"size-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("circle",{cx:"12",cy:"12",r:"10"}),U("polyline",{points:"12 6 12 12 16 14"})),kw=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),U("circle",{cx:"12",cy:"7",r:"4"}));class X7 extends N{pollTimer=null;state={loading:!0,error:null,viewers:[],chatClients:[],pollTimer:null};componentDidMount(){this.loadData(),this.pollTimer=setInterval(()=>this.loadData(),1e4)}componentWillUnmount(){if(this.pollTimer)clearInterval(this.pollTimer)}async loadData(){try{let[$,J]=await Promise.all([y.admin.getViewers(this.props.token).catch(()=>[]),y.admin.getConnectedClients(this.props.token).catch(()=>[])]);this.setState({loading:!1,error:null,viewers:Array.isArray($)?$:[],chatClients:Array.isArray(J)?J:[]})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load viewers",loading:!1})}}handleRefresh=()=>{this.setState({loading:!0}),this.loadData()};render(){let{loading:$,error:J,viewers:Z,chatClients:q}=this.state,Q=Z.length,Y=q.length;if($&&Z.length===0)return U("div",{class:"space-y-4"},U(p,{className:"h-8 w-48"}),U(p,{className:"h-4 w-96"}),U("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-3"},U(p,{className:"h-20 rounded-xl"}),U(p,{className:"h-20 rounded-xl"})),U(p,{className:"h-64 rounded-xl"}));return U("div",null,U("div",{class:"flex items-center justify-between mb-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Viewers"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Connected viewers and chat participants.")),U(k,{variant:"secondary",size:"sm",onClick:this.handleRefresh},U(Nw,null),"Refresh")),J&&U(H0,{variant:"destructive",className:"mb-4"},U(F0,null,J)),U("div",{class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6"},U(v,null,U(x,null,U(l,null,"Stream Viewers"),U(d,{className:"text-2xl tabular-nums"},Q))),U(v,null,U(x,null,U(l,null,"Chat Participants"),U(d,{className:"text-2xl tabular-nums"},Y)))),U(v,{className:"mb-4"},U(x,null,U(d,null,"Connected Viewers")),U(m,null,Q===0?U("div",{class:"text-center py-8"},U("div",{class:"size-12 rounded-full bg-muted/30 flex items-center justify-center mx-auto mb-3"},U(Cw,null)),U("p",{class:"text-sm text-muted-foreground"},"No viewers connected"),U("p",{class:"text-xs text-muted-foreground mt-1"},"Viewers will appear here when someone watches your stream.")):U(d8,null,U(c8,null,U(W4,null,U(_2,null,"User"),U(_2,null,"Connected"),U(_2,null,"Location"),U(_2,null,"Client"))),U(r8,null,Z.map((X,K)=>U(W4,{key:X.id||X.clientID||K},U(D2,null,U("div",{class:"flex items-center gap-2 min-w-0"},U(kw,null),U("div",{class:"min-w-0"},U("p",{class:"text-sm truncate"},X.displayName||X.username||"Anonymous"),X.messageCount!=null&&X.messageCount>0&&U("p",{class:"text-xs text-muted-foreground"},X.messageCount," messages")))),U(D2,{className:"text-muted-foreground"},U("div",{class:"flex items-center gap-1"},U(Aw,null),X.connectedAt?c0(X.connectedAt):X.createdAt?c0(X.createdAt):"")),U(D2,{className:"text-muted-foreground"},U("div",{class:"flex items-center gap-1"},U(Ow,null),U("span",{class:"truncate"},X.geo||""))),U(D2,{className:"text-muted-foreground text-xs"},X.userAgent?fw(X.userAgent):""))))))),U(v,null,U(x,null,U(d,null,"Chat Participants")),U(m,null,Y===0?U("div",{class:"text-center py-6"},U("p",{class:"text-sm text-muted-foreground"},"No chat participants")):U("div",{class:"flex flex-wrap gap-2"},q.map((X,K)=>U(h,{key:X.id||K,variant:"secondary",className:"gap-1.5 py-1"},U("span",{class:"size-2 rounded-full bg-success"}),X.displayName||X.username||"Anonymous"))))),U("p",{class:"text-[10px] text-muted-foreground/30 mt-4 text-center"},"Auto-refreshes every 10 seconds"))}}function fw($){if($.includes("Firefox"))return"Firefox";if($.includes("Chrome"))return"Chrome";if($.includes("Safari"))return"Safari";if($.includes("Edge"))return"Edge";if($.includes("OBS"))return"OBS";if($.includes("VLC"))return"VLC";if($.length>20)return $.slice(0,20)+"";return $}var bw=()=>U("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),U("polyline",{points:"14 2 14 8 20 8"}),U("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),U("line",{x1:"16",y1:"17",x2:"8",y2:"17"})),vw=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polyline",{points:"23 4 23 10 17 10"}),U("polyline",{points:"1 20 1 14 7 14"}),U("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})),yw=()=>U("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),U("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),U("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"}));class U7 extends N{pollTimer=null;scrollRef=null;state={loading:!0,error:null,logs:[],warnings:[],activeView:"logs",filterLevel:"all",autoScroll:!0,search:""};componentDidMount(){this.loadData(),this.pollTimer=setInterval(()=>this.loadData(),5000)}componentWillUnmount(){if(this.pollTimer)clearInterval(this.pollTimer)}componentDidUpdate($,J){if(this.state.autoScroll&&this.scrollRef&&J.logs.length!==this.state.logs.length)this.scrollRef.scrollTop=this.scrollRef.scrollHeight}async loadData(){try{let[$,J]=await Promise.all([y.admin.getLogEntries(this.props.token).catch(()=>[]),y.admin.getWarnings(this.props.token).catch(()=>[])]);this.setState({loading:!1,error:null,logs:Array.isArray($)?$:[],warnings:Array.isArray(J)?J:[]})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load logs",loading:!1})}}handleRefresh=()=>{this.loadData()};getFilteredLogs(){let{logs:$,warnings:J,activeView:Z,filterLevel:q,search:Q}=this.state,Y=Z==="warnings"?J:$;if(q!=="all")Y=Y.filter((X)=>X.level===q);if(Q.trim()){let X=Q.toLowerCase();Y=Y.filter((K)=>K.message?.toLowerCase().includes(X))}return Y}getLevelColor($){switch($?.toLowerCase()){case"error":return"text-destructive";case"warn":case"warning":return"text-warning";case"info":return"text-blue-400";case"debug":return"text-muted-foreground/50";default:return"text-foreground"}}getLevelBadge($){let Z={error:"bg-destructive/10 text-destructive border-destructive/20",warn:"bg-warning/10 text-warning border-warning/20",warning:"bg-warning/10 text-warning border-warning/20",info:"bg-blue-500/10 text-blue-400 border-blue-500/20",debug:"bg-muted text-muted-foreground border-border/50"}[$?.toLowerCase()]||"bg-muted text-muted-foreground border-border/50";return U("span",{class:_("inline-flex items-center px-1.5 py-0 rounded text-[9px] font-mono uppercase border",Z)},($||"log").slice(0,4))}formatLogTime($){try{return new Date($).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return $||""}}render(){let{loading:$,error:J,activeView:Z,filterLevel:q,autoScroll:Q,search:Y,warnings:X}=this.state,K=this.getFilteredLogs();if($&&this.state.logs.length===0)return U("div",{class:"space-y-4"},U(p,{className:"h-8 w-48"}),U(p,{className:"h-4 w-96"}),U(p,{className:"h-96 rounded-xl"}));return U("div",null,U("div",{class:"flex items-center justify-between mb-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Logs"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Server logs and warnings.")),U("div",{class:"flex items-center gap-2"},U(k,{variant:"secondary",size:"sm",onClick:this.handleRefresh},U(vw,null),"Refresh"))),J&&U(H0,{variant:"destructive",className:"mb-4"},U(F0,null,J)),U("div",{class:"flex items-center gap-1 mb-4 p-1 bg-muted/30 rounded-lg w-fit"},U("button",{class:_("px-3 py-1.5 rounded-md text-xs font-medium transition-colors",Z==="logs"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),onClick:()=>this.setState({activeView:"logs"})},"All Logs"),U("button",{class:_("px-3 py-1.5 rounded-md text-xs font-medium transition-colors flex items-center gap-1.5",Z==="warnings"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),onClick:()=>this.setState({activeView:"warnings"})},U(yw,null),"Warnings",X.length>0&&U(h,{variant:"destructive",className:"text-[9px] px-1 py-0 h-4"},X.length))),U("div",{class:"flex items-center gap-3 mb-3"},U("div",{class:"flex items-center gap-1"},["all","error","warn","info","debug"].map((G)=>U("button",{key:G,class:_("px-2 py-1 rounded text-[10px] font-medium transition-colors uppercase",q===G?"bg-primary/15 text-primary":"text-muted-foreground/50 hover:text-muted-foreground hover:bg-muted/30"),onClick:()=>this.setState({filterLevel:G})},G))),U(N0,{orientation:"vertical",className:"h-5"}),U(t,{className:"h-7 text-xs flex-1 max-w-xs",placeholder:"Search logs...",value:Y,onInput:(G)=>this.setState({search:G.target.value})}),U("div",{class:"flex items-center gap-1.5"},U(e0,{checked:Q,onChange:(G)=>this.setState({autoScroll:G})}),U("span",{class:"text-[10px] text-muted-foreground select-none"},"Auto-scroll"))),U("div",{ref:(G)=>{this.scrollRef=G},class:"rounded-xl border border-border bg-card/40 overflow-hidden"},U("div",{class:"overflow-y-auto font-mono text-[11px] leading-relaxed",style:{"max-height":"600px"}},K.length===0?U("div",{class:"text-center py-12"},U("div",{class:"size-12 rounded-full bg-muted/30 flex items-center justify-center mx-auto mb-3"},U(bw,null)),U("p",{class:"text-sm text-muted-foreground"},"No log entries"),U("p",{class:"text-[11px] text-muted-foreground/50 mt-1"},Y?"Try a different search term.":"Logs will appear here as the server runs.")):K.map((G,w)=>U("div",{key:w,class:_("flex items-start gap-2 px-3 py-1.5 hover:bg-muted/20 transition-colors border-b border-border/10",G.level==="error"&&"bg-destructive/5",G.level==="warn"||G.level==="warning"?"bg-warning/5":"")},U("span",{class:"text-muted-foreground/40 shrink-0 w-16 text-right tabular-nums"},this.formatLogTime(G.time)),U("span",{class:"shrink-0 mt-0.5"},this.getLevelBadge(G.level)),U("span",{class:_("flex-1 break-all",this.getLevelColor(G.level))},G.message))))),U("p",{class:"text-[10px] text-muted-foreground/30 mt-3 text-center"},"Showing ",K.length," entries  Auto-refreshes every 5 seconds"))}}var Ew=()=>U("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})),gw=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),U("line",{x1:"5",y1:"12",x2:"19",y2:"12"})),hw=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polyline",{points:"3 6 5 6 21 6"}),U("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})),nq=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),U("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})),uw=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),U("circle",{cx:"12",cy:"12",r:"3"})),xw=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),U("line",{x1:"1",y1:"1",x2:"23",y2:"23"}));class K7 extends N{state={loading:!0,error:null,tokens:[],showCreate:!1,newTokenName:"",creating:!1,newlyCreatedToken:null,revealedTokens:new Set,confirmDelete:null};componentDidMount(){this.loadTokens()}async loadTokens(){try{let $=await y.admin.getAccessTokens(this.props.token);this.setState({loading:!1,tokens:Array.isArray($)?$:[]})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load tokens",loading:!1})}}handleCreate=async()=>{let $=this.state.newTokenName.trim();if(!$)return;this.setState({creating:!0});try{let J=await y.admin.createAccessToken(this.props.token,{name:$,scopes:[]});this.setState({creating:!1,showCreate:!1,newTokenName:"",newlyCreatedToken:J?.accessToken||null}),this.loadTokens(),X0.success("Access token created")}catch(J){this.setState({creating:!1}),X0.error("Failed to create token")}};handleDelete=async($)=>{try{await y.admin.deleteAccessToken(this.props.token,$),this.setState({confirmDelete:null}),this.loadTokens(),X0.success("Token deleted")}catch{X0.error("Failed to delete token")}};toggleReveal($){let J=new Set(this.state.revealedTokens);if(J.has($))J.delete($);else J.add($);this.setState({revealedTokens:J})}copyToClipboard($){navigator.clipboard.writeText($).then(()=>{X0("Copied to clipboard")}).catch(()=>{})}maskToken($){if($.length<=8)return"";return $.slice(0,4)+""+$.slice(-4)}render(){let{loading:$,error:J,tokens:Z,showCreate:q,newTokenName:Q,creating:Y,newlyCreatedToken:X,revealedTokens:K,confirmDelete:G}=this.state;if($)return U("div",{class:"space-y-4"},U(p,{className:"h-8 w-48"}),U(p,{className:"h-4 w-96"}),U(p,{className:"h-32 rounded-xl"}),U(p,{className:"h-32 rounded-xl"}));return U("div",{class:"max-w-3xl"},U("div",{class:"flex items-center justify-between mb-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Access Tokens"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Manage API access tokens for integrations and external tools.")),U(k,{variant:q?"outline":"secondary",size:"sm",onClick:()=>this.setState({showCreate:!q,newlyCreatedToken:null})},q?"Cancel":U("span",{class:"flex items-center gap-1.5"},U(gw,null)," New Token"))),J&&U(H0,{variant:"destructive",className:"mb-4"},U(F0,null,J)),X&&U(H0,{className:"mb-4 border-success/30 bg-success/5"},U(F0,null,U("div",{class:"space-y-2"},U("p",{class:"text-sm font-medium text-success"},"Token created successfully!"),U("p",{class:"text-sm text-muted-foreground"},"Copy this token now  you won't be able to see it again."),U("div",{class:"flex items-center gap-2"},U("code",{class:"text-xs font-mono bg-background px-2 py-1 rounded border border-border/40 flex-1 truncate text-foreground"},X),U(k,{variant:"secondary",size:"icon-sm",className:"shrink-0",onClick:()=>this.copyToClipboard(X)},U(nq,null)))))),q&&U(v,{className:"mb-4"},U(x,null,U(d,null,"Create Access Token"),U(l,null,"Create a new token for API access or integrations.")),U(m,null,U("div",{class:"space-y-3"},U("div",{class:"space-y-1.5"},U(Y0,null,"Token Name"),U(t,{type:"text",placeholder:"e.g. OBS Integration, Bot Access",value:Q,onInput:(w)=>this.setState({newTokenName:w.target.value}),onKeyDown:(w)=>{if(w.key==="Enter")this.handleCreate()}}),U("p",{class:"text-xs text-muted-foreground"},"A descriptive name to identify this token.")),U(k,{onClick:this.handleCreate,disabled:!Q.trim()||Y},Y?"Creating...":"Create Token")))),Z.length===0?U(v,null,U(m,{className:"py-12"},U("div",{class:"flex flex-col items-center text-center"},U("div",{class:"size-14 rounded-full bg-muted/30 flex items-center justify-center mb-3"},U(Ew,null)),U("p",{class:"text-sm font-medium text-foreground mb-1"},"No access tokens"),U("p",{class:"text-xs text-muted-foreground max-w-sm"},"Create an access token to allow external tools and integrations to interact with your server.")))):U("div",{class:"space-y-3"},Z.map((w)=>{let B=K.has(w.accessToken),M=G===w.accessToken;return U(v,{key:w.accessToken},U(m,{className:"p-5"},U("div",{class:"flex items-start justify-between gap-3"},U("div",{class:"min-w-0 flex-1"},U("div",{class:"flex items-center gap-2 mb-1"},U("p",{class:"text-sm font-medium text-foreground"},w.displayName||"Unnamed Token"),w.scopes&&w.scopes.length>0&&w.scopes.map((T)=>U(h,{key:T,variant:"secondary",className:"text-[9px] px-1.5 py-0"},T.replace(/_/g," ")))),U("div",{class:"flex items-center gap-2 mb-2"},U("code",{class:"text-[11px] font-mono text-muted-foreground bg-muted/30 px-2 py-0.5 rounded"},B?w.accessToken:this.maskToken(w.accessToken)),U("button",{class:"text-muted-foreground/50 hover:text-muted-foreground transition-colors",onClick:()=>this.toggleReveal(w.accessToken)},B?U(xw,null):U(uw,null)),U("button",{class:"text-muted-foreground/50 hover:text-muted-foreground transition-colors",onClick:()=>this.copyToClipboard(w.accessToken)},U(nq,null))),U("div",{class:"flex items-center gap-3 text-[10px] text-muted-foreground/50"},w.createdAt&&U("span",null,"Created ",c0(w.createdAt)),w.lastUsed&&U("span",null,"Last used ",c0(w.lastUsed)))),U("div",{class:"shrink-0"},M?U("div",{class:"flex items-center gap-1.5"},U(k,{variant:"destructive",size:"xs",onClick:()=>this.handleDelete(w.accessToken)},"Confirm"),U(k,{variant:"ghost",size:"xs",onClick:()=>this.setState({confirmDelete:null})},"Cancel")):U(k,{variant:"ghost",size:"icon-sm",className:"text-destructive/60 hover:text-destructive hover:bg-destructive/10",onClick:()=>this.setState({confirmDelete:w.accessToken})},U(hw,null))))))})),U("div",{class:"mt-6"},U("p",{class:"text-sm text-muted-foreground leading-relaxed"},"Access tokens allow external applications to interact with your Oni server's API. Tokens with admin access can modify server configuration. Keep your tokens secure and revoke any that are no longer needed.")))}}class G7 extends N{unsubManager=null;unsubRelay=null;state={manager:P1(),relayState:R9(),newRelayUrl:"",newProfileName:"",showAddProfile:!1};componentDidMount(){this.unsubManager=y4(()=>{this.setState({manager:P1()})}),this.unsubRelay=qJ(()=>{this.setState({relayState:R9()})})}componentWillUnmount(){this.unsubManager?.(),this.unsubRelay?.()}handleAddRelay=($)=>{let J=this.state.newRelayUrl.trim();if(!J)return;h1($,J),this.setState({newRelayUrl:""})};handleCreateProfile=()=>{let $=this.state.newProfileName.trim();if(!$)return;E4($),this.setState({newProfileName:"",showAddProfile:!1})};getStatusColor($){switch(this.state.relayState.statuses.get($)){case"connected":return"bg-success";case"connecting":return"bg-warning";case"error":return"bg-destructive";default:return"bg-muted-foreground/30"}}getStatusLabel($){return this.state.relayState.statuses.get($)||"disconnected"}renderProfile($,J){return U(v,{key:$.id,className:_(J&&"border-primary/40")},U(x,null,U("div",{class:"flex items-center justify-between"},U("div",{class:"flex items-center gap-2"},U("button",{class:_("text-sm font-semibold cursor-pointer bg-transparent border-none",J?"text-primary":"text-foreground hover:text-primary"),onClick:()=>KJ($.id)},$.name),J&&U(h,{variant:"default"},"Active"),$.builtin&&U(h,{variant:"secondary"},"Built-in")),U("div",{class:"flex items-center gap-2"},U(h,{variant:"outline"},$.relays.length," relays"),!$.builtin&&U(k,{variant:"ghost",size:"xs",className:"text-destructive hover:text-destructive",onClick:()=>g4($.id)},"Delete")))),U(m,null,U("div",{class:"space-y-1.5 mb-3"},$.relays.length===0?U("p",{class:"text-xs text-muted-foreground italic"},"No relays configured"):$.relays.map((Z)=>U("div",{key:Z,class:"flex items-center justify-between group px-2 py-1.5 rounded-md bg-background"},U("div",{class:"flex items-center gap-2 min-w-0"},U("span",{class:_("size-2 rounded-full shrink-0",this.getStatusColor(Z))}),U("span",{class:"text-xs text-foreground truncate"},Z),U(h,{variant:"ghost",className:"text-[10px] px-0"},this.getStatusLabel(Z))),U(k,{variant:"ghost",size:"xs",className:"text-destructive hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity shrink-0",onClick:()=>N2($.id,Z)},"Remove")))),U("div",{class:"flex gap-2"},U(t,{className:"flex-1 h-8 text-xs",placeholder:"wss://relay.example.com",value:this.state.newRelayUrl,onInput:(Z)=>this.setState({newRelayUrl:Z.target.value}),onKeyDown:(Z)=>{if(Z.key==="Enter")this.handleAddRelay($.id)}}),U(k,{size:"sm",className:"h-8",onClick:()=>this.handleAddRelay($.id)},"Add"))))}render(){let{manager:$,showAddProfile:J,newProfileName:Z}=this.state;return U("div",null,U("div",{class:"flex items-center justify-between mb-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Relay Manager"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Manage relay profiles and connections.")),U(k,{variant:J?"outline":"secondary",size:"sm",onClick:()=>this.setState({showAddProfile:!J})},J?"Cancel":"+ New Profile")),U("p",{class:"text-sm text-muted-foreground mb-4"},"Manage relay profiles for your Nostr identity. Outbox relays are where you publish events. Inbox relays are where others can find your posts. Indexers are used for bootstrapping."),J&&U("div",{class:"flex gap-2 mb-4"},U(t,{className:"flex-1",placeholder:"Profile name",value:Z,onInput:(q)=>this.setState({newProfileName:q.target.value}),onKeyDown:(q)=>{if(q.key==="Enter")this.handleCreateProfile()}}),U(k,{onClick:this.handleCreateProfile},"Create")),U("div",{class:"space-y-4"},$.profiles.map((q)=>this.renderProfile(q,q.id===$.activeProfileId))))}}var aq="oni_outbox_relays_selected";function mw(){try{let $=localStorage.getItem(aq);if($)return new Set(JSON.parse($))}catch{}return new Set}function pw($){localStorage.setItem(aq,JSON.stringify([...$]))}class w7 extends N{unsubAuth=null;unsubBootstrap=null;unsubLive=null;unsubBroadcast=null;unsubManager=null;state={pubkey:L0().pubkey,authLoading:L0().isLoading,authError:L0().error,profile:x1().profile,bootstrapPhase:x1().phase,relayList:x1().relayList,followingCount:x1().followingCount,liveEventsEnabled:f2().enabled,liveEventPublishing:f2().isPublishing,liveEventError:f2().error,lastPublished:f2().lastPublished,broadcast:o9(),manager:P1(),selectedOutbox:mw(),newCustomRelayUrl:"",newProfileName:""};componentDidMount(){this.unsubAuth=u1(()=>{let $=L0();this.setState({pubkey:$.pubkey,authLoading:$.isLoading,authError:$.error})}),this.unsubBootstrap=p4(()=>{let $=x1();this.setState({profile:$.profile,bootstrapPhase:$.phase,relayList:$.relayList,followingCount:$.followingCount})}),this.unsubLive=VJ(()=>{let $=f2();this.setState({liveEventsEnabled:$.enabled,liveEventPublishing:$.isPublishing,liveEventError:$.error,lastPublished:$.lastPublished})}),this.unsubBroadcast=_J(()=>{this.setState({broadcast:o9()})}),this.unsubManager=y4(()=>{this.setState({manager:P1()})}),l9(20)}componentWillUnmount(){this.unsubAuth?.(),this.unsubBootstrap?.(),this.unsubLive?.(),this.unsubBroadcast?.(),this.unsubManager?.()}toggleOutboxRelay=($)=>{let J=new Set(this.state.selectedOutbox);if(J.has($))J.delete($);else J.add($);this.setState({selectedOutbox:J}),pw(J)};handleAddCustomRelay=($)=>{let J=this.state.newCustomRelayUrl.trim();if(!J)return;if(!J.startsWith("wss://")&&!J.startsWith("ws://"))J="wss://"+J;h1($,J),this.setState({newCustomRelayUrl:""})};handleCreateProfile=()=>{let $=this.state.newProfileName.trim();if(!$)return;E4($),this.setState({newProfileName:""})};render(){let{pubkey:$,authLoading:J,authError:Z,profile:q,bootstrapPhase:Q,relayList:Y,followingCount:X,liveEventsEnabled:K,liveEventPublishing:G,liveEventError:w,lastPublished:B,broadcast:M,manager:T,selectedOutbox:z,newCustomRelayUrl:H,newProfileName:W}=this.state,F=Y.filter((R)=>R.write),j=Y.length;return U("div",{class:"max-w-3xl space-y-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Nostr Identity"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Connect your Nostr account, manage relay selection, and control live event publishing.")),U(v,null,U(x,null,U(d,null,"Account")),U(m,null,$?U("div",null,U("div",{class:"flex items-start gap-4 mb-4"},U(b1,{className:"size-16"},U(L1,{src:q?.picture,alt:""}),U(v1,{className:"text-xl"},(q?.displayName||q?.name||$.charAt(0)).charAt(0).toUpperCase())),U("div",{class:"min-w-0"},U("p",{class:"text-lg font-semibold text-foreground truncate"},q?.displayName||q?.name||A4($,8)),U("p",{class:"text-xs text-muted-foreground font-mono truncate mb-1"},S2($)),q?.nip05&&U(h,{variant:"outline",className:"text-[10px] border-primary/30 text-primary"},q.nip05),q?.about&&U("p",{class:"text-xs text-muted-foreground mt-1 line-clamp-2"},q.about))),U("div",{class:"grid grid-cols-3 gap-3 mb-4"},U("div",{class:"text-center p-2 rounded-md bg-background"},U("p",{class:"text-lg font-semibold text-foreground"},j),U("p",{class:"text-xs text-muted-foreground"},"Relays")),U("div",{class:"text-center p-2 rounded-md bg-background"},U("p",{class:"text-lg font-semibold text-foreground"},X),U("p",{class:"text-xs text-muted-foreground"},"Following")),U("div",{class:"text-center p-2 rounded-md bg-background"},U("p",{class:"text-lg font-semibold text-foreground capitalize"},Q),U("p",{class:"text-xs text-muted-foreground"},"Status"))),U(k,{variant:"destructive",size:"sm",onClick:()=>h4()},"Sign Out")):U("div",null,U("p",{class:"text-sm text-muted-foreground mb-3"},"Connect your Nostr identity to publish NIP-53 live events and manage your stream's social presence."),U(k,{onClick:()=>O2(),disabled:J},J?"Connecting...":"Connect with Nostr"),Z&&U("p",{class:"text-xs text-destructive mt-2"},Z),U("p",{class:"text-xs text-muted-foreground mt-2"},"Requires a NIP-07 browser extension (nos2x-fox, Alby, etc.) or Amber on Android.")))),U(v,null,U(x,null,U("div",{class:"flex items-center justify-between"},U("div",null,U(d,null,"NIP-53 Live Events"),U(l,null,"Auto-publish live activity events when you go live.")),U(e0,{checked:K,onChange:(R)=>PJ(R)}))),U(m,null,K&&!$&&U(H0,{variant:"destructive",className:"mb-2"},U(F0,null,"You must connect a Nostr identity above to publish live events.")),G&&U("p",{class:"text-xs text-primary"},"Publishing live event..."),w&&U("p",{class:"text-xs text-destructive mt-1"},w),B&&U("p",{class:"text-xs text-muted-foreground mt-1"},"Last published: ",new Date(B).toLocaleTimeString()),K&&$&&!G&&!w&&!B&&U("p",{class:"text-xs text-muted-foreground"},"Live events will be published to your selected outbox and broadcast relays when you start streaming."))),U(v,null,U(x,null,U(d,null,"Outbox Relays"),U(l,null,"Your NIP-65 write relays. Check all that apply for publishing NIP-53 live events.")),U(m,null,!$?U("p",{class:"text-xs text-muted-foreground italic"},"Connect your Nostr identity to see your outbox relays."):Q!=="ready"&&F.length===0?U("div",{class:"space-y-2"},U(p,{className:"h-8 rounded-md"}),U(p,{className:"h-8 rounded-md"}),U(p,{className:"h-8 rounded-md"})):F.length===0?U("p",{class:"text-xs text-muted-foreground italic"},"No outbox relays found in your NIP-65 relay list."):U("div",{class:"space-y-1"},F.map((R)=>U("label",{key:R.url,class:"flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent/50 cursor-pointer transition-colors"},U("input",{type:"checkbox",checked:z.has(R.url),onChange:()=>this.toggleOutboxRelay(R.url),class:"size-4 rounded border-input accent-primary cursor-pointer"}),U("span",{class:"text-sm text-foreground truncate flex-1 font-mono"},R.url),U(h,{variant:"outline",className:"text-[10px] shrink-0"},"write"))),U("p",{class:"text-[11px] text-muted-foreground mt-2 px-1"},z.size," of ",F.length," selected")))),U(v,null,U(x,null,U(d,null,"Broadcast Relays"),U(l,null,"Well-connected relays for maximum event propagation. Discovered via NIP-66 monitors. Check all that apply.")),U(m,null,M.isLoading?U("div",{class:"flex items-center gap-2 py-4"},U($1,{size:"sm"}),U("span",{class:"text-xs text-muted-foreground"},"Discovering broadcast relays...")):M.relays.length===0?U("div",null,U("p",{class:"text-xs text-muted-foreground italic mb-2"},"No broadcast relays discovered yet."),U(k,{size:"sm",variant:"secondary",onClick:()=>l9(20)},"Retry Discovery")):U("div",{class:"space-y-1"},M.relays.map((R)=>U("label",{key:R.url,class:"flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent/50 cursor-pointer transition-colors"},U("input",{type:"checkbox",checked:M.selectedUrls.has(R.url),onChange:()=>LJ(R.url),class:"size-4 rounded border-input accent-primary cursor-pointer"}),U("span",{class:"text-sm text-foreground truncate flex-1 font-mono"},R.url),U("div",{class:"flex items-center gap-1.5 shrink-0"},R.nips.includes(53)&&U(h,{variant:"default",className:"text-[10px] px-1.5"},"NIP-53"),R.rtt<500&&U(h,{variant:"outline",className:"text-[10px] px-1.5 tabular-nums"},R.rtt,"ms")))),U("div",{class:"flex items-center justify-between mt-2 px-1"},U("p",{class:"text-[11px] text-muted-foreground"},M.selectedUrls.size," of ",M.relays.length," selected",M.source!=="none"&&U("span",{class:"ml-1"}," via ",M.source)))))),U(v,null,U(x,null,U(d,null,"Other Relays"),U(l,null,"Manually add relays or create custom profiles for different broadcasting scenarios.")),U(m,null,T.profiles.filter((R)=>!R.builtin).map((R)=>U("div",{key:R.id,class:"mb-4"},U("div",{class:"flex items-center justify-between mb-2"},U("div",{class:"flex items-center gap-2"},U("span",{class:"text-sm font-semibold text-foreground"},R.name),U(h,{variant:"outline",className:"text-[10px]"},R.relays.length," relays")),U(k,{variant:"ghost",size:"xs",className:"text-destructive hover:text-destructive",onClick:()=>g4(R.id)},"Delete")),R.relays.length===0?U("p",{class:"text-xs text-muted-foreground italic px-1 mb-2"},"No relays in this profile"):U("div",{class:"space-y-1 mb-2"},R.relays.map((L)=>U("div",{key:L,class:"flex items-center justify-between group px-3 py-1.5 rounded-md bg-background"},U("span",{class:"text-xs text-foreground font-mono truncate"},L),U(k,{variant:"ghost",size:"xs",className:"text-destructive hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity shrink-0",onClick:()=>N2(R.id,L)},"Remove")))),U("div",{class:"flex gap-2"},U(t,{className:"flex-1 h-8 text-xs",placeholder:"wss://relay.example.com",value:H,onInput:(L)=>this.setState({newCustomRelayUrl:L.target.value}),onKeyDown:(L)=>{if(L.key==="Enter")this.handleAddCustomRelay(R.id)}}),U(k,{size:"sm",className:"h-8",onClick:()=>this.handleAddCustomRelay(R.id)},"Add")),U(N0,{className:"mt-4"}))),T.profiles.filter((R)=>!R.builtin).length===0&&U("p",{class:"text-xs text-muted-foreground italic mb-3"},"No custom relay profiles yet. Create one to manually specify additional relays."),U("div",{class:"flex gap-2 mt-2"},U(t,{className:"flex-1 h-8 text-xs",placeholder:"New profile name...",value:W,onInput:(R)=>this.setState({newProfileName:R.target.value}),onKeyDown:(R)=>{if(R.key==="Enter")this.handleCreateProfile()}}),U(k,{size:"sm",variant:"secondary",className:"h-8",onClick:this.handleCreateProfile},"Create Profile")))),U(v,null,U(x,null,U(d,null,"How it works")),U(m,null,U("ul",{class:"text-sm text-muted-foreground space-y-1.5"},U("li",null," Your Nostr identity is bootstrapped by querying indexer relays for your profile (kind 0) and relay list (NIP-65 kind 10002)."),U("li",null," ",U("strong",null,"Outbox relays")," are your NIP-65 write relays  where your followers expect to find your events."),U("li",null," ",U("strong",null,"Broadcast relays")," are well-connected relays discovered via NIP-66 monitors for maximum network reach."),U("li",null," ",U("strong",null,"Custom profiles")," let you manually add relays for specific broadcasting scenarios."),U("li",null," When you go live, NIP-53 events are published to all selected outbox + broadcast relays."),U("li",null," Relay selections are shared across the Mycelium ecosystem via localStorage.")))))}}class B7 extends N{unsubAuth=null;state={activeTab:"overview",token:"",authenticated:!1,authChecking:!0,authError:null,streamKeyInput:""};componentDidMount(){u4(),this.unsubAuth=u1(()=>this.onAuthChange()),this.onAuthChange()}componentWillUnmount(){this.unsubAuth?.()}async onAuthChange(){let $=L0();if($.pubkey)await this.verifyBearerToken($.pubkey);else if(!$.isLoading)this.setState({authChecking:!1})}async verifyBearerToken($){this.setState({authChecking:!0,authError:null});try{if(!(await fetch("/api/admin/serverconfig",{headers:{Authorization:`Bearer ${$}`}})).ok)throw new Error("Not authorized");this.setState({authenticated:!0,token:$,authChecking:!1,authError:null})}catch{this.setState({authenticated:!1,authChecking:!1,authError:"Your Nostr identity is not authorized as admin."})}}handleStreamKeyLogin=async($)=>{$.preventDefault();let J=this.state.streamKeyInput.trim();if(!J)return;this.setState({authChecking:!0,authError:null});try{if(!(await fetch("/api/admin/serverconfig",{headers:{Authorization:"Basic "+btoa("admin:"+J)}})).ok)throw new Error("Invalid stream key");this.setState({authenticated:!0,token:J,authChecking:!1,authError:null})}catch{this.setState({authenticated:!1,authChecking:!1,authError:"Invalid stream key."})}};handleNostrLogin=()=>{O2()};handleTabChange=($)=>{this.setState({activeTab:$})};getAuthHeaders(){let{token:$}=this.state;if($.length===64)return{Authorization:`Bearer ${$}`};return{Authorization:"Basic "+btoa("admin:"+$)}}renderTab(){let{activeTab:$,token:J}=this.state;switch($){case"overview":return U(Z7,{token:J});case"general":return U(q7,{token:J});case"video":return U(Q7,{token:J});case"chat":return U(Y7,{token:J});case"viewers":return U(X7,{token:J});case"logs":return U(U7,{token:J});case"tokens":return U(K7,{token:J});case"nostr":return U(w7,null);case"relays":return U(G7,null);default:return null}}render(){let{authenticated:$,authChecking:J,authError:Z,streamKeyInput:q}=this.state,Q=L0();if(J)return U("div",{class:"flex items-center justify-center min-h-screen bg-background"},U("div",{class:"flex flex-col items-center gap-4"},U($1,{size:"lg"}),U("p",{class:"text-sm text-muted-foreground"},"Checking authorization...")));if(!$)return U("div",{class:"flex items-center justify-center min-h-screen bg-background"},U(v,{className:"w-full max-w-sm py-6 gap-5 mx-4"},U(x,{className:"text-center"},U("div",{class:"mx-auto size-14 rounded-2xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center mb-3 ring-1 ring-primary/10"},U("svg",{class:"size-7 text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},U("polygon",{points:"5 3 19 12 5 21 5 3"}))),U(d,{className:"text-xl font-bold"},"Oni Admin"),U(l,{className:"text-sm mt-1"},Q.pubkey?"Your Nostr identity is not authorized. Use the stream key instead.":"Sign in with Nostr or enter your stream key.")),U(m,{className:"space-y-5"},!Q.pubkey&&U(k,{onClick:this.handleNostrLogin,className:"w-full h-10 gap-2 font-semibold",variant:"outline",disabled:Q.isLoading},Q.isLoading?U($1,{size:"sm",className:"mr-1"}):U("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})),"Sign in with Nostr"),U("div",{class:"relative"},U("div",{class:"absolute inset-0 flex items-center"},U("span",{class:"w-full border-t border-border"})),U("div",{class:"relative flex justify-center text-xs uppercase"},U("span",{class:"bg-card px-3 text-muted-foreground/50 font-medium tracking-wider"},"or stream key"))),U("form",{onSubmit:this.handleStreamKeyLogin,class:"space-y-3"},U("div",{class:"space-y-2"},U(Y0,{className:"text-xs font-semibold text-muted-foreground/70"},"Stream Key"),U(t,{type:"password",value:q,onInput:(Y)=>this.setState({streamKeyInput:Y.target.value}),placeholder:"Enter your stream key",className:"h-10"})),Z&&U(H0,{variant:"destructive",className:"py-2.5 border-destructive/20 bg-destructive/5"},U(F0,{className:"text-xs"},Z)),U(k,{type:"submit",className:"w-full h-10 font-semibold"},"Sign In"))),U(p8,{className:"justify-center pt-2"},U("a",{href:"/",class:"text-xs font-medium text-muted-foreground/50 hover:text-foreground transition-colors flex items-center gap-1.5"},U("svg",{class:"size-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})),"Back to stream"))));return U(t9,{activeTab:this.state.activeTab,onTabChange:this.handleTabChange},this.renderTab())}}var tq=document.getElementById("root");if(tq){let $=window.location.pathname.startsWith("/admin");p7($?U(B7,null):U(a9,null),tq)}

//# debugId=0957C21EEFFBC44264756E2164756E21
//# sourceMappingURL=main-ee0xzy4w.js.map
