import{a as IY,b as SY}from"../chunk-tvrdndbw.js";var o2=Array.isArray;function l5($){let J=typeof $;return J==="string"||J==="number"}function y($){return $===void 0||$===null}function l2($){return $===null||$===!1||$===!0||$===void 0}function r($){return typeof $==="function"}function i2($){return typeof $==="string"}function kZ($){return typeof $==="number"}function v0($){return $===null}function fZ($){return $===void 0}function D8($){return!v0($)&&typeof $==="object"}var S0={},t2="$F";class a1{constructor(){this.componentDidAppear=[],this.componentWillDisappear=[],this.componentWillMove=[]}}function P8($){return $.substring(2).toLowerCase()}function w6($,J){$.appendChild(J)}function t5($,J,Z){if(v0(Z))w6($,J);else $.insertBefore(J,Z)}function bZ($,J){if(J)return document.createElementNS("http://www.w3.org/2000/svg",$);return document.createElement($)}function vZ($,J,Z){$.replaceChild(J,Z)}function X6($,J){$.removeChild(J)}function K6($){for(let J=0;J<$.length;J++)$[J]()}function yZ($,J,Z){let q=$.children;if((Z&4)!==0)return q.$LI;if((Z&8192)!==0)return $.childFlags===2?q:q[J?0:q.length-1];return q}function o0($,J){let Z,q=$;while(!y(q)){if(Z=q.flags,(Z&1521)!==0)return q.dom;q=yZ(q,J,Z)}return null}function e5($,J){let Z=$.length,q;while((q=$.pop())!==void 0)q(()=>{if(--Z<=0&&r(J))J()})}function EZ($){for(let J=0;J<$.length;J++)$[J].fn();for(let J=0;J<$.length;J++){let Z=$[J];t5(Z.parent,Z.dom,Z.next)}$.splice(0,$.length)}function $4($,J,Z){while(!y($)){let q=$.flags;if((q&1521)!==0){if(!Z||$.dom.parentNode===J)X6(J,$.dom);return}let Q=$.children;if((q&4)!==0)$=Q.$LI;if((q&8)!==0)$=Q;if((q&8192)!==0)if($.childFlags===2)$=Q;else{for(let Y=0,w=Q.length;Y<w;++Y)$4(Q[Y],J,!1);return}}}function uZ($,J){return function(){$4($,J,!0)}}function J4($,J,Z){if(Z.componentWillDisappear.length>0)e5(Z.componentWillDisappear,uZ($,J));else $4($,J,!1)}function gZ($,J,Z,q,Q,Y,w,X){$.componentWillMove.push({dom:q,fn:()=>{if((w&4)!==0)Z.componentWillMove(J,Q,q);else if((w&8)!==0)Z.onComponentWillMove(J,Q,q,X)},next:Y,parent:Q})}function U6($,J,Z,q,Q){let Y,w,X=J.flags;while(!y(J)){let U=J.flags;if((U&1521)!==0){if(!y(Y)&&(r(Y.componentWillMove)||r(Y.onComponentWillMove)))gZ(Q,$,Y,J.dom,Z,q,X,w);else t5(Z,J.dom,q);return}let B=J.children;if((U&4)!==0)Y=J.children,w=J.props,J=B.$LI;else if((U&8)!==0)Y=J.ref,w=J.props,J=B;else if((U&8192)!==0)if(J.childFlags===2)J=B;else{for(let G=0,T=B.length;G<T;++G)U6($,B[G],Z,q,Q);return}}}function B6($,J,Z){if(r($.constructor.getDerivedStateFromProps))return{...Z,...$.constructor.getDerivedStateFromProps(J,Z)};return Z}var n2={v:!1},i5={createVNode:null};function c2($,J){$.textContent=J}function G6($,J){return D8($)&&$.event===J.event&&$.data===J.data}function T6($,J){for(let Z in J)if(fZ($[Z]))$[Z]=J[Z];return $}function V8($,J){return r($)&&($(J),!0)}var s2="$";function Z4($,J,Z,q,Q,Y,w,X){this.childFlags=$,this.children=J,this.className=Z,this.dom=null,this.flags=q,this.key=Q===void 0?null:Q,this.props=Y===void 0?null:Y,this.ref=w===void 0?null:w,this.type=X}function I8($,J,Z,q,Q,Y,w,X){let U=Q===void 0?1:Q,B=new Z4(U,q,Z,$,w,Y,X,J);if(i5.createVNode)i5.createVNode(B);if(U===0)pZ(B,B.children);return B}function hZ($,J,Z){if($&4)return Z;let q=($&32768?J.render:J).defaultHooks;if(y(q))return Z;if(y(Z))return q;return T6(Z,q)}function xZ($,J,Z){let q=($&32768?J.render:J).defaultProps;if(y(q))return Z;if(y(Z))return{...q};return T6(Z,q)}function mZ($,J){if($&12)return $;if(J.prototype?.render)return 4;if(J.render)return 32776;return 8}function M6($,J,Z,q,Q){$=mZ($,J);let Y=new Z4(1,null,null,$,q,xZ($,J,Z),hZ($,J,Q),J);if(r(i5.createVNode))i5.createVNode(Y);return Y}function e2($,J){return new Z4(1,y($)||$===!0||$===!1?"":$,null,16,J,null,null,null)}function q4($,J,Z){let q=I8(8192,8192,null,$,J,null,Z,null);switch(q.childFlags){case 1:q.children=Q4(),q.childFlags=2;break;case 16:q.children=[e2($)],q.childFlags=4;break}return q}function dZ($){let{children:J,childFlags:Z}=$;return q4(Z===2?P0(J):J.map(P0),Z,$.key)}function P0($){let J=$.flags&-16385,Z=$.props;if(J&14){if(!v0(Z)){let q=Z;Z={};for(let Q in q)Z[Q]=q[Q]}}if((J&8192)===0)return new Z4($.childFlags,$.children,$.className,J,$.key,Z,$.ref,$.type);return dZ($)}function Q4(){return e2("",null)}function z6($,J,Z,q){for(let Q=$.length;Z<Q;Z++){let Y=$[Z];if(!l2(Y)){let w=q+s2+Z;if(o2(Y))z6(Y,J,0,w);else{if(l5(Y))Y=e2(Y,w);else{let X=Y.key,U=i2(X)&&X[0]===s2;if(Y.flags&81920||U)Y=P0(Y);if(Y.flags|=65536,!U)if(v0(X))Y.key=w;else Y.key=q+X;else if(X.substring(0,q.length)!==q)Y.key=q+X}J.push(Y)}}}}function H6($){switch($){case"svg":return 32;case"input":return 64;case"select":return 256;case"textarea":return 128;case t2:return 8192;default:return 1}}function pZ($,J){let Z,q=1;if(l2(J))Z=J;else if(l5(J))q=16,Z=J;else if(o2(J)){let Q=J.length;for(let Y=0;Y<Q;++Y){let w=J[Y];if(l2(w)||o2(w)){Z=Z||J.slice(0,Y),z6(J,Z,Y,"");break}else if(l5(w))Z=Z||J.slice(0,Y),Z.push(e2(w,s2+Y));else{let X=w.key,U=(w.flags&81920)>0,B=v0(X),G=i2(X)&&X[0]===s2;if(U||B||G){if(Z=Z||J.slice(0,Y),U||G)w=P0(w);if(B||G)w.key=s2+Y;Z.push(w)}else if(Z)Z.push(w);w.flags|=65536}}if(Z=Z||J,Z.length===0)q=1;else q=8}else{if(Z=J,Z.flags|=65536,J.flags&81920)Z=P0(J);q=2}return $.children=Z,$.childFlags=q,$}function S8($){if(l2($)||l5($))return e2($,null);if(o2($))return q4($,0,null);return $.flags&16384?P0($):$}var i1="http://www.w3.org/1999/xlink",j8="http://www.w3.org/XML/1998/namespace",$6={"xlink:actuate":i1,"xlink:arcrole":i1,"xlink:href":i1,"xlink:role":i1,"xlink:show":i1,"xlink:title":i1,"xlink:type":i1,"xml:base":j8,"xml:lang":j8,"xml:space":j8};function Y4($){return{onClick:$,onDblClick:$,onFocusIn:$,onFocusOut:$,onKeyDown:$,onKeyPress:$,onKeyUp:$,onMouseDown:$,onMouseMove:$,onMouseUp:$,onTouchEnd:$,onTouchMove:$,onTouchStart:$}}var F6=Y4(0),R8=Y4(null),W6=Y4(!0);function J6($,J){let Z=J.$EV;if(!Z)Z=J.$EV=Y4(null);if(!Z[$]){if(++F6[$]===1)R8[$]=tZ($)}return Z}function j6($,J){let Z=J.$EV;if(Z?.[$]){if(--F6[$]===0)document.removeEventListener(P8($),R8[$]),R8[$]=null;Z[$]=null}}function rZ($,J,Z,q){if(r(Z))J6($,q)[$]=Z;else if(D8(Z)){if(G6(J,Z))return;J6($,q)[$]=Z}else j6($,q)}function cZ($){return r($.composedPath)?$.composedPath()[0]:$.target}function sZ($,J,Z,q){let Q=cZ($);do{if(J&&Q.disabled)return;let Y=Q.$EV;if(!y(Y)){let w=Y[Z];if(w){if(q.dom=Q,w.event)w.event(w.data,$);else w($);if($.cancelBubble)return}}Q=Q.parentNode}while(!v0(Q))}function oZ(){if(this.cancelBubble=!0,!this.immediatePropagationStopped)this.stopImmediatePropagation()}function lZ(){return this.defaultPrevented}function iZ(){return this.cancelBubble}function nZ($){let J={dom:document};return $.isDefaultPrevented=lZ,$.isPropagationStopped=iZ,$.stopPropagation=oZ,Object.defineProperty($,"currentTarget",{configurable:!0,get:function Z(){return J.dom}}),J}function aZ($){let J=$==="onClick"||$==="onDblClick";return function(Z){sZ(Z,J,$,nZ(Z))}}function tZ($){let J=aZ($);return document.addEventListener(P8($),J),J}function eZ($,J){let Z=document.createElement("i");return Z.innerHTML=J,Z.innerHTML===$.innerHTML}function Z6($,J,Z){let q=$[J];if(q)if(q.event)q.event(q.data,Z);else q(Z);else{let Q=J.toLowerCase();if(r($[Q]))$[Q](Z)}}function $5($,J){let Z=function q(Q){let Y=this.$V;if(y(Y))return;let w=Y.props??S0,X=Y.dom;if(i2($))Z6(w,$,Q);else for(let U=0;U<$.length;++U)Z6(w,$[U],Q);if(r(J)){let U=this.$V,B=U.props??S0;J(B,X,!1,U)}};return Object.defineProperty(Z,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),Z}function n1($,J,Z){let q=`$${J}`,Q=$[q];if(Q){if(Q[1].wrapped)return;$.removeEventListener(Q[0],Q[1]),$[q]=null}if(r(Z))$.addEventListener(J,Z),$[q]=[J,Z]}function C8($){return $==="checkbox"||$==="radio"}var $q=$5("onInput",N8),Jq=$5(["onClick","onChange"],N8);function R6($){$.stopPropagation()}R6.wrapped=!0;function Zq($,J){if(C8(J.type))n1($,"change",Jq),n1($,"click",R6);else n1($,"input",$q)}function N8($,J){let{type:Z,value:q,checked:Q,multiple:Y,defaultValue:w}=$,X=!y(q);if(Z!=null&&Z!==J.type)J.setAttribute("type",Z);if(!y(Y)&&Y!==J.multiple)J.multiple=Y;if(!y(w)&&!X)J.defaultValue=w+"";if(C8(Z)){if(X)J.value=q;if(!y(Q))J.checked=Q}else if(X&&J.value!==q)J.defaultValue=q,J.value=q;else if(!y(Q))J.checked=Q}function r2($,J){if($.type==="option")qq($,J);else{let{children:Z,flags:q}=$;if((q&4)!==0)r2(Z.$LI,J);else if((q&8)!==0)r2(Z,J);else if($.childFlags===2)r2(Z,J);else if(($.childFlags&12)!==0)for(let Q=0,Y=Z.length;Q<Y;++Q)r2(Z[Q],J)}}function qq($,J){let Z=$.props??S0,q=Z.value,Q=$.dom;if(Q.value=q,q===J||o2(J)&&J.includes(q))Q.selected=!0;else if(!y(J)||!y(Z.selected))Q.selected=Boolean(Z.selected)}var Qq=$5("onChange",_6);function Yq($){n1($,"change",Qq)}function _6($,J,Z,q){let Q=Boolean($.multiple);if(!y($.multiple)&&Q!==J.multiple)J.multiple=Q;let Y=$.selectedIndex;if(Y===-1)J.selectedIndex=-1;if(q.childFlags!==1){let X=$.value;if(kZ(Y)&&Y>-1&&!y(J.options[Y]))X=J.options[Y].value;if(Z&&y(X))X=$.defaultValue;r2(q,X)}}var wq=$5("onInput",L6),Xq=$5("onChange");function Kq($,J){if(n1($,"input",wq),r(J.onChange))n1($,"change",Xq)}function L6($,J,Z){let q=$.value,Q=J.value;if(y(q)){if(Z){let Y=$.defaultValue;if(!y(Y)&&Y!==Q)J.defaultValue=Y,J.value=Y}}else if(Q!==q)J.defaultValue=q,J.value=q}function D6($,J,Z,q,Q,Y){if(($&64)!==0)N8(q,Z);else if(($&256)!==0)_6(q,Z,Q,J);else if(($&128)!==0)L6(q,Z,Q);if(Y)Z.$V=J}function Uq($,J,Z){if(($&64)!==0)Zq(J,Z);else if(($&256)!==0)Yq(J);else if(($&128)!==0)Kq(J,Z)}function P6($){return C8($.type)?!y($.checked):!y($.value)}function n5($){if(!y($)){if(!V8($,null)&&$.current)$.current=null}}function w4($,J,Z){if(!y($)&&(r($)||$.current!==void 0))Z.push(()=>{if(!V8($,J)&&$.current!==void 0)$.current=J})}function J1($,J,Z){F1($,Z),J4($,J,Z)}function F1($,J){let{flags:Z,children:q}=$,Q;if((Z&481)!==0){Q=$.ref;let Y=$.props;n5(Q);let w=$.childFlags;if(!v0(Y)){let X=Object.keys(Y);for(let U=0,B=X.length;U<B;U++){let G=X[U];if(W6[G])j6(G,$.dom)}}if(w&12)a2(q,J);else if(w===2)F1(q,J)}else if(q){if(Z&4){if(r(q.componentWillUnmount))q.componentWillUnmount();let Y=J;if(r(q.componentWillDisappear))Y=new a1,q6(J,q,q.$LI.dom,Z,void 0);n5($.ref),q.$UN=!0,F1(q.$LI,Y)}else if(Z&8){let Y=J;if(Q=$.ref,!y(Q)){let w=null;if(r(Q.onComponentWillUnmount))w=o0($,!0),Q.onComponentWillUnmount(w,$.props||S0);if(r(Q.onComponentWillDisappear))Y=new a1,w=w||o0($,!0),q6(J,Q,w,Z,$.props)}F1(q,Y)}else if(Z&1024)J1(q,$.ref,J);else if(Z&8192){if($.childFlags&12)a2(q,J)}}}function a2($,J){for(let Z=0,q=$.length;Z<q;++Z)F1($[Z],J)}function Bq($,J){return function(){if(J)for(let Z=0;Z<$.length;Z++){let q=$[Z];$4(q,J,!1)}}}function s5($,J,Z){if(Z.componentWillDisappear.length>0)e5(Z.componentWillDisappear,Bq(J,$));else $.textContent=""}function a5($,J,Z,q){if(a2(Z,q),J.flags&8192)J4(J,$,q);else s5($,Z,q)}function q6($,J,Z,q,Q){$.componentWillDisappear.push((Y)=>{if(q&4)J.componentWillDisappear(Z,Y);else if(q&8)J.onComponentWillDisappear(Z,Q,Y)})}function Gq($){let J=$.event;return function(Z){J($.data,Z)}}function Tq($,J,Z,q){if(D8(Z)){if(G6(J,Z))return;Z=Gq(Z)}n1(q,P8($),Z)}function Mq($,J,Z){if(y(J)){Z.removeAttribute("style");return}let q=Z.style,Q,Y;if(i2(J)){q.cssText=J;return}if(!y($)&&!i2($)){for(Q in J)if(Y=J[Q],Y!==$[Q])q.setProperty(Q,Y);for(Q in $)if(y(J[Q]))q.removeProperty(Q)}else for(Q in J)Y=J[Q],q.setProperty(Q,Y)}function zq($,J,Z,q,Q){let Y=$?.__html||"",w=J?.__html||"";if(Y!==w){if(!y(w)&&!eZ(q,w)){if(!v0(Z)){if(Z.childFlags&12)a2(Z.children,Q);else if(Z.childFlags===2)F1(Z.children,Q);Z.children=null,Z.childFlags=1}q.innerHTML=w}}}function Hq($,J,Z){let q=y($)?"":$;if(J[Z]!==q)J[Z]=q}function _8($,J,Z,q,Q,Y,w,X){switch($){case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":case"selectedIndex":break;case"autoFocus":q.autofocus=!!Z;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":q[$]=!!Z;break;case"defaultChecked":case"value":case"volume":if(Y&&$==="value")break;Hq(Z,q,$);break;case"style":Mq(J,Z,q);break;case"dangerouslySetInnerHTML":zq(J,Z,w,q,X);break;default:if(W6[$])rZ($,J,Z,q);else if($.charCodeAt(0)===111&&$.charCodeAt(1)===110)Tq($,J,Z,q);else if(y(Z))q.removeAttribute($);else if(Q&&$6[$])q.setAttributeNS($6[$],$,Z);else q.setAttribute($,Z);break}}function Fq($,J,Z,q,Q,Y){let w=!1,X=(J&448)>0;if(X){if(w=P6(Z),w)Uq(J,q,Z)}for(let U in Z)_8(U,null,Z[U],q,Q,w,null,Y);if(X)D6(J,$,q,Z,!0,w)}function V6($,J,Z){let q=S8($.render(J,$.state,Z)),Q=Z;if(r($.getChildContext))Q={...Z,...$.getChildContext()};return $.$CX=Q,q}function Wq($,J,Z,q,Q,Y){let w=new J(Z,q),X=w.$N=Boolean(J.getDerivedStateFromProps||w.getSnapshotBeforeUpdate);if(w.$SVG=Q,w.$L=Y,$.children=w,w.$BS=!1,w.context=q,w.props===S0)w.props=Z;if(!X){if(r(w.componentWillMount)){w.$BR=!0,w.componentWillMount();let U=w.$PS;if(!v0(U)){let B=w.state;if(v0(B))w.state=U;else for(let G in U)B[G]=U[G];w.$PS=null}w.$BR=!1}}else w.state=B6(w,Z,w.state);return w.$LI=V6(w,Z,q),w}function I6($,J){let Z=$.props||S0;return $.flags&32768?$.type.render(Z,$.ref,J):$.type(Z,J)}function N0($,J,Z,q,Q,Y,w){let X=$.flags|=16384;if((X&481)!==0)_q($,J,Z,q,Q,Y,w);else if((X&4)!==0)Lq($,J,Z,q,Q,Y,w);else if(X&8)Dq($,J,Z,q,Q,Y,w);else if(X&16)S6($,J,Q);else if(X&8192)Rq($,Z,J,q,Q,Y,w);else if(X&1024)jq($,Z,J,Q,Y,w)}function jq($,J,Z,q,Q,Y){N0($.children,$.ref,J,!1,null,Q,Y);let w=Q4();S6(w,Z,q),$.dom=w.dom}function Rq($,J,Z,q,Q,Y,w){let{children:X,childFlags:U}=$;if(U&12&&X.length===0)U=$.childFlags=2,X=$.children=Q4();if(U===2)N0(X,Z,J,q,Q,Y,w);else t1(X,Z,J,q,Q,Y,w)}function S6($,J,Z){let q=$.dom=document.createTextNode($.children);if(!v0(J))t5(J,q,Z)}function _q($,J,Z,q,Q,Y,w){let{flags:X,props:U,className:B,childFlags:G}=$,T=$.dom=bZ($.type,q=q||(X&32)>0),M=$.children;if(!y(B)&&B!=="")if(q)T.setAttribute("class",B);else T.className=B;if(G===16)c2(T,M);else if(G!==1){let z=q&&$.type!=="foreignObject";if(G===2){if(M.flags&16384)$.children=M=P0(M);N0(M,T,Z,z,null,Y,w)}else if(G===8||G===4)t1(M,T,Z,z,null,Y,w)}if(!v0(J))t5(J,T,Q);if(!v0(U))Fq($,X,U,T,q,w);w4($.ref,T,Y)}function t1($,J,Z,q,Q,Y,w){for(let X=0;X<$.length;++X){let U=$[X];if(U.flags&16384)$[X]=U=P0(U);N0(U,J,Z,q,Q,Y,w)}}function Lq($,J,Z,q,Q,Y,w){let X=Wq($,$.type,$.props||S0,Z,q,Y),U=w;if(r(X.componentDidAppear))U=new a1;N0(X.$LI,J,X.$CX,q,Q,Y,U),Sq($.ref,X,Y,w)}function Dq($,J,Z,q,Q,Y,w){let X=$.ref,U=w;if(!y(X)&&r(X.onComponentDidAppear))U=new a1;N0($.children=S8(I6($,Z)),J,Z,q,Q,Y,U),Nq($,Y,w)}function Pq($){return()=>{$.componentDidMount()}}function Vq($,J,Z){$.componentDidAppear.push(()=>{J.componentDidAppear(Z)})}function Iq($,J,Z,q){$.componentDidAppear.push(()=>{J.onComponentDidAppear(Z,q)})}function Sq($,J,Z,q){if(w4($,J,Z),r(J.componentDidMount))Z.push(Pq(J));if(r(J.componentDidAppear))Vq(q,J,J.$LI.dom)}function Cq($,J){return()=>{$.onComponentDidMount(o0(J,!0),J.props||S0)}}function Nq($,J,Z){let q=$.ref;if(!y(q)){if(V8(q.onComponentWillMount,$.props||S0),r(q.onComponentDidMount))J.push(Cq(q,$));if(r(q.onComponentDidAppear))Iq(Z,q,o0($,!0),$.props)}}function Aq($,J,Z,q,Q,Y,w){if(F1($,w),(J.flags&$.flags&1521)!==0)N0(J,null,q,Q,null,Y,w),vZ(Z,J.dom,$.dom);else N0(J,Z,q,Q,o0($,!0),Y,w),J4($,Z,w)}function W1($,J,Z,q,Q,Y,w,X){let U=J.flags|=16384;if($.flags!==U||$.type!==J.type||$.key!==J.key||U&2048)if($.flags&16384)Aq($,J,Z,q,Q,w,X);else N0(J,Z,q,Q,Y,w,X);else if(U&481)vq($,J,q,Q,w,X);else if(U&4)gq($,J,Z,q,Q,Y,w,X);else if(U&8)hq($,J,Z,q,Q,Y,w,X);else if(U&16)xq($,J);else if(U&8192)fq($,J,Z,q,Q,w,X);else bq($,J,q,w,X)}function Oq($,J,Z){if($!==J)if($!=="")Z.firstChild.nodeValue=J;else c2(Z,J)}function kq($,J){if($.textContent!==J)$.textContent=J}function fq($,J,Z,q,Q,Y,w){let X=$.children,U=J.children,B=$.childFlags,G=J.childFlags,T=null;if(G&12&&U.length===0)G=J.childFlags=2,U=J.children=Q4();let M=(G&2)!==0;if(B&12){let z=X.length;if(B&8&&G&8||M||!M&&U.length>z)T=o0(X[z-1],!1).nextSibling}A8(B,G,X,U,Z,q,Q,T,$,Y,w)}function bq($,J,Z,q,Q){let Y=$.ref,w=J.ref,X=J.children;if(A8($.childFlags,J.childFlags,$.children,X,Y,Z,!1,null,$,q,Q),J.dom=$.dom,Y!==w&&!l2(X)){let U=X.dom;X6(Y,U),w6(w,U)}}function vq($,J,Z,q,Q,Y){let w=J.dom=$.dom,X=$.props,U=J.props,B=J.flags,G=!1,T=!1,M;if(q=q||(B&32)>0,X!==U){let j=X||S0;if(M=U||S0,M!==S0){if(G=(B&448)>0,G)T=P6(M);for(let _ in M){let V=j[_],D=M[_];if(V!==D)_8(_,V,D,w,q,T,$,Y)}}if(j!==S0){for(let _ in j)if(y(M[_])&&!y(j[_]))_8(_,j[_],null,w,q,T,$,Y)}}let{children:z,className:F}=J;if($.className!==F)if(y(F))w.removeAttribute("class");else if(q)w.setAttribute("class",F);else w.className=F;if(B&4096)kq(w,z);else A8($.childFlags,J.childFlags,$.children,z,w,Z,q&&J.type!=="foreignObject",null,$,Q,Y);if(G)D6(B,J,w,M,!1,T);let H=J.ref,W=$.ref;if(W!==H)n5(W),w4(H,w,Q)}function yq($,J,Z,q,Q,Y,w){F1($,w),t1(J,Z,q,Q,o0($,!0),Y,w),J4($,Z,w)}function Eq($,J,Z,q,Q,Y,w,X,U,B,G){let T=$.length|0,M=J.length|0;if(T===0){if(M>0)t1(J,Z,q,Q,Y,w,X)}else if(M===0)a5(Z,U,$,X);else if(B===8&&G===8)dq($,J,Z,q,Q,T,M,Y,U,w,X);else mq($,J,Z,q,Q,T,M,Y,w,X)}function A8($,J,Z,q,Q,Y,w,X,U,B,G){switch($){case 2:switch(J){case 2:W1(Z,q,Q,Y,w,X,B,G);break;case 1:J1(Z,Q,G);break;case 16:F1(Z,G),c2(Q,q);break;default:yq(Z,q,Q,Y,w,B,G);break}break;case 1:switch(J){case 2:N0(q,Q,Y,w,X,B,G);break;case 1:break;case 16:c2(Q,q);break;default:t1(q,Q,Y,w,X,B,G);break}break;case 16:switch(J){case 16:Oq(Z,q,Q);break;case 2:s5(Q,Z,G),N0(q,Q,Y,w,X,B,G);break;case 1:s5(Q,Z,G);break;default:s5(Q,Z,G),t1(q,Q,Y,w,X,B,G);break}break;default:switch(J){case 16:a2(Z,G),c2(Q,q);break;case 2:a5(Q,U,Z,G),N0(q,Q,Y,w,X,B,G);break;case 1:a5(Q,U,Z,G);break;default:Eq(Z,q,Q,Y,w,X,B,G,U,J,$);break}break}}function uq($,J,Z,q,Q){Q.push(()=>{$.componentDidUpdate(J,Z,q)})}function C6($,J,Z,q,Q,Y,w,X,U,B){let{state:G,props:T}=$,M=Boolean($.$N),z=r($.shouldComponentUpdate);if(M)J=B6($,Z,J!==G?{...G,...J}:J);if(w||!z||z&&$.shouldComponentUpdate(Z,J,Q)){if(!M&&r($.componentWillUpdate))$.componentWillUpdate(Z,J,Q);$.props=Z,$.state=J,$.context=Q;let F=null,H=V6($,Z,Q);if(M&&r($.getSnapshotBeforeUpdate))F=$.getSnapshotBeforeUpdate(T,G);if(W1($.$LI,H,q,$.$CX,Y,X,U,B),$.$LI=H,r($.componentDidUpdate))uq($,T,G,F,U)}else $.props=Z,$.state=J,$.context=Q}function gq($,J,Z,q,Q,Y,w,X){let U=J.children=$.children;if(v0(U))return;U.$L=w;let B=J.props||S0,G=J.ref,T=$.ref,M=U.state;if(!U.$N){if(r(U.componentWillReceiveProps)){if(U.$BR=!0,U.componentWillReceiveProps(B,q),U.$UN)return;U.$BR=!1}if(!v0(U.$PS))M={...M,...U.$PS},U.$PS=null}if(C6(U,M,B,Z,q,Q,!1,Y,w,X),T!==G)n5(T),w4(G,U,w)}function hq($,J,Z,q,Q,Y,w,X){let U=!0,B=J.props||S0,G=J.ref,T=$.props,M=!y(G),z=$.children;if(M&&r(G.onComponentShouldUpdate))U=G.onComponentShouldUpdate(T,B);if(U){if(M&&r(G.onComponentWillUpdate))G.onComponentWillUpdate(T,B);let F=S8(I6(J,q));if(W1(z,F,Z,q,Q,Y,w,X),J.children=F,M&&r(G.onComponentDidUpdate))G.onComponentDidUpdate(T,B)}else J.children=z}function xq($,J){let Z=J.children,q=J.dom=$.dom;if(Z!==$.children)q.nodeValue=Z}function mq($,J,Z,q,Q,Y,w,X,U,B){let G=Y>w?w:Y,T=0,M,z;for(;T<G;++T){if(M=J[T],z=$[T],M.flags&16384)M=J[T]=P0(M);W1(z,M,Z,q,Q,X,U,B),$[T]=M}if(Y<w)for(T=G;T<w;++T){if(M=J[T],M.flags&16384)M=J[T]=P0(M);N0(M,Z,q,Q,X,U,B)}else if(Y>w)for(T=G;T<Y;++T)J1($[T],Z,B)}function dq($,J,Z,q,Q,Y,w,X,U,B,G){let T=Y-1,M=w-1,z=0,F=$[z],H=J[z],W,j;$:{while(F.key===H.key){if(H.flags&16384)J[z]=H=P0(H);if(W1(F,H,Z,q,Q,X,B,G),$[z]=H,++z,z>T||z>M)break $;F=$[z],H=J[z]}F=$[T],H=J[M];while(F.key===H.key){if(H.flags&16384)J[M]=H=P0(H);if(W1(F,H,Z,q,Q,X,B,G),$[T]=H,T--,M--,z>T||z>M)break $;F=$[T],H=J[M]}}if(z>T){if(z<=M){W=M+1,j=W<w?o0(J[W],!0):X;while(z<=M){if(H=J[z],H.flags&16384)J[z]=H=P0(H);++z,N0(H,Z,q,Q,j,B,G)}}}else if(z>M)while(z<=T)J1($[z++],Z,G);else pq($,J,q,Y,w,T,M,z,Z,Q,X,U,B,G)}function pq($,J,Z,q,Q,Y,w,X,U,B,G,T,M,z){let F,H,W=0,j=0,_=X,V=X,D=Y-X+1,L=w-X+1,C=new Int32Array(L+1),S=D===q,P=!1,I=0,v=0;if(Q<4||(D|L)<32){for(j=_;j<=Y;++j)if(F=$[j],v<L){for(X=V;X<=w;X++)if(H=J[X],F.key===H.key){if(C[X-V]=j+1,S){S=!1;while(_<j)J1($[_++],U,z)}if(I>X)P=!0;else I=X;if(H.flags&16384)J[X]=H=P0(H);W1(F,H,U,Z,B,G,M,z),++v;break}if(!S&&X>w)J1(F,U,z)}else if(!S)J1(F,U,z)}else{let b={};for(j=V;j<=w;++j)b[J[j].key]=j;for(j=_;j<=Y;++j)if(F=$[j],v<L){if(X=b[F.key],X!==void 0){if(S){S=!1;while(j>_)J1($[_++],U,z)}if(C[X-V]=j+1,I>X)P=!0;else I=X;if(H=J[X],H.flags&16384)J[X]=H=P0(H);W1(F,H,U,Z,B,G,M,z),++v}else if(!S)J1(F,U,z)}else if(!S)J1(F,U,z)}if(S)a5(U,T,$,z),t1(J,U,Z,B,G,M,z);else if(P){let b=rq(C);X=b.length-1;for(j=L-1;j>=0;j--)if(C[j]===0){if(I=j+V,H=J[I],H.flags&16384)J[I]=H=P0(H);W=I+1,N0(H,U,Z,B,W<Q?o0(J[W],!0):G,M,z)}else if(X<0||j!==b[X])I=j+V,H=J[I],W=I+1,U6(T,H,U,W<Q?o0(J[W],!0):G,z);else X--;if(z.componentWillMove.length>0)EZ(z.componentWillMove)}else if(v!==L){for(j=L-1;j>=0;j--)if(C[j]===0){if(I=j+V,H=J[I],H.flags&16384)J[I]=H=P0(H);W=I+1,N0(H,U,Z,B,W<Q?o0(J[W],!0):G,M,z)}}}var H1,c5,Q6=0;function rq($){let J=0,Z=0,q=0,Q=0,Y=0,w=0,X=0,U=$.length;if(U>Q6)Q6=U,H1=new Int32Array(U),c5=new Int32Array(U);for(;Z<U;++Z)if(J=$[Z],J!==0){if(q=H1[Q],$[q]<J){c5[Z]=q,H1[++Q]=Z;continue}Y=0,w=Q;while(Y<w)if(X=Y+w>>1,$[H1[X]]<J)Y=X+1;else w=X;if(J<$[H1[Y]]){if(Y>0)c5[Z]=H1[Y-1];H1[Y]=Z}}Y=Q+1;let B=new Int32Array(Y);w=H1[Y-1];while(Y-- >0)B[Y]=w,w=c5[w],H1[Y]=0;return B}var cq=typeof document!=="undefined";if(cq){if(window.Node)Node.prototype.$EV=null,Node.prototype.$V=null}function sq($,J,Z,q){let Q=[],Y=new a1,w=J.$V;if(n2.v=!0,y(w)){if(!y($)){if(($.flags&16384)!==0)$=P0($);N0($,J,q,!1,null,Q,Y),J.$V=$,w=$}}else if(y($))J1(w,J,Y),J.$V=null;else{if($.flags&16384)$=P0($);W1(w,$,J,q,!1,null,Q,Y),w=J.$V=$}if(K6(Q),e5(Y.componentDidAppear),n2.v=!1,r(Z))Z()}function N6($,J,Z=null,q=S0){sq($,J,Z,q)}var o5=[],oq=Promise.resolve().then.bind(Promise.resolve()),L8=!1;function Y6($,J,Z,q){let Q=$.$PS;if(r(J))J=J(Q?{...$.state,...Q}:$.state,$.props,$.context);if(y(Q))$.$PS=J;else for(let Y in J)Q[Y]=J[Y];if(!$.$BR){if(!n2.v){if(o5.length===0){if(A6($,q),r(Z))Z.call($);return}}if(!o5.includes($))o5.push($);if(q)$.$F=!0;if(!L8)L8=!0,oq(iq);if(r(Z)){let Y=$.$QU;if(!Y)Y=$.$QU=[];Y.push(Z)}}else if(r(Z))$.$L.push(Z.bind($))}function lq($){let J=$.$QU;for(let Z=0;Z<J.length;++Z)J[Z].call($);$.$QU=null}function iq(){let $;L8=!1;while($=o5.shift())if(!$.$UN){let J=$.$F;if($.$F=!1,A6($,J),$.$QU)lq($)}}function A6($,J){if(J||!$.$BR){let Z=$.$PS;$.$PS=null;let q=[],Q=new a1;n2.v=!0,C6($,{...$.state,...Z},$.props,o0($.$LI,!0).parentNode,$.context,$.$SVG,J,null,q,Q),K6(q),e5(Q.componentDidAppear),n2.v=!1}else $.state=$.$PS,$.$PS=null}class N{constructor($,J){this.state=null,this.props=void 0,this.context=void 0,this.displayName=void 0,this.$BR=!1,this.$BS=!0,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$QU=null,this.$N=!1,this.$SSR=void 0,this.$L=null,this.$SVG=!1,this.$F=!1,this.props=$||S0,this.context=J||S0}forceUpdate($){if(this.$UN)return;Y6(this,{},$,!0)}setState($,J){if(this.$UN)return;if(!this.$BS)Y6(this,$,J,!1)}render($,J,Z){return null}}N.defaultProps=null;function O6($){return $===void 0||$===null}function nq($){return typeof $==="string"}function k6($){return $===void 0}function K($,J,...Z){let q,Q=null,Y=null,w=null,X,U,B=Z.length;if(B===1)q=Z[0];else if(B>1){q=[];for(let G=0;G<B;G++)q.push(Z[G])}if(nq($)){if(X=H6($),!O6(J)){U={};for(let G in J)if(G==="className"||G==="class")w=J[G];else if(G==="key")Y=J.key;else if(G==="children"&&k6(q))q=J.children;else if(G==="ref")Q=J.ref;else{if(G==="contenteditable")X|=4096;U[G]=J[G]}}}else{if(X=2,!k6(q)){if(!J)J={};J.children=q}if(!O6(J)){U={};for(let G in J)if(G==="key")Y=J.key;else if(G==="ref")Q=J.ref;else switch(G){case"onComponentDidAppear":case"onComponentDidMount":case"onComponentDidUpdate":case"onComponentShouldUpdate":case"onComponentWillDisappear":case"onComponentWillMount":case"onComponentWillUnmount":case"onComponentWillUpdate":if(!Q)Q={};Q[G]=J[G];break;default:U[G]=J[G];break}}return M6(X,$,U,Y,Q)}if(X&8192)return q4(B===1?[q]:q,0,Y);return I8(X,$,w,q,0,U,Y,Q)}function f6($){var J,Z,q="";if(typeof $=="string"||typeof $=="number")q+=$;else if(typeof $=="object")if(Array.isArray($)){var Q=$.length;for(J=0;J<Q;J++)$[J]&&(Z=f6($[J]))&&(q&&(q+=" "),q+=Z)}else for(Z in $)$[Z]&&(q&&(q+=" "),q+=Z);return q}function J5(){for(var $,J,Z=0,q="",Q=arguments.length;Z<Q;Z++)($=arguments[Z])&&(J=f6($))&&(q&&(q+=" "),q+=J);return q}var aq=($,J)=>{let Z=new Array($.length+J.length);for(let q=0;q<$.length;q++)Z[q]=$[q];for(let q=0;q<J.length;q++)Z[$.length+q]=J[q];return Z},tq=($,J)=>({classGroupId:$,validator:J}),u6=($=new Map,J=null,Z)=>({nextPart:$,validators:J,classGroupId:Z});var b6=[];var eq=($)=>{let J=JQ($),{conflictingClassGroups:Z,conflictingClassGroupModifiers:q}=$;return{getClassGroupId:(w)=>{if(w.startsWith("[")&&w.endsWith("]"))return $Q(w);let X=w.split("-"),U=X[0]===""&&X.length>1?1:0;return g6(X,U,J)},getConflictingClassGroupIds:(w,X)=>{if(X){let U=q[w],B=Z[w];if(U){if(B)return aq(B,U);return U}return B||b6}return Z[w]||b6}}},g6=($,J,Z)=>{if($.length-J===0)return Z.classGroupId;let Q=$[J],Y=Z.nextPart.get(Q);if(Y){let B=g6($,J+1,Y);if(B)return B}let w=Z.validators;if(w===null)return;let X=J===0?$.join("-"):$.slice(J).join("-"),U=w.length;for(let B=0;B<U;B++){let G=w[B];if(G.validator(X))return G.classGroupId}return},$Q=($)=>$.slice(1,-1).indexOf(":")===-1?void 0:(()=>{let J=$.slice(1,-1),Z=J.indexOf(":"),q=J.slice(0,Z);return q?"arbitrary.."+q:void 0})(),JQ=($)=>{let{theme:J,classGroups:Z}=$;return ZQ(Z,J)},ZQ=($,J)=>{let Z=u6();for(let q in $){let Q=$[q];f8(Q,Z,q,J)}return Z},f8=($,J,Z,q)=>{let Q=$.length;for(let Y=0;Y<Q;Y++){let w=$[Y];qQ(w,J,Z,q)}},qQ=($,J,Z,q)=>{if(typeof $==="string"){QQ($,J,Z);return}if(typeof $==="function"){YQ($,J,Z,q);return}wQ($,J,Z,q)},QQ=($,J,Z)=>{let q=$===""?J:h6(J,$);q.classGroupId=Z},YQ=($,J,Z,q)=>{if(XQ($)){f8($(q),J,Z,q);return}if(J.validators===null)J.validators=[];J.validators.push(tq(Z,$))},wQ=($,J,Z,q)=>{let Q=Object.entries($),Y=Q.length;for(let w=0;w<Y;w++){let[X,U]=Q[w];f8(U,h6(J,X),Z,q)}},h6=($,J)=>{let Z=$,q=J.split("-"),Q=q.length;for(let Y=0;Y<Q;Y++){let w=q[Y],X=Z.nextPart.get(w);if(!X)X=u6(),Z.nextPart.set(w,X);Z=X}return Z},XQ=($)=>("isThemeGetter"in $)&&$.isThemeGetter===!0,KQ=($)=>{if($<1)return{get:()=>{return},set:()=>{}};let J=0,Z=Object.create(null),q=Object.create(null),Q=(Y,w)=>{if(Z[Y]=w,J++,J>$)J=0,q=Z,Z=Object.create(null)};return{get(Y){let w=Z[Y];if(w!==void 0)return w;if((w=q[Y])!==void 0)return Q(Y,w),w},set(Y,w){if(Y in Z)Z[Y]=w;else Q(Y,w)}}};var UQ=[],v6=($,J,Z,q,Q)=>({modifiers:$,hasImportantModifier:J,baseClassName:Z,maybePostfixModifierPosition:q,isExternal:Q}),BQ=($)=>{let{prefix:J,experimentalParseClassName:Z}=$,q=(Q)=>{let Y=[],w=0,X=0,U=0,B,G=Q.length;for(let H=0;H<G;H++){let W=Q[H];if(w===0&&X===0){if(W===":"){Y.push(Q.slice(U,H)),U=H+1;continue}if(W==="/"){B=H;continue}}if(W==="[")w++;else if(W==="]")w--;else if(W==="(")X++;else if(W===")")X--}let T=Y.length===0?Q:Q.slice(U),M=T,z=!1;if(T.endsWith("!"))M=T.slice(0,-1),z=!0;else if(T.startsWith("!"))M=T.slice(1),z=!0;let F=B&&B>U?B-U:void 0;return v6(Y,z,M,F)};if(J){let Q=J+":",Y=q;q=(w)=>w.startsWith(Q)?Y(w.slice(Q.length)):v6(UQ,!1,w,void 0,!0)}if(Z){let Q=q;q=(Y)=>Z({className:Y,parseClassName:Q})}return q},GQ=($)=>{let J=new Map;return $.orderSensitiveModifiers.forEach((Z,q)=>{J.set(Z,1e6+q)}),(Z)=>{let q=[],Q=[];for(let Y=0;Y<Z.length;Y++){let w=Z[Y],X=w[0]==="[",U=J.has(w);if(X||U){if(Q.length>0)Q.sort(),q.push(...Q),Q=[];q.push(w)}else Q.push(w)}if(Q.length>0)Q.sort(),q.push(...Q);return q}},TQ=($)=>({cache:KQ($.cacheSize),parseClassName:BQ($),sortModifiers:GQ($),...eq($)}),MQ=/\s+/,zQ=($,J)=>{let{parseClassName:Z,getClassGroupId:q,getConflictingClassGroupIds:Q,sortModifiers:Y}=J,w=[],X=$.trim().split(MQ),U="";for(let B=X.length-1;B>=0;B-=1){let G=X[B],{isExternal:T,modifiers:M,hasImportantModifier:z,baseClassName:F,maybePostfixModifierPosition:H}=Z(G);if(T){U=G+(U.length>0?" "+U:U);continue}let W=!!H,j=q(W?F.substring(0,H):F);if(!j){if(!W){U=G+(U.length>0?" "+U:U);continue}if(j=q(F),!j){U=G+(U.length>0?" "+U:U);continue}W=!1}let _=M.length===0?"":M.length===1?M[0]:Y(M).join(":"),V=z?_+"!":_,D=V+j;if(w.indexOf(D)>-1)continue;w.push(D);let L=Q(j,W);for(let C=0;C<L.length;++C){let S=L[C];w.push(V+S)}U=G+(U.length>0?" "+U:U)}return U},HQ=(...$)=>{let J=0,Z,q,Q="";while(J<$.length)if(Z=$[J++]){if(q=x6(Z))Q&&(Q+=" "),Q+=q}return Q},x6=($)=>{if(typeof $==="string")return $;let J,Z="";for(let q=0;q<$.length;q++)if($[q]){if(J=x6($[q]))Z&&(Z+=" "),Z+=J}return Z},FQ=($,...J)=>{let Z,q,Q,Y,w=(U)=>{let B=J.reduce((G,T)=>T(G),$());return Z=TQ(B),q=Z.cache.get,Q=Z.cache.set,Y=X,X(U)},X=(U)=>{let B=q(U);if(B)return B;let G=zQ(U,Z);return Q(U,G),G};return Y=w,(...U)=>Y(HQ(...U))},WQ=[],V0=($)=>{let J=(Z)=>Z[$]||WQ;return J.isThemeGetter=!0,J},m6=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,d6=/^\((?:(\w[\w-]*):)?(.+)\)$/i,jQ=/^\d+\/\d+$/,RQ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_Q=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,LQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,DQ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,PQ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,z2=($)=>jQ.test($),d=($)=>!!$&&!Number.isNaN(Number($)),A1=($)=>!!$&&Number.isInteger(Number($)),O8=($)=>$.endsWith("%")&&d($.slice(0,-1)),j1=($)=>RQ.test($),VQ=()=>!0,IQ=($)=>_Q.test($)&&!LQ.test($),p6=()=>!1,SQ=($)=>DQ.test($),CQ=($)=>PQ.test($),NQ=($)=>!A($)&&!O($),AQ=($)=>H2($,s6,p6),A=($)=>m6.test($),e1=($)=>H2($,o6,IQ),k8=($)=>H2($,vQ,d),y6=($)=>H2($,r6,p6),OQ=($)=>H2($,c6,CQ),X4=($)=>H2($,l6,SQ),O=($)=>d6.test($),Z5=($)=>F2($,o6),kQ=($)=>F2($,yQ),E6=($)=>F2($,r6),fQ=($)=>F2($,s6),bQ=($)=>F2($,c6),K4=($)=>F2($,l6,!0),H2=($,J,Z)=>{let q=m6.exec($);if(q){if(q[1])return J(q[1]);return Z(q[2])}return!1},F2=($,J,Z=!1)=>{let q=d6.exec($);if(q){if(q[1])return J(q[1]);return Z}return!1},r6=($)=>$==="position"||$==="percentage",c6=($)=>$==="image"||$==="url",s6=($)=>$==="length"||$==="size"||$==="bg-size",o6=($)=>$==="length",vQ=($)=>$==="number",yQ=($)=>$==="family-name",l6=($)=>$==="shadow";var EQ=()=>{let $=V0("color"),J=V0("font"),Z=V0("text"),q=V0("font-weight"),Q=V0("tracking"),Y=V0("leading"),w=V0("breakpoint"),X=V0("container"),U=V0("spacing"),B=V0("radius"),G=V0("shadow"),T=V0("inset-shadow"),M=V0("text-shadow"),z=V0("drop-shadow"),F=V0("blur"),H=V0("perspective"),W=V0("aspect"),j=V0("ease"),_=V0("animate"),V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],L=()=>[...D(),O,A],C=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto","contain","none"],P=()=>[O,A,U],I=()=>[z2,"full","auto",...P()],v=()=>[A1,"none","subgrid",O,A],b=()=>["auto",{span:["full",A1,O,A]},A1,O,A],Q0=()=>[A1,"auto",O,A],k0=()=>["auto","min","max","fr",O,A],Z0=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],n=()=>["start","end","center","stretch","center-safe","end-safe"],J0=()=>["auto",...P()],F0=()=>[z2,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],k=()=>[$,O,A],W0=()=>[...D(),E6,y6,{position:[O,A]}],l1=()=>["no-repeat",{repeat:["","x","y","space","round"]}],M1=()=>["auto","cover","contain",fQ,AQ,{size:[O,A]}],z1=()=>[O8,Z5,e1],T0=()=>["","none","full",B,O,A],D0=()=>["",d,Z5,e1],s0=()=>["solid","dashed","dotted","double"],t7=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I0=()=>[d,O8,E6,y6],e7=()=>["","none",F,O,A],d5=()=>["none",d,O,A],p5=()=>["none",d,O,A],W8=()=>[d,O,A],r5=()=>[z2,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[j1],breakpoint:[j1],color:[VQ],container:[j1],"drop-shadow":[j1],ease:["in","out","in-out"],font:[NQ],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[j1],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[j1],shadow:[j1],spacing:["px",d],text:[j1],"text-shadow":[j1],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",z2,A,O,W]}],container:["container"],columns:[{columns:[d,A,O,X]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:L()}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[A1,"auto",O,A]}],basis:[{basis:[z2,"full","auto",X,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[d,z2,"auto","initial","none",A]}],grow:[{grow:["",d,O,A]}],shrink:[{shrink:["",d,O,A]}],order:[{order:[A1,"first","last","none",O,A]}],"grid-cols":[{"grid-cols":v()}],"col-start-end":[{col:b()}],"col-start":[{"col-start":Q0()}],"col-end":[{"col-end":Q0()}],"grid-rows":[{"grid-rows":v()}],"row-start-end":[{row:b()}],"row-start":[{"row-start":Q0()}],"row-end":[{"row-end":Q0()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":k0()}],"auto-rows":[{"auto-rows":k0()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...Z0(),"normal"]}],"justify-items":[{"justify-items":[...n(),"normal"]}],"justify-self":[{"justify-self":["auto",...n()]}],"align-content":[{content:["normal",...Z0()]}],"align-items":[{items:[...n(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...n(),{baseline:["","last"]}]}],"place-content":[{"place-content":Z0()}],"place-items":[{"place-items":[...n(),"baseline"]}],"place-self":[{"place-self":["auto",...n()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:J0()}],mx:[{mx:J0()}],my:[{my:J0()}],ms:[{ms:J0()}],me:[{me:J0()}],mt:[{mt:J0()}],mr:[{mr:J0()}],mb:[{mb:J0()}],ml:[{ml:J0()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:F0()}],w:[{w:[X,"screen",...F0()]}],"min-w":[{"min-w":[X,"screen","none",...F0()]}],"max-w":[{"max-w":[X,"screen","none","prose",{screen:[w]},...F0()]}],h:[{h:["screen","lh",...F0()]}],"min-h":[{"min-h":["screen","lh","none",...F0()]}],"max-h":[{"max-h":["screen","lh",...F0()]}],"font-size":[{text:["base",Z,Z5,e1]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[q,O,k8]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",O8,A]}],"font-family":[{font:[kQ,A,J]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[Q,O,A]}],"line-clamp":[{"line-clamp":[d,"none",O,k8]}],leading:[{leading:[Y,...P()]}],"list-image":[{"list-image":["none",O,A]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",O,A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:k()}],"text-color":[{text:k()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...s0(),"wavy"]}],"text-decoration-thickness":[{decoration:[d,"from-font","auto",O,e1]}],"text-decoration-color":[{decoration:k()}],"underline-offset":[{"underline-offset":[d,"auto",O,A]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",O,A]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",O,A]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:W0()}],"bg-repeat":[{bg:l1()}],"bg-size":[{bg:M1()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},A1,O,A],radial:["",O,A],conic:[A1,O,A]},bQ,OQ]}],"bg-color":[{bg:k()}],"gradient-from-pos":[{from:z1()}],"gradient-via-pos":[{via:z1()}],"gradient-to-pos":[{to:z1()}],"gradient-from":[{from:k()}],"gradient-via":[{via:k()}],"gradient-to":[{to:k()}],rounded:[{rounded:T0()}],"rounded-s":[{"rounded-s":T0()}],"rounded-e":[{"rounded-e":T0()}],"rounded-t":[{"rounded-t":T0()}],"rounded-r":[{"rounded-r":T0()}],"rounded-b":[{"rounded-b":T0()}],"rounded-l":[{"rounded-l":T0()}],"rounded-ss":[{"rounded-ss":T0()}],"rounded-se":[{"rounded-se":T0()}],"rounded-ee":[{"rounded-ee":T0()}],"rounded-es":[{"rounded-es":T0()}],"rounded-tl":[{"rounded-tl":T0()}],"rounded-tr":[{"rounded-tr":T0()}],"rounded-br":[{"rounded-br":T0()}],"rounded-bl":[{"rounded-bl":T0()}],"border-w":[{border:D0()}],"border-w-x":[{"border-x":D0()}],"border-w-y":[{"border-y":D0()}],"border-w-s":[{"border-s":D0()}],"border-w-e":[{"border-e":D0()}],"border-w-t":[{"border-t":D0()}],"border-w-r":[{"border-r":D0()}],"border-w-b":[{"border-b":D0()}],"border-w-l":[{"border-l":D0()}],"divide-x":[{"divide-x":D0()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":D0()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...s0(),"hidden","none"]}],"divide-style":[{divide:[...s0(),"hidden","none"]}],"border-color":[{border:k()}],"border-color-x":[{"border-x":k()}],"border-color-y":[{"border-y":k()}],"border-color-s":[{"border-s":k()}],"border-color-e":[{"border-e":k()}],"border-color-t":[{"border-t":k()}],"border-color-r":[{"border-r":k()}],"border-color-b":[{"border-b":k()}],"border-color-l":[{"border-l":k()}],"divide-color":[{divide:k()}],"outline-style":[{outline:[...s0(),"none","hidden"]}],"outline-offset":[{"outline-offset":[d,O,A]}],"outline-w":[{outline:["",d,Z5,e1]}],"outline-color":[{outline:k()}],shadow:[{shadow:["","none",G,K4,X4]}],"shadow-color":[{shadow:k()}],"inset-shadow":[{"inset-shadow":["none",T,K4,X4]}],"inset-shadow-color":[{"inset-shadow":k()}],"ring-w":[{ring:D0()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:k()}],"ring-offset-w":[{"ring-offset":[d,e1]}],"ring-offset-color":[{"ring-offset":k()}],"inset-ring-w":[{"inset-ring":D0()}],"inset-ring-color":[{"inset-ring":k()}],"text-shadow":[{"text-shadow":["none",M,K4,X4]}],"text-shadow-color":[{"text-shadow":k()}],opacity:[{opacity:[d,O,A]}],"mix-blend":[{"mix-blend":[...t7(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":t7()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[d]}],"mask-image-linear-from-pos":[{"mask-linear-from":I0()}],"mask-image-linear-to-pos":[{"mask-linear-to":I0()}],"mask-image-linear-from-color":[{"mask-linear-from":k()}],"mask-image-linear-to-color":[{"mask-linear-to":k()}],"mask-image-t-from-pos":[{"mask-t-from":I0()}],"mask-image-t-to-pos":[{"mask-t-to":I0()}],"mask-image-t-from-color":[{"mask-t-from":k()}],"mask-image-t-to-color":[{"mask-t-to":k()}],"mask-image-r-from-pos":[{"mask-r-from":I0()}],"mask-image-r-to-pos":[{"mask-r-to":I0()}],"mask-image-r-from-color":[{"mask-r-from":k()}],"mask-image-r-to-color":[{"mask-r-to":k()}],"mask-image-b-from-pos":[{"mask-b-from":I0()}],"mask-image-b-to-pos":[{"mask-b-to":I0()}],"mask-image-b-from-color":[{"mask-b-from":k()}],"mask-image-b-to-color":[{"mask-b-to":k()}],"mask-image-l-from-pos":[{"mask-l-from":I0()}],"mask-image-l-to-pos":[{"mask-l-to":I0()}],"mask-image-l-from-color":[{"mask-l-from":k()}],"mask-image-l-to-color":[{"mask-l-to":k()}],"mask-image-x-from-pos":[{"mask-x-from":I0()}],"mask-image-x-to-pos":[{"mask-x-to":I0()}],"mask-image-x-from-color":[{"mask-x-from":k()}],"mask-image-x-to-color":[{"mask-x-to":k()}],"mask-image-y-from-pos":[{"mask-y-from":I0()}],"mask-image-y-to-pos":[{"mask-y-to":I0()}],"mask-image-y-from-color":[{"mask-y-from":k()}],"mask-image-y-to-color":[{"mask-y-to":k()}],"mask-image-radial":[{"mask-radial":[O,A]}],"mask-image-radial-from-pos":[{"mask-radial-from":I0()}],"mask-image-radial-to-pos":[{"mask-radial-to":I0()}],"mask-image-radial-from-color":[{"mask-radial-from":k()}],"mask-image-radial-to-color":[{"mask-radial-to":k()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":D()}],"mask-image-conic-pos":[{"mask-conic":[d]}],"mask-image-conic-from-pos":[{"mask-conic-from":I0()}],"mask-image-conic-to-pos":[{"mask-conic-to":I0()}],"mask-image-conic-from-color":[{"mask-conic-from":k()}],"mask-image-conic-to-color":[{"mask-conic-to":k()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:W0()}],"mask-repeat":[{mask:l1()}],"mask-size":[{mask:M1()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",O,A]}],filter:[{filter:["","none",O,A]}],blur:[{blur:e7()}],brightness:[{brightness:[d,O,A]}],contrast:[{contrast:[d,O,A]}],"drop-shadow":[{"drop-shadow":["","none",z,K4,X4]}],"drop-shadow-color":[{"drop-shadow":k()}],grayscale:[{grayscale:["",d,O,A]}],"hue-rotate":[{"hue-rotate":[d,O,A]}],invert:[{invert:["",d,O,A]}],saturate:[{saturate:[d,O,A]}],sepia:[{sepia:["",d,O,A]}],"backdrop-filter":[{"backdrop-filter":["","none",O,A]}],"backdrop-blur":[{"backdrop-blur":e7()}],"backdrop-brightness":[{"backdrop-brightness":[d,O,A]}],"backdrop-contrast":[{"backdrop-contrast":[d,O,A]}],"backdrop-grayscale":[{"backdrop-grayscale":["",d,O,A]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d,O,A]}],"backdrop-invert":[{"backdrop-invert":["",d,O,A]}],"backdrop-opacity":[{"backdrop-opacity":[d,O,A]}],"backdrop-saturate":[{"backdrop-saturate":[d,O,A]}],"backdrop-sepia":[{"backdrop-sepia":["",d,O,A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",O,A]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[d,"initial",O,A]}],ease:[{ease:["linear","initial",j,O,A]}],delay:[{delay:[d,O,A]}],animate:[{animate:["none",_,O,A]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[H,O,A]}],"perspective-origin":[{"perspective-origin":L()}],rotate:[{rotate:d5()}],"rotate-x":[{"rotate-x":d5()}],"rotate-y":[{"rotate-y":d5()}],"rotate-z":[{"rotate-z":d5()}],scale:[{scale:p5()}],"scale-x":[{"scale-x":p5()}],"scale-y":[{"scale-y":p5()}],"scale-z":[{"scale-z":p5()}],"scale-3d":["scale-3d"],skew:[{skew:W8()}],"skew-x":[{"skew-x":W8()}],"skew-y":[{"skew-y":W8()}],transform:[{transform:[O,A,"","none","gpu","cpu"]}],"transform-origin":[{origin:L()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:r5()}],"translate-x":[{"translate-x":r5()}],"translate-y":[{"translate-y":r5()}],"translate-z":[{"translate-z":r5()}],"translate-none":["translate-none"],accent:[{accent:k()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:k()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",O,A]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",O,A]}],fill:[{fill:["none",...k()]}],"stroke-w":[{stroke:[d,Z5,e1,k8]}],stroke:[{stroke:["none",...k()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}};var i6=FQ(EQ);function R(...$){return i6(J5($))}var n6=($)=>typeof $==="boolean"?`${$}`:$===0?"0":$,a6=J5,l0=($,J)=>(Z)=>{var q;if((J===null||J===void 0?void 0:J.variants)==null)return a6($,Z===null||Z===void 0?void 0:Z.class,Z===null||Z===void 0?void 0:Z.className);let{variants:Q,defaultVariants:Y}=J,w=Object.keys(Q).map((B)=>{let G=Z===null||Z===void 0?void 0:Z[B],T=Y===null||Y===void 0?void 0:Y[B];if(G===null)return null;let M=n6(G)||n6(T);return Q[B][M]}),X=Z&&Object.entries(Z).reduce((B,G)=>{let[T,M]=G;if(M===void 0)return B;return B[T]=M,B},{}),U=J===null||J===void 0?void 0:(q=J.compoundVariants)===null||q===void 0?void 0:q.reduce((B,G)=>{let{class:T,className:M,...z}=G;return Object.entries(z).every((F)=>{let[H,W]=F;return Array.isArray(W)?W.includes({...Y,...X}[H]):{...Y,...X}[H]===W})?[...B,T,M]:B},[]);return a6($,w,U,Z===null||Z===void 0?void 0:Z.class,Z===null||Z===void 0?void 0:Z.className)};var U4=l0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium cursor-pointer transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*=size-])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-ring/50 focus-visible:ring-[3px]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20",outline:"border-2 border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md gap-1.5 px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs",lg:"h-10 rounded-md px-6",icon:"size-9","icon-sm":"size-8"}},defaultVariants:{variant:"default",size:"default"}});function f($){let{variant:J,size:Z,className:q,disabled:Q,type:Y="button",onClick:w,children:X}=$;return K("button",{type:Y,disabled:Q,onClick:w,className:R(U4({variant:J,size:Z,className:q}))},X)}var t6=l0("inline-flex items-center justify-center rounded-full border border-transparent px-2.5 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none transition-colors overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground",secondary:"bg-secondary text-secondary-foreground",destructive:"bg-destructive text-white",outline:"border-border text-foreground",ghost:"text-muted-foreground"}},defaultVariants:{variant:"default"}});function g({variant:$,className:J,children:Z}){return K("span",{className:R(t6({variant:$}),J)},Z)}function E({className:$,children:J,onClick:Z}){return K("div",{"data-slot":"card",className:R("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",Z&&"cursor-pointer",$),onClick:Z},J)}function h({className:$,children:J}){return K("div",{"data-slot":"card-header",className:R("grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6",$)},J)}function c({className:$,children:J}){return K("div",{"data-slot":"card-title",className:R("leading-none font-semibold",$)},J)}function a({className:$,children:J}){return K("div",{"data-slot":"card-description",className:R("text-muted-foreground text-sm",$)},J)}function x({className:$,children:J}){return K("div",{"data-slot":"card-content",className:R("px-6",$)},J)}function b8({className:$,children:J}){return K("div",{"data-slot":"card-footer",className:R("flex items-center px-6",$)},J)}function Y0($){let{className:J,type:Z="text",...q}=$;return K("input",{"data-slot":"input",type:Z,...q,className:R("placeholder:text-muted-foreground border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-sm shadow-xs transition-[color,box-shadow] outline-none","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50",J)})}function $2($){let{className:J,rows:Z=3,...q}=$;return K("textarea",{"data-slot":"textarea",rows:Z,...q,className:R("border-input placeholder:text-muted-foreground flex min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-sm shadow-xs transition-[color,box-shadow] outline-none","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:cursor-not-allowed disabled:opacity-50","resize-none",J)})}function K0({className:$,htmlFor:J,children:Z}){return K("label",{"data-slot":"label",for:J,className:R("flex items-center gap-2 text-sm leading-none font-medium select-none","peer-disabled:cursor-not-allowed peer-disabled:opacity-50",$)},Z)}function i0({className:$,checked:J=!1,disabled:Z=!1,onChange:q}){return K("button",{"data-slot":"switch",type:"button",role:"switch","aria-checked":J,disabled:Z,onClick:()=>q?.(!J),className:R("peer inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none cursor-pointer","focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:cursor-not-allowed disabled:opacity-50",J?"bg-primary":"bg-muted-foreground/40",$)},K("span",{"data-slot":"switch-thumb",className:R("pointer-events-none block size-4 rounded-full bg-background ring-0 transition-transform",J?"translate-x-4":"translate-x-0")}))}function O1({className:$,children:J}){return K("span",{"data-slot":"avatar",className:R("relative flex size-8 shrink-0 overflow-hidden rounded-full",$)},J)}class R1 extends N{constructor($){super($);this.state={failed:!1}}componentDidUpdate($){if($.src!==this.props.src)this.setState({failed:!1})}render(){if(this.state.failed||!this.props.src)return null;return K("img",{"data-slot":"avatar-image",src:this.props.src,alt:this.props.alt||"",onError:($)=>{this.setState({failed:!0}),this.props.onError?.($)},className:R("aspect-square size-full object-cover",this.props.className)})}}function k1({className:$,children:J}){return K("span",{"data-slot":"avatar-fallback",className:R("bg-muted flex size-full items-center justify-center rounded-full text-xs font-medium",$)},J)}function v8({className:$,children:J}){return K("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto"},K("table",{"data-slot":"table",className:R("w-full caption-bottom text-sm",$)},J))}function y8({className:$,children:J}){return K("thead",{"data-slot":"table-header",className:R("[&_tr]:border-b",$)},J)}function E8({className:$,children:J}){return K("tbody",{"data-slot":"table-body",className:R("[&_tr:last-child]:border-0",$)},J)}function B4({className:$,children:J}){return K("tr",{"data-slot":"table-row",className:R("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",$)},J)}function W2({className:$,children:J}){return K("th",{"data-slot":"table-head",className:R("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",$)},J)}function j2({className:$,children:J}){return K("td",{"data-slot":"table-cell",className:R("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",$)},J)}function _1({className:$,orientation:J="horizontal"}){return K("div",{"data-slot":"separator",role:"separator",className:R("shrink-0 bg-border",J==="horizontal"?"h-px w-full":"h-full w-px",$)})}var uQ={sm:"size-4 border-2",default:"size-6 border-3",lg:"size-8 border-4"};function X1({className:$,size:J="default"}){return K("div",{"data-slot":"spinner",role:"status","aria-label":"Loading",className:R("animate-spin rounded-full border-muted border-t-primary",uQ[J],$)})}function m({className:$}){return K("div",{"data-slot":"skeleton",className:R("bg-accent animate-pulse rounded-md",$)})}var e6=l0("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function j0({variant:$,className:J,children:Z}){return K("div",{"data-slot":"alert",role:"alert",className:R(e6({variant:$}),J)},Z)}function R0({className:$,children:J}){return K("div",{"data-slot":"alert-description",className:R("col-start-2 text-sm text-muted-foreground [&_p]:leading-relaxed",$)},J)}var $$=l0("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 outline-none focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:focus-visible:ring-destructive/20",{variants:{variant:{default:"bg-transparent hover:bg-muted hover:text-muted-foreground data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground data-[state=on]:bg-accent data-[state=on]:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});var f1=null,u8=new Set;function q5($){f1=$,u8.forEach((J)=>J())}function gQ($){return u8.add($),()=>{u8.delete($)}}var hQ=0;class J$ extends N{id=`nmi-${++hQ}`;unsub=null;ref=null;constructor($){super($);this.state={open:!1}}handleOutside=($)=>{if(f1===this.id&&this.ref&&!this.ref.contains($.target))q5(null)};handleKey=($)=>{if($.key==="Escape"&&f1)q5(null)};componentDidMount(){this.unsub=gQ(()=>{let $=f1===this.id;if(this.state.open!==$)this.setState({open:$})}),document.addEventListener("mousedown",this.handleOutside),document.addEventListener("keydown",this.handleKey)}componentWillUnmount(){if(this.unsub?.(),document.removeEventListener("mousedown",this.handleOutside),document.removeEventListener("keydown",this.handleKey),f1===this.id)q5(null)}handleClick=()=>{q5(f1===this.id?null:this.id)};handleMouseEnter=()=>{if(f1&&f1!==this.id)q5(this.id)};render(){let{className:$,children:J}=this.props,{open:Z}=this.state,q=Array.isArray(J)?J:[J],Q=null,Y=null,w=[];for(let X of q){if(!X)continue;if(X.type===g8||X.props&&X.props["data-slot"]==="navigation-menu-trigger")Q=X;else if(X.type===Z$||X.props&&X.props["data-slot"]==="navigation-menu-content")Y=X;else w.push(X)}return K("li",{"data-slot":"navigation-menu-item",ref:(X)=>{this.ref=X},className:R("relative",$),onmouseenter:this.handleMouseEnter},Q?K(g8,{...Q.props||{},onClick:this.handleClick,"data-state":Z?"open":"closed"},Q.children!=null?Q.children:Q.props&&Q.props.children):null,Z&&Y?Y:null,...w)}}function g8($){let{className:J,onClick:Z,children:q,...Q}=$;return K("button",{"data-slot":"navigation-menu-trigger",type:"button",onClick:Z,className:R("group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors","hover:bg-accent hover:text-accent-foreground","focus-visible:outline-none","data-[state=open]:bg-accent/50",J),...Q},q,K("svg",{className:R("relative top-px ml-1 size-3 transition-transform duration-200","group-data-[state=open]:rotate-180"),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M6 9l6 6 6-6"})))}function Z$({className:$,children:J}){return K("div",{"data-slot":"navigation-menu-content",className:R("absolute left-0 top-full w-full md:w-auto","mt-1.5 min-w-[400px] md:min-w-[500px] lg:min-w-[600px] rounded-md border bg-popover p-4 text-popover-foreground shadow-lg","animate-in fade-in-0 zoom-in-95",$)},J)}var R2=null,x8=new Set;function h8($){R2=$,x8.forEach((J)=>J())}function xQ($){return x8.add($),()=>{x8.delete($)}}var mQ=0;class q$ extends N{id=`mbm-${++mQ}`;unsub=null;constructor($){super($);this.state={open:!1}}componentDidMount(){this.unsub=xQ(()=>{let $=R2===this.id;if(this.state.open!==$)this.setState({open:$})})}componentWillUnmount(){if(this.unsub?.(),R2===this.id)h8(null)}handleClick=()=>{h8(R2===this.id?null:this.id)};handleMouseEnter=()=>{if(R2&&R2!==this.id)h8(this.id)};render(){let{children:$}=this.props,{open:J}=this.state,Z=Array.isArray($)?$:[$],q=null,Q=null,Y=[];for(let w of Z){if(!w)continue;if(w.type===m8||w.props&&w.props["data-slot"]==="menubar-trigger")q=w;else if(w.type===Q$||w.props&&w.props["data-slot"]==="menubar-content")Q=w;else Y.push(w)}return K("div",{"data-slot":"menubar-menu",className:"relative",onmouseenter:this.handleMouseEnter},q?K(m8,{...q.props||{},onClick:this.handleClick,"data-state":J?"open":"closed"},q.children!=null?q.children:q.props&&q.props.children):null,J&&Q?Q:null,...Y)}}function m8($){let{className:J,onClick:Z,children:q,...Q}=$;return K("button",{"data-slot":"menubar-trigger",type:"button",onClick:Z,className:R("flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none","hover:bg-accent hover:text-accent-foreground","focus-visible:outline-none","data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",J),...Q},q)}function Q$({className:$,children:J}){return K("div",{"data-slot":"menubar-content",role:"menu",className:R("absolute left-0 top-full z-50 mt-1 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","animate-in fade-in-0 zoom-in-95",$)},J)}var xT=l0("bg-background fixed z-50 flex flex-col gap-4 shadow-lg transition-transform duration-300 ease-in-out border",{variants:{side:{top:"inset-x-0 top-0 border-b",bottom:"inset-x-0 bottom-0 border-t",left:"inset-y-0 left-0 w-3/4 border-r sm:max-w-sm",right:"inset-y-0 right-0 w-3/4 border-l sm:max-w-sm"}},defaultVariants:{side:"right"}});class G4 extends N{raf=null;timer=null;constructor($){super($);this.state={mounted:$.open,visible:!1}}componentDidMount(){if(this.props.open)this.raf=requestAnimationFrame(()=>{this.raf=requestAnimationFrame(()=>{this.setState({visible:!0})})})}componentDidUpdate($){if(!$.open&&this.props.open)this.clearTimers(),this.setState({mounted:!0,visible:!1},()=>{this.raf=requestAnimationFrame(()=>{this.raf=requestAnimationFrame(()=>{this.setState({visible:!0})})})});else if($.open&&!this.props.open)this.setState({visible:!1}),this.timer=setTimeout(()=>this.setState({mounted:!1}),300)}componentWillUnmount(){this.clearTimers()}clearTimers(){if(this.raf)cancelAnimationFrame(this.raf),this.raf=null;if(this.timer)clearTimeout(this.timer),this.timer=null}render(){if(!this.state.mounted)return null;let{visible:$}=this.state,{onOpenChange:J,children:Z}=this.props;return K(dQ,{visible:$,onClose:()=>J?.(!1)},Z)}}function dQ({visible:$,onClose:J,children:Z}){return K("div",{"data-slot":"drawer-portal",className:"fixed inset-0 z-50"},K("div",{"data-slot":"drawer-overlay",className:"fixed inset-0 bg-black/50",style:{opacity:$?1:0,transition:"opacity 300ms cubic-bezier(0.4,0,0.2,1)"},onClick:J}),K("div",{"data-slot":"drawer-content",className:"bg-background fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border-t",style:{transform:$?"translateY(0)":"translateY(100%)",transition:"transform 300ms cubic-bezier(0.32,0.72,0,1)"}},K("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),Z))}function d8({className:$,children:J}){return K("div",{"data-slot":"drawer-content-inner",className:R("px-4",$)},J)}function p8({className:$,children:J}){return K("div",{"data-slot":"drawer-header",className:R("grid gap-1.5 p-4 text-center",$)},J)}function r8({className:$,children:J}){return K("h2",{"data-slot":"drawer-title",className:R("text-lg font-semibold leading-none tracking-tight",$)},J)}class _2 extends N{timer=null;constructor($){super($);this.state={visible:!1}}componentWillUnmount(){if(this.timer)clearTimeout(this.timer)}show=()=>{let $=this.props.delayMs??200;this.timer=setTimeout(()=>this.setState({visible:!0}),$)};hide=()=>{if(this.timer)clearTimeout(this.timer);this.timer=null,this.setState({visible:!1})};render(){let{content:$,side:J="top",className:Z,children:q}=this.props,{visible:Q}=this.state,Y={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"};return K("div",{"data-slot":"tooltip",className:"relative inline-flex",onMouseEnter:this.show,onMouseLeave:this.hide,onFocus:this.show,onBlur:this.hide},q,Q?K("div",{"data-slot":"tooltip-content",role:"tooltip",className:R("absolute z-50 w-fit rounded-md bg-popover border border-border px-3 py-1.5 text-xs text-popover-foreground shadow-md pointer-events-none whitespace-nowrap animate-in fade-in-0 zoom-in-95",Y[J],Z)},$):null)}}var Q5=[],T4=[],pQ=0;function Y$(){T4.forEach(($)=>$([...Q5]))}function U0($){let J=`toast-${++pQ}`,Z={id:J,duration:4000,variant:"default",...$};return Q5=[...Q5,Z],Y$(),setTimeout(()=>{c8(J)},Z.duration),J}function c8($){Q5=Q5.filter((J)=>J.id!==$),Y$()}function rQ($){return T4.push($),()=>{T4=T4.filter((J)=>J!==$)}}var cQ=l0("group pointer-events-auto relative flex w-full items-center justify-between gap-4 overflow-hidden rounded-md border p-4 shadow-lg transition-all",{variants:{variant:{default:"bg-background text-foreground border-border",destructive:"bg-destructive text-white border-destructive group"}},defaultVariants:{variant:"default"}});function sQ({data:$,onDismiss:J}){return K("div",{"data-slot":"toast",role:"alert",className:R(cQ({variant:$.variant}))},K("div",{className:"grid gap-1"},$.title?K("div",{"data-slot":"toast-title",className:"text-sm font-semibold"},$.title):null,$.description?K("div",{"data-slot":"toast-description",className:"text-sm opacity-90"},$.description):null),K("button",{"data-slot":"toast-close",type:"button",onClick:()=>J($.id),className:R("absolute top-2 right-2 rounded-md p-1 opacity-0 transition-opacity group-hover:opacity-100","outline-none focus-visible:opacity-100 focus-visible:ring-ring/50 focus-visible:ring-[3px]","hover:text-foreground"),"aria-label":"Dismiss"},K("svg",{className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),K("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))))}class L2 extends N{unsub=null;constructor($){super($);this.state={toasts:[]}}componentDidMount(){this.unsub=rQ(($)=>this.setState({toasts:$}))}componentWillUnmount(){this.unsub?.()}render(){let{toasts:$}=this.state;if($.length===0)return null;let J=3,Z=$.slice(-J),q=$.length-Z.length;return K("div",{"data-slot":"toaster",className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2 w-full max-w-sm pointer-events-none"},q>0?K("div",{className:"text-center text-xs text-muted-foreground py-1"},`+${q} more`):null,...Z.map((Q)=>K(sQ,{key:Q.id,data:Q,onDismiss:c8})))}}function oQ(){if(typeof window==="undefined")return"dark";let $=localStorage.getItem("theme");if($==="light"||$==="dark")return $;return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function w$($){let J=document.documentElement;if($==="dark")J.classList.add("dark");else J.classList.remove("dark");localStorage.setItem("theme",$)}class D2 extends N{constructor($){super($);this.state={theme:oQ()}}componentDidMount(){w$(this.state.theme)}toggle=()=>{let $=this.state.theme==="dark"?"light":"dark";this.setState({theme:$}),w$($)};render(){let{className:$}=this.props,J=this.state.theme==="dark";return K("button",{type:"button",onClick:this.toggle,"aria-label":J?"Switch to light mode":"Switch to dark mode",className:R("inline-flex items-center justify-center size-9 rounded-md border border-input bg-background text-foreground shadow-xs cursor-pointer transition-colors hover:bg-accent hover:text-accent-foreground outline-none focus-visible:ring-ring/50 focus-visible:ring-[3px]",$)},J?K("svg",{className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("circle",{cx:"12",cy:"12",r:"4"}),K("path",{d:"M12 2v2"}),K("path",{d:"M12 20v2"}),K("path",{d:"m4.93 4.93 1.41 1.41"}),K("path",{d:"m17.66 17.66 1.41 1.41"}),K("path",{d:"M2 12h2"}),K("path",{d:"M20 12h2"}),K("path",{d:"m6.34 17.66-1.41 1.41"}),K("path",{d:"m19.07 4.93-1.41 1.41"})):K("svg",{className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})))}}var lQ=1000,iQ=30000,nQ=1e4;class s8{ws=null;url;accessToken="";handlers=new Map;reconnectAttempts=0;reconnectTimer=null;pingTimer=null;connected=!1;constructor($){let J=window.location.protocol==="https:"?"wss:":"ws:",Z=$||window.location.host;this.url=`${J}//${Z}/ws`}setAccessToken($){this.accessToken=$}on($,J){let Z=this.handlers.get($)||[];Z.push(J),this.handlers.set($,Z)}off($,J){let Z=this.handlers.get($)||[];this.handlers.set($,Z.filter((q)=>q!==J))}connect(){if(this.ws)this.ws.close();let $=this.accessToken?`${this.url}?accessToken=${this.accessToken}`:this.url;this.ws=new WebSocket($),this.ws.onopen=()=>{this.connected=!0,this.reconnectAttempts=0,this.startPing(),console.log("[WS] Connected")},this.ws.onclose=(J)=>{this.connected=!1,this.stopPing(),console.log(`[WS] Disconnected (code=${J.code})`),this.scheduleReconnect()},this.ws.onerror=(J)=>{console.error("[WS] Error:",J)},this.ws.onmessage=(J)=>{try{let Z=JSON.parse(J.data);if(Z.type==="PONG")return;this.dispatch(Z)}catch(Z){console.error("[WS] Parse error:",Z)}}}disconnect(){if(this.stopPing(),this.reconnectTimer)clearTimeout(this.reconnectTimer),this.reconnectTimer=null;if(this.ws)this.ws.onclose=null,this.ws.close(),this.ws=null;this.connected=!1}send($){if(this.ws&&this.connected)this.ws.send($)}sendChat($){this.send(JSON.stringify({type:"CHAT",body:$}))}isConnected(){return this.connected}dispatch($){let J=this.handlers.get($.type);if(J)for(let q of J)q($);let Z=this.handlers.get("*");if(Z)for(let q of Z)q($)}startPing(){this.stopPing(),this.pingTimer=setInterval(()=>{this.send(JSON.stringify({type:"PING"}))},nQ)}stopPing(){if(this.pingTimer)clearInterval(this.pingTimer),this.pingTimer=null}scheduleReconnect(){if(this.reconnectTimer)return;let $=Math.min(lQ*Math.pow(2,this.reconnectAttempts),iQ);this.reconnectAttempts++,console.log(`[WS] Reconnecting in ${$}ms (attempt ${this.reconnectAttempts})`),this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.connect()},$)}}async function M4($){let J=await fetch(`/api${$}`);if(!J.ok)throw new Error(`GET ${$} failed: ${J.status}`);return J.json()}async function aQ($,J){let Z=await fetch(`/api${$}`,{method:"POST",headers:{"Content-Type":"application/json"},body:J?JSON.stringify(J):void 0});if(!Z.ok)throw new Error(`POST ${$} failed: ${Z.status}`);return Z.json()}async function tQ($,J){let Z=await fetch(`/api${$}?accessToken=${J}`);if(!Z.ok)throw new Error(`GET ${$} failed: ${Z.status}`);return Z.json()}async function n0($,J){let Z=await fetch(`/api${$}`,{headers:{Authorization:`Bearer ${J}`}});if(!Z.ok)throw new Error(`GET ${$} failed: ${Z.status}`);return Z.json()}async function y0($,J,Z){let q=await fetch(`/api${$}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${J}`},body:Z?JSON.stringify(Z):void 0});if(!q.ok)throw new Error(`POST ${$} failed: ${q.status}`);return q.json()}var s={getStatus:()=>M4("/status"),getConfig:()=>M4("/config"),getEmoji:()=>M4("/emoji"),getChatHistory:($)=>tQ("/chat",$),registerChatUser:($)=>aQ("/chat/register",{displayName:$}),getVideoVariants:()=>M4("/video/variants"),admin:{getConfig:($)=>n0("/admin/serverconfig",$),getStatus:($)=>n0("/admin/status",$),getLogs:($)=>n0("/admin/logs",$),getViewers:($)=>n0("/admin/viewers",$),getHardware:($)=>n0("/admin/hardwareinfo",$),getChatMessages:($)=>n0("/admin/chat/messages",$),getWebhooks:($)=>n0("/admin/webhooks",$),getAccessTokens:($)=>n0("/admin/accesstokens",$),getFederationFollowers:($)=>n0("/admin/followers",$),updateConfig:($,J)=>y0("/admin/config",$,J),sendSystemMessage:($,J)=>y0("/admin/chat/send",$,{body:J}),createAccessToken:($,J)=>y0("/admin/accesstokens/create",$,J),deleteAccessToken:($,J)=>y0("/admin/accesstokens/delete",$,{token:J}),getConnectedClients:($)=>n0("/admin/chat/clients",$),setStreamKey:($,J)=>y0("/admin/config/key",$,{value:J}),getLogEntries:($)=>n0("/admin/logs",$),getWarnings:($)=>n0("/admin/logs/warnings",$),updateVideoConfig:($,J)=>y0("/admin/config/video",$,J),updateChatDisabled:($,J)=>y0("/admin/config/chat/disable",$,{value:J}),updateChatJoinMessages:($,J)=>y0("/admin/config/chat/joinmessagesenabled",$,{value:J}),updateChatEstablishedMode:($,J)=>y0("/admin/config/chat/establishedusermode",$,{value:J}),updateChatSpamProtection:($,J)=>y0("/admin/config/chat/spamprotectionenabled",$,{value:J}),updateChatSlurFilter:($,J)=>y0("/admin/config/chat/slurfilterenabled",$,{value:J}),updateForbiddenUsernames:($,J)=>y0("/admin/config/chat/forbiddenusernames",$,{value:J}),updateSuggestedUsernames:($,J)=>y0("/admin/config/chat/suggestedusernames",$,{value:J}),updateHideViewerCount:($,J)=>y0("/admin/config/hideviewercount",$,{value:J})}};function K$($){try{return new Date($).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}}function U$($){if($===1)return"1 viewer";return`${$} viewers`}function m0($){try{let J=new Date($),q=new Date().getTime()-J.getTime(),Q=Math.floor(q/60000);if(Q<1)return"just now";if(Q<60)return`${Q}m ago`;let Y=Math.floor(Q/60);if(Y<24)return`${Y}h ago`;return`${Math.floor(Y/24)}d ago`}catch{return""}}function Y5($){try{return localStorage.getItem($)}catch{return null}}function w5($,J){try{localStorage.setItem($,J)}catch{}}function z4($){try{localStorage.removeItem($)}catch{}}var a0={accessToken:"oni-access-token",displayName:"oni-display-name",displayColor:"oni-display-color",userId:"oni-user-id",visitCount:"oni-visit-count",notifyModalShown:"oni-notify-modal-shown"};var H4=new Set,o8=!1;function A0(){if(o8)return;o8=!0,queueMicrotask(()=>{o8=!1;for(let $ of H4)$()})}var{configHydration:B$,statusHydration:eQ}=window,u={loading:!B$,config:B$||null,status:eQ||null,messages:[],currentUser:null,accessToken:Y5(a0.accessToken),isMobile:window.innerWidth<=768,chatVisible:!0,error:null},_0=null,X5=null,G$=Y5(a0.userId),T$=Y5(a0.displayName),M$=Y5(a0.displayColor);if(G$&&T$)u.currentUser={id:G$,displayName:T$,displayColor:M$?parseInt(M$,10):0};function z$(){let $=u.config?.socketHostOverride;if(_0=new s8($||void 0),u.accessToken)_0.setAccessToken(u.accessToken);_0.on("CHAT",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),_0.on("NAME_CHANGE",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),_0.on("USER_JOINED",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),_0.on("USER_PARTED",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),_0.on("SYSTEM",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),_0.on("FEDIVERSE_ENGAGEMENT_FOLLOW",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),_0.on("FEDIVERSE_ENGAGEMENT_LIKE",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),_0.on("FEDIVERSE_ENGAGEMENT_REPOST",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),_0.on("CONNECTED_USER_INFO",(J)=>{let Z=J;if(Z.user)u.currentUser={id:Z.user.id,displayName:Z.user.displayName,displayColor:Z.user.displayColor,isModerator:Z.user.isModerator},A0()}),_0.on("VISIBILITY-UPDATE",(J)=>{let Z=J;if(Z.ids&&Z.ids.length>0){let q=new Set(Z.ids);if(Z.visible===!1)u.messages=u.messages.filter((Q)=>!q.has(Q.id));A0()}}),_0.on("ERROR_NEEDS_REGISTRATION",()=>{u.currentUser=null,u.accessToken=null,z4(a0.accessToken),z4(a0.userId),z4(a0.displayName),A0()}),_0.connect()}function $Y(){if(X5)return;X5=setInterval(async()=>{try{let $=await s.getStatus();u.status=$,A0()}catch($){console.error("[Store] Status poll error:",$)}},5000)}var l={getState(){return u},subscribe($){return H4.add($),()=>H4.delete($)},async init(){try{if(!u.config){let[$,J]=await Promise.all([s.getConfig(),s.getStatus()]);u.config=$,u.status=J}if(u.accessToken)try{let $=await s.getChatHistory(u.accessToken);if(Array.isArray($))u.messages=$}catch{}u.loading=!1,A0(),z$(),$Y()}catch($){u.error=$ instanceof Error?$.message:"Failed to load",u.loading=!1,A0()}},async registerUser($){try{let J=await s.registerChatUser($);if(u.accessToken=J.accessToken,u.currentUser={id:J.id,displayName:J.displayName,displayColor:J.displayColor},w5(a0.accessToken,J.accessToken),w5(a0.userId,J.id),w5(a0.displayName,J.displayName),w5(a0.displayColor,String(J.displayColor)),_0)_0.disconnect();z$();try{let Z=await s.getChatHistory(J.accessToken);if(Array.isArray(Z))u.messages=Z}catch{}A0()}catch(J){throw console.error("[Store] Registration error:",J),J}},sendChat($){if(_0)_0.sendChat($)},toggleChat(){u.chatVisible=!u.chatVisible,A0()},setMobile($){if(u.isMobile!==$)u.isMobile=$,A0()},cleanup(){if(_0)_0.disconnect(),_0=null;if(X5)clearInterval(X5),X5=null;H4.clear()}};function JY($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function F4($,...J){if(!JY($))throw new Error("Uint8Array expected");if(J.length>0&&!J.includes($.length))throw new Error("Uint8Array expected of length "+J+", got length="+$.length)}function l8($,J=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(J&&$.finished)throw new Error("Hash#digest() has already been called")}function H$($,J){F4($);let Z=J.outputLen;if($.length<Z)throw new Error("digestInto() expects output buffer of length at least "+Z)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function W4($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function Z1($,J){return $<<32-J|$>>>J}var W$=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",ZY=Array.from({length:256},($,J)=>J.toString(16).padStart(2,"0"));function i8($){if(F4($),W$)return $.toHex();let J="";for(let Z=0;Z<$.length;Z++)J+=ZY[$[Z]];return J}var L1={_0:48,_9:57,A:65,F:70,a:97,f:102};function F$($){if($>=L1._0&&$<=L1._9)return $-L1._0;if($>=L1.A&&$<=L1.F)return $-(L1.A-10);if($>=L1.a&&$<=L1.f)return $-(L1.a-10);return}function j$($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(W$)return Uint8Array.fromHex($);let J=$.length,Z=J/2;if(J%2)throw new Error("hex string expected, got unpadded hex of length "+J);let q=new Uint8Array(Z);for(let Q=0,Y=0;Q<Z;Q++,Y+=2){let w=F$($.charCodeAt(Y)),X=F$($.charCodeAt(Y+1));if(w===void 0||X===void 0){let U=$[Y]+$[Y+1];throw new Error('hex string expected, got non-hex character "'+U+'" at index '+Y)}q[Q]=w*16+X}return q}function qY($){if(typeof $!=="string")throw new Error("utf8ToBytes expected string, got "+typeof $);return new Uint8Array(new TextEncoder().encode($))}function n8($){if(typeof $==="string")$=qY($);return F4($),$}class a8{clone(){return this._cloneInto()}}function R$($){let J=(q)=>$().update(n8(q)).digest(),Z=$();return J.outputLen=Z.outputLen,J.blockLen=Z.blockLen,J.create=()=>$(),J}function QY($,J,Z,q){if(typeof $.setBigUint64==="function")return $.setBigUint64(J,Z,q);let Q=BigInt(32),Y=BigInt(4294967295),w=Number(Z>>Q&Y),X=Number(Z&Y),U=q?4:0,B=q?0:4;$.setUint32(J+U,w,q),$.setUint32(J+B,X,q)}function _$($,J,Z){return $&J^~$&Z}function L$($,J,Z){return $&J^$&Z^J&Z}class t8 extends a8{constructor($,J,Z,q){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=J,this.padOffset=Z,this.isLE=q,this.buffer=new Uint8Array($),this.view=W4(this.buffer)}update($){l8(this);let{view:J,buffer:Z,blockLen:q}=this;$=n8($);let Q=$.length;for(let Y=0;Y<Q;){let w=Math.min(q-this.pos,Q-Y);if(w===q){let X=W4($);for(;q<=Q-Y;Y+=q)this.process(X,Y);continue}if(Z.set($.subarray(Y,Y+w),this.pos),this.pos+=w,Y+=w,this.pos===q)this.process(J,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){l8(this),H$($,this),this.finished=!0;let{buffer:J,view:Z,blockLen:q,isLE:Q}=this,{pos:Y}=this;if(J[Y++]=128,this.buffer.subarray(Y).fill(0),this.padOffset>q-Y)this.process(Z,0),Y=0;for(let G=Y;G<q;G++)J[G]=0;QY(Z,q-8,BigInt(this.length*8),Q),this.process(Z,0);let w=W4($),X=this.outputLen;if(X%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let U=X/4,B=this.get();if(U>B.length)throw new Error("_sha2: outputLen bigger than state");for(let G=0;G<U;G++)w.setUint32(4*G,B[G],Q)}digest(){let{buffer:$,outputLen:J}=this;this.digestInto($);let Z=$.slice(0,J);return this.destroy(),Z}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:J,buffer:Z,length:q,finished:Q,destroyed:Y,pos:w}=this;if($.length=q,$.pos=w,$.finished=Q,$.destroyed=Y,q%J)$.buffer.set(Z);return $}}var YY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),b1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),v1=new Uint32Array(64);class D$ extends t8{constructor($=32){super(64,$,8,!1);this.A=b1[0]|0,this.B=b1[1]|0,this.C=b1[2]|0,this.D=b1[3]|0,this.E=b1[4]|0,this.F=b1[5]|0,this.G=b1[6]|0,this.H=b1[7]|0}get(){let{A:$,B:J,C:Z,D:q,E:Q,F:Y,G:w,H:X}=this;return[$,J,Z,q,Q,Y,w,X]}set($,J,Z,q,Q,Y,w,X){this.A=$|0,this.B=J|0,this.C=Z|0,this.D=q|0,this.E=Q|0,this.F=Y|0,this.G=w|0,this.H=X|0}process($,J){for(let G=0;G<16;G++,J+=4)v1[G]=$.getUint32(J,!1);for(let G=16;G<64;G++){let T=v1[G-15],M=v1[G-2],z=Z1(T,7)^Z1(T,18)^T>>>3,F=Z1(M,17)^Z1(M,19)^M>>>10;v1[G]=F+v1[G-7]+z+v1[G-16]|0}let{A:Z,B:q,C:Q,D:Y,E:w,F:X,G:U,H:B}=this;for(let G=0;G<64;G++){let T=Z1(w,6)^Z1(w,11)^Z1(w,25),M=B+T+_$(w,X,U)+YY[G]+v1[G]|0,F=(Z1(Z,2)^Z1(Z,13)^Z1(Z,22))+L$(Z,q,Q)|0;B=U,U=X,X=w,w=Y+M|0,Y=Q,Q=q,q=Z,Z=M+F|0}Z=Z+this.A|0,q=q+this.B|0,Q=Q+this.C|0,Y=Y+this.D|0,w=w+this.E|0,X=X+this.F|0,U=U+this.G|0,B=B+this.H|0,this.set(Z,q,Q,Y,w,X,U,B)}roundClean(){v1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}var P$=R$(()=>new D$);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function J9($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function N$($,J){if(!Array.isArray(J))return!1;if(J.length===0)return!0;if($)return J.every((Z)=>typeof Z==="string");else return J.every((Z)=>Number.isSafeInteger(Z))}function A$($){if(typeof $!=="function")throw new Error("function expected");return!0}function P2($,J){if(typeof J!=="string")throw new Error(`${$}: string expected`);return!0}function U5($){if(!Number.isSafeInteger($))throw new Error(`invalid integer: ${$}`)}function R4($){if(!Array.isArray($))throw new Error("array expected")}function _4($,J){if(!N$(!0,J))throw new Error(`${$}: array of strings expected`)}function Z9($,J){if(!N$(!1,J))throw new Error(`${$}: array of numbers expected`)}function d0(...$){let J=(Y)=>Y,Z=(Y,w)=>(X)=>Y(w(X)),q=$.map((Y)=>Y.encode).reduceRight(Z,J),Q=$.map((Y)=>Y.decode).reduce(Z,J);return{encode:q,decode:Q}}function p0($){let J=typeof $==="string"?$.split(""):$,Z=J.length;_4("alphabet",J);let q=new Map(J.map((Q,Y)=>[Q,Y]));return{encode:(Q)=>{return R4(Q),Q.map((Y)=>{if(!Number.isSafeInteger(Y)||Y<0||Y>=Z)throw new Error(`alphabet.encode: digit index outside alphabet "${Y}". Allowed: ${$}`);return J[Y]})},decode:(Q)=>{return R4(Q),Q.map((Y)=>{P2("alphabet.decode",Y);let w=q.get(Y);if(w===void 0)throw new Error(`Unknown letter: "${Y}". Allowed: ${$}`);return w})}}}function r0($=""){return P2("join",$),{encode:(J)=>{return _4("join.decode",J),J.join($)},decode:(J)=>{return P2("join.decode",J),J.split($)}}}function D4($,J="="){return U5($),P2("padding",J),{encode(Z){_4("padding.encode",Z);while(Z.length*$%8)Z.push(J);return Z},decode(Z){_4("padding.decode",Z);let q=Z.length;if(q*$%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;q>0&&Z[q-1]===J;q--)if((q-1)*$%8===0)throw new Error("padding: invalid, string has too much padding");return Z.slice(0,q)}}}function O$($){return A$($),{encode:(J)=>J,decode:(J)=>$(J)}}function V$($,J,Z){if(J<2)throw new Error(`convertRadix: invalid from=${J}, base cannot be less than 2`);if(Z<2)throw new Error(`convertRadix: invalid to=${Z}, base cannot be less than 2`);if(R4($),!$.length)return[];let q=0,Q=[],Y=Array.from($,(X)=>{if(U5(X),X<0||X>=J)throw new Error(`invalid integer: ${X}`);return X}),w=Y.length;while(!0){let X=0,U=!0;for(let B=q;B<w;B++){let G=Y[B],T=J*X,M=T+G;if(!Number.isSafeInteger(M)||T/J!==X||M-G!==T)throw new Error("convertRadix: carry overflow");let z=M/Z;X=M%Z;let F=Math.floor(z);if(Y[B]=F,!Number.isSafeInteger(F)||F*Z+X!==M)throw new Error("convertRadix: carry overflow");if(!U)continue;else if(!F)q=B;else U=!1}if(Q.push(X),U)break}for(let X=0;X<$.length-1&&$[X]===0;X++)Q.push(0);return Q.reverse()}var k$=($,J)=>J===0?$:k$(J,$%J),L4=($,J)=>$+(J-k$($,J)),j4=(()=>{let $=[];for(let J=0;J<40;J++)$.push(2**J);return $})();function e8($,J,Z,q){if(R4($),J<=0||J>32)throw new Error(`convertRadix2: wrong from=${J}`);if(Z<=0||Z>32)throw new Error(`convertRadix2: wrong to=${Z}`);if(L4(J,Z)>32)throw new Error(`convertRadix2: carry overflow from=${J} to=${Z} carryBits=${L4(J,Z)}`);let Q=0,Y=0,w=j4[J],X=j4[Z]-1,U=[];for(let B of $){if(U5(B),B>=w)throw new Error(`convertRadix2: invalid data word=${B} from=${J}`);if(Q=Q<<J|B,Y+J>32)throw new Error(`convertRadix2: carry overflow pos=${Y} from=${J}`);Y+=J;for(;Y>=Z;Y-=Z)U.push((Q>>Y-Z&X)>>>0);let G=j4[Y];if(G===void 0)throw new Error("invalid carry");Q&=G-1}if(Q=Q<<Z-Y&X,!q&&Y>=J)throw new Error("Excess padding");if(!q&&Q>0)throw new Error(`Non-zero padding: ${Q}`);if(q&&Y>0)U.push(Q>>>0);return U}function wY($){U5($);let J=256;return{encode:(Z)=>{if(!J9(Z))throw new Error("radix.encode input should be Uint8Array");return V$(Array.from(Z),J,$)},decode:(Z)=>{return Z9("radix.decode",Z),Uint8Array.from(V$(Z,$,J))}}}function t0($,J=!1){if(U5($),$<=0||$>32)throw new Error("radix2: bits should be in (0..32]");if(L4(8,$)>32||L4($,8)>32)throw new Error("radix2: carry overflow");return{encode:(Z)=>{if(!J9(Z))throw new Error("radix2.encode input should be Uint8Array");return e8(Array.from(Z),8,$,!J)},decode:(Z)=>{return Z9("radix2.decode",Z),Uint8Array.from(e8(Z,$,8,J))}}}function I$($){return A$($),function(...J){try{return $.apply(null,J)}catch(Z){}}}var AW=d0(t0(4),p0("0123456789ABCDEF"),r0("")),OW=d0(t0(5),p0("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),D4(5),r0("")),kW=d0(t0(5),p0("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),r0("")),fW=d0(t0(5),p0("0123456789ABCDEFGHIJKLMNOPQRSTUV"),D4(5),r0("")),bW=d0(t0(5),p0("0123456789ABCDEFGHIJKLMNOPQRSTUV"),r0("")),vW=d0(t0(5),p0("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),r0(""),O$(($)=>$.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),yW=d0(t0(6),p0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),D4(6),r0("")),EW=d0(t0(6),p0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),r0("")),uW=d0(t0(6),p0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),D4(6),r0("")),gW=d0(t0(6),p0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),r0("")),q9=($)=>d0(wY(58),p0($),r0("")),hW=q9("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),xW=q9("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),mW=q9("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");var $9=d0(p0("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),r0("")),S$=[996825010,642813549,513874426,1027748829,705979059];function K5($){let J=$>>25,Z=($&33554431)<<5;for(let q=0;q<S$.length;q++)if((J>>q&1)===1)Z^=S$[q];return Z}function C$($,J,Z=1){let q=$.length,Q=1;for(let Y=0;Y<q;Y++){let w=$.charCodeAt(Y);if(w<33||w>126)throw new Error(`Invalid prefix (${$})`);Q=K5(Q)^w>>5}Q=K5(Q);for(let Y=0;Y<q;Y++)Q=K5(Q)^$.charCodeAt(Y)&31;for(let Y of J)Q=K5(Q)^Y;for(let Y=0;Y<6;Y++)Q=K5(Q);return Q^=Z,$9.encode(e8([Q%j4[30]],30,5,!1))}function f$($){let J=$==="bech32"?1:734539939,Z=t0(5),q=Z.decode,Q=Z.encode,Y=I$(q);function w(T,M,z=90){if(P2("bech32.encode prefix",T),J9(M))M=Array.from(M);Z9("bech32.encode",M);let F=T.length;if(F===0)throw new TypeError(`Invalid prefix length ${F}`);let H=F+7+M.length;if(z!==!1&&H>z)throw new TypeError(`Length ${H} exceeds limit ${z}`);let W=T.toLowerCase(),j=C$(W,M,J);return`${W}1${$9.encode(M)}${j}`}function X(T,M=90){P2("bech32.decode input",T);let z=T.length;if(z<8||M!==!1&&z>M)throw new TypeError(`invalid string length: ${z} (${T}). Expected (8..${M})`);let F=T.toLowerCase();if(T!==F&&T!==T.toUpperCase())throw new Error("String must be lowercase or uppercase");let H=F.lastIndexOf("1");if(H===0||H===-1)throw new Error('Letter "1" must be present between prefix and data only');let W=F.slice(0,H),j=F.slice(H+1);if(j.length<6)throw new Error("Data must be at least 6 characters long");let _=$9.decode(j).slice(0,-6),V=C$(W,_,J);if(!j.endsWith(V))throw new Error(`Invalid checksum in ${T}: expected "${V}"`);return{prefix:W,words:_}}let U=I$(X);function B(T){let{prefix:M,words:z}=X(T,!1);return{prefix:M,words:z,bytes:q(z)}}function G(T,M){return w(T,Q(M))}return{encode:w,decode:X,encodeFromBytes:G,decodeToBytes:B,decodeUnsafe:U,fromWords:q,fromWordsUnsafe:Y,toWords:Q}}var Q9=f$("bech32"),dW=f$("bech32m");var pW=d0(t0(4),p0("0123456789abcdef"),r0(""),O$(($)=>{if(typeof $!=="string"||$.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof $} with length ${$.length}`);return $.toLowerCase()}));var XY=5000;function b$($){return new TextEncoder().encode($)}function B5(){return Math.floor(Date.now()/1000)}function KY($,J){let Z=j$(J),q=Q9.toWords(Z);return Q9.encode($,q,XY)}function V2($){return KY("npub",$)}function P4($,J=8){if($.length<=J*2)return $;return`${$.slice(0,J)}...${$.slice(-J)}`}function UY($){return JSON.stringify([0,$.pubkey,$.created_at,$.kind,$.tags,$.content])}function Y9($){let J=UY($),Z=P$(b$(J));return i8(Z)}function V4($,J,Z=[],q=""){return{pubkey:q,created_at:B5(),kind:$,tags:Z,content:J}}var E0={Metadata:0,Text:1,RecommendRelay:2,Contacts:3,EncryptedDM:4,EventDeletion:5,Repost:6,Reaction:7,ChannelCreation:40,ChannelMetadata:41,ChannelMessage:42,ChannelHideMessage:43,ChannelMuteUser:44,Comment:1111,ClientAuth:22242,RelayList:10002,LiveEvent:30311};function I4(){return typeof window!=="undefined"&&!!window.nostr}async function v$(){if(!I4())throw new Error("No NIP-07 extension found. Install Alby or nos2x.");return window.nostr.getPublicKey()}async function S4($){if(!I4())throw new Error("No NIP-07 extension found.");let J=Y9($),Z={...$,id:J};return window.nostr.signEvent(Z)}function y$(){if(typeof navigator==="undefined")return!1;return/android/i.test(navigator.userAgent)}function BY($){return`${window.location.origin+window.location.pathname}?nip55_action=${$}&event=`}function E$(){let $=BY("get_public_key");window.location.href=`nostrsigner:?compressionType=none&returnType=signature&type=get_public_key&callbackUrl=${$}`}function u$(){if(typeof window==="undefined")return null;let $=new URLSearchParams(window.location.search),J=$.get("nip55_action"),Z=$.get("event");if(!J||!Z)return null;return{action:J,result:Z}}function g$(){if(typeof window==="undefined")return;let $=new URL(window.location.href);$.searchParams.delete("nip55_action"),$.searchParams.delete("event");let J=$.pathname+($.search||"");window.history.replaceState({},"",J)}var GY=0;function TY(){return`sub_${++GY}_${Date.now().toString(36)}`}class q1{url;ws=null;subscriptions=new Map;pendingPublish=new Map;pendingMessages=[];reconnectTimer=null;reconnectDelay=1000;maxReconnectDelay=60000;reconnectAttempts=0;maxReconnectAttempts=5;_status="disconnected";statusListeners=new Set;_authSigner=null;_authenticated=!1;_authInProgress=!1;constructor($){this.url=$.replace(/\/$/,"")}setAuthSigner($){this._authSigner=$}get hasAuthSigner(){return this._authSigner!==null}get authenticated(){return this._authenticated}get status(){return this._status}setStatus($){this._status=$;for(let J of this.statusListeners)J($)}onStatusChange($){return this.statusListeners.add($),()=>this.statusListeners.delete($)}connect(){if(this.ws&&(this.ws.readyState===WebSocket.OPEN||this.ws.readyState===WebSocket.CONNECTING))return Promise.resolve();return new Promise(($)=>{this.setStatus("connecting");try{this.ws=new WebSocket(this.url)}catch(Z){this.setStatus("error"),$();return}let J=!1;this.ws.onopen=()=>{this.setStatus("connected"),this.reconnectDelay=1000,this.reconnectAttempts=0;for(let Z of this.pendingMessages)this.ws.send(Z);this.pendingMessages=[];for(let[Z,q]of this.subscriptions){let Q=JSON.stringify(["REQ",Z,...q.filters]);this.ws.send(Q)}if(!J)J=!0,$()},this.ws.onmessage=(Z)=>{this.handleMessage(Z.data)},this.ws.onerror=()=>{this.setStatus("error")},this.ws.onclose=()=>{if(this.setStatus("disconnected"),this.ws=null,!J)J=!0,$();this.scheduleReconnect()}})}disconnect(){if(this.reconnectTimer)clearTimeout(this.reconnectTimer),this.reconnectTimer=null;for(let[$,J]of this.pendingPublish)clearTimeout(J.timer),J.resolve({accepted:!1,message:"disconnected"});if(this.pendingPublish.clear(),this.subscriptions.clear(),this.pendingMessages=[],this.ws)this.ws.onclose=null,this.ws.close(),this.ws=null;this.setStatus("disconnected")}scheduleReconnect(){if(this.reconnectTimer)return;if(this.reconnectAttempts++,this.reconnectAttempts>this.maxReconnectAttempts){console.warn(`[Relay ${this.url}] Max reconnect attempts (${this.maxReconnectAttempts}) reached, giving up`),this.setStatus("error");return}this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.connect().catch(()=>{})},this.reconnectDelay),this.reconnectDelay=Math.min(this.reconnectDelay*2,this.maxReconnectDelay)}handleMessage($){let J;try{J=JSON.parse($)}catch{return}if(!Array.isArray(J)||J.length<2)return;switch(J[0]){case"EVENT":{let q=J[1],Q=J[2],Y=this.subscriptions.get(q);if(Y)Y.onEvent(Q);break}case"EOSE":{let q=J[1],Q=this.subscriptions.get(q);if(Q?.onEose)Q.onEose();break}case"OK":{let q=J[1],Q=this.pendingPublish.get(q);if(Q)clearTimeout(Q.timer),this.pendingPublish.delete(q),Q.resolve({accepted:!!J[2],message:J[3]||""});break}case"NOTICE":{console.warn(`[Relay ${this.url}] NOTICE:`,J[1]);break}case"CLOSED":{let q=J[1],Q=J[2]||"",Y=this.subscriptions.get(q);if(Y?.onClosed)Y.onClosed(Q);this.subscriptions.delete(q);break}case"AUTH":{let q=J[1];this.handleAuthChallenge(q);break}}}_authFailed=!1;async handleAuthChallenge($){if(!this._authSigner)return;if(this._authInProgress)return;if(this._authFailed)return;this._authInProgress=!0;try{let J=V4(E0.ClientAuth,"",[["relay",this.url],["challenge",$]]),Z=await this._authSigner(J);this.send(JSON.stringify(["AUTH",Z])),this._authenticated=!0}catch(J){this._authFailed=!0,console.warn(`[Relay ${this.url}] AUTH declined by signer`)}finally{this._authInProgress=!1}}send($){if(this.ws&&this.ws.readyState===WebSocket.OPEN)this.ws.send($);else this.pendingMessages.push($)}subscribe($,J,Z,q){let Q=TY();return this.subscriptions.set(Q,{id:Q,filters:$,onEvent:J,onEose:Z,onClosed:q}),this.send(JSON.stringify(["REQ",Q,...$])),Q}unsubscribe($){if(this.subscriptions.has($))this.send(JSON.stringify(["CLOSE",$])),this.subscriptions.delete($)}publish($){return new Promise((J)=>{let Z=setTimeout(()=>{this.pendingPublish.delete($.id),J({accepted:!1,message:"timeout"})},1e4);this.pendingPublish.set($.id,{resolve:J,timer:Z}),this.send(JSON.stringify(["EVENT",$]))})}get activeSubscriptions(){return this.subscriptions.size}}class w9{relays=new Map;seenEvents=new Set;maxSeen=50000;_authSigner=null;setAuthSigner($){this._authSigner=$;for(let J of this.relays.values())if(J.hasAuthSigner)J.setAuthSigner($)}clearSeenEvents(){this.seenEvents.clear()}addRelay($){let J=$.replace(/\/$/,"");if(this.relays.has(J))return this.relays.get(J);let Z=new q1(J);return this.relays.set(J,Z),Z}addRelayWithAuth($){let J=this.addRelay($);if(this._authSigner)J.setAuthSigner(this._authSigner);return J}removeRelay($){let J=$.replace(/\/$/,""),Z=this.relays.get(J);if(Z)Z.disconnect(),this.relays.delete(J)}getRelay($){return this.relays.get($.replace(/\/$/,""))}get allRelays(){return Array.from(this.relays.values())}async connectAll(){let $=this.allRelays.map((J)=>J.connect().catch((Z)=>{console.warn(`Failed to connect to ${J.url}:`,Z)}));await Promise.allSettled($)}disconnectAll(){for(let $ of this.relays.values())$.disconnect()}subscribe($,J,Z){let q=new Map,Q=`pool_${Date.now().toString(36)}`;for(let Y of this.relays.values()){let w=Y.subscribe($,(X)=>{if(this.seenEvents.has(X.id))return;this.trackSeen(X.id),J(X,Y)},()=>{if(Z)Z(Y)});q.set(Y,w)}return{id:Q,unsubscribe:()=>{for(let[Y,w]of q)Y.unsubscribe(w);q.clear()}}}subscribeToUrls($,J,Z,q){let Q=new Map,Y=`pool_targeted_${Date.now().toString(36)}`;for(let w of $){let X=w.replace(/\/$/,""),U=this.relays.get(X);if(!U)continue;let B=U.subscribe(J,(G)=>{if(this.seenEvents.has(G.id))return;this.trackSeen(G.id),Z(G,U)},()=>{if(q)q(U)});Q.set(U,B)}return{id:Y,unsubscribe:()=>{for(let[w,X]of Q)w.unsubscribe(X);Q.clear()}}}async publish($){let J=new Map,Z=this.allRelays.map(async(q)=>{try{let Q=await q.publish($);J.set(q.url,Q)}catch(Q){J.set(q.url,{accepted:!1,message:String(Q)})}});return await Promise.allSettled(Z),J}trackSeen($){if(this.seenEvents.add($),this.seenEvents.size>this.maxSeen){let J=Math.floor(this.maxSeen*0.4),Z=this.seenEvents.values();for(let q=0;q<J;q++){let Q=Z.next().value;if(Q)this.seenEvents.delete(Q)}}}getStatus(){let $=new Map;for(let[J,Z]of this.relays)$.set(J,Z.status);return $}}var X9=null,Q1={statuses:new Map,isConnecting:!1},K9=new Set;function G5(){for(let $ of K9)$()}function U9(){return Q1}function h$($){return K9.add($),()=>K9.delete($)}function e0(){if(!X9)X9=new w9;return X9}async function x$(){let $=e0();Q1={...Q1,isConnecting:!0},G5(),await $.connectAll(),Q1={...Q1,isConnecting:!1,statuses:$.getStatus()},G5()}function B9($){let J=e0(),Z=J.addRelay($);Z.onStatusChange(()=>{Q1={...Q1,statuses:J.getStatus()},G5()}),Z.connect().catch(()=>{}),Q1={...Q1,statuses:J.getStatus()},G5()}function m$($){let J=e0();J.removeRelay($),Q1={...Q1,statuses:J.getStatus()},G5()}var d$="oni_relay_profiles",C4=[{id:"outbox",name:"Outbox",relays:[],builtin:!0},{id:"inbox",name:"Inbox",relays:[],builtin:!0},{id:"indexers",name:"Indexers",relays:[],builtin:!0}],w0={profiles:[...C4],activeProfileId:"outbox"},G9=new Set;function J2(){for(let $ of G9)$()}function I2(){if(typeof localStorage!=="undefined")localStorage.setItem(d$,JSON.stringify(w0))}function p$(){if(typeof localStorage==="undefined")return;try{let $=localStorage.getItem(d$);if($){let J=JSON.parse($),Z=new Set(C4.map((Q)=>Q.id)),q=[];for(let Q of C4){let Y=J.profiles.find((w)=>w.id===Q.id);q.push(Y?{...Y,builtin:!0}:{...Q})}for(let Q of J.profiles)if(!Z.has(Q.id))q.push({...Q,builtin:!1});w0={profiles:q,activeProfileId:J.activeProfileId||"outbox"}}}catch{}J2()}function S2(){return w0}function r$($){return G9.add($),()=>G9.delete($)}function MY(){return w0.profiles.find(($)=>$.id===w0.activeProfileId)||w0.profiles[0]}function c$($){w0={...w0,activeProfileId:$},I2(),J2(),T9()}function C2($,J){let Z=J.trim();if(!Z.startsWith("wss://")&&!Z.startsWith("ws://"))Z="wss://"+Z;if(Z=Z.replace(/\/+$/,""),w0={...w0,profiles:w0.profiles.map((q)=>q.id===$&&!q.relays.includes(Z)?{...q,relays:[...q.relays,Z]}:q)},I2(),J2(),$===w0.activeProfileId)B9(Z)}function N4($,J){if(w0={...w0,profiles:w0.profiles.map((Z)=>Z.id===$?{...Z,relays:Z.relays.filter((q)=>q!==J)}:Z)},I2(),J2(),$===w0.activeProfileId)m$(J)}function s$($){let J="custom_"+Date.now()+"_"+Math.random().toString(36).slice(2,8);return w0={...w0,profiles:[...w0.profiles,{id:J,name:$,relays:[],builtin:!1}]},I2(),J2(),J}function o$($){let J=w0.profiles.find((Z)=>Z.id===$);if(!J||J.builtin)return;w0={...w0,profiles:w0.profiles.filter((Z)=>Z.id!==$),activeProfileId:w0.activeProfileId===$?"outbox":w0.activeProfileId},I2(),J2()}function T9(){let $=e0(),J=MY(),Z=new Set($.allRelays.map((Q)=>Q.url)),q=new Set(J.relays);for(let Q of Z)if(!q.has(Q))$.removeRelay(Q);for(let Q of q)if(!Z.has(Q))B9(Q)}function l$(){w0={profiles:[...C4],activeProfileId:"outbox"},I2(),J2()}var c0={pubkey:null,isLoading:!1,error:null},M9=new Set;function Z2(){for(let $ of M9)$()}function L0(){return c0}function y1($){return M9.add($),()=>M9.delete($)}async function N2(){if(I4()){c0={...c0,isLoading:!0,error:null},Z2();try{let $=await v$();if(c0={pubkey:$,isLoading:!1,error:null},typeof localStorage!=="undefined")localStorage.setItem("oni_pubkey",$)}catch($){c0={...c0,isLoading:!1,error:String($)}}Z2();return}if(y$()){c0={...c0,isLoading:!0,error:null},Z2(),E$();return}c0={...c0,error:"No Nostr signer found. Install a NIP-07 extension (desktop) or Amber (Android)."},Z2()}function z9(){e0().clearSeenEvents(),l$()}function A4(){if(z9(),c0={pubkey:null,isLoading:!1,error:null},typeof localStorage!=="undefined")localStorage.removeItem("oni_pubkey");Z2()}function O4(){if(typeof localStorage==="undefined")return;let $=u$();if($&&$.action==="get_public_key"&&$.result){let Z=$.result;localStorage.setItem("oni_pubkey",Z),c0={pubkey:Z,isLoading:!1,error:null},g$(),Z2();return}let J=localStorage.getItem("oni_pubkey");if(J)c0={pubkey:J,isLoading:!1,error:null},Z2()}var D1={urls:[],source:"none",isLoading:!1,error:null},W9=new Set,T5=null,H9=!1;function k4(){if(H9)return;H9=!0,queueMicrotask(()=>{H9=!1;for(let $ of W9)$()})}function i$(){return D1}function M5(){return D1.urls}function n$($){return W9.add($),()=>W9.delete($)}var zY=["wss://relay.damus.io","wss://relay.nostr.band","wss://nos.lol","wss://relay.snort.social","wss://purplepag.es","wss://relay.primal.net"],F9=["wss://relay.nostr.watch","wss://history.nostr.watch"];function f4($=10){if(D1.urls.length>0&&!D1.isLoading)return Promise.resolve();if(T5)return T5;return T5=HY($).finally(()=>{T5=null}),T5}async function HY($){D1={...D1,isLoading:!0,error:null},k4();try{let J=await FY($);if(J.length>0){console.log("[indexers] Discovered",J.length,"relays via rstate"),D1={urls:J,source:"rstate",isLoading:!1,error:null},k4();return}}catch(J){console.warn("[indexers] rstate unavailable:",J)}console.log("[indexers] Using fallback indexers"),D1={urls:zY.slice(0,$),source:"fallback",isLoading:!1,error:null},k4(),WY($)}async function FY($){let J=new AbortController,Z=setTimeout(()=>J.abort(),5000);try{let q=new URLSearchParams({limit:String($*3),offset:"0",sortBy:"lastSeen",sortOrder:"desc",format:"detailed"}),Q=await fetch(`/relays?${q}`,{signal:J.signal});if(!Q.ok)throw new Error(`rstate ${Q.status}`);let X=((await Q.json()).relays||[]).filter((G)=>{if(!G.relayUrl||!G.relayUrl.startsWith("wss://"))return!1;if(G.network?.value&&G.network.value!=="clearnet")return!1;return!0}).map((G)=>({url:G.relayUrl.replace(/\/+$/,""),rtt:G.rtt?.open?.value??9999,lastSeen:G.lastSeenAt??0})).sort((G,T)=>{if(G.rtt!==T.rtt)return G.rtt-T.rtt;return T.lastSeen-G.lastSeen}),U=new Set,B=[];for(let G of X){if(U.has(G.url))continue;if(U.add(G.url),B.push(G.url),B.length>=$)break}return B}finally{clearTimeout(Z)}}function WY($){let J=new Map,Z=0,q=setTimeout(()=>Q(),8000);function Q(){if(clearTimeout(q),J.size===0)return;let Y=Array.from(J.entries()).sort((w,X)=>w[1].rtt-X[1].rtt).map(([w])=>w).slice(0,$);if(Y.length>0)console.log("[indexers] Upgraded to",Y.length,"relays via NIP-66"),D1={urls:Y,source:"nip66",isLoading:!1,error:null},k4()}for(let Y of F9){let w=new q1(Y);w.connect().then(()=>{let X=w.subscribe([{kinds:[30166],limit:$*3}],(U)=>{let B=U.tags.find((F)=>F[0]==="d");if(!B||!B[1])return;let G=B[1].replace(/\/+$/,"");if(!G.startsWith("wss://"))return;let T=9999,M=U.tags.find((F)=>F[0]==="rtt"&&F[1]==="open");if(M&&M[2])T=parseInt(M[2],10)||9999;let z=J.get(G);if(!z||T<z.rtt)J.set(G,{rtt:T})},()=>{if(w.unsubscribe(X),w.disconnect(),Z++,Z>=F9.length)Q()})}).catch(()=>{if(Z++,Z>=F9.length)Q()})}}var i={phase:"idle",profile:null,profileEvent:null,relayList:[],relayListEvent:null,contactsEvent:null,followingCount:0,indexersQueried:0,indexersResponded:0,outboxConnected:0,inboxConnected:0,error:null},_9=new Set,j9=!1;function K1(){if(j9)return;j9=!0,queueMicrotask(()=>{j9=!1;for(let $ of _9)$()})}function E1(){return i}function b4($){return _9.add($),()=>_9.delete($)}var L9=[],R9=null,z5=null;async function t$($){if(R9===$&&i.phase==="ready")return;if(R9===$&&z5)return z5;return R9=$,z5=jY($).finally(()=>{z5=null}),z5}async function jY($){if(i={phase:"discovering_indexers",profile:null,profileEvent:null,relayList:[],relayListEvent:null,contactsEvent:null,followingCount:0,indexersQueried:0,indexersResponded:0,outboxConnected:0,inboxConnected:0,error:null},K1(),i$().urls.length===0)await f4(10);let Z=M5();if(Z.length===0){i={...i,phase:"error",error:"No indexer relays found"},K1();return}if(a$(Z),n$(()=>{let q=M5();if(q.length>0)a$(q)}),i={...i,phase:"querying_indexers",indexersQueried:Z.length},K1(),await RY($,Z),i.relayList.length>0)i={...i,phase:"connecting_relays"},K1(),await _Y(i.relayList);i={...i,phase:"ready"},K1(),LY()}function RY($,J){return new Promise((Z)=>{let q=0,Q=J.length,Y=setTimeout(()=>w(),8000);function w(){clearTimeout(Y),Z()}function X(){if(q++,i={...i,indexersResponded:q},K1(),q>=Q)w()}for(let U of J){let B=new q1(U);L9.push(B),B.connect().then(()=>{if(B.status!=="connected"){X();return}let G=B.subscribe([{kinds:[E0.Metadata],authors:[$],limit:1},{kinds:[E0.RelayList],authors:[$],limit:1},{kinds:[E0.Contacts],authors:[$],limit:1}],(T)=>{if(T.kind===E0.Metadata){if(!i.profileEvent||T.created_at>i.profileEvent.created_at)i={...i,profileEvent:T,profile:DY(T)},K1()}else if(T.kind===E0.RelayList){if(!i.relayListEvent||T.created_at>i.relayListEvent.created_at)i={...i,relayListEvent:T,relayList:PY(T)},K1()}else if(T.kind===E0.Contacts){if(!i.contactsEvent||T.created_at>i.contactsEvent.created_at){let M=T.tags.filter((z)=>z[0]==="p"&&z[1]).length;i={...i,contactsEvent:T,followingCount:M},K1()}}},()=>{B.unsubscribe(G),X()})}).catch(()=>{X()})}})}async function _Y($){let J=e0(),Z=S2(),q=$.filter((B)=>B.write).map((B)=>B.url),Q=$.filter((B)=>B.read).map((B)=>B.url),Y=Z.profiles.find((B)=>B.id==="outbox"),w=Z.profiles.find((B)=>B.id==="inbox");for(let B of q)if(Y&&!Y.relays.includes(B))C2("outbox",B);for(let B of Q)if(w&&!w.relays.includes(B))C2("inbox",B);let X=new Set([...q,...Q]),U=[];for(let B of X)if(!J.getRelay(B)){let T=J.addRelayWithAuth(B);U.push(T.connect().then(()=>{if(q.includes(B))i={...i,outboxConnected:i.outboxConnected+1};if(Q.includes(B))i={...i,inboxConnected:i.inboxConnected+1};K1()}).catch((M)=>{console.warn(`[bootstrap] Failed to connect to ${B}:`,M)}))}await Promise.allSettled(U)}function a$($){let Z=S2().profiles.find((q)=>q.id==="indexers");if(!Z)return;for(let q of Z.relays)if(!$.includes(q))N4("indexers",q);for(let q of $)if(!Z.relays.includes(q))C2("indexers",q)}function LY(){for(let $ of L9)if(!e0().getRelay($.url))$.disconnect();L9=[]}function DY($){let J={};try{J=JSON.parse($.content)}catch{}return{name:J.name||"",displayName:J.display_name||J.displayName||"",picture:J.picture||"",banner:J.banner||"",about:J.about||"",nip05:J.nip05||"",lud16:J.lud16||""}}function PY($){let J=[];for(let Z of $.tags){if(Z[0]!=="r"||!Z[1])continue;let q=Z[1].replace(/\/+$/,""),Q=Z[2];J.push({url:q,read:!Q||Q==="read",write:!Q||Q==="write"})}return J}var H5=new Map,v4=new Set,D9=new Set;function e$(){for(let $ of D9)$()}function $3($){return D9.add($),()=>D9.delete($)}function J3($){let J=H5.get($);if(J)return J;return{pubkey:$,name:"",displayName:"",picture:"",banner:"",about:"",nip05:"",lud16:"",fetched:!1}}function Z3($){let J=J3($);if(J.displayName)return J.displayName;if(J.name)return J.name;try{let Z=V2($);return Z.slice(0,12)+"..."+Z.slice(-4)}catch{return P4($,8)}}function q3($){return J3($).picture}function P9($){if(H5.has($)&&H5.get($).fetched)return;if(v4.has($))return;v4.add($);let J=M5();if(J.length===0){v4.delete($);return}let Z=J.slice(0,3),q=null,Q=0;function Y(){if(v4.delete($),q){let X=VY($,q);H5.set($,X),e$()}else H5.set($,{pubkey:$,name:"",displayName:"",picture:"",banner:"",about:"",nip05:"",lud16:"",fetched:!0}),e$()}let w=setTimeout(()=>Y(),6000);for(let X of Z){let U=new q1(X);U.connect().then(()=>{if(U.status!=="connected"){if(Q++,Q>=Z.length)clearTimeout(w),Y();return}let B=U.subscribe([{kinds:[E0.Metadata],authors:[$],limit:1}],(G)=>{if(!q||G.created_at>q.created_at)q=G},()=>{if(U.unsubscribe(B),U.disconnect(),Q++,Q>=Z.length)clearTimeout(w),Y()})}).catch(()=>{if(Q++,Q>=Z.length)clearTimeout(w),Y()})}}function VY($,J){let Z={};try{Z=JSON.parse(J.content)}catch{}return{pubkey:$,name:Z.name||"",displayName:Z.display_name||Z.displayName||"",picture:Z.picture||"",banner:Z.banner||"",about:Z.about||"",nip05:Z.nip05||"",lud16:Z.lud16||"",fetched:!0}}class V9 extends N{unsub=null;unsubAuth=null;unsubBootstrap=null;unsubProfiles=null;menuRef=null;state={config:l.getState().config,status:l.getState().status,chatVisible:l.getState().chatVisible,nostrPubkey:L0().pubkey,nostrLoading:L0().isLoading,userMenuOpen:!1,profileVersion:0};handleOutsideClick=($)=>{if(this.state.userMenuOpen&&this.menuRef&&!this.menuRef.contains($.target))this.setState({userMenuOpen:!1})};componentDidMount(){this.unsub=l.subscribe(()=>{let J=l.getState();this.setState({config:J.config,status:J.status,chatVisible:J.chatVisible})}),this.unsubAuth=y1(()=>{let J=L0();if(this.setState({nostrPubkey:J.pubkey,nostrLoading:J.isLoading}),J.pubkey)P9(J.pubkey)}),this.unsubBootstrap=b4(()=>{this.setState({profileVersion:this.state.profileVersion+1})}),this.unsubProfiles=$3(()=>{this.setState({profileVersion:this.state.profileVersion+1})});let $=L0();if($.pubkey)P9($.pubkey);document.addEventListener("mousedown",this.handleOutsideClick)}componentWillUnmount(){this.unsub?.(),this.unsubAuth?.(),this.unsubBootstrap?.(),this.unsubProfiles?.(),document.removeEventListener("mousedown",this.handleOutsideClick)}handleLogin=()=>{N2()};handleLogout=()=>{A4(),this.setState({userMenuOpen:!1})};render(){let{config:$,status:J,chatVisible:Z,nostrPubkey:q,nostrLoading:Q,userMenuOpen:Y}=this.state,w=$?.name||"",X=J?.online||!1,U=J?.viewerCount||0,B=q?Z3(q):"",G=q?q3(q):"";return K("header",{class:"sticky top-0 z-50 border-b border-border/30 bg-background/80 backdrop-blur-xl backdrop-saturate-150"},K("div",{class:"mx-auto flex h-14 items-center justify-between px-4 sm:px-6"},K("div",{class:"flex items-center gap-4"},K("a",{href:"/",class:"flex items-center gap-2.5 shrink-0"},K("span",{class:"text-xl"},"\uD83D\uDD25"),K("span",{class:"text-lg font-bold tracking-tight"},w||"oni")),X&&K(g,{variant:"default",className:"gap-1.5 bg-success text-success-foreground"},K("span",{class:"size-1.5 rounded-full bg-current live-dot"}),"Live"),X&&U>0&&K("span",{class:"hidden sm:inline text-sm text-muted-foreground tabular-nums"},U.toLocaleString()," watching"),K("nav",{class:"hidden sm:flex items-center gap-0.5"},K("a",{href:"https://mycelium.social",target:"_blank",rel:"noopener",class:"inline-flex h-9 items-center justify-center rounded-md px-3 py-2 text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground"},"Mycelium"))),K("div",{class:"flex items-center gap-1.5"},!$?.chatDisabled&&K(f,{variant:"ghost",size:"sm",onClick:()=>l.toggleChat(),className:R("gap-1.5 h-8",Z&&"bg-accent text-accent-foreground")},K("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),K("span",{class:"hidden sm:inline text-sm"},"Chat")),K(D2,{className:"hidden sm:inline-flex size-8"}),q?K("div",{ref:(T)=>{this.menuRef=T},class:"relative"},K("button",{onClick:()=>this.setState({userMenuOpen:!Y}),class:"flex items-center gap-2 rounded-full border border-border px-1 py-1 pr-3 hover:bg-accent/50 transition-colors cursor-pointer"},K(O1,{className:"size-7"},K(R1,{src:G,alt:B}),K(k1,{className:"text-[10px]"},B.charAt(0).toUpperCase())),K("span",{class:"text-sm font-medium max-w-[120px] truncate hidden sm:block"},B),K("span",{class:"text-xs opacity-40"},"")),Y&&K("div",{class:"absolute right-0 top-full mt-2 w-72 bg-popover border border-border rounded-xl shadow-xl overflow-hidden z-50"},K("div",{class:"relative"},K("div",{class:"h-20 bg-gradient-to-br from-primary/30 via-primary/10 to-muted/50"}),K("div",{class:"absolute -bottom-5 left-4"},K(O1,{className:"size-10 ring-2 ring-popover"},K(R1,{src:G,alt:B}),K(k1,{className:"text-xs font-bold"},B.charAt(0).toUpperCase())))),K("div",{class:"pt-7 pb-3 px-4"},K("p",{class:"text-sm font-semibold truncate"},B),K("p",{class:"font-mono text-[10px] text-muted-foreground truncate"},(()=>{try{return V2(q).slice(0,24)+"..."}catch{return q.slice(0,24)+"..."}})())),K("div",{class:"border-t border-border"}),K("div",{class:"py-1"},K("a",{href:"/admin",onClick:()=>this.setState({userMenuOpen:!1}),class:"flex items-center gap-2.5 px-4 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-accent transition-colors"},K("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 010 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 010-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28z"}),K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})),"Admin Dashboard")),K("div",{class:"border-t border-border"}),K("div",{class:"py-1"},K("button",{onClick:this.handleLogout,class:"flex items-center gap-2.5 px-4 py-2 w-full text-sm text-destructive/70 hover:text-destructive hover:bg-destructive/5 transition-colors cursor-pointer"},K("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})),"Sign Out")))):K(f,{size:"sm",onClick:this.handleLogin,disabled:Q},Q?"Connecting...":"Sign In"))))}}class I9 extends N{videoRef=null;hlsInstance=null;state={isLoading:!0,hasError:!1};componentDidMount(){if(this.props.online)this.initPlayer()}componentDidUpdate($){if(this.props.online&&!$.online)this.setState({isLoading:!0,hasError:!1}),this.initPlayer();else if(!this.props.online&&$.online)this.destroyPlayer()}componentWillUnmount(){this.destroyPlayer()}async initPlayer(){let $=this.videoRef;if(!$)return;let J=this.props.source;if($.addEventListener("playing",()=>{this.setState({isLoading:!1})},{once:!0}),$.canPlayType("application/vnd.apple.mpegurl")){$.src=J,$.addEventListener("loadedmetadata",()=>{$.play().catch(()=>{})});return}try{let Z=(await import("../chunk-eyp45axx.js")).default;if(Z.isSupported())this.hlsInstance=new Z({enableWorker:!0,lowLatencyMode:!0,backBufferLength:90}),this.hlsInstance.loadSource(J),this.hlsInstance.attachMedia($),this.hlsInstance.on(Z.Events.MANIFEST_PARSED,()=>{$.play().catch(()=>{})}),this.hlsInstance.on(Z.Events.ERROR,(q,Q)=>{if(Q.fatal)switch(Q.type){case Z.ErrorTypes.NETWORK_ERROR:this.hlsInstance?.startLoad();break;case Z.ErrorTypes.MEDIA_ERROR:this.hlsInstance?.recoverMediaError();break;default:this.setState({hasError:!0,isLoading:!1}),this.destroyPlayer();break}})}catch{$.src=J}}destroyPlayer(){if(this.hlsInstance)this.hlsInstance.destroy(),this.hlsInstance=null;if(this.videoRef)this.videoRef.removeAttribute("src"),this.videoRef.load()}render(){let{online:$,title:J}=this.props,{isLoading:Z,hasError:q}=this.state;if(!$)return null;return K("div",{class:"relative w-full bg-black aspect-video group"},K("video",{ref:(Q)=>{this.videoRef=Q},class:"w-full h-full object-contain",controls:!0,playsInline:!0,title:J}),Z&&!q&&K("div",{class:"absolute inset-0 flex items-center justify-center bg-black/95 pointer-events-none"},K("div",{class:"absolute inset-0 bg-gradient-to-b from-primary/[0.04] via-transparent to-transparent"}),K("div",{class:"relative flex flex-col items-center gap-5"},K("div",{class:"relative"},K(X1,{size:"lg"}),K("div",{class:"absolute -inset-4 rounded-full blur-2xl bg-primary/10"})),K("div",{class:"text-center"},K("p",{class:"text-sm font-semibold text-foreground/90"},"Connecting to stream"),K("p",{class:"text-xs text-muted-foreground/50 mt-1"},"Please wait...")))),q&&K("div",{class:"absolute inset-0 flex items-center justify-center bg-black/95"},K("div",{class:"absolute inset-0 bg-gradient-to-b from-destructive/[0.03] via-transparent to-transparent"}),K("div",{class:"relative flex flex-col items-center gap-5 text-center px-6"},K("div",{class:"size-16 rounded-2xl bg-destructive/10 border border-destructive/20 flex items-center justify-center"},K("svg",{class:"size-7 text-destructive",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))),K("div",null,K("p",{class:"text-base font-bold text-foreground"},"Stream unavailable"),K("p",{class:"text-sm text-muted-foreground/60 mt-1"},"The stream may have ended or encountered an error")),K(f,{size:"sm",className:"px-6 font-semibold",onClick:()=>{this.setState({isLoading:!0,hasError:!1}),this.initPlayer()}},"Try Again"))))}}class S9 extends N{render(){let{name:$,customText:J,lastDisconnectTime:Z,logo:q}=this.props;return K("div",{class:"flex flex-col items-center justify-center w-full aspect-video bg-muted/30"},K("div",{class:"flex flex-col items-center px-6 py-16 text-center max-w-lg animate-in"},K(O1,{className:"size-20 mb-6"},K(R1,{src:q,alt:$}),K(k1,{className:"text-3xl bg-card text-muted-foreground/30"},K("svg",{class:"size-10 text-muted-foreground/20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z"})))),K("h2",{class:"text-2xl font-bold tracking-tight mb-2"},$),K(g,{variant:"secondary",className:"mb-4"},K("span",{class:"size-1.5 rounded-full bg-muted-foreground/40 mr-1.5"}),"Offline"),K("p",{class:"text-sm text-muted-foreground leading-relaxed mb-5 max-w-sm"},J||"This stream is currently offline. Check back later!"),Z&&K(g,{variant:"outline",className:"gap-1.5"},K("svg",{class:"size-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})),"Last live ",m0(Z))))}}class C9 extends N{unsub=null;state={status:l.getState().status,config:l.getState().config};componentDidMount(){this.unsub=l.subscribe(()=>{let $=l.getState();this.setState({status:$.status,config:$.config})})}componentWillUnmount(){this.unsub?.()}render(){let{status:$,config:J}=this.state;if(!$?.online)return null;let Z=$.streamTitle||J?.name||"",q=J?.tags||[];return K("div",{class:"px-5 py-3.5 border-b border-border/50 bg-card"},K("div",{class:"flex items-start justify-between gap-4"},K("div",{class:"min-w-0 flex-1"},Z&&K("h2",{class:"text-[15px] font-semibold text-foreground tracking-tight truncate"},Z),q.length>0&&K("div",{class:"flex flex-wrap gap-1.5 mt-2.5"},q.slice(0,6).map((Q)=>K(g,{key:Q,variant:"secondary",className:"text-[11px]"},Q)))),K("div",{class:"flex items-center gap-3 shrink-0"},K(g,{variant:"outline",className:"tabular-nums gap-1.5"},K("svg",{class:"size-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})),U$($.viewerCount)),$.lastConnectTime&&K(g,{variant:"outline",className:"tabular-nums gap-1.5"},K("svg",{class:"size-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})),m0($.lastConnectTime)))))}}var N9=["#c084fc","#f472b6","#fb923c","#facc15","#4ade80","#22d3ee","#60a5fa","#a78bfa","#f87171","#34d399","#e879f9","#38bdf8","#fbbf24","#a3e635","#fb7185","#2dd4bf","#818cf8","#f97316","#14b8a6","#d946ef"];function y4($){return N9[$%N9.length]||N9[0]}class A9 extends N{render(){let{message:$,isModerator:J}=this.props,{type:Z,timestamp:q}=$,Q=K$(q);if(Z==="SYSTEM")return K("div",{class:"px-3 py-1.5 flex items-center gap-1.5"},K("svg",{class:"w-3 h-3 text-primary/60 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})),K("span",{class:"text-[11px] text-muted-foreground italic"},$.body));if(Z==="USER_JOINED"||Z==="USER_PARTED"){let B=Z==="USER_JOINED";return K("div",{class:"px-3 py-0.5 flex items-center gap-1"},K("span",{class:R("text-[10px]",B?"text-success/50":"text-muted-foreground/40")},B?"":""),K("span",{class:"text-[10px] text-muted-foreground/60"},K("span",{style:{color:y4($.user?.displayColor||0)},class:"opacity-60"},$.user?.displayName)," ",B?"joined":"left"))}if(Z==="NAME_CHANGE")return K("div",{class:"px-3 py-0.5 text-[10px] text-muted-foreground/60"},K("span",{style:{color:y4($.user?.displayColor||0)},class:"opacity-60"},$.oldName),"  ",K("span",{style:{color:y4($.user?.displayColor||0)},class:"opacity-80"},$.user?.displayName));if(Z==="FEDIVERSE_ENGAGEMENT_FOLLOW"||Z==="FEDIVERSE_ENGAGEMENT_LIKE"||Z==="FEDIVERSE_ENGAGEMENT_REPOST"){let B=Z==="FEDIVERSE_ENGAGEMENT_FOLLOW"?"followed":Z==="FEDIVERSE_ENGAGEMENT_LIKE"?"liked":"shared";return K("div",{class:"px-3 py-1.5 flex items-center gap-1.5 bg-primary/5 mx-2 my-1 rounded-md"},K("svg",{class:"w-3 h-3 text-primary shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},K("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})),K("span",{class:"text-[11px] text-primary/80"},$.user?.displayName," ",B," on the fediverse"))}let Y=y4($.user?.displayColor||0),w=$.user?.isModerator,X=$.user?.isBot,U=$.user?.authenticated;return K("div",{class:"group px-4 py-2 hover:bg-accent/50 transition-colors duration-150 animate-msg-in"},K("div",{class:"flex items-baseline gap-1.5 flex-wrap"},K("span",{class:"text-[12px] font-bold leading-tight",style:{color:Y}},w&&K(_2,{content:"Moderator",side:"top"},K(g,{className:"mr-1 align-middle text-[8px] py-0 px-1.5 uppercase tracking-wider"},"Mod")),X&&K(_2,{content:"Bot",side:"top"},K(g,{variant:"secondary",className:"mr-1 align-middle text-[8px] py-0 px-1.5 uppercase tracking-wider"},"Bot")),U&&K(_2,{content:"Verified",side:"top"},K("span",{class:"inline-flex items-center justify-center size-3.5 text-success mr-0.5 align-middle"},K("svg",{class:"size-2.5",fill:"currentColor",viewBox:"0 0 20 20"},K("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})))),$.user?.displayName),K("span",{class:"text-[10px] text-muted-foreground/40 leading-tight tabular-nums"},Q)),K("p",{class:"text-[13px] text-foreground/90 leading-relaxed break-words mt-0.5"},$.body))}}class O9 extends N{state={value:""};handleSubmit=($)=>{$.preventDefault();let J=this.state.value.trim();if(!J)return;this.props.onSend(J),this.setState({value:""})};handleInput=($)=>{this.setState({value:$.target.value})};handleKeyDown=($)=>{if($.key==="Enter"&&!$.shiftKey)$.preventDefault(),this.handleSubmit($)};render(){let $=this.state.value.trim().length>0;return K("form",{class:"flex items-center gap-2 p-3 border-t border-border/50 bg-card",onSubmit:this.handleSubmit},K(Y0,{className:"flex-1 h-9 text-sm",placeholder:"Send a message...",value:this.state.value,onInput:this.handleInput,onKeyDown:this.handleKeyDown}),K(f,{type:"submit",size:"icon-sm",disabled:!$},K("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))))}}class k9 extends N{state={name:"",loading:!1,error:null};handleSubmit=async($)=>{$.preventDefault();let J=this.state.name.trim();if(!J)return;this.setState({loading:!0,error:null});try{await l.registerUser(J)}catch(Z){this.setState({error:Z instanceof Error?Z.message:"Registration failed",loading:!1})}};handleInput=($)=>{this.setState({name:$.target.value})};render(){let{name:$,loading:J,error:Z}=this.state;return K("div",{class:"p-3 border-t border-border/50 bg-card"},K("form",{onSubmit:this.handleSubmit},K(K0,{className:"text-muted-foreground mb-2"},"Pick a name to join the chat"),K("div",{class:"flex items-center gap-2"},K(Y0,{className:"flex-1 h-9 text-sm",placeholder:"Your name...",value:$,onInput:this.handleInput,disabled:J}),K(f,{type:"submit",size:"sm",disabled:!$.trim()||J,className:"h-9 px-5"},J?K(X1,{size:"sm"}):"Join")),Z&&K("p",{class:"text-xs text-destructive mt-2"},Z)))}}class E4 extends N{unsub=null;messagesEndRef=null;scrollContainerRef=null;shouldAutoScroll=!0;state={messages:l.getState().messages,currentUser:l.getState().currentUser,chatDisabled:l.getState().config?.chatDisabled||!1,showScrollBtn:!1};componentDidMount(){this.unsub=l.subscribe(()=>{let $=l.getState();this.setState({messages:$.messages,currentUser:$.currentUser,chatDisabled:$.config?.chatDisabled||!1})})}componentDidUpdate($,J){if(J.messages.length!==this.state.messages.length&&this.shouldAutoScroll)this.scrollToBottom()}componentWillUnmount(){this.unsub?.()}scrollToBottom(){if(this.messagesEndRef)this.messagesEndRef.scrollIntoView({behavior:"smooth"})}handleScroll=($)=>{let J=$.target,Z=J.scrollHeight-J.scrollTop-J.clientHeight<50;this.shouldAutoScroll=Z,this.setState({showScrollBtn:!Z})};handleSend=($)=>{l.sendChat($)};render(){let{messages:$,currentUser:J,chatDisabled:Z,showScrollBtn:q}=this.state;if(Z)return null;return K("div",{class:"flex flex-col h-full"},K("div",{class:"flex items-center justify-between px-4 py-3 border-b border-border/50 bg-card"},K("div",{class:"flex items-center gap-2.5"},K("svg",{class:"size-4 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),K("h2",{class:"text-[13px] font-semibold text-foreground"},"Chat")),$.length>0&&K(g,{variant:"secondary",className:"text-[10px] tabular-nums"},$.length)),K("div",{ref:(Q)=>{this.scrollContainerRef=Q},class:"flex-1 overflow-y-auto overflow-x-hidden scroll-smooth",onScroll:this.handleScroll},$.length===0&&K("div",{class:"flex flex-col items-center justify-center h-full px-6 text-center"},K("svg",{class:"size-10 text-muted-foreground/20 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),K("p",{class:"text-sm font-medium text-muted-foreground/50"},"No messages yet"),K("p",{class:"text-xs text-muted-foreground/30 mt-1"},"Be the first to say something")),$.map((Q)=>K(A9,{key:Q.id,message:Q,isModerator:J?.isModerator})),K("div",{ref:(Q)=>{this.messagesEndRef=Q}})),q&&K("div",{class:"relative"},K("div",{class:"absolute bottom-3 left-1/2 -translate-x-1/2 z-10"},K(f,{size:"sm",onClick:()=>{this.shouldAutoScroll=!0,this.scrollToBottom()},className:"rounded-full shadow-lg px-4"},"New messages "))),J?K(O9,{onSend:this.handleSend}):K(k9,null))}}class f9 extends N{unsub=null;state={config:l.getState().config};componentDidMount(){this.unsub=l.subscribe(()=>{this.setState({config:l.getState().config})})}componentWillUnmount(){this.unsub?.()}render(){let{config:$}=this.state,J=!!$?.summary,Z=$?.tags&&$.tags.length>0,q=$?.socialHandles&&$.socialHandles.length>0,Q=!!$?.extraPageContent;return K("footer",{id:"footer",class:"border-t border-border/30 mt-auto"},K("div",{class:"mx-auto max-w-7xl px-4 sm:px-6 py-6"},(J||q||Z||Q)&&K("div",{class:"mb-6 max-w-2xl"},J&&K("p",{class:"text-sm text-muted-foreground leading-relaxed mb-4"},$.summary),q&&K("div",{class:"flex flex-wrap gap-2 mb-4"},$.socialHandles.map((Y)=>K("a",{key:Y.platform,href:Y.url,target:"_blank",rel:"noopener noreferrer",class:"no-underline"},K(f,{variant:"outline",size:"sm",className:"gap-2"},K("svg",{class:"size-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})),Y.platform)))),Z&&K("div",{class:"flex flex-wrap gap-1.5 mb-4"},$.tags.map((Y)=>K(g,{key:Y,variant:"outline",className:"text-xs"},"#",Y))),Q&&K("div",{class:"text-sm text-muted-foreground mb-4 [&_a]:text-foreground [&_a]:underline",innerHTML:$.extraPageContent})),K("div",{class:"flex flex-col items-center gap-4 sm:flex-row sm:justify-between text-sm text-muted-foreground"},K("div",{class:"flex items-center gap-2"},K("span",{class:"text-xl"},"\uD83D\uDD25"),K("span",{class:"font-medium text-foreground/80"},"oni"),K("span",{class:"text-border"},""),K("span",{class:"text-xs"},"Part of"," ",K("a",{href:"https://mycelium.social",target:"_blank",rel:"noopener noreferrer",class:"hover:text-foreground transition-colors"},"mycelium.social"))),K("div",{class:"flex items-center gap-4"},K("a",{href:"/admin",class:"text-xs hover:text-foreground transition-colors"},"Admin"),K("a",{href:"https://github.com/TekkadanPlays/oni",target:"_blank",rel:"noopener noreferrer",class:"text-xs hover:text-foreground transition-colors"},"GitHub")))))}}function CY($,J){let Z=J.identifier||`oni-${B5()}`,q=[["d",Z]];if(J.title)q.push(["title",J.title]);if(J.summary)q.push(["summary",J.summary]);if(J.image)q.push(["image",J.image]);if(J.streamingUrl)q.push(["streaming",J.streamingUrl]);if(J.recordingUrl)q.push(["recording",J.recordingUrl]);if(J.starts)q.push(["starts",J.starts.toString()]);if(J.ends)q.push(["ends",J.ends.toString()]);if(J.status)q.push(["status",J.status]);if(J.currentParticipants!==void 0)q.push(["current_participants",J.currentParticipants.toString()]);if(J.totalParticipants!==void 0)q.push(["total_participants",J.totalParticipants.toString()]);if(J.tags)for(let Q of J.tags)q.push(["t",Q]);if(J.participants)for(let Q of J.participants){let Y=["p",Q.pubkey];if(Q.relay)Y.push(Q.relay);if(Y.push(Q.role),Q.proof)Y.push(Q.proof);q.push(Y)}if(J.relays&&J.relays.length>0)q.push(["relays",...J.relays]);return q.push(["a",`${E0.LiveEvent}:${$}:${Z}`]),V4(E0.LiveEvent,"",q,$)}async function b9($,J){try{let Z=CY($,J);return await S4(Z)}catch(Z){return console.error("[nip53] Error creating live event:",Z),null}}async function u4($,J){if(!$||J.length===0)return{published:!1,results:new Map};let Z=[];try{let q=J.map(async(X)=>{let U=new q1(X);return Z.push(U),await U.connect(),U});await Promise.allSettled(q);let Q=new Map,Y=Z.filter((X)=>X.status==="connected").map(async(X)=>{try{let U=await X.publish($);Q.set(X.url,U)}catch(U){Q.set(X.url,{accepted:!1,message:String(U)})}});return await Promise.allSettled(Y),{published:Array.from(Q.values()).some((X)=>X.accepted),results:Q}}finally{for(let q of Z)q.disconnect()}}async function v9($,J,Z){let q=J.tags.find((X)=>X[0]==="d"),Q=q?q[1]:`oni-${B5()}`,Y={identifier:Q,status:"live"};for(let X of J.tags)switch(X[0]){case"title":Y.title=X[1];break;case"summary":Y.summary=X[1];break;case"image":Y.image=X[1];break;case"streaming":Y.streamingUrl=X[1];break;case"recording":Y.recordingUrl=X[1];break;case"starts":Y.starts=parseInt(X[1],10);break;case"ends":Y.ends=parseInt(X[1],10);break;case"status":Y.status=X[1];break;case"current_participants":Y.currentParticipants=parseInt(X[1],10);break}let w={...Y,...Z,identifier:Q};return b9($,w)}var B0={currentEvent:null,isPublishing:!1,lastPublished:null,error:null,enabled:!1},y9=new Set,A2=null;function O2(){for(let $ of y9)$()}function k2(){return B0}function Q3($){return y9.add($),()=>y9.delete($)}function Y3($){if(B0={...B0,enabled:$},typeof localStorage!=="undefined")localStorage.setItem("oni_live_events_enabled",$?"1":"0");O2()}function w3(){if(typeof localStorage==="undefined")return;let $=localStorage.getItem("oni_live_events_enabled");if($!==null)B0={...B0,enabled:$==="1"},O2()}function E9(){let J=E1().relayList.filter((Z)=>Z.write).map((Z)=>Z.url);if(J.length>0)return J;return["wss://relay.damus.io","wss://nos.lol","wss://relay.nostr.band"]}async function X3($,J){let Z=L0();if(!Z.pubkey||!B0.enabled)return;B0={...B0,isPublishing:!0,error:null},O2();try{let q=E9(),Q=await b9(Z.pubkey,{identifier:`oni-${Date.now()}`,title:$||"Live Stream",status:"live",streamingUrl:`${window.location.origin}/hls/stream.m3u8`,starts:Math.floor(Date.now()/1000),currentParticipants:J,participants:[{pubkey:Z.pubkey,role:"Host"}],relays:q});if(Q){let{published:Y}=await u4(Q,q);if(Y){if(console.log("[liveevents] Published live event:",Q.id),B0={...B0,currentEvent:Q,isPublishing:!1,lastPublished:new Date().toISOString()},A2)clearInterval(A2);A2=setInterval(()=>{NY($,J)},60000)}else B0={...B0,isPublishing:!1,error:"Failed to publish to any relay"}}else B0={...B0,isPublishing:!1,error:"Failed to create event (signer rejected?)"}}catch(q){B0={...B0,isPublishing:!1,error:String(q)}}O2()}async function K3(){let $=L0();if(!$.pubkey||!B0.currentEvent)return;if(A2)clearInterval(A2),A2=null;try{let J=E9(),Z=await v9($.pubkey,B0.currentEvent,{status:"ended",ends:Math.floor(Date.now()/1000)});if(Z)await u4(Z,J),console.log("[liveevents] Published stream ended event")}catch(J){console.error("[liveevents] Error ending live event:",J)}B0={...B0,currentEvent:null},O2()}async function NY($,J){let Z=L0();if(!Z.pubkey||!B0.currentEvent)return;try{let q=E9(),Q=await v9(Z.pubkey,B0.currentEvent,{title:$||"Live Stream",currentParticipants:J,status:"live"});if(Q)B0={...B0,currentEvent:Q,lastPublished:new Date().toISOString()},await u4(Q,q),O2()}catch(q){console.error("[liveevents] Error updating live event:",q)}}class u9 extends N{unsub=null;unsubAuth=null;lastPubkey=null;wasOnline=!1;state={loading:!0,error:null,online:!1,chatVisible:!0,chatDisabled:!1,isMobile:window.innerWidth<=768,name:"",streamTitle:"",offlineMessage:"",lastDisconnectTime:"",logo:""};updateAuthSigner(){let $=L0(),J=e0();if($.pubkey)J.setAuthSigner((Z)=>S4(Z));else J.setAuthSigner(null)}onAuthChange(){let $=L0();if(this.updateAuthSigner(),$.pubkey&&this.lastPubkey&&$.pubkey!==this.lastPubkey)z9();if(this.lastPubkey=$.pubkey,$.pubkey)t$($.pubkey).catch((J)=>console.warn("[oni] Bootstrap error:",J))}componentDidMount(){this.unsub=l.subscribe(()=>{let $=l.getState(),J=$.status?.online||!1,Z=this.wasOnline;if(this.setState({loading:$.loading,error:$.error,online:J,chatVisible:$.chatVisible,chatDisabled:$.config?.chatDisabled||!1,isMobile:$.isMobile,name:$.config?.name||"",streamTitle:$.status?.streamTitle||"",offlineMessage:$.config?.offlineMessage||"",lastDisconnectTime:$.status?.lastDisconnectTime||"",logo:$.config?.logo||""}),J&&!Z)this.wasOnline=!0,X3($.status?.streamTitle||$.config?.name||"Live Stream",$.status?.viewerCount||0);else if(!J&&Z)this.wasOnline=!1,K3()}),this.unsubAuth=y1(()=>this.onAuthChange()),p$(),T9(),w3(),f4(10).catch(($)=>console.warn("[oni] Indexer discovery error:",$)),O4(),this.updateAuthSigner(),x$().then(()=>{this.onAuthChange()}).catch(($)=>console.warn("[oni] Relay connect error:",$)),window.addEventListener("resize",this.handleResize),l.init()}componentWillUnmount(){this.unsub?.(),this.unsubAuth?.(),window.removeEventListener("resize",this.handleResize),l.cleanup()}handleResize=()=>{l.setMobile(window.innerWidth<=768)};render(){let{loading:$,error:J,online:Z,chatVisible:q,chatDisabled:Q,isMobile:Y,name:w,streamTitle:X,offlineMessage:U,lastDisconnectTime:B,logo:G}=this.state;if(J)return K("div",{class:"flex items-center justify-center min-h-screen bg-background"},K(E,{className:"max-w-sm w-full mx-4 text-center"},K(x,{className:"pt-6"},K("div",{class:"size-12 rounded-lg bg-destructive/10 flex items-center justify-center mx-auto mb-4"},K("svg",{class:"size-5 text-destructive",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}))),K("h2",{class:"text-lg font-semibold mb-2"},"Unable to connect"),K("p",{class:"text-sm text-muted-foreground mb-6"},J),K(f,{onClick:()=>window.location.reload()},"Try Again"))));if($)return K("div",{class:"flex items-center justify-center min-h-screen bg-background"},K("div",{class:"text-center"},K(X1,{size:"lg",className:"mx-auto mb-4"}),K("p",{class:"text-sm text-muted-foreground"},"Loading stream...")));return K("div",{class:"flex flex-col h-screen bg-background"},K(V9,null),K("div",{class:"flex flex-1 min-h-0"},K("div",{class:"flex flex-col flex-1 overflow-y-auto"},Z?K(I9,{source:"/hls/stream.m3u8",online:Z,title:X||w}):K(S9,{name:w,customText:U,lastDisconnectTime:B,logo:G?"/logo":void 0}),Z&&K(C9,null),K("div",{class:"flex-1"}),K(f9,null)),q&&!Q&&!Y&&K("div",{class:"w-[340px] shrink-0 border-l border-border bg-card"},K(E4,null))),K(G4,{open:Y&&!Q&&q,onOpenChange:(M)=>{if(!M)l.toggleChat()}},K(p8,null,K(r8,null,"Chat")),K(d8,{className:"h-[70vh]"},K(E4,null))),K(L2,null))}}var AY=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),K("polyline",{points:"9 22 9 12 15 12 15 22"})),OY=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("circle",{cx:"12",cy:"12",r:"3"}),K("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})),kY=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("polygon",{points:"23 7 16 12 23 17 23 7"}),K("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),fY=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})),bY=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),K("circle",{cx:"9",cy:"7",r:"4"}),K("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),K("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})),vY=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),K("polyline",{points:"14 2 14 8 20 8"}),K("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),K("line",{x1:"16",y1:"17",x2:"8",y2:"17"})),yY=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})),EY=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})),uY=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("circle",{cx:"12",cy:"12",r:"2"}),K("path",{d:"M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"})),gY=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),K("polyline",{points:"12 19 5 12 12 5"})),hY=[{heading:"",items:[{id:"overview",label:"Dashboard",icon:AY},{id:"viewers",label:"Viewers",icon:bY}]},{heading:"Configuration",items:[{id:"general",label:"General",icon:OY},{id:"video",label:"Video",icon:kY},{id:"chat",label:"Chat",icon:fY}]},{heading:"Nostr",items:[{id:"nostr",label:"Identity",icon:EY},{id:"relays",label:"Relays",icon:uY}]},{heading:"Advanced",items:[{id:"logs",label:"Logs",icon:vY},{id:"tokens",label:"Access Tokens",icon:yY}]}];class g9 extends N{unsub=null;state={online:!1,name:"",streamTitle:"",viewerCount:0,sidebarOpen:!1};componentDidMount(){this.unsub=l.subscribe(()=>{let $=l.getState();this.setState({online:$.status?.online||!1,name:$.config?.name||"",streamTitle:$.status?.streamTitle||"",viewerCount:$.status?.viewerCount||0})})}componentWillUnmount(){this.unsub?.()}render(){let{activeTab:$,onTabChange:J,children:Z}=this.props,{online:q,name:Q,viewerCount:Y}=this.state;return K("div",{class:"min-h-screen bg-background"},K("header",{class:"sticky top-0 z-50 border-b border-border/30 bg-background/80 backdrop-blur-xl backdrop-saturate-150"},K("div",{class:"flex h-14 items-center justify-between px-4 sm:px-6"},K("div",{class:"flex items-center gap-4"},K("a",{href:"/",class:"flex items-center gap-2.5 shrink-0"},K("span",{class:"text-xl"},"\uD83D\uDD25"),K("span",{class:"text-lg font-bold tracking-tight"},Q||"oni")),K("nav",{class:"hidden md:flex items-center gap-0.5"},K("a",{href:"/",class:"inline-flex h-9 items-center justify-center rounded-md px-3 py-2 text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground"},"Stream"),K("a",{href:"https://mycelium.social",target:"_blank",rel:"noopener",class:"inline-flex h-9 items-center justify-center rounded-md px-3 py-2 text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground"},"Mycelium"))),K("div",{class:"flex items-center gap-2"},q&&Y>0&&K(g,{variant:"outline",className:"tabular-nums gap-1.5"},K("svg",{class:"size-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},K("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),K("circle",{cx:"12",cy:"12",r:"3"})),Y),K(g,{variant:q?"default":"secondary",className:R("gap-1.5",q&&"bg-success text-success-foreground")},K("span",{class:R("size-1.5 rounded-full",q?"bg-current live-dot":"bg-muted-foreground/50")}),q?"Live":"Offline"),K(D2,{className:"hidden sm:inline-flex size-8"})))),K("div",{class:"flex"},K("aside",{class:"hidden md:block w-52 shrink-0 border-r border-border"},K("div",{class:"sticky top-[57px] py-4 px-3 space-y-4 h-[calc(100vh-57px)] overflow-y-auto"},hY.map((w)=>K("div",{key:w.heading},w.heading&&K("p",{class:"px-3 mb-1.5 text-[11px] font-semibold tracking-wider uppercase text-muted-foreground/50"},w.heading),w.items.map((X)=>{let U=X.icon,B=$===X.id;return K("button",{key:X.id,class:R("w-full flex items-center gap-2.5 px-3 py-2 rounded-md text-sm transition-colors cursor-pointer",B?"bg-accent text-foreground font-medium":"text-muted-foreground hover:text-foreground hover:bg-accent/80"),onClick:()=>J(X.id)},K("span",{class:R("text-sm",B?"text-foreground":"text-muted-foreground/60")},K(U,null)),X.label)}))),K(_1,null),K("button",{class:"w-full flex items-center gap-2.5 px-3 py-2 rounded-md text-sm text-muted-foreground hover:text-foreground hover:bg-accent/80 transition-colors cursor-pointer",onClick:()=>{window.location.href="/"}},K(gY,null),"Back to stream"))),K("main",{class:"flex-1 min-w-0"},K("div",{class:"mx-auto max-w-5xl px-5 sm:px-6 lg:px-8 py-6"},Z))),K(L2,null))}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function W5($){return $+0.5|0}var u1=($,J,Z)=>Math.max(Math.min($,Z),J);function F5($){return u1(W5($*2.55),0,255)}function g1($){return u1(W5($*255),0,255)}function P1($){return u1(W5($/2.55)/100,0,1)}function U3($){return u1(W5($*100),0,100)}var $1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},x9=[..."0123456789ABCDEF"],xY=($)=>x9[$&15],mY=($)=>x9[($&240)>>4]+x9[$&15],g4=($)=>($&240)>>4===($&15),dY=($)=>g4($.r)&&g4($.g)&&g4($.b)&&g4($.a);function pY($){var J=$.length,Z;if($[0]==="#"){if(J===4||J===5)Z={r:255&$1[$[1]]*17,g:255&$1[$[2]]*17,b:255&$1[$[3]]*17,a:J===5?$1[$[4]]*17:255};else if(J===7||J===9)Z={r:$1[$[1]]<<4|$1[$[2]],g:$1[$[3]]<<4|$1[$[4]],b:$1[$[5]]<<4|$1[$[6]],a:J===9?$1[$[7]]<<4|$1[$[8]]:255}}return Z}var rY=($,J)=>$<255?J($):"";function cY($){var J=dY($)?xY:mY;return $?"#"+J($.r)+J($.g)+J($.b)+rY($.a,J):void 0}var sY=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function M3($,J,Z){let q=J*Math.min(Z,1-Z),Q=(Y,w=(Y+$/30)%12)=>Z-q*Math.max(Math.min(w-3,9-w,1),-1);return[Q(0),Q(8),Q(4)]}function oY($,J,Z){let q=(Q,Y=(Q+$/60)%6)=>Z-Z*J*Math.max(Math.min(Y,4-Y,1),0);return[q(5),q(3),q(1)]}function lY($,J,Z){let q=M3($,1,0.5),Q;if(J+Z>1)Q=1/(J+Z),J*=Q,Z*=Q;for(Q=0;Q<3;Q++)q[Q]*=1-J-Z,q[Q]+=J;return q}function iY($,J,Z,q,Q){if($===Q)return(J-Z)/q+(J<Z?6:0);if(J===Q)return(Z-$)/q+2;return($-J)/q+4}function m9($){let Z=$.r/255,q=$.g/255,Q=$.b/255,Y=Math.max(Z,q,Q),w=Math.min(Z,q,Q),X=(Y+w)/2,U,B,G;if(Y!==w)G=Y-w,B=X>0.5?G/(2-Y-w):G/(Y+w),U=iY(Z,q,Q,G,Y),U=U*60+0.5;return[U|0,B||0,X]}function d9($,J,Z,q){return(Array.isArray(J)?$(J[0],J[1],J[2]):$(J,Z,q)).map(g1)}function p9($,J,Z){return d9(M3,$,J,Z)}function nY($,J,Z){return d9(lY,$,J,Z)}function aY($,J,Z){return d9(oY,$,J,Z)}function z3($){return($%360+360)%360}function tY($){let J=sY.exec($),Z=255,q;if(!J)return;if(J[5]!==q)Z=J[6]?F5(+J[5]):g1(+J[5]);let Q=z3(+J[2]),Y=+J[3]/100,w=+J[4]/100;if(J[1]==="hwb")q=nY(Q,Y,w);else if(J[1]==="hsv")q=aY(Q,Y,w);else q=p9(Q,Y,w);return{r:q[0],g:q[1],b:q[2],a:Z}}function eY($,J){var Z=m9($);Z[0]=z3(Z[0]+J),Z=p9(Z),$.r=Z[0],$.g=Z[1],$.b=Z[2]}function $w($){if(!$)return;let J=m9($),Z=J[0],q=U3(J[1]),Q=U3(J[2]);return $.a<255?`hsla(${Z}, ${q}%, ${Q}%, ${P1($.a)})`:`hsl(${Z}, ${q}%, ${Q}%)`}var B3={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},G3={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Jw(){let $={},J=Object.keys(G3),Z=Object.keys(B3),q,Q,Y,w,X;for(q=0;q<J.length;q++){w=X=J[q];for(Q=0;Q<Z.length;Q++)Y=Z[Q],X=X.replace(Y,B3[Y]);Y=parseInt(G3[w],16),$[X]=[Y>>16&255,Y>>8&255,Y&255]}return $}var h4;function Zw($){if(!h4)h4=Jw(),h4.transparent=[0,0,0,0];let J=h4[$.toLowerCase()];return J&&{r:J[0],g:J[1],b:J[2],a:J.length===4?J[3]:255}}var qw=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Qw($){let J=qw.exec($),Z=255,q,Q,Y;if(!J)return;if(J[7]!==q){let w=+J[7];Z=J[8]?F5(w):u1(w*255,0,255)}return q=+J[1],Q=+J[3],Y=+J[5],q=255&(J[2]?F5(q):u1(q,0,255)),Q=255&(J[4]?F5(Q):u1(Q,0,255)),Y=255&(J[6]?F5(Y):u1(Y,0,255)),{r:q,g:Q,b:Y,a:Z}}function Yw($){return $&&($.a<255?`rgba(${$.r}, ${$.g}, ${$.b}, ${P1($.a)})`:`rgb(${$.r}, ${$.g}, ${$.b})`)}var h9=($)=>$<=0.0031308?$*12.92:Math.pow($,0.4166666666666667)*1.055-0.055,f2=($)=>$<=0.04045?$/12.92:Math.pow(($+0.055)/1.055,2.4);function ww($,J,Z){let q=f2(P1($.r)),Q=f2(P1($.g)),Y=f2(P1($.b));return{r:g1(h9(q+Z*(f2(P1(J.r))-q))),g:g1(h9(Q+Z*(f2(P1(J.g))-Q))),b:g1(h9(Y+Z*(f2(P1(J.b))-Y))),a:$.a+Z*(J.a-$.a)}}function x4($,J,Z){if($){let q=m9($);q[J]=Math.max(0,Math.min(q[J]+q[J]*Z,J===0?360:1)),q=p9(q),$.r=q[0],$.g=q[1],$.b=q[2]}}function H3($,J){return $?Object.assign(J||{},$):$}function T3($){var J={r:0,g:0,b:0,a:255};if(Array.isArray($)){if($.length>=3){if(J={r:$[0],g:$[1],b:$[2],a:255},$.length>3)J.a=g1($[3])}}else J=H3($,{r:0,g:0,b:0,a:1}),J.a=g1(J.a);return J}function Xw($){if($.charAt(0)==="r")return Qw($);return tY($)}class b2{constructor($){if($ instanceof b2)return $;let J=typeof $,Z;if(J==="object")Z=T3($);else if(J==="string")Z=pY($)||Zw($)||Xw($);this._rgb=Z,this._valid=!!Z}get valid(){return this._valid}get rgb(){var $=H3(this._rgb);if($)$.a=P1($.a);return $}set rgb($){this._rgb=T3($)}rgbString(){return this._valid?Yw(this._rgb):void 0}hexString(){return this._valid?cY(this._rgb):void 0}hslString(){return this._valid?$w(this._rgb):void 0}mix($,J){if($){let Z=this.rgb,q=$.rgb,Q,Y=J===Q?0.5:J,w=2*Y-1,X=Z.a-q.a,U=((w*X===-1?w:(w+X)/(1+w*X))+1)/2;Q=1-U,Z.r=255&U*Z.r+Q*q.r+0.5,Z.g=255&U*Z.g+Q*q.g+0.5,Z.b=255&U*Z.b+Q*q.b+0.5,Z.a=Y*Z.a+(1-Y)*q.a,this.rgb=Z}return this}interpolate($,J){if($)this._rgb=ww(this._rgb,$._rgb,J);return this}clone(){return new b2(this.rgb)}alpha($){return this._rgb.a=g1($),this}clearer($){let J=this._rgb;return J.a*=1-$,this}greyscale(){let $=this._rgb,J=W5($.r*0.3+$.g*0.59+$.b*0.11);return $.r=$.g=$.b=J,this}opaquer($){let J=this._rgb;return J.a*=1+$,this}negate(){let $=this._rgb;return $.r=255-$.r,$.g=255-$.g,$.b=255-$.b,this}lighten($){return x4(this._rgb,2,$),this}darken($){return x4(this._rgb,2,-$),this}saturate($){return x4(this._rgb,1,$),this}desaturate($){return x4(this._rgb,1,-$),this}rotate($){return eY(this._rgb,$),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function B1(){}var S3=(()=>{let $=0;return()=>$++})();function e($){return $===null||$===void 0}function G0($){if(Array.isArray&&Array.isArray($))return!0;let J=Object.prototype.toString.call($);if(J.slice(0,7)==="[object"&&J.slice(-6)==="Array]")return!0;return!1}function o($){return $!==null&&Object.prototype.toString.call($)==="[object Object]"}function M0($){return(typeof $==="number"||$ instanceof Number)&&isFinite(+$)}function u0($,J){return M0($)?$:J}function p($,J){return typeof $==="undefined"?J:$}var C3=($,J)=>typeof $==="string"&&$.endsWith("%")?parseFloat($)/100:+$/J,s9=($,J)=>typeof $==="string"&&$.endsWith("%")?parseFloat($)/100*J:+$;function q0($,J,Z){if($&&typeof $.call==="function")return $.apply(Z,J)}function $0($,J,Z,q){let Q,Y,w;if(G0($))if(Y=$.length,q)for(Q=Y-1;Q>=0;Q--)J.call(Z,$[Q],Q);else for(Q=0;Q<Y;Q++)J.call(Z,$[Q],Q);else if(o($)){w=Object.keys($),Y=w.length;for(Q=0;Q<Y;Q++)J.call(Z,$[w[Q]],w[Q])}}function _5($,J){let Z,q,Q,Y;if(!$||!J||$.length!==J.length)return!1;for(Z=0,q=$.length;Z<q;++Z)if(Q=$[Z],Y=J[Z],Q.datasetIndex!==Y.datasetIndex||Q.index!==Y.index)return!1;return!0}function r4($){if(G0($))return $.map(r4);if(o($)){let J=Object.create(null),Z=Object.keys($),q=Z.length,Q=0;for(;Q<q;++Q)J[Z[Q]]=r4($[Z[Q]]);return J}return $}function N3($){return["__proto__","prototype","constructor"].indexOf($)===-1}function Kw($,J,Z,q){if(!N3($))return;let Q=J[$],Y=Z[$];if(o(Q)&&o(Y))y2(Q,Y,q);else J[$]=r4(Y)}function y2($,J,Z){let q=G0(J)?J:[J],Q=q.length;if(!o($))return $;Z=Z||{};let Y=Z.merger||Kw,w;for(let X=0;X<Q;++X){if(w=q[X],!o(w))continue;let U=Object.keys(w);for(let B=0,G=U.length;B<G;++B)Y(U[B],$,w,Z)}return $}function u2($,J){return y2($,J,{merger:Uw})}function Uw($,J,Z){if(!N3($))return;let q=J[$],Q=Z[$];if(o(q)&&o(Q))u2(q,Q);else if(!Object.prototype.hasOwnProperty.call(J,$))J[$]=r4(Q)}var F3={"":($)=>$,x:($)=>$.x,y:($)=>$.y};function Bw($){let J=$.split("."),Z=[],q="";for(let Q of J)if(q+=Q,q.endsWith("\\"))q=q.slice(0,-1)+".";else Z.push(q),q="";return Z}function Gw($){let J=Bw($);return(Z)=>{for(let q of J){if(q==="")break;Z=Z&&Z[q]}return Z}}function g2($,J){return(F3[J]||(F3[J]=Gw(J)))($)}function l4($){return $.charAt(0).toUpperCase()+$.slice(1)}var L5=($)=>typeof $!=="undefined",V1=($)=>typeof $==="function",o9=($,J)=>{if($.size!==J.size)return!1;for(let Z of $)if(!J.has(Z))return!1;return!0};function A3($){return $.type==="mouseup"||$.type==="click"||$.type==="contextmenu"}var t=Math.PI,X0=2*t,Tw=X0+t,c4=Number.POSITIVE_INFINITY,Mw=t/180,H0=t/2,q2=t/4,W3=t*2/3,I1=Math.log10,Y2=Math.sign;function h2($,J,Z){return Math.abs($-J)<Z}function l9($){let J=Math.round($);$=h2($,J,$/1000)?J:$;let Z=Math.pow(10,Math.floor(I1($))),q=$/Z;return(q<=1?1:q<=2?2:q<=5?5:10)*Z}function O3($){let J=[],Z=Math.sqrt($),q;for(q=1;q<Z;q++)if($%q===0)J.push(q),J.push($/q);if(Z===(Z|0))J.push(Z);return J.sort((Q,Y)=>Q-Y).pop(),J}function zw($){return typeof $==="symbol"||typeof $==="object"&&$!==null&&!((Symbol.toPrimitive in $)||("toString"in $)||("valueOf"in $))}function x2($){return!zw($)&&!isNaN(parseFloat($))&&isFinite($)}function k3($,J){let Z=Math.round($);return Z-J<=$&&Z+J>=$}function i9($,J,Z){let q,Q,Y;for(q=0,Q=$.length;q<Q;q++)if(Y=$[q][Z],!isNaN(Y))J.min=Math.min(J.min,Y),J.max=Math.max(J.max,Y)}function Y1($){return $*(t/180)}function i4($){return $*(180/t)}function n9($){if(!M0($))return;let J=1,Z=0;while(Math.round($*J)/J!==$)J*=10,Z++;return Z}function a9($,J){let Z=J.x-$.x,q=J.y-$.y,Q=Math.sqrt(Z*Z+q*q),Y=Math.atan2(q,Z);if(Y<-0.5*t)Y+=X0;return{angle:Y,distance:Q}}function s4($,J){return Math.sqrt(Math.pow(J.x-$.x,2)+Math.pow(J.y-$.y,2))}function Hw($,J){return($-J+Tw)%X0-t}function O0($){return($%X0+X0)%X0}function m2($,J,Z,q){let Q=O0($),Y=O0(J),w=O0(Z),X=O0(Y-Q),U=O0(w-Q),B=O0(Q-Y),G=O0(Q-w);return Q===Y||Q===w||q&&Y===w||X>U&&B<G}function f0($,J,Z){return Math.max(J,Math.min(Z,$))}function f3($){return f0($,-32768,32767)}function d1($,J,Z,q=0.000001){return $>=Math.min(J,Z)-q&&$<=Math.max(J,Z)+q}function n4($,J,Z){Z=Z||((w)=>$[w]<J);let q=$.length-1,Q=0,Y;while(q-Q>1)if(Y=Q+q>>1,Z(Y))Q=Y;else q=Y;return{lo:Q,hi:q}}var x1=($,J,Z,q)=>n4($,Z,q?(Q)=>{let Y=$[Q][J];return Y<Z||Y===Z&&$[Q+1][J]===Z}:(Q)=>$[Q][J]<Z),b3=($,J,Z)=>n4($,Z,(q)=>$[q][J]>=Z);function v3($,J,Z){let q=0,Q=$.length;while(q<Q&&$[q]<J)q++;while(Q>q&&$[Q-1]>Z)Q--;return q>0||Q<$.length?$.slice(q,Q):$}var y3=["push","pop","shift","splice","unshift"];function E3($,J){if($._chartjs){$._chartjs.listeners.push(J);return}Object.defineProperty($,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[J]}}),y3.forEach((Z)=>{let q="_onData"+l4(Z),Q=$[Z];Object.defineProperty($,Z,{configurable:!0,enumerable:!1,value(...Y){let w=Q.apply(this,Y);return $._chartjs.listeners.forEach((X)=>{if(typeof X[q]==="function")X[q](...Y)}),w}})})}function t9($,J){let Z=$._chartjs;if(!Z)return;let q=Z.listeners,Q=q.indexOf(J);if(Q!==-1)q.splice(Q,1);if(q.length>0)return;y3.forEach((Y)=>{delete $[Y]}),delete $._chartjs}function u3($){let J=new Set($);if(J.size===$.length)return $;return Array.from(J)}var e9=function(){if(typeof window==="undefined")return function($){return $()};return window.requestAnimationFrame}();function $7($,J){let Z=[],q=!1;return function(...Q){if(Z=Q,!q)q=!0,e9.call(window,()=>{q=!1,$.apply(J,Z)})}}function g3($,J){let Z;return function(...q){if(J)clearTimeout(Z),Z=setTimeout($,J,q);else $.apply(this,q);return J}}var J7=($)=>$==="start"?"left":$==="end"?"right":"center",g0=($,J,Z)=>$==="start"?J:$==="end"?Z:(J+Z)/2,h3=($,J,Z,q)=>{return $===(q?"left":"right")?Z:$==="center"?(J+Z)/2:J};function x3($,J,Z){let q=J.length,Q=0,Y=q;if($._sorted){let{iScale:w,vScale:X,_parsed:U}=$,B=$.dataset?$.dataset.options?$.dataset.options.spanGaps:null:null,G=w.axis,{min:T,max:M,minDefined:z,maxDefined:F}=w.getUserBounds();if(z){if(Q=Math.min(x1(U,G,T).lo,Z?q:x1(J,G,w.getPixelForValue(T)).lo),B){let H=U.slice(0,Q+1).reverse().findIndex((W)=>!e(W[X.axis]));Q-=Math.max(0,H)}Q=f0(Q,0,q-1)}if(F){let H=Math.max(x1(U,w.axis,M,!0).hi+1,Z?0:x1(J,G,w.getPixelForValue(M),!0).hi+1);if(B){let W=U.slice(H-1).findIndex((j)=>!e(j[X.axis]));H+=Math.max(0,W)}Y=f0(H,Q,q)-Q}else Y=q-Q}return{start:Q,count:Y}}function m3($){let{xScale:J,yScale:Z,_scaleRanges:q}=$,Q={xmin:J.min,xmax:J.max,ymin:Z.min,ymax:Z.max};if(!q)return $._scaleRanges=Q,!0;let Y=q.xmin!==J.min||q.xmax!==J.max||q.ymin!==Z.min||q.ymax!==Z.max;return Object.assign(q,Q),Y}var m4=($)=>$===0||$===1,j3=($,J,Z)=>-(Math.pow(2,10*($-=1))*Math.sin(($-J)*X0/Z)),R3=($,J,Z)=>Math.pow(2,-10*$)*Math.sin(($-J)*X0/Z)+1,v2={linear:($)=>$,easeInQuad:($)=>$*$,easeOutQuad:($)=>-$*($-2),easeInOutQuad:($)=>($/=0.5)<1?0.5*$*$:-0.5*(--$*($-2)-1),easeInCubic:($)=>$*$*$,easeOutCubic:($)=>($-=1)*$*$+1,easeInOutCubic:($)=>($/=0.5)<1?0.5*$*$*$:0.5*(($-=2)*$*$+2),easeInQuart:($)=>$*$*$*$,easeOutQuart:($)=>-(($-=1)*$*$*$-1),easeInOutQuart:($)=>($/=0.5)<1?0.5*$*$*$*$:-0.5*(($-=2)*$*$*$-2),easeInQuint:($)=>$*$*$*$*$,easeOutQuint:($)=>($-=1)*$*$*$*$+1,easeInOutQuint:($)=>($/=0.5)<1?0.5*$*$*$*$*$:0.5*(($-=2)*$*$*$*$+2),easeInSine:($)=>-Math.cos($*H0)+1,easeOutSine:($)=>Math.sin($*H0),easeInOutSine:($)=>-0.5*(Math.cos(t*$)-1),easeInExpo:($)=>$===0?0:Math.pow(2,10*($-1)),easeOutExpo:($)=>$===1?1:-Math.pow(2,-10*$)+1,easeInOutExpo:($)=>m4($)?$:$<0.5?0.5*Math.pow(2,10*($*2-1)):0.5*(-Math.pow(2,-10*($*2-1))+2),easeInCirc:($)=>$>=1?$:-(Math.sqrt(1-$*$)-1),easeOutCirc:($)=>Math.sqrt(1-($-=1)*$),easeInOutCirc:($)=>($/=0.5)<1?-0.5*(Math.sqrt(1-$*$)-1):0.5*(Math.sqrt(1-($-=2)*$)+1),easeInElastic:($)=>m4($)?$:j3($,0.075,0.3),easeOutElastic:($)=>m4($)?$:R3($,0.075,0.3),easeInOutElastic($){return m4($)?$:$<0.5?0.5*j3($*2,0.1125,0.45):0.5+0.5*R3($*2-1,0.1125,0.45)},easeInBack($){return $*$*(2.70158*$-1.70158)},easeOutBack($){return($-=1)*$*(2.70158*$+1.70158)+1},easeInOutBack($){let J=1.70158;if(($/=0.5)<1)return 0.5*($*$*(((J*=1.525)+1)*$-J));return 0.5*(($-=2)*$*(((J*=1.525)+1)*$+J)+2)},easeInBounce:($)=>1-v2.easeOutBounce(1-$),easeOutBounce($){if($<0.36363636363636365)return 7.5625*$*$;if($<0.7272727272727273)return 7.5625*($-=0.5454545454545454)*$+0.75;if($<0.9090909090909091)return 7.5625*($-=0.8181818181818182)*$+0.9375;return 7.5625*($-=0.9545454545454546)*$+0.984375},easeInOutBounce:($)=>$<0.5?v2.easeInBounce($*2)*0.5:v2.easeOutBounce($*2-1)*0.5+0.5};function Z7($){if($&&typeof $==="object"){let J=$.toString();return J==="[object CanvasPattern]"||J==="[object CanvasGradient]"}return!1}function q7($){return Z7($)?$:new b2($)}function r9($){return Z7($)?$:new b2($).saturate(0.5).darken(0.1).hexString()}var Fw=["x","y","borderWidth","radius","tension"],Ww=["color","borderColor","backgroundColor"];function jw($){$.set("animation",{delay:void 0,duration:1000,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),$.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:(J)=>J!=="onProgress"&&J!=="onComplete"&&J!=="fn"}),$.set("animations",{colors:{type:"color",properties:Ww},numbers:{type:"number",properties:Fw}}),$.describe("animations",{_fallback:"animation"}),$.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:(J)=>J|0}}}})}function Rw($){$.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var _3=new Map;function _w($,J){J=J||{};let Z=$+JSON.stringify(J),q=_3.get(Z);if(!q)q=new Intl.NumberFormat($,J),_3.set(Z,q);return q}function D5($,J,Z){return _w(J,Z).format($)}var d3={values($){return G0($)?$:""+$},numeric($,J,Z){if($===0)return"0";let q=this.chart.options.locale,Q,Y=$;if(Z.length>1){let B=Math.max(Math.abs(Z[0].value),Math.abs(Z[Z.length-1].value));if(B<0.0001||B>1000000000000000)Q="scientific";Y=Lw($,Z)}let w=I1(Math.abs(Y)),X=isNaN(w)?1:Math.max(Math.min(-1*Math.floor(w),20),0),U={notation:Q,minimumFractionDigits:X,maximumFractionDigits:X};return Object.assign(U,this.options.ticks.format),D5($,q,U)},logarithmic($,J,Z){if($===0)return"0";let q=Z[J].significand||$/Math.pow(10,Math.floor(I1($)));if([1,2,3,5,10,15].includes(q)||J>0.8*Z.length)return d3.numeric.call(this,$,J,Z);return""}};function Lw($,J){let Z=J.length>3?J[2].value-J[1].value:J[1].value-J[0].value;if(Math.abs(Z)>=1&&$!==Math.floor($))Z=$-Math.floor($);return Z}var P5={formatters:d3};function Dw($){$.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(J,Z)=>Z.lineWidth,tickColor:(J,Z)=>Z.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:P5.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),$.route("scale.ticks","color","","color"),$.route("scale.grid","color","","borderColor"),$.route("scale.border","color","","borderColor"),$.route("scale.title","color","","color"),$.describe("scale",{_fallback:!1,_scriptable:(J)=>!J.startsWith("before")&&!J.startsWith("after")&&J!=="callback"&&J!=="parser",_indexable:(J)=>J!=="borderDash"&&J!=="tickBorderDash"&&J!=="dash"}),$.describe("scales",{_fallback:"scale"}),$.describe("scale.ticks",{_scriptable:(J)=>J!=="backdropPadding"&&J!=="callback",_indexable:(J)=>J!=="backdropPadding"})}var p1=Object.create(null),a4=Object.create(null);function j5($,J){if(!J)return $;let Z=J.split(".");for(let q=0,Q=Z.length;q<Q;++q){let Y=Z[q];$=$[Y]||($[Y]=Object.create(null))}return $}function c9($,J,Z){if(typeof J==="string")return y2(j5($,J),Z);return y2(j5($,""),J)}class p3{constructor($,J){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=(Z)=>Z.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(Z,q)=>r9(q.backgroundColor),this.hoverBorderColor=(Z,q)=>r9(q.borderColor),this.hoverColor=(Z,q)=>r9(q.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe($),this.apply(J)}set($,J){return c9(this,$,J)}get($){return j5(this,$)}describe($,J){return c9(a4,$,J)}override($,J){return c9(p1,$,J)}route($,J,Z,q){let Q=j5(this,$),Y=j5(this,Z),w="_"+J;Object.defineProperties(Q,{[w]:{value:Q[J],writable:!0},[J]:{enumerable:!0,get(){let X=this[w],U=Y[q];if(o(X))return Object.assign({},U,X);return p(X,U)},set(X){this[w]=X}}})}apply($){$.forEach((J)=>J(this))}}var z0=new p3({_scriptable:($)=>!$.startsWith("on"),_indexable:($)=>$!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[jw,Rw,Dw]);function Pw($){if(!$||e($.size)||e($.family))return null;return($.style?$.style+" ":"")+($.weight?$.weight+" ":"")+$.size+"px "+$.family}function R5($,J,Z,q,Q){let Y=J[Q];if(!Y)Y=J[Q]=$.measureText(Q).width,Z.push(Q);if(Y>q)q=Y;return q}function r3($,J,Z,q){q=q||{};let Q=q.data=q.data||{},Y=q.garbageCollect=q.garbageCollect||[];if(q.font!==J)Q=q.data={},Y=q.garbageCollect=[],q.font=J;$.save(),$.font=J;let w=0,X=Z.length,U,B,G,T,M;for(U=0;U<X;U++)if(T=Z[U],T!==void 0&&T!==null&&!G0(T))w=R5($,Q,Y,w,T);else if(G0(T)){for(B=0,G=T.length;B<G;B++)if(M=T[B],M!==void 0&&M!==null&&!G0(M))w=R5($,Q,Y,w,M)}$.restore();let z=Y.length/2;if(z>Z.length){for(U=0;U<z;U++)delete Q[Y[U]];Y.splice(0,z)}return w}function r1($,J,Z){let q=$.currentDevicePixelRatio,Q=Z!==0?Math.max(Z/2,0.5):0;return Math.round((J-Q)*q)/q+Q}function Q7($,J){if(!J&&!$)return;J=J||$.getContext("2d"),J.save(),J.resetTransform(),J.clearRect(0,0,$.width,$.height),J.restore()}function t4($,J,Z,q){Y7($,J,Z,q,null)}function Y7($,J,Z,q,Q){let Y,w,X,U,B,G,T,M,z=J.pointStyle,F=J.rotation,H=J.radius,W=(F||0)*Mw;if(z&&typeof z==="object"){if(Y=z.toString(),Y==="[object HTMLImageElement]"||Y==="[object HTMLCanvasElement]"){$.save(),$.translate(Z,q),$.rotate(W),$.drawImage(z,-z.width/2,-z.height/2,z.width,z.height),$.restore();return}}if(isNaN(H)||H<=0)return;switch($.beginPath(),z){default:if(Q)$.ellipse(Z,q,Q/2,H,0,0,X0);else $.arc(Z,q,H,0,X0);$.closePath();break;case"triangle":G=Q?Q/2:H,$.moveTo(Z+Math.sin(W)*G,q-Math.cos(W)*H),W+=W3,$.lineTo(Z+Math.sin(W)*G,q-Math.cos(W)*H),W+=W3,$.lineTo(Z+Math.sin(W)*G,q-Math.cos(W)*H),$.closePath();break;case"rectRounded":B=H*0.516,U=H-B,w=Math.cos(W+q2)*U,T=Math.cos(W+q2)*(Q?Q/2-B:U),X=Math.sin(W+q2)*U,M=Math.sin(W+q2)*(Q?Q/2-B:U),$.arc(Z-T,q-X,B,W-t,W-H0),$.arc(Z+M,q-w,B,W-H0,W),$.arc(Z+T,q+X,B,W,W+H0),$.arc(Z-M,q+w,B,W+H0,W+t),$.closePath();break;case"rect":if(!F){U=Math.SQRT1_2*H,G=Q?Q/2:U,$.rect(Z-G,q-U,2*G,2*U);break}W+=q2;case"rectRot":T=Math.cos(W)*(Q?Q/2:H),w=Math.cos(W)*H,X=Math.sin(W)*H,M=Math.sin(W)*(Q?Q/2:H),$.moveTo(Z-T,q-X),$.lineTo(Z+M,q-w),$.lineTo(Z+T,q+X),$.lineTo(Z-M,q+w),$.closePath();break;case"crossRot":W+=q2;case"cross":T=Math.cos(W)*(Q?Q/2:H),w=Math.cos(W)*H,X=Math.sin(W)*H,M=Math.sin(W)*(Q?Q/2:H),$.moveTo(Z-T,q-X),$.lineTo(Z+T,q+X),$.moveTo(Z+M,q-w),$.lineTo(Z-M,q+w);break;case"star":T=Math.cos(W)*(Q?Q/2:H),w=Math.cos(W)*H,X=Math.sin(W)*H,M=Math.sin(W)*(Q?Q/2:H),$.moveTo(Z-T,q-X),$.lineTo(Z+T,q+X),$.moveTo(Z+M,q-w),$.lineTo(Z-M,q+w),W+=q2,T=Math.cos(W)*(Q?Q/2:H),w=Math.cos(W)*H,X=Math.sin(W)*H,M=Math.sin(W)*(Q?Q/2:H),$.moveTo(Z-T,q-X),$.lineTo(Z+T,q+X),$.moveTo(Z+M,q-w),$.lineTo(Z-M,q+w);break;case"line":w=Q?Q/2:Math.cos(W)*H,X=Math.sin(W)*H,$.moveTo(Z-w,q-X),$.lineTo(Z+w,q+X);break;case"dash":$.moveTo(Z,q),$.lineTo(Z+Math.cos(W)*(Q?Q/2:H),q+Math.sin(W)*H);break;case!1:$.closePath();break}if($.fill(),J.borderWidth>0)$.stroke()}function U1($,J,Z){return Z=Z||0.5,!J||$&&$.x>J.left-Z&&$.x<J.right+Z&&$.y>J.top-Z&&$.y<J.bottom+Z}function V5($,J){$.save(),$.beginPath(),$.rect(J.left,J.top,J.right-J.left,J.bottom-J.top),$.clip()}function I5($){$.restore()}function c3($,J,Z,q,Q){if(!J)return $.lineTo(Z.x,Z.y);if(Q==="middle"){let Y=(J.x+Z.x)/2;$.lineTo(Y,J.y),$.lineTo(Y,Z.y)}else if(Q==="after"!==!!q)$.lineTo(J.x,Z.y);else $.lineTo(Z.x,J.y);$.lineTo(Z.x,Z.y)}function s3($,J,Z,q){if(!J)return $.lineTo(Z.x,Z.y);$.bezierCurveTo(q?J.cp1x:J.cp2x,q?J.cp1y:J.cp2y,q?Z.cp2x:Z.cp1x,q?Z.cp2y:Z.cp1y,Z.x,Z.y)}function Vw($,J){if(J.translation)$.translate(J.translation[0],J.translation[1]);if(!e(J.rotation))$.rotate(J.rotation);if(J.color)$.fillStyle=J.color;if(J.textAlign)$.textAlign=J.textAlign;if(J.textBaseline)$.textBaseline=J.textBaseline}function Iw($,J,Z,q,Q){if(Q.strikethrough||Q.underline){let Y=$.measureText(q),w=J-Y.actualBoundingBoxLeft,X=J+Y.actualBoundingBoxRight,U=Z-Y.actualBoundingBoxAscent,B=Z+Y.actualBoundingBoxDescent,G=Q.strikethrough?(U+B)/2:B;$.strokeStyle=$.fillStyle,$.beginPath(),$.lineWidth=Q.decorationWidth||2,$.moveTo(w,G),$.lineTo(X,G),$.stroke()}}function Sw($,J){let Z=$.fillStyle;$.fillStyle=J.color,$.fillRect(J.left,J.top,J.width,J.height),$.fillStyle=Z}function X2($,J,Z,q,Q,Y={}){let w=G0(J)?J:[J],X=Y.strokeWidth>0&&Y.strokeColor!=="",U,B;$.save(),$.font=Q.string,Vw($,Y);for(U=0;U<w.length;++U){if(B=w[U],Y.backdrop)Sw($,Y.backdrop);if(X){if(Y.strokeColor)$.strokeStyle=Y.strokeColor;if(!e(Y.strokeWidth))$.lineWidth=Y.strokeWidth;$.strokeText(B,Z,q,Y.maxWidth)}$.fillText(B,Z,q,Y.maxWidth),Iw($,Z,q,B,Y),q+=Number(Q.lineHeight)}$.restore()}function S5($,J){let{x:Z,y:q,w:Q,h:Y,radius:w}=J;$.arc(Z+w.topLeft,q+w.topLeft,w.topLeft,1.5*t,t,!0),$.lineTo(Z,q+Y-w.bottomLeft),$.arc(Z+w.bottomLeft,q+Y-w.bottomLeft,w.bottomLeft,t,H0,!0),$.lineTo(Z+Q-w.bottomRight,q+Y),$.arc(Z+Q-w.bottomRight,q+Y-w.bottomRight,w.bottomRight,H0,0,!0),$.lineTo(Z+Q,q+w.topRight),$.arc(Z+Q-w.topRight,q+w.topRight,w.topRight,0,-H0,!0),$.lineTo(Z+w.topLeft,q)}var Cw=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Nw=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Aw($,J){let Z=(""+$).match(Cw);if(!Z||Z[1]==="normal")return J*1.2;switch($=+Z[2],Z[3]){case"px":return $;case"%":$/=100;break}return J*$}var Ow=($)=>+$||0;function e4($,J){let Z={},q=o(J),Q=q?Object.keys(J):J,Y=o($)?q?(w)=>p($[w],$[J[w]]):(w)=>$[w]:()=>$;for(let w of Q)Z[w]=Ow(Y(w));return Z}function o3($){return e4($,{top:"y",right:"x",bottom:"y",left:"x"})}function K2($){return e4($,["topLeft","topRight","bottomLeft","bottomRight"])}function b0($){let J=o3($);return J.width=J.left+J.right,J.height=J.top+J.bottom,J}function C0($,J){$=$||{},J=J||z0.font;let Z=p($.size,J.size);if(typeof Z==="string")Z=parseInt(Z,10);let q=p($.style,J.style);if(q&&!(""+q).match(Nw))console.warn('Invalid font style specified: "'+q+'"'),q=void 0;let Q={family:p($.family,J.family),lineHeight:Aw(p($.lineHeight,J.lineHeight),Z),size:Z,style:q,weight:p($.weight,J.weight),string:""};return Q.string=Pw(Q),Q}function C5($,J,Z,q){let Q=!0,Y,w,X;for(Y=0,w=$.length;Y<w;++Y){if(X=$[Y],X===void 0)continue;if(J!==void 0&&typeof X==="function")X=X(J),Q=!1;if(Z!==void 0&&G0(X))X=X[Z%X.length],Q=!1;if(X!==void 0){if(q&&!Q)q.cacheable=!1;return X}}}function l3($,J,Z){let{min:q,max:Q}=$,Y=s9(J,(Q-q)/2),w=(X,U)=>Z&&X===0?0:X+U;return{min:w(q,-Math.abs(Y)),max:w(Q,Y)}}function S1($,J){return Object.assign(Object.create($),J)}function $8($,J=[""],Z,q,Q=()=>$[0]){let Y=Z||$;if(typeof q==="undefined")q=a3("_fallback",$);let w={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:$,_rootScopes:Y,_fallback:q,_getTarget:Q,override:(X)=>$8([X,...$],J,Y,q)};return new Proxy(w,{deleteProperty(X,U){return delete X[U],delete X._keys,delete $[0][U],!0},get(X,U){return i3(X,U,()=>gw(U,J,$,X))},getOwnPropertyDescriptor(X,U){return Reflect.getOwnPropertyDescriptor(X._scopes[0],U)},getPrototypeOf(){return Reflect.getPrototypeOf($[0])},has(X,U){return D3(X).includes(U)},ownKeys(X){return D3(X)},set(X,U,B){let G=X._storage||(X._storage=Q());return X[U]=G[U]=B,delete X._keys,!0}})}function w2($,J,Z,q){let Q={_cacheable:!1,_proxy:$,_context:J,_subProxy:Z,_stack:new Set,_descriptors:w7($,q),setContext:(Y)=>w2($,Y,Z,q),override:(Y)=>w2($.override(Y),J,Z,q)};return new Proxy(Q,{deleteProperty(Y,w){return delete Y[w],delete $[w],!0},get(Y,w,X){return i3(Y,w,()=>fw(Y,w,X))},getOwnPropertyDescriptor(Y,w){return Y._descriptors.allKeys?Reflect.has($,w)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor($,w)},getPrototypeOf(){return Reflect.getPrototypeOf($)},has(Y,w){return Reflect.has($,w)},ownKeys(){return Reflect.ownKeys($)},set(Y,w,X){return $[w]=X,delete Y[w],!0}})}function w7($,J={scriptable:!0,indexable:!0}){let{_scriptable:Z=J.scriptable,_indexable:q=J.indexable,_allKeys:Q=J.allKeys}=$;return{allKeys:Q,scriptable:Z,indexable:q,isScriptable:V1(Z)?Z:()=>Z,isIndexable:V1(q)?q:()=>q}}var kw=($,J)=>$?$+l4(J):J,X7=($,J)=>o(J)&&$!=="adapters"&&(Object.getPrototypeOf(J)===null||J.constructor===Object);function i3($,J,Z){if(Object.prototype.hasOwnProperty.call($,J)||J==="constructor")return $[J];let q=Z();return $[J]=q,q}function fw($,J,Z){let{_proxy:q,_context:Q,_subProxy:Y,_descriptors:w}=$,X=q[J];if(V1(X)&&w.isScriptable(J))X=bw(J,X,$,Z);if(G0(X)&&X.length)X=vw(J,X,$,w.isIndexable);if(X7(J,X))X=w2(X,Q,Y&&Y[J],w);return X}function bw($,J,Z,q){let{_proxy:Q,_context:Y,_subProxy:w,_stack:X}=Z;if(X.has($))throw new Error("Recursion detected: "+Array.from(X).join("->")+"->"+$);X.add($);let U=J(Y,w||q);if(X.delete($),X7($,U))U=K7(Q._scopes,Q,$,U);return U}function vw($,J,Z,q){let{_proxy:Q,_context:Y,_subProxy:w,_descriptors:X}=Z;if(typeof Y.index!=="undefined"&&q($))return J[Y.index%J.length];else if(o(J[0])){let U=J,B=Q._scopes.filter((G)=>G!==U);J=[];for(let G of U){let T=K7(B,Q,$,G);J.push(w2(T,Y,w&&w[$],X))}}return J}function n3($,J,Z){return V1($)?$(J,Z):$}var yw=($,J)=>$===!0?J:typeof $==="string"?g2(J,$):void 0;function Ew($,J,Z,q,Q){for(let Y of J){let w=yw(Z,Y);if(w){$.add(w);let X=n3(w._fallback,Z,Q);if(typeof X!=="undefined"&&X!==Z&&X!==q)return X}else if(w===!1&&typeof q!=="undefined"&&Z!==q)return null}return!1}function K7($,J,Z,q){let Q=J._rootScopes,Y=n3(J._fallback,Z,q),w=[...$,...Q],X=new Set;X.add(q);let U=L3(X,w,Z,Y||Z,q);if(U===null)return!1;if(typeof Y!=="undefined"&&Y!==Z){if(U=L3(X,w,Y,U,q),U===null)return!1}return $8(Array.from(X),[""],Q,Y,()=>uw(J,Z,q))}function L3($,J,Z,q,Q){while(Z)Z=Ew($,J,Z,q,Q);return Z}function uw($,J,Z){let q=$._getTarget();if(!(J in q))q[J]={};let Q=q[J];if(G0(Q)&&o(Z))return Z;return Q||{}}function gw($,J,Z,q){let Q;for(let Y of J)if(Q=a3(kw(Y,$),Z),typeof Q!=="undefined")return X7($,Q)?K7(Z,q,$,Q):Q}function a3($,J){for(let Z of J){if(!Z)continue;let q=Z[$];if(typeof q!=="undefined")return q}}function D3($){let J=$._keys;if(!J)J=$._keys=hw($._scopes);return J}function hw($){let J=new Set;for(let Z of $)for(let q of Object.keys(Z).filter((Q)=>!Q.startsWith("_")))J.add(q);return Array.from(J)}var xw=Number.EPSILON||0.00000000000001,E2=($,J)=>J<$.length&&!$[J].skip&&$[J],t3=($)=>$==="x"?"y":"x";function mw($,J,Z,q){let Q=$.skip?J:$,Y=J,w=Z.skip?J:Z,X=s4(Y,Q),U=s4(w,Y),B=X/(X+U),G=U/(X+U);B=isNaN(B)?0:B,G=isNaN(G)?0:G;let T=q*B,M=q*G;return{previous:{x:Y.x-T*(w.x-Q.x),y:Y.y-T*(w.y-Q.y)},next:{x:Y.x+M*(w.x-Q.x),y:Y.y+M*(w.y-Q.y)}}}function dw($,J,Z){let q=$.length,Q,Y,w,X,U,B=E2($,0);for(let G=0;G<q-1;++G){if(U=B,B=E2($,G+1),!U||!B)continue;if(h2(J[G],0,xw)){Z[G]=Z[G+1]=0;continue}if(Q=Z[G]/J[G],Y=Z[G+1]/J[G],X=Math.pow(Q,2)+Math.pow(Y,2),X<=9)continue;w=3/Math.sqrt(X),Z[G]=Q*w*J[G],Z[G+1]=Y*w*J[G]}}function pw($,J,Z="x"){let q=t3(Z),Q=$.length,Y,w,X,U=E2($,0);for(let B=0;B<Q;++B){if(w=X,X=U,U=E2($,B+1),!X)continue;let G=X[Z],T=X[q];if(w)Y=(G-w[Z])/3,X[`cp1${Z}`]=G-Y,X[`cp1${q}`]=T-Y*J[B];if(U)Y=(U[Z]-G)/3,X[`cp2${Z}`]=G+Y,X[`cp2${q}`]=T+Y*J[B]}}function rw($,J="x"){let Z=t3(J),q=$.length,Q=Array(q).fill(0),Y=Array(q),w,X,U,B=E2($,0);for(w=0;w<q;++w){if(X=U,U=B,B=E2($,w+1),!U)continue;if(B){let G=B[J]-U[J];Q[w]=G!==0?(B[Z]-U[Z])/G:0}Y[w]=!X?Q[w]:!B?Q[w-1]:Y2(Q[w-1])!==Y2(Q[w])?0:(Q[w-1]+Q[w])/2}dw($,Q,Y),pw($,Y,J)}function d4($,J,Z){return Math.max(Math.min($,Z),J)}function cw($,J){let Z,q,Q,Y,w,X=U1($[0],J);for(Z=0,q=$.length;Z<q;++Z){if(w=Y,Y=X,X=Z<q-1&&U1($[Z+1],J),!Y)continue;if(Q=$[Z],w)Q.cp1x=d4(Q.cp1x,J.left,J.right),Q.cp1y=d4(Q.cp1y,J.top,J.bottom);if(X)Q.cp2x=d4(Q.cp2x,J.left,J.right),Q.cp2y=d4(Q.cp2y,J.top,J.bottom)}}function e3($,J,Z,q,Q){let Y,w,X,U;if(J.spanGaps)$=$.filter((B)=>!B.skip);if(J.cubicInterpolationMode==="monotone")rw($,Q);else{let B=q?$[$.length-1]:$[0];for(Y=0,w=$.length;Y<w;++Y)X=$[Y],U=mw(B,X,$[Math.min(Y+1,w-(q?0:1))%w],J.tension),X.cp1x=U.previous.x,X.cp1y=U.previous.y,X.cp2x=U.next.x,X.cp2y=U.next.y,B=X}if(J.capBezierPoints)cw($,Z)}function J8(){return typeof window!=="undefined"&&typeof document!=="undefined"}function Z8($){let J=$.parentNode;if(J&&J.toString()==="[object ShadowRoot]")J=J.host;return J}function o4($,J,Z){let q;if(typeof $==="string"){if(q=parseInt($,10),$.indexOf("%")!==-1)q=q/100*J.parentNode[Z]}else q=$;return q}var q8=($)=>$.ownerDocument.defaultView.getComputedStyle($,null);function sw($,J){return q8($).getPropertyValue(J)}var ow=["top","right","bottom","left"];function Q2($,J,Z){let q={};Z=Z?"-"+Z:"";for(let Q=0;Q<4;Q++){let Y=ow[Q];q[Y]=parseFloat($[J+"-"+Y+Z])||0}return q.width=q.left+q.right,q.height=q.top+q.bottom,q}var lw=($,J,Z)=>($>0||J>0)&&(!Z||!Z.shadowRoot);function iw($,J){let Z=$.touches,q=Z&&Z.length?Z[0]:$,{offsetX:Q,offsetY:Y}=q,w=!1,X,U;if(lw(Q,Y,$.target))X=Q,U=Y;else{let B=J.getBoundingClientRect();X=q.clientX-B.left,U=q.clientY-B.top,w=!0}return{x:X,y:U,box:w}}function c1($,J){if("native"in $)return $;let{canvas:Z,currentDevicePixelRatio:q}=J,Q=q8(Z),Y=Q.boxSizing==="border-box",w=Q2(Q,"padding"),X=Q2(Q,"border","width"),{x:U,y:B,box:G}=iw($,Z),T=w.left+(G&&X.left),M=w.top+(G&&X.top),{width:z,height:F}=J;if(Y)z-=w.width+X.width,F-=w.height+X.height;return{x:Math.round((U-T)/z*Z.width/q),y:Math.round((B-M)/F*Z.height/q)}}function nw($,J,Z){let q,Q;if(J===void 0||Z===void 0){let Y=$&&Z8($);if(!Y)J=$.clientWidth,Z=$.clientHeight;else{let w=Y.getBoundingClientRect(),X=q8(Y),U=Q2(X,"border","width"),B=Q2(X,"padding");J=w.width-B.width-U.width,Z=w.height-B.height-U.height,q=o4(X.maxWidth,Y,"clientWidth"),Q=o4(X.maxHeight,Y,"clientHeight")}}return{width:J,height:Z,maxWidth:q||c4,maxHeight:Q||c4}}var m1=($)=>Math.round($*10)/10;function $J($,J,Z,q){let Q=q8($),Y=Q2(Q,"margin"),w=o4(Q.maxWidth,$,"clientWidth")||c4,X=o4(Q.maxHeight,$,"clientHeight")||c4,U=nw($,J,Z),{width:B,height:G}=U;if(Q.boxSizing==="content-box"){let M=Q2(Q,"border","width"),z=Q2(Q,"padding");B-=z.width+M.width,G-=z.height+M.height}if(B=Math.max(0,B-Y.width),G=Math.max(0,q?B/q:G-Y.height),B=m1(Math.min(B,w,U.maxWidth)),G=m1(Math.min(G,X,U.maxHeight)),B&&!G)G=m1(B/2);if((J!==void 0||Z!==void 0)&&q&&U.height&&G>U.height)G=U.height,B=m1(Math.floor(G*q));return{width:B,height:G}}function U7($,J,Z){let q=J||1,Q=m1($.height*q),Y=m1($.width*q);$.height=m1($.height),$.width=m1($.width);let w=$.canvas;if(w.style&&(Z||!w.style.height&&!w.style.width))w.style.height=`${$.height}px`,w.style.width=`${$.width}px`;if($.currentDevicePixelRatio!==q||w.height!==Q||w.width!==Y)return $.currentDevicePixelRatio=q,w.height=Q,w.width=Y,$.ctx.setTransform(q,0,0,q,0,0),!0;return!1}var JJ=function(){let $=!1;try{let J={get passive(){return $=!0,!1}};if(J8())window.addEventListener("test",null,J),window.removeEventListener("test",null,J)}catch(J){}return $}();function B7($,J){let Z=sw($,J),q=Z&&Z.match(/^(\d+)(\.\d+)?px$/);return q?+q[1]:void 0}function h1($,J,Z,q){return{x:$.x+Z*(J.x-$.x),y:$.y+Z*(J.y-$.y)}}function ZJ($,J,Z,q){return{x:$.x+Z*(J.x-$.x),y:q==="middle"?Z<0.5?$.y:J.y:q==="after"?Z<1?$.y:J.y:Z>0?J.y:$.y}}function qJ($,J,Z,q){let Q={x:$.cp2x,y:$.cp2y},Y={x:J.cp1x,y:J.cp1y},w=h1($,Q,Z),X=h1(Q,Y,Z),U=h1(Y,J,Z),B=h1(w,X,Z),G=h1(X,U,Z);return h1(B,G,Z)}var aw=function($,J){return{x(Z){return $+$+J-Z},setWidth(Z){J=Z},textAlign(Z){if(Z==="center")return Z;return Z==="right"?"left":"right"},xPlus(Z,q){return Z-q},leftForLtr(Z,q){return Z-q}}},tw=function(){return{x($){return $},setWidth($){},textAlign($){return $},xPlus($,J){return $+J},leftForLtr($,J){return $}}};function U2($,J,Z){return $?aw(J,Z):tw()}function G7($,J){let Z,q;if(J==="ltr"||J==="rtl")Z=$.canvas.style,q=[Z.getPropertyValue("direction"),Z.getPropertyPriority("direction")],Z.setProperty("direction",J,"important"),$.prevTextDirection=q}function T7($,J){if(J!==void 0)delete $.prevTextDirection,$.canvas.style.setProperty("direction",J[0],J[1])}function QJ($){if($==="angle")return{between:m2,compare:Hw,normalize:O0};return{between:d1,compare:(J,Z)=>J-Z,normalize:(J)=>J}}function P3({start:$,end:J,count:Z,loop:q,style:Q}){return{start:$%Z,end:J%Z,loop:q&&(J-$+1)%Z===0,style:Q}}function ew($,J,Z){let{property:q,start:Q,end:Y}=Z,{between:w,normalize:X}=QJ(q),U=J.length,{start:B,end:G,loop:T}=$,M,z;if(T){B+=U,G+=U;for(M=0,z=U;M<z;++M){if(!w(X(J[B%U][q]),Q,Y))break;B--,G--}B%=U,G%=U}if(G<B)G+=U;return{start:B,end:G,loop:T,style:$.style}}function M7($,J,Z){if(!Z)return[$];let{property:q,start:Q,end:Y}=Z,w=J.length,{compare:X,between:U,normalize:B}=QJ(q),{start:G,end:T,loop:M,style:z}=ew($,J,Z),F=[],H=!1,W=null,j,_,V,D=()=>U(Q,V,j)&&X(Q,V)!==0,L=()=>X(Y,j)===0||U(Y,V,j),C=()=>H||D(),S=()=>!H||L();for(let P=G,I=G;P<=T;++P){if(_=J[P%w],_.skip)continue;if(j=B(_[q]),j===V)continue;if(H=U(j,Q,Y),W===null&&C())W=X(j,Q)===0?P:I;if(W!==null&&S())F.push(P3({start:W,end:P,loop:M,count:w,style:z})),W=null;I=P,V=j}if(W!==null)F.push(P3({start:W,end:T,loop:M,count:w,style:z}));return F}function z7($,J){let Z=[],q=$.segments;for(let Q=0;Q<q.length;Q++){let Y=M7(q[Q],$.points,J);if(Y.length)Z.push(...Y)}return Z}function $X($,J,Z,q){let Q=0,Y=J-1;if(Z&&!q)while(Q<J&&!$[Q].skip)Q++;while(Q<J&&$[Q].skip)Q++;if(Q%=J,Z)Y+=Q;while(Y>Q&&$[Y%J].skip)Y--;return Y%=J,{start:Q,end:Y}}function JX($,J,Z,q){let Q=$.length,Y=[],w=J,X=$[J],U;for(U=J+1;U<=Z;++U){let B=$[U%Q];if(B.skip||B.stop){if(!X.skip)q=!1,Y.push({start:J%Q,end:(U-1)%Q,loop:q}),J=w=B.stop?U:null}else if(w=U,X.skip)J=U;X=B}if(w!==null)Y.push({start:J%Q,end:w%Q,loop:q});return Y}function YJ($,J){let Z=$.points,q=$.options.spanGaps,Q=Z.length;if(!Q)return[];let Y=!!$._loop,{start:w,end:X}=$X(Z,Q,Y,q);if(q===!0)return V3($,[{start:w,end:X,loop:Y}],Z,J);let U=X<w?X+Q:X,B=!!$._fullLoop&&w===0&&X===Q-1;return V3($,JX(Z,w,U,B),Z,J)}function V3($,J,Z,q){if(!q||!q.setContext||!Z)return J;return ZX($,J,Z,q)}function ZX($,J,Z,q){let Q=$._chart.getContext(),Y=I3($.options),{_datasetIndex:w,options:{spanGaps:X}}=$,U=Z.length,B=[],G=Y,T=J[0].start,M=T;function z(F,H,W,j){let _=X?-1:1;if(F===H)return;F+=U;while(Z[F%U].skip)F-=_;while(Z[H%U].skip)H+=_;if(F%U!==H%U)B.push({start:F%U,end:H%U,loop:W,style:j}),G=j,T=H%U}for(let F of J){T=X?T:F.start;let H=Z[T%U],W;for(M=T+1;M<=F.end;M++){let j=Z[M%U];if(W=I3(q.setContext(S1(Q,{type:"segment",p0:H,p1:j,p0DataIndex:(M-1)%U,p1DataIndex:M%U,datasetIndex:w}))),qX(W,G))z(T,M-1,F.loop,G);H=j,G=W}if(T<M-1)z(T,M-1,F.loop,G)}return B}function I3($){return{backgroundColor:$.backgroundColor,borderCapStyle:$.borderCapStyle,borderDash:$.borderDash,borderDashOffset:$.borderDashOffset,borderJoinStyle:$.borderJoinStyle,borderWidth:$.borderWidth,borderColor:$.borderColor}}function qX($,J){if(!J)return!1;let Z=[],q=function(Q,Y){if(!Z7(Y))return Y;if(!Z.includes(Y))Z.push(Y);return Z.indexOf(Y)};return JSON.stringify($,q)!==JSON.stringify(J,q)}function p4($,J,Z){return $.options.clip?$[Z]:J[Z]}function QX($,J){let{xScale:Z,yScale:q}=$;if(Z&&q)return{left:p4(Z,J,"left"),right:p4(Z,J,"right"),top:p4(q,J,"top"),bottom:p4(q,J,"bottom")};return J}function H7($,J){let Z=J._clip;if(Z.disabled)return!1;let q=QX(J,$.chartArea);return{left:Z.left===!1?0:q.left-(Z.left===!0?0:Z.left),right:Z.right===!1?$.width:q.right+(Z.right===!0?0:Z.right),top:Z.top===!1?0:q.top-(Z.top===!0?0:Z.top),bottom:Z.bottom===!1?$.height:q.bottom+(Z.bottom===!0?0:Z.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class eJ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify($,J,Z,q){let Q=J.listeners[q],Y=J.duration;Q.forEach((w)=>w({chart:$,initial:J.initial,numSteps:Y,currentStep:Math.min(Z-J.start,Y)}))}_refresh(){if(this._request)return;this._running=!0,this._request=e9.call(window,()=>{if(this._update(),this._request=null,this._running)this._refresh()})}_update($=Date.now()){let J=0;if(this._charts.forEach((Z,q)=>{if(!Z.running||!Z.items.length)return;let Q=Z.items,Y=Q.length-1,w=!1,X;for(;Y>=0;--Y)if(X=Q[Y],X._active){if(X._total>Z.duration)Z.duration=X._total;X.tick($),w=!0}else Q[Y]=Q[Q.length-1],Q.pop();if(w)q.draw(),this._notify(q,Z,$,"progress");if(!Q.length)Z.running=!1,this._notify(q,Z,$,"complete"),Z.initial=!1;J+=Q.length}),this._lastDate=$,J===0)this._running=!1}_getAnims($){let J=this._charts,Z=J.get($);if(!Z)Z={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},J.set($,Z);return Z}listen($,J,Z){this._getAnims($).listeners[J].push(Z)}add($,J){if(!J||!J.length)return;this._getAnims($).items.push(...J)}has($){return this._getAnims($).items.length>0}start($){let J=this._charts.get($);if(!J)return;J.running=!0,J.start=Date.now(),J.duration=J.items.reduce((Z,q)=>Math.max(Z,q._duration),0),this._refresh()}running($){if(!this._running)return!1;let J=this._charts.get($);if(!J||!J.running||!J.items.length)return!1;return!0}stop($){let J=this._charts.get($);if(!J||!J.items.length)return;let Z=J.items,q=Z.length-1;for(;q>=0;--q)Z[q].cancel();J.items=[],this._notify($,J,Date.now(),"complete")}remove($){return this._charts.delete($)}}var C1=new eJ,wJ="transparent",YX={boolean($,J,Z){return Z>0.5?J:$},color($,J,Z){let q=q7($||wJ),Q=q.valid&&q7(J||wJ);return Q&&Q.valid?Q.mix(q,Z).hexString():J},number($,J,Z){return $+(J-$)*Z}};class $Z{constructor($,J,Z,q){let Q=J[Z];q=C5([$.to,q,Q,$.from]);let Y=C5([$.from,Q,q]);this._active=!0,this._fn=$.fn||YX[$.type||typeof Y],this._easing=v2[$.easing]||v2.linear,this._start=Math.floor(Date.now()+($.delay||0)),this._duration=this._total=Math.floor($.duration),this._loop=!!$.loop,this._target=J,this._prop=Z,this._from=Y,this._to=q,this._promises=void 0}active(){return this._active}update($,J,Z){if(this._active){this._notify(!1);let q=this._target[this._prop],Q=Z-this._start,Y=this._duration-Q;this._start=Z,this._duration=Math.floor(Math.max(Y,$.duration)),this._total+=Q,this._loop=!!$.loop,this._to=C5([$.to,J,q,$.from]),this._from=C5([$.from,q,J])}}cancel(){if(this._active)this.tick(Date.now()),this._active=!1,this._notify(!1)}tick($){let J=$-this._start,Z=this._duration,q=this._prop,Q=this._from,Y=this._loop,w=this._to,X;if(this._active=Q!==w&&(Y||J<Z),!this._active){this._target[q]=w,this._notify(!0);return}if(J<0){this._target[q]=Q;return}X=J/Z%2,X=Y&&X>1?2-X:X,X=this._easing(Math.min(1,Math.max(0,X))),this._target[q]=this._fn(Q,w,X)}wait(){let $=this._promises||(this._promises=[]);return new Promise((J,Z)=>{$.push({res:J,rej:Z})})}_notify($){let J=$?"res":"rej",Z=this._promises||[];for(let q=0;q<Z.length;q++)Z[q][J]()}}class f7{constructor($,J){this._chart=$,this._properties=new Map,this.configure(J)}configure($){if(!o($))return;let J=Object.keys(z0.animation),Z=this._properties;Object.getOwnPropertyNames($).forEach((q)=>{let Q=$[q];if(!o(Q))return;let Y={};for(let w of J)Y[w]=Q[w];(G0(Q.properties)&&Q.properties||[q]).forEach((w)=>{if(w===q||!Z.has(w))Z.set(w,Y)})})}_animateOptions($,J){let Z=J.options,q=XX($,Z);if(!q)return[];let Q=this._createAnimations(q,Z);if(Z.$shared)wX($.options.$animations,Z).then(()=>{$.options=Z},()=>{});return Q}_createAnimations($,J){let Z=this._properties,q=[],Q=$.$animations||($.$animations={}),Y=Object.keys(J),w=Date.now(),X;for(X=Y.length-1;X>=0;--X){let U=Y[X];if(U.charAt(0)==="$")continue;if(U==="options"){q.push(...this._animateOptions($,J));continue}let B=J[U],G=Q[U],T=Z.get(U);if(G)if(T&&G.active()){G.update(T,B,w);continue}else G.cancel();if(!T||!T.duration){$[U]=B;continue}Q[U]=G=new $Z(T,$,U,B),q.push(G)}return q}update($,J){if(this._properties.size===0){Object.assign($,J);return}let Z=this._createAnimations($,J);if(Z.length)return C1.add(this._chart,Z),!0}}function wX($,J){let Z=[],q=Object.keys(J);for(let Q=0;Q<q.length;Q++){let Y=$[q[Q]];if(Y&&Y.active())Z.push(Y.wait())}return Promise.all(Z)}function XX($,J){if(!J)return;let Z=$.options;if(!Z){$.options=J;return}if(Z.$shared)$.options=Z=Object.assign({},Z,{$shared:!1,$animations:{}});return Z}function XJ($,J){let Z=$&&$.options||{},q=Z.reverse,Q=Z.min===void 0?J:0,Y=Z.max===void 0?J:0;return{start:q?Y:Q,end:q?Q:Y}}function KX($,J,Z){if(Z===!1)return!1;let q=XJ($,Z),Q=XJ(J,Z);return{top:Q.end,right:q.end,bottom:Q.start,left:q.start}}function UX($){let J,Z,q,Q;if(o($))J=$.top,Z=$.right,q=$.bottom,Q=$.left;else J=Z=q=Q=$;return{top:J,right:Z,bottom:q,left:Q,disabled:$===!1}}function JZ($,J){let Z=[],q=$._getSortedDatasetMetas(J),Q,Y;for(Q=0,Y=q.length;Q<Y;++Q)Z.push(q[Q].index);return Z}function KJ($,J,Z,q={}){let Q=$.keys,Y=q.mode==="single",w,X,U,B;if(J===null)return;let G=!1;for(w=0,X=Q.length;w<X;++w){if(U=+Q[w],U===Z){if(G=!0,q.all)continue;break}if(B=$.values[U],M0(B)&&(Y||J===0||Y2(J)===Y2(B)))J+=B}if(!G&&!q.all)return 0;return J}function BX($,J){let{iScale:Z,vScale:q}=J,Q=Z.axis==="x"?"x":"y",Y=q.axis==="x"?"x":"y",w=Object.keys($),X=new Array(w.length),U,B,G;for(U=0,B=w.length;U<B;++U)G=w[U],X[U]={[Q]:G,[Y]:$[G]};return X}function F7($,J){let Z=$&&$.options.stacked;return Z||Z===void 0&&J.stack!==void 0}function GX($,J,Z){return`${$.id}.${J.id}.${Z.stack||Z.type}`}function TX($){let{min:J,max:Z,minDefined:q,maxDefined:Q}=$.getUserBounds();return{min:q?J:Number.NEGATIVE_INFINITY,max:Q?Z:Number.POSITIVE_INFINITY}}function MX($,J,Z){let q=$[J]||($[J]={});return q[Z]||(q[Z]={})}function UJ($,J,Z,q){for(let Q of J.getMatchingVisibleMetas(q).reverse()){let Y=$[Q.index];if(Z&&Y>0||!Z&&Y<0)return Q.index}return null}function BJ($,J){let{chart:Z,_cachedMeta:q}=$,Q=Z._stacks||(Z._stacks={}),{iScale:Y,vScale:w,index:X}=q,U=Y.axis,B=w.axis,G=GX(Y,w,q),T=J.length,M;for(let z=0;z<T;++z){let F=J[z],{[U]:H,[B]:W}=F,j=F._stacks||(F._stacks={});M=j[B]=MX(Q,G,H),M[X]=W,M._top=UJ(M,w,!0,q.type),M._bottom=UJ(M,w,!1,q.type);let _=M._visualValues||(M._visualValues={});_[X]=W}}function W7($,J){let Z=$.scales;return Object.keys(Z).filter((q)=>Z[q].axis===J).shift()}function zX($,J){return S1($,{active:!1,dataset:void 0,datasetIndex:J,index:J,mode:"default",type:"dataset"})}function HX($,J,Z){return S1($,{active:!1,dataIndex:J,parsed:void 0,raw:void 0,element:Z,index:J,mode:"default",type:"data"})}function N5($,J){let Z=$.controller.index,q=$.vScale&&$.vScale.axis;if(!q)return;J=J||$._parsed;for(let Q of J){let Y=Q._stacks;if(!Y||Y[q]===void 0||Y[q][Z]===void 0)return;if(delete Y[q][Z],Y[q]._visualValues!==void 0&&Y[q]._visualValues[Z]!==void 0)delete Y[q]._visualValues[Z]}}var j7=($)=>$==="reset"||$==="none",GJ=($,J)=>J?$:Object.assign({},$),FX=($,J,Z)=>$&&!J.hidden&&J._stacked&&{keys:JZ(Z,!0),values:null};class M8{static defaults={};static datasetElementType=null;static dataElementType=null;constructor($,J){this.chart=$,this._ctx=$.ctx,this.index=J,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let $=this._cachedMeta;if(this.configure(),this.linkScales(),$._stacked=F7($.vScale,$),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler"))console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex($){if(this.index!==$)N5(this._cachedMeta);this.index=$}linkScales(){let $=this.chart,J=this._cachedMeta,Z=this.getDataset(),q=(G,T,M,z)=>G==="x"?T:G==="r"?z:M,Q=J.xAxisID=p(Z.xAxisID,W7($,"x")),Y=J.yAxisID=p(Z.yAxisID,W7($,"y")),w=J.rAxisID=p(Z.rAxisID,W7($,"r")),X=J.indexAxis,U=J.iAxisID=q(X,Q,Y,w),B=J.vAxisID=q(X,Y,Q,w);J.xScale=this.getScaleForId(Q),J.yScale=this.getScaleForId(Y),J.rScale=this.getScaleForId(w),J.iScale=this.getScaleForId(U),J.vScale=this.getScaleForId(B)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId($){return this.chart.scales[$]}_getOtherScale($){let J=this._cachedMeta;return $===J.iScale?J.vScale:J.iScale}reset(){this._update("reset")}_destroy(){let $=this._cachedMeta;if(this._data)t9(this._data,this);if($._stacked)N5($)}_dataCheck(){let $=this.getDataset(),J=$.data||($.data=[]),Z=this._data;if(o(J)){let q=this._cachedMeta;this._data=BX(J,q)}else if(Z!==J){if(Z){t9(Z,this);let q=this._cachedMeta;N5(q),q._parsed=[]}if(J&&Object.isExtensible(J))E3(J,this);this._syncList=[],this._data=J}}addElements(){let $=this._cachedMeta;if(this._dataCheck(),this.datasetElementType)$.dataset=new this.datasetElementType}buildOrUpdateElements($){let J=this._cachedMeta,Z=this.getDataset(),q=!1;this._dataCheck();let Q=J._stacked;if(J._stacked=F7(J.vScale,J),J.stack!==Z.stack)q=!0,N5(J),J.stack=Z.stack;if(this._resyncElements($),q||Q!==J._stacked)BJ(this,J._parsed),J._stacked=F7(J.vScale,J)}configure(){let $=this.chart.config,J=$.datasetScopeKeys(this._type),Z=$.getOptionScopes(this.getDataset(),J,!0);this.options=$.createResolver(Z,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse($,J){let{_cachedMeta:Z,_data:q}=this,{iScale:Q,_stacked:Y}=Z,w=Q.axis,X=$===0&&J===q.length?!0:Z._sorted,U=$>0&&Z._parsed[$-1],B,G,T;if(this._parsing===!1)Z._parsed=q,Z._sorted=!0,T=q;else{if(G0(q[$]))T=this.parseArrayData(Z,q,$,J);else if(o(q[$]))T=this.parseObjectData(Z,q,$,J);else T=this.parsePrimitiveData(Z,q,$,J);let M=()=>G[w]===null||U&&G[w]<U[w];for(B=0;B<J;++B)if(Z._parsed[B+$]=G=T[B],X){if(M())X=!1;U=G}Z._sorted=X}if(Y)BJ(this,T)}parsePrimitiveData($,J,Z,q){let{iScale:Q,vScale:Y}=$,w=Q.axis,X=Y.axis,U=Q.getLabels(),B=Q===Y,G=new Array(q),T,M,z;for(T=0,M=q;T<M;++T)z=T+Z,G[T]={[w]:B||Q.parse(U[z],z),[X]:Y.parse(J[z],z)};return G}parseArrayData($,J,Z,q){let{xScale:Q,yScale:Y}=$,w=new Array(q),X,U,B,G;for(X=0,U=q;X<U;++X)B=X+Z,G=J[B],w[X]={x:Q.parse(G[0],B),y:Y.parse(G[1],B)};return w}parseObjectData($,J,Z,q){let{xScale:Q,yScale:Y}=$,{xAxisKey:w="x",yAxisKey:X="y"}=this._parsing,U=new Array(q),B,G,T,M;for(B=0,G=q;B<G;++B)T=B+Z,M=J[T],U[B]={x:Q.parse(g2(M,w),T),y:Y.parse(g2(M,X),T)};return U}getParsed($){return this._cachedMeta._parsed[$]}getDataElement($){return this._cachedMeta.data[$]}applyStack($,J,Z){let q=this.chart,Q=this._cachedMeta,Y=J[$.axis],w={keys:JZ(q,!0),values:J._stacks[$.axis]._visualValues};return KJ(w,Y,Q.index,{mode:Z})}updateRangeFromParsed($,J,Z,q){let Q=Z[J.axis],Y=Q===null?NaN:Q,w=q&&Z._stacks[J.axis];if(q&&w)q.values=w,Y=KJ(q,Q,this._cachedMeta.index);$.min=Math.min($.min,Y),$.max=Math.max($.max,Y)}getMinMax($,J){let Z=this._cachedMeta,q=Z._parsed,Q=Z._sorted&&$===Z.iScale,Y=q.length,w=this._getOtherScale($),X=FX(J,Z,this.chart),U={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:B,max:G}=TX(w),T,M;function z(){M=q[T];let F=M[w.axis];return!M0(M[$.axis])||B>F||G<F}for(T=0;T<Y;++T){if(z())continue;if(this.updateRangeFromParsed(U,$,M,X),Q)break}if(Q)for(T=Y-1;T>=0;--T){if(z())continue;this.updateRangeFromParsed(U,$,M,X);break}return U}getAllParsedValues($){let J=this._cachedMeta._parsed,Z=[],q,Q,Y;for(q=0,Q=J.length;q<Q;++q)if(Y=J[q][$.axis],M0(Y))Z.push(Y);return Z}getMaxOverflow(){return!1}getLabelAndValue($){let J=this._cachedMeta,Z=J.iScale,q=J.vScale,Q=this.getParsed($);return{label:Z?""+Z.getLabelForValue(Q[Z.axis]):"",value:q?""+q.getLabelForValue(Q[q.axis]):""}}_update($){let J=this._cachedMeta;this.update($||"default"),J._clip=UX(p(this.options.clip,KX(J.xScale,J.yScale,this.getMaxOverflow())))}update($){}draw(){let $=this._ctx,J=this.chart,Z=this._cachedMeta,q=Z.data||[],Q=J.chartArea,Y=[],w=this._drawStart||0,X=this._drawCount||q.length-w,U=this.options.drawActiveElementsOnTop,B;if(Z.dataset)Z.dataset.draw($,Q,w,X);for(B=w;B<w+X;++B){let G=q[B];if(G.hidden)continue;if(G.active&&U)Y.push(G);else G.draw($,Q)}for(B=0;B<Y.length;++B)Y[B].draw($,Q)}getStyle($,J){let Z=J?"active":"default";return $===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(Z):this.resolveDataElementOptions($||0,Z)}getContext($,J,Z){let q=this.getDataset(),Q;if($>=0&&$<this._cachedMeta.data.length){let Y=this._cachedMeta.data[$];Q=Y.$context||(Y.$context=HX(this.getContext(),$,Y)),Q.parsed=this.getParsed($),Q.raw=q.data[$],Q.index=Q.dataIndex=$}else Q=this.$context||(this.$context=zX(this.chart.getContext(),this.index)),Q.dataset=q,Q.index=Q.datasetIndex=this.index;return Q.active=!!J,Q.mode=Z,Q}resolveDatasetElementOptions($){return this._resolveElementOptions(this.datasetElementType.id,$)}resolveDataElementOptions($,J){return this._resolveElementOptions(this.dataElementType.id,J,$)}_resolveElementOptions($,J="default",Z){let q=J==="active",Q=this._cachedDataOpts,Y=$+"-"+J,w=Q[Y],X=this.enableOptionSharing&&L5(Z);if(w)return GJ(w,X);let U=this.chart.config,B=U.datasetElementScopeKeys(this._type,$),G=q?[`${$}Hover`,"hover",$,""]:[$,""],T=U.getOptionScopes(this.getDataset(),B),M=Object.keys(z0.elements[$]),z=()=>this.getContext(Z,q,J),F=U.resolveNamedOptions(T,M,z,G);if(F.$shared)F.$shared=X,Q[Y]=Object.freeze(GJ(F,X));return F}_resolveAnimations($,J,Z){let q=this.chart,Q=this._cachedDataOpts,Y=`animation-${J}`,w=Q[Y];if(w)return w;let X;if(q.options.animation!==!1){let B=this.chart.config,G=B.datasetAnimationScopeKeys(this._type,J),T=B.getOptionScopes(this.getDataset(),G);X=B.createResolver(T,this.getContext($,Z,J))}let U=new f7(q,X&&X.animations);if(X&&X._cacheable)Q[Y]=Object.freeze(U);return U}getSharedOptions($){if(!$.$shared)return;return this._sharedOptions||(this._sharedOptions=Object.assign({},$))}includeOptions($,J){return!J||j7($)||this.chart._animationsDisabled}_getSharedOptions($,J){let Z=this.resolveDataElementOptions($,J),q=this._sharedOptions,Q=this.getSharedOptions(Z),Y=this.includeOptions(J,Q)||Q!==q;return this.updateSharedOptions(Q,J,Z),{sharedOptions:Q,includeOptions:Y}}updateElement($,J,Z,q){if(j7(q))Object.assign($,Z);else this._resolveAnimations(J,q).update($,Z)}updateSharedOptions($,J,Z){if($&&!j7(J))this._resolveAnimations(void 0,J).update($,Z)}_setStyle($,J,Z,q){$.active=q;let Q=this.getStyle(J,q);this._resolveAnimations(J,Z,q).update($,{options:!q&&this.getSharedOptions(Q)||Q})}removeHoverStyle($,J,Z){this._setStyle($,Z,"active",!1)}setHoverStyle($,J,Z){this._setStyle($,Z,"active",!0)}_removeDatasetHoverStyle(){let $=this._cachedMeta.dataset;if($)this._setStyle($,void 0,"active",!1)}_setDatasetHoverStyle(){let $=this._cachedMeta.dataset;if($)this._setStyle($,void 0,"active",!0)}_resyncElements($){let J=this._data,Z=this._cachedMeta.data;for(let[w,X,U]of this._syncList)this[w](X,U);this._syncList=[];let q=Z.length,Q=J.length,Y=Math.min(Q,q);if(Y)this.parse(0,Y);if(Q>q)this._insertElements(q,Q-q,$);else if(Q<q)this._removeElements(Q,q-Q)}_insertElements($,J,Z=!0){let q=this._cachedMeta,Q=q.data,Y=$+J,w,X=(U)=>{U.length+=J;for(w=U.length-1;w>=Y;w--)U[w]=U[w-J]};X(Q);for(w=$;w<Y;++w)Q[w]=new this.dataElementType;if(this._parsing)X(q._parsed);if(this.parse($,J),Z)this.updateElements(Q,$,J,"reset")}updateElements($,J,Z,q){}_removeElements($,J){let Z=this._cachedMeta;if(this._parsing){let q=Z._parsed.splice($,J);if(Z._stacked)N5(Z,q)}Z.data.splice($,J)}_sync($){if(this._parsing)this._syncList.push($);else{let[J,Z,q]=$;this[J](Z,q)}this.chart._dataChanges.push([this.index,...$])}_onDataPush(){let $=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-$,$])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice($,J){if(J)this._sync(["_removeElements",$,J]);let Z=arguments.length-2;if(Z)this._sync(["_insertElements",$,Z])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function WX($,J,Z){let q=1,Q=1,Y=0,w=0;if(J<X0){let X=$,U=X+J,B=Math.cos(X),G=Math.sin(X),T=Math.cos(U),M=Math.sin(U),z=(V,D,L)=>m2(V,X,U,!0)?1:Math.max(D,D*Z,L,L*Z),F=(V,D,L)=>m2(V,X,U,!0)?-1:Math.min(D,D*Z,L,L*Z),H=z(0,B,T),W=z(H0,G,M),j=F(t,B,T),_=F(t+H0,G,M);q=(H-j)/2,Q=(W-_)/2,Y=-(H+j)/2,w=-(W+_)/2}return{ratioX:q,ratioY:Q,offsetX:Y,offsetY:w}}class b7 extends M8{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:($)=>$!=="spacing",_indexable:($)=>$!=="spacing"&&!$.startsWith("borderDash")&&!$.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels($){let J=$.data,{labels:{pointStyle:Z,textAlign:q,color:Q,useBorderRadius:Y,borderRadius:w}}=$.legend.options;if(J.labels.length&&J.datasets.length)return J.labels.map((X,U)=>{let G=$.getDatasetMeta(0).controller.getStyle(U);return{text:X,fillStyle:G.backgroundColor,fontColor:Q,hidden:!$.getDataVisibility(U),lineDash:G.borderDash,lineDashOffset:G.borderDashOffset,lineJoin:G.borderJoinStyle,lineWidth:G.borderWidth,strokeStyle:G.borderColor,textAlign:q,pointStyle:Z,borderRadius:Y&&(w||G.borderRadius),index:U}});return[]}},onClick($,J,Z){Z.chart.toggleDataVisibility(J.index),Z.chart.update()}}}};constructor($,J){super($,J);this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse($,J){let Z=this.getDataset().data,q=this._cachedMeta;if(this._parsing===!1)q._parsed=Z;else{let Q=(X)=>+Z[X];if(o(Z[$])){let{key:X="value"}=this._parsing;Q=(U)=>+g2(Z[U],X)}let Y,w;for(Y=$,w=$+J;Y<w;++Y)q._parsed[Y]=Q(Y)}}_getRotation(){return Y1(this.options.rotation-90)}_getCircumference(){return Y1(this.options.circumference)}_getRotationExtents(){let $=X0,J=-X0;for(let Z=0;Z<this.chart.data.datasets.length;++Z)if(this.chart.isDatasetVisible(Z)&&this.chart.getDatasetMeta(Z).type===this._type){let q=this.chart.getDatasetMeta(Z).controller,Q=q._getRotation(),Y=q._getCircumference();$=Math.min($,Q),J=Math.max(J,Q+Y)}return{rotation:$,circumference:J-$}}update($){let J=this.chart,{chartArea:Z}=J,q=this._cachedMeta,Q=q.data,Y=this.getMaxBorderWidth()+this.getMaxOffset(Q)+this.options.spacing,w=Math.max((Math.min(Z.width,Z.height)-Y)/2,0),X=Math.min(C3(this.options.cutout,w),1),U=this._getRingWeight(this.index),{circumference:B,rotation:G}=this._getRotationExtents(),{ratioX:T,ratioY:M,offsetX:z,offsetY:F}=WX(G,B,X),H=(Z.width-Y)/T,W=(Z.height-Y)/M,j=Math.max(Math.min(H,W)/2,0),_=s9(this.options.radius,j),V=Math.max(_*X,0),D=(_-V)/this._getVisibleDatasetWeightTotal();this.offsetX=z*_,this.offsetY=F*_,q.total=this.calculateTotal(),this.outerRadius=_-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*U,0),this.updateElements(Q,0,Q.length,$)}_circumference($,J){let Z=this.options,q=this._cachedMeta,Q=this._getCircumference();if(J&&Z.animation.animateRotate||!this.chart.getDataVisibility($)||q._parsed[$]===null||q.data[$].hidden)return 0;return this.calculateCircumference(q._parsed[$]*Q/X0)}updateElements($,J,Z,q){let Q=q==="reset",Y=this.chart,w=Y.chartArea,U=Y.options.animation,B=(w.left+w.right)/2,G=(w.top+w.bottom)/2,T=Q&&U.animateScale,M=T?0:this.innerRadius,z=T?0:this.outerRadius,{sharedOptions:F,includeOptions:H}=this._getSharedOptions(J,q),W=this._getRotation(),j;for(j=0;j<J;++j)W+=this._circumference(j,Q);for(j=J;j<J+Z;++j){let _=this._circumference(j,Q),V=$[j],D={x:B+this.offsetX,y:G+this.offsetY,startAngle:W,endAngle:W+_,circumference:_,outerRadius:z,innerRadius:M};if(H)D.options=F||this.resolveDataElementOptions(j,V.active?"active":q);W+=_,this.updateElement(V,j,D,q)}}calculateTotal(){let $=this._cachedMeta,J=$.data,Z=0,q;for(q=0;q<J.length;q++){let Q=$._parsed[q];if(Q!==null&&!isNaN(Q)&&this.chart.getDataVisibility(q)&&!J[q].hidden)Z+=Math.abs(Q)}return Z}calculateCircumference($){let J=this._cachedMeta.total;if(J>0&&!isNaN($))return X0*(Math.abs($)/J);return 0}getLabelAndValue($){let J=this._cachedMeta,Z=this.chart,q=Z.data.labels||[],Q=D5(J._parsed[$],Z.options.locale);return{label:q[$]||"",value:Q}}getMaxBorderWidth($){let J=0,Z=this.chart,q,Q,Y,w,X;if(!$){for(q=0,Q=Z.data.datasets.length;q<Q;++q)if(Z.isDatasetVisible(q)){Y=Z.getDatasetMeta(q),$=Y.data,w=Y.controller;break}}if(!$)return 0;for(q=0,Q=$.length;q<Q;++q)if(X=w.resolveDataElementOptions(q),X.borderAlign!=="inner")J=Math.max(J,X.borderWidth||0,X.hoverBorderWidth||0);return J}getMaxOffset($){let J=0;for(let Z=0,q=$.length;Z<q;++Z){let Q=this.resolveDataElementOptions(Z);J=Math.max(J,Q.offset||0,Q.hoverOffset||0)}return J}_getRingWeightOffset($){let J=0;for(let Z=0;Z<$;++Z)if(this.chart.isDatasetVisible(Z))J+=this._getRingWeight(Z);return J}_getRingWeight($){return Math.max(p(this.chart.data.datasets[$].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class v7 extends M8{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update($){let J=this._cachedMeta,{dataset:Z,data:q=[],_dataset:Q}=J,Y=this.chart._animationsDisabled,{start:w,count:X}=x3(J,q,Y);if(this._drawStart=w,this._drawCount=X,m3(J))w=0,X=q.length;Z._chart=this.chart,Z._datasetIndex=this.index,Z._decimated=!!Q._decimated,Z.points=q;let U=this.resolveDatasetElementOptions($);if(!this.options.showLine)U.borderWidth=0;U.segment=this.options.segment,this.updateElement(Z,void 0,{animated:!Y,options:U},$),this.updateElements(q,w,X,$)}updateElements($,J,Z,q){let Q=q==="reset",{iScale:Y,vScale:w,_stacked:X,_dataset:U}=this._cachedMeta,{sharedOptions:B,includeOptions:G}=this._getSharedOptions(J,q),T=Y.axis,M=w.axis,{spanGaps:z,segment:F}=this.options,H=x2(z)?z:Number.POSITIVE_INFINITY,W=this.chart._animationsDisabled||Q||q==="none",j=J+Z,_=$.length,V=J>0&&this.getParsed(J-1);for(let D=0;D<_;++D){let L=$[D],C=W?L:{};if(D<J||D>=j){C.skip=!0;continue}let S=this.getParsed(D),P=e(S[M]),I=C[T]=Y.getPixelForValue(S[T],D),v=C[M]=Q||P?w.getBasePixel():w.getPixelForValue(X?this.applyStack(w,S,X):S[M],D);if(C.skip=isNaN(I)||isNaN(v)||P,C.stop=D>0&&Math.abs(S[T]-V[T])>H,F)C.parsed=S,C.raw=U.data[D];if(G)C.options=B||this.resolveDataElementOptions(D,L.active?"active":q);if(!W)this.updateElement(L,D,C,q);V=S}}getMaxOverflow(){let $=this._cachedMeta,J=$.dataset,Z=J.options&&J.options.borderWidth||0,q=$.data||[];if(!q.length)return Z;let Q=q[0].size(this.resolveDataElementOptions(0)),Y=q[q.length-1].size(this.resolveDataElementOptions(q.length-1));return Math.max(Z,Q,Y)/2}draw(){let $=this._cachedMeta;$.dataset.updateControlPoints(this.chart.chartArea,$.iScale.axis),super.draw()}}function B2(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class y7{static override($){Object.assign(y7.prototype,$)}options;constructor($){this.options=$||{}}init(){}formats(){return B2()}parse(){return B2()}format(){return B2()}add(){return B2()}diff(){return B2()}startOf(){return B2()}endOf(){return B2()}}var jX={_date:y7};function RX($,J,Z,q){let{controller:Q,data:Y,_sorted:w}=$,X=Q._cachedMeta.iScale,U=$.dataset?$.dataset.options?$.dataset.options.spanGaps:null:null;if(X&&J===X.axis&&J!=="r"&&w&&Y.length){let B=X._reversePixels?b3:x1;if(!q){let G=B(Y,J,Z);if(U){let{vScale:T}=Q._cachedMeta,{_parsed:M}=$,z=M.slice(0,G.lo+1).reverse().findIndex((H)=>!e(H[T.axis]));G.lo-=Math.max(0,z);let F=M.slice(G.hi).findIndex((H)=>!e(H[T.axis]));G.hi+=Math.max(0,F)}return G}else if(Q._sharedOptions){let G=Y[0],T=typeof G.getRange==="function"&&G.getRange(J);if(T){let M=B(Y,J,Z-T),z=B(Y,J,Z+T);return{lo:M.lo,hi:z.hi}}}}return{lo:0,hi:Y.length-1}}function h5($,J,Z,q,Q){let Y=$.getSortedVisibleDatasetMetas(),w=Z[J];for(let X=0,U=Y.length;X<U;++X){let{index:B,data:G}=Y[X],{lo:T,hi:M}=RX(Y[X],J,w,Q);for(let z=T;z<=M;++z){let F=G[z];if(!F.skip)q(F,B,z)}}}function _X($){let J=$.indexOf("x")!==-1,Z=$.indexOf("y")!==-1;return function(q,Q){let Y=J?Math.abs(q.x-Q.x):0,w=Z?Math.abs(q.y-Q.y):0;return Math.sqrt(Math.pow(Y,2)+Math.pow(w,2))}}function R7($,J,Z,q,Q){let Y=[];if(!Q&&!$.isPointInArea(J))return Y;return h5($,Z,J,function(X,U,B){if(!Q&&!U1(X,$.chartArea,0))return;if(X.inRange(J.x,J.y,q))Y.push({element:X,datasetIndex:U,index:B})},!0),Y}function LX($,J,Z,q){let Q=[];function Y(w,X,U){let{startAngle:B,endAngle:G}=w.getProps(["startAngle","endAngle"],q),{angle:T}=a9(w,{x:J.x,y:J.y});if(m2(T,B,G))Q.push({element:w,datasetIndex:X,index:U})}return h5($,Z,J,Y),Q}function DX($,J,Z,q,Q,Y){let w=[],X=_X(Z),U=Number.POSITIVE_INFINITY;function B(G,T,M){let z=G.inRange(J.x,J.y,Q);if(q&&!z)return;let F=G.getCenterPoint(Q);if(!(!!Y||$.isPointInArea(F))&&!z)return;let W=X(J,F);if(W<U)w=[{element:G,datasetIndex:T,index:M}],U=W;else if(W===U)w.push({element:G,datasetIndex:T,index:M})}return h5($,Z,J,B),w}function _7($,J,Z,q,Q,Y){if(!Y&&!$.isPointInArea(J))return[];return Z==="r"&&!q?LX($,J,Z,Q):DX($,J,Z,q,Q,Y)}function TJ($,J,Z,q,Q){let Y=[],w=Z==="x"?"inXRange":"inYRange",X=!1;if(h5($,Z,J,(U,B,G)=>{if(U[w]&&U[w](J[Z],Q))Y.push({element:U,datasetIndex:B,index:G}),X=X||U.inRange(J.x,J.y,Q)}),q&&!X)return[];return Y}var PX={evaluateInteractionItems:h5,modes:{index($,J,Z,q){let Q=c1(J,$),Y=Z.axis||"x",w=Z.includeInvisible||!1,X=Z.intersect?R7($,Q,Y,q,w):_7($,Q,Y,!1,q,w),U=[];if(!X.length)return[];return $.getSortedVisibleDatasetMetas().forEach((B)=>{let G=X[0].index,T=B.data[G];if(T&&!T.skip)U.push({element:T,datasetIndex:B.index,index:G})}),U},dataset($,J,Z,q){let Q=c1(J,$),Y=Z.axis||"xy",w=Z.includeInvisible||!1,X=Z.intersect?R7($,Q,Y,q,w):_7($,Q,Y,!1,q,w);if(X.length>0){let U=X[0].datasetIndex,B=$.getDatasetMeta(U).data;X=[];for(let G=0;G<B.length;++G)X.push({element:B[G],datasetIndex:U,index:G})}return X},point($,J,Z,q){let Q=c1(J,$),Y=Z.axis||"xy",w=Z.includeInvisible||!1;return R7($,Q,Y,q,w)},nearest($,J,Z,q){let Q=c1(J,$),Y=Z.axis||"xy",w=Z.includeInvisible||!1;return _7($,Q,Y,Z.intersect,q,w)},x($,J,Z,q){let Q=c1(J,$);return TJ($,Q,"x",Z.intersect,q)},y($,J,Z,q){let Q=c1(J,$);return TJ($,Q,"y",Z.intersect,q)}}},ZZ=["left","top","right","bottom"];function A5($,J){return $.filter((Z)=>Z.pos===J)}function MJ($,J){return $.filter((Z)=>ZZ.indexOf(Z.pos)===-1&&Z.box.axis===J)}function O5($,J){return $.sort((Z,q)=>{let Q=J?q:Z,Y=J?Z:q;return Q.weight===Y.weight?Q.index-Y.index:Q.weight-Y.weight})}function VX($){let J=[],Z,q,Q,Y,w,X;for(Z=0,q=($||[]).length;Z<q;++Z)Q=$[Z],{position:Y,options:{stack:w,stackWeight:X=1}}=Q,J.push({index:Z,box:Q,pos:Y,horizontal:Q.isHorizontal(),weight:Q.weight,stack:w&&Y+w,stackWeight:X});return J}function IX($){let J={};for(let Z of $){let{stack:q,pos:Q,stackWeight:Y}=Z;if(!q||!ZZ.includes(Q))continue;let w=J[q]||(J[q]={count:0,placed:0,weight:0,size:0});w.count++,w.weight+=Y}return J}function SX($,J){let Z=IX($),{vBoxMaxWidth:q,hBoxMaxHeight:Q}=J,Y,w,X;for(Y=0,w=$.length;Y<w;++Y){X=$[Y];let{fullSize:U}=X.box,B=Z[X.stack],G=B&&X.stackWeight/B.weight;if(X.horizontal)X.width=G?G*q:U&&J.availableWidth,X.height=Q;else X.width=q,X.height=G?G*Q:U&&J.availableHeight}return Z}function CX($){let J=VX($),Z=O5(J.filter((B)=>B.box.fullSize),!0),q=O5(A5(J,"left"),!0),Q=O5(A5(J,"right")),Y=O5(A5(J,"top"),!0),w=O5(A5(J,"bottom")),X=MJ(J,"x"),U=MJ(J,"y");return{fullSize:Z,leftAndTop:q.concat(Y),rightAndBottom:Q.concat(U).concat(w).concat(X),chartArea:A5(J,"chartArea"),vertical:q.concat(Q).concat(U),horizontal:Y.concat(w).concat(X)}}function zJ($,J,Z,q){return Math.max($[Z],J[Z])+Math.max($[q],J[q])}function qZ($,J){$.top=Math.max($.top,J.top),$.left=Math.max($.left,J.left),$.bottom=Math.max($.bottom,J.bottom),$.right=Math.max($.right,J.right)}function NX($,J,Z,q){let{pos:Q,box:Y}=Z,w=$.maxPadding;if(!o(Q)){if(Z.size)$[Q]-=Z.size;let T=q[Z.stack]||{size:0,count:1};T.size=Math.max(T.size,Z.horizontal?Y.height:Y.width),Z.size=T.size/T.count,$[Q]+=Z.size}if(Y.getPadding)qZ(w,Y.getPadding());let X=Math.max(0,J.outerWidth-zJ(w,$,"left","right")),U=Math.max(0,J.outerHeight-zJ(w,$,"top","bottom")),B=X!==$.w,G=U!==$.h;return $.w=X,$.h=U,Z.horizontal?{same:B,other:G}:{same:G,other:B}}function AX($){let J=$.maxPadding;function Z(q){let Q=Math.max(J[q]-$[q],0);return $[q]+=Q,Q}$.y+=Z("top"),$.x+=Z("left"),Z("right"),Z("bottom")}function OX($,J){let Z=J.maxPadding;function q(Q){let Y={left:0,top:0,right:0,bottom:0};return Q.forEach((w)=>{Y[w]=Math.max(J[w],Z[w])}),Y}return $?q(["left","right"]):q(["top","bottom"])}function b5($,J,Z,q){let Q=[],Y,w,X,U,B,G;for(Y=0,w=$.length,B=0;Y<w;++Y){X=$[Y],U=X.box,U.update(X.width||J.w,X.height||J.h,OX(X.horizontal,J));let{same:T,other:M}=NX(J,Z,X,q);if(B|=T&&Q.length,G=G||M,!U.fullSize)Q.push(X)}return B&&b5(Q,J,Z,q)||G}function Q8($,J,Z,q,Q){$.top=Z,$.left=J,$.right=J+q,$.bottom=Z+Q,$.width=q,$.height=Q}function HJ($,J,Z,q){let Q=Z.padding,{x:Y,y:w}=J;for(let X of $){let U=X.box,B=q[X.stack]||{count:1,placed:0,weight:1},G=X.stackWeight/B.weight||1;if(X.horizontal){let T=J.w*G,M=B.size||U.height;if(L5(B.start))w=B.start;if(U.fullSize)Q8(U,Q.left,w,Z.outerWidth-Q.right-Q.left,M);else Q8(U,J.left+B.placed,w,T,M);B.start=w,B.placed+=T,w=U.bottom}else{let T=J.h*G,M=B.size||U.width;if(L5(B.start))Y=B.start;if(U.fullSize)Q8(U,Y,Q.top,M,Z.outerHeight-Q.bottom-Q.top);else Q8(U,Y,J.top+B.placed,M,T);B.start=Y,B.placed+=T,Y=U.right}}J.x=Y,J.y=w}var s1={addBox($,J){if(!$.boxes)$.boxes=[];J.fullSize=J.fullSize||!1,J.position=J.position||"top",J.weight=J.weight||0,J._layers=J._layers||function(){return[{z:0,draw(Z){J.draw(Z)}}]},$.boxes.push(J)},removeBox($,J){let Z=$.boxes?$.boxes.indexOf(J):-1;if(Z!==-1)$.boxes.splice(Z,1)},configure($,J,Z){J.fullSize=Z.fullSize,J.position=Z.position,J.weight=Z.weight},update($,J,Z,q){if(!$)return;let Q=b0($.options.layout.padding),Y=Math.max(J-Q.width,0),w=Math.max(Z-Q.height,0),X=CX($.boxes),U=X.vertical,B=X.horizontal;$0($.boxes,(H)=>{if(typeof H.beforeLayout==="function")H.beforeLayout()});let G=U.reduce((H,W)=>W.box.options&&W.box.options.display===!1?H:H+1,0)||1,T=Object.freeze({outerWidth:J,outerHeight:Z,padding:Q,availableWidth:Y,availableHeight:w,vBoxMaxWidth:Y/2/G,hBoxMaxHeight:w/2}),M=Object.assign({},Q);qZ(M,b0(q));let z=Object.assign({maxPadding:M,w:Y,h:w,x:Q.left,y:Q.top},Q),F=SX(U.concat(B),T);if(b5(X.fullSize,z,T,F),b5(U,z,T,F),b5(B,z,T,F))b5(U,z,T,F);AX(z),HJ(X.leftAndTop,z,T,F),z.x+=z.w,z.y+=z.h,HJ(X.rightAndBottom,z,T,F),$.chartArea={left:z.left,top:z.top,right:z.left+z.w,bottom:z.top+z.h,height:z.h,width:z.w},$0(X.chartArea,(H)=>{let W=H.box;Object.assign(W,$.chartArea),W.update(z.w,z.h,{left:0,top:0,right:0,bottom:0})})}};class E7{acquireContext($,J){}releaseContext($){return!1}addEventListener($,J,Z){}removeEventListener($,J,Z){}getDevicePixelRatio(){return 1}getMaximumSize($,J,Z,q){return J=Math.max(0,J||$.width),Z=Z||$.height,{width:J,height:Math.max(0,q?Math.floor(J/q):Z)}}isAttached($){return!0}updateConfig($){}}class QZ extends E7{acquireContext($){return $&&$.getContext&&$.getContext("2d")||null}updateConfig($){$.options.animation=!1}}var U8="$chartjs",kX={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},FJ=($)=>$===null||$==="";function fX($,J){let Z=$.style,q=$.getAttribute("height"),Q=$.getAttribute("width");if($[U8]={initial:{height:q,width:Q,style:{display:Z.display,height:Z.height,width:Z.width}}},Z.display=Z.display||"block",Z.boxSizing=Z.boxSizing||"border-box",FJ(Q)){let Y=B7($,"width");if(Y!==void 0)$.width=Y}if(FJ(q))if($.style.height==="")$.height=$.width/(J||2);else{let Y=B7($,"height");if(Y!==void 0)$.height=Y}return $}var YZ=JJ?{passive:!0}:!1;function bX($,J,Z){if($)$.addEventListener(J,Z,YZ)}function vX($,J,Z){if($&&$.canvas)$.canvas.removeEventListener(J,Z,YZ)}function yX($,J){let Z=kX[$.type]||$.type,{x:q,y:Q}=c1($,J);return{type:Z,chart:J,native:$,x:q!==void 0?q:null,y:Q!==void 0?Q:null}}function G8($,J){for(let Z of $)if(Z===J||Z.contains(J))return!0}function EX($,J,Z){let q=$.canvas,Q=new MutationObserver((Y)=>{let w=!1;for(let X of Y)w=w||G8(X.addedNodes,q),w=w&&!G8(X.removedNodes,q);if(w)Z()});return Q.observe(document,{childList:!0,subtree:!0}),Q}function uX($,J,Z){let q=$.canvas,Q=new MutationObserver((Y)=>{let w=!1;for(let X of Y)w=w||G8(X.removedNodes,q),w=w&&!G8(X.addedNodes,q);if(w)Z()});return Q.observe(document,{childList:!0,subtree:!0}),Q}var E5=new Map,WJ=0;function wZ(){let $=window.devicePixelRatio;if($===WJ)return;WJ=$,E5.forEach((J,Z)=>{if(Z.currentDevicePixelRatio!==$)J()})}function gX($,J){if(!E5.size)window.addEventListener("resize",wZ);E5.set($,J)}function hX($){if(E5.delete($),!E5.size)window.removeEventListener("resize",wZ)}function xX($,J,Z){let q=$.canvas,Q=q&&Z8(q);if(!Q)return;let Y=$7((X,U)=>{let B=Q.clientWidth;if(Z(X,U),B<Q.clientWidth)Z()},window),w=new ResizeObserver((X)=>{let U=X[0],B=U.contentRect.width,G=U.contentRect.height;if(B===0&&G===0)return;Y(B,G)});return w.observe(Q),gX($,Y),w}function L7($,J,Z){if(Z)Z.disconnect();if(J==="resize")hX($)}function mX($,J,Z){let q=$.canvas,Q=$7((Y)=>{if($.ctx!==null)Z(yX(Y,$))},$);return bX(q,J,Q),Q}class XZ extends E7{acquireContext($,J){let Z=$&&$.getContext&&$.getContext("2d");if(Z&&Z.canvas===$)return fX($,J),Z;return null}releaseContext($){let J=$.canvas;if(!J[U8])return!1;let Z=J[U8].initial;["height","width"].forEach((Q)=>{let Y=Z[Q];if(e(Y))J.removeAttribute(Q);else J.setAttribute(Q,Y)});let q=Z.style||{};return Object.keys(q).forEach((Q)=>{J.style[Q]=q[Q]}),J.width=J.width,delete J[U8],!0}addEventListener($,J,Z){this.removeEventListener($,J);let q=$.$proxies||($.$proxies={}),Y={attach:EX,detach:uX,resize:xX}[J]||mX;q[J]=Y($,J,Z)}removeEventListener($,J){let Z=$.$proxies||($.$proxies={}),q=Z[J];if(!q)return;({attach:L7,detach:L7,resize:L7}[J]||vX)($,J,q),Z[J]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize($,J,Z,q){return $J($,J,Z,q)}isAttached($){let J=$&&Z8($);return!!(J&&J.isConnected)}}function dX($){if(!J8()||typeof OffscreenCanvas!=="undefined"&&$ instanceof OffscreenCanvas)return QZ;return XZ}class o1{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition($){let{x:J,y:Z}=this.getProps(["x","y"],$);return{x:J,y:Z}}hasValue(){return x2(this.x)&&x2(this.y)}getProps($,J){let Z=this.$animations;if(!J||!Z)return this;let q={};return $.forEach((Q)=>{q[Q]=Z[Q]&&Z[Q].active()?Z[Q]._to:this[Q]}),q}}function pX($,J){let Z=$.options.ticks,q=rX($),Q=Math.min(Z.maxTicksLimit||q,q),Y=Z.major.enabled?sX(J):[],w=Y.length,X=Y[0],U=Y[w-1],B=[];if(w>Q)return oX(J,B,Y,w/Q),B;let G=cX(Y,J,Q);if(w>0){let T,M,z=w>1?Math.round((U-X)/(w-1)):null;Y8(J,B,G,e(z)?0:X-z,X);for(T=0,M=w-1;T<M;T++)Y8(J,B,G,Y[T],Y[T+1]);return Y8(J,B,G,U,e(z)?J.length:U+z),B}return Y8(J,B,G),B}function rX($){let J=$.options.offset,Z=$._tickSize(),q=$._length/Z+(J?0:1),Q=$._maxLength/Z;return Math.floor(Math.min(q,Q))}function cX($,J,Z){let q=lX($),Q=J.length/Z;if(!q)return Math.max(Q,1);let Y=O3(q);for(let w=0,X=Y.length-1;w<X;w++){let U=Y[w];if(U>Q)return U}return Math.max(Q,1)}function sX($){let J=[],Z,q;for(Z=0,q=$.length;Z<q;Z++)if($[Z].major)J.push(Z);return J}function oX($,J,Z,q){let Q=0,Y=Z[0],w;q=Math.ceil(q);for(w=0;w<$.length;w++)if(w===Y)J.push($[w]),Q++,Y=Z[Q*q]}function Y8($,J,Z,q,Q){let Y=p(q,0),w=Math.min(p(Q,$.length),$.length),X=0,U,B,G;if(Z=Math.ceil(Z),Q)U=Q-q,Z=U/Math.floor(U/Z);G=Y;while(G<0)X++,G=Math.round(Y+X*Z);for(B=Math.max(Y,0);B<w;B++)if(B===G)J.push($[B]),X++,G=Math.round(Y+X*Z)}function lX($){let J=$.length,Z,q;if(J<2)return!1;for(q=$[0],Z=1;Z<J;++Z)if($[Z]-$[Z-1]!==q)return!1;return q}var iX=($)=>$==="left"?"right":$==="right"?"left":$,jJ=($,J,Z)=>J==="top"||J==="left"?$[J]+Z:$[J]-Z,RJ=($,J)=>Math.min(J||$,$);function _J($,J){let Z=[],q=$.length/J,Q=$.length,Y=0;for(;Y<Q;Y+=q)Z.push($[Math.floor(Y)]);return Z}function nX($,J,Z){let q=$.ticks.length,Q=Math.min(J,q-1),Y=$._startPixel,w=$._endPixel,X=0.000001,U=$.getPixelForTick(Q),B;if(Z){if(q===1)B=Math.max(U-Y,w-U);else if(J===0)B=($.getPixelForTick(1)-U)/2;else B=(U-$.getPixelForTick(Q-1))/2;if(U+=Q<J?B:-B,U<Y-0.000001||U>w+0.000001)return}return U}function aX($,J){$0($,(Z)=>{let q=Z.gc,Q=q.length/2,Y;if(Q>J){for(Y=0;Y<Q;++Y)delete Z.data[q[Y]];q.splice(0,Q)}})}function k5($){return $.drawTicks?$.tickLength:0}function LJ($,J){if(!$.display)return 0;let Z=C0($.font,J),q=b0($.padding);return(G0($.text)?$.text.length:1)*Z.lineHeight+q.height}function tX($,J){return S1($,{scale:J,type:"scale"})}function eX($,J,Z){return S1($,{tick:Z,index:J,type:"tick"})}function $K($,J,Z){let q=J7($);if(Z&&J!=="right"||!Z&&J==="right")q=iX(q);return q}function JK($,J,Z,q){let{top:Q,left:Y,bottom:w,right:X,chart:U}=$,{chartArea:B,scales:G}=U,T=0,M,z,F,H=w-Q,W=X-Y;if($.isHorizontal()){if(z=g0(q,Y,X),o(Z)){let j=Object.keys(Z)[0],_=Z[j];F=G[j].getPixelForValue(_)+H-J}else if(Z==="center")F=(B.bottom+B.top)/2+H-J;else F=jJ($,Z,J);M=X-Y}else{if(o(Z)){let j=Object.keys(Z)[0],_=Z[j];z=G[j].getPixelForValue(_)-W+J}else if(Z==="center")z=(B.left+B.right)/2-W+J;else z=jJ($,Z,J);F=g0(q,w,Q),T=Z==="left"?-H0:H0}return{titleX:z,titleY:F,maxWidth:M,rotation:T}}class T2 extends o1{constructor($){super();this.id=$.id,this.type=$.type,this.options=void 0,this.ctx=$.ctx,this.chart=$.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init($){this.options=$.setContext(this.getContext()),this.axis=$.axis,this._userMin=this.parse($.min),this._userMax=this.parse($.max),this._suggestedMin=this.parse($.suggestedMin),this._suggestedMax=this.parse($.suggestedMax)}parse($,J){return $}getUserBounds(){let{_userMin:$,_userMax:J,_suggestedMin:Z,_suggestedMax:q}=this;return $=u0($,Number.POSITIVE_INFINITY),J=u0(J,Number.NEGATIVE_INFINITY),Z=u0(Z,Number.POSITIVE_INFINITY),q=u0(q,Number.NEGATIVE_INFINITY),{min:u0($,Z),max:u0(J,q),minDefined:M0($),maxDefined:M0(J)}}getMinMax($){let{min:J,max:Z,minDefined:q,maxDefined:Q}=this.getUserBounds(),Y;if(q&&Q)return{min:J,max:Z};let w=this.getMatchingVisibleMetas();for(let X=0,U=w.length;X<U;++X){if(Y=w[X].controller.getMinMax(this,$),!q)J=Math.min(J,Y.min);if(!Q)Z=Math.max(Z,Y.max)}return J=Q&&J>Z?Z:J,Z=q&&J>Z?J:Z,{min:u0(J,u0(Z,J)),max:u0(Z,u0(J,Z))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let $=this.chart.data;return this.options.labels||(this.isHorizontal()?$.xLabels:$.yLabels)||$.labels||[]}getLabelItems($=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems($))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){q0(this.options.beforeUpdate,[this])}update($,J,Z){let{beginAtZero:q,grace:Q,ticks:Y}=this.options,w=Y.sampleSize;if(this.beforeUpdate(),this.maxWidth=$,this.maxHeight=J,this._margins=Z=Object.assign({left:0,right:0,top:0,bottom:0},Z),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+Z.left+Z.right:this.height+Z.top+Z.bottom,!this._dataLimitsCached)this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=l3(this,Q,q),this._dataLimitsCached=!0;this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let X=w<this.ticks.length;if(this._convertTicksToLabels(X?_J(this.ticks,w):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),Y.display&&(Y.autoSkip||Y.source==="auto"))this.ticks=pX(this,this.ticks),this._labelSizes=null,this.afterAutoSkip();if(X)this._convertTicksToLabels(this.ticks);this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let $=this.options.reverse,J,Z;if(this.isHorizontal())J=this.left,Z=this.right;else J=this.top,Z=this.bottom,$=!$;this._startPixel=J,this._endPixel=Z,this._reversePixels=$,this._length=Z-J,this._alignToPixels=this.options.alignToPixels}afterUpdate(){q0(this.options.afterUpdate,[this])}beforeSetDimensions(){q0(this.options.beforeSetDimensions,[this])}setDimensions(){if(this.isHorizontal())this.width=this.maxWidth,this.left=0,this.right=this.width;else this.height=this.maxHeight,this.top=0,this.bottom=this.height;this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){q0(this.options.afterSetDimensions,[this])}_callHooks($){this.chart.notifyPlugins($,this.getContext()),q0(this.options[$],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){q0(this.options.beforeTickToLabelConversion,[this])}generateTickLabels($){let J=this.options.ticks,Z,q,Q;for(Z=0,q=$.length;Z<q;Z++)Q=$[Z],Q.label=q0(J.callback,[Q.value,Z,$],this)}afterTickToLabelConversion(){q0(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){q0(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let $=this.options,J=$.ticks,Z=RJ(this.ticks.length,$.ticks.maxTicksLimit),q=J.minRotation||0,Q=J.maxRotation,Y=q,w,X,U;if(!this._isVisible()||!J.display||q>=Q||Z<=1||!this.isHorizontal()){this.labelRotation=q;return}let B=this._getLabelSizes(),G=B.widest.width,T=B.highest.height,M=f0(this.chart.width-G,0,this.maxWidth);if(w=$.offset?this.maxWidth/Z:M/(Z-1),G+6>w)w=M/(Z-($.offset?0.5:1)),X=this.maxHeight-k5($.grid)-J.padding-LJ($.title,this.chart.options.font),U=Math.sqrt(G*G+T*T),Y=i4(Math.min(Math.asin(f0((B.highest.height+6)/w,-1,1)),Math.asin(f0(X/U,-1,1))-Math.asin(f0(T/U,-1,1)))),Y=Math.max(q,Math.min(Q,Y));this.labelRotation=Y}afterCalculateLabelRotation(){q0(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){q0(this.options.beforeFit,[this])}fit(){let $={width:0,height:0},{chart:J,options:{ticks:Z,title:q,grid:Q}}=this,Y=this._isVisible(),w=this.isHorizontal();if(Y){let X=LJ(q,J.options.font);if(w)$.width=this.maxWidth,$.height=k5(Q)+X;else $.height=this.maxHeight,$.width=k5(Q)+X;if(Z.display&&this.ticks.length){let{first:U,last:B,widest:G,highest:T}=this._getLabelSizes(),M=Z.padding*2,z=Y1(this.labelRotation),F=Math.cos(z),H=Math.sin(z);if(w){let W=Z.mirror?0:H*G.width+F*T.height;$.height=Math.min(this.maxHeight,$.height+W+M)}else{let W=Z.mirror?0:F*G.width+H*T.height;$.width=Math.min(this.maxWidth,$.width+W+M)}this._calculatePadding(U,B,H,F)}}if(this._handleMargins(),w)this.width=this._length=J.width-this._margins.left-this._margins.right,this.height=$.height;else this.width=$.width,this.height=this._length=J.height-this._margins.top-this._margins.bottom}_calculatePadding($,J,Z,q){let{ticks:{align:Q,padding:Y},position:w}=this.options,X=this.labelRotation!==0,U=w!=="top"&&this.axis==="x";if(this.isHorizontal()){let B=this.getPixelForTick(0)-this.left,G=this.right-this.getPixelForTick(this.ticks.length-1),T=0,M=0;if(X)if(U)T=q*$.width,M=Z*J.height;else T=Z*$.height,M=q*J.width;else if(Q==="start")M=J.width;else if(Q==="end")T=$.width;else if(Q!=="inner")T=$.width/2,M=J.width/2;this.paddingLeft=Math.max((T-B+Y)*this.width/(this.width-B),0),this.paddingRight=Math.max((M-G+Y)*this.width/(this.width-G),0)}else{let B=J.height/2,G=$.height/2;if(Q==="start")B=0,G=$.height;else if(Q==="end")B=J.height,G=0;this.paddingTop=B+Y,this.paddingBottom=G+Y}}_handleMargins(){if(this._margins)this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom)}afterFit(){q0(this.options.afterFit,[this])}isHorizontal(){let{axis:$,position:J}=this.options;return J==="top"||J==="bottom"||$==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels($){this.beforeTickToLabelConversion(),this.generateTickLabels($);let J,Z;for(J=0,Z=$.length;J<Z;J++)if(e($[J].label))$.splice(J,1),Z--,J--;this.afterTickToLabelConversion()}_getLabelSizes(){let $=this._labelSizes;if(!$){let J=this.options.ticks.sampleSize,Z=this.ticks;if(J<Z.length)Z=_J(Z,J);this._labelSizes=$=this._computeLabelSizes(Z,Z.length,this.options.ticks.maxTicksLimit)}return $}_computeLabelSizes($,J,Z){let{ctx:q,_longestTextCache:Q}=this,Y=[],w=[],X=Math.floor(J/RJ(J,Z)),U=0,B=0,G,T,M,z,F,H,W,j,_,V,D;for(G=0;G<J;G+=X){if(z=$[G].label,F=this._resolveTickFontOptions(G),q.font=H=F.string,W=Q[H]=Q[H]||{data:{},gc:[]},j=F.lineHeight,_=V=0,!e(z)&&!G0(z))_=R5(q,W.data,W.gc,_,z),V=j;else if(G0(z)){for(T=0,M=z.length;T<M;++T)if(D=z[T],!e(D)&&!G0(D))_=R5(q,W.data,W.gc,_,D),V+=j}Y.push(_),w.push(V),U=Math.max(_,U),B=Math.max(V,B)}aX(Q,J);let L=Y.indexOf(U),C=w.indexOf(B),S=(P)=>({width:Y[P]||0,height:w[P]||0});return{first:S(0),last:S(J-1),widest:S(L),highest:S(C),widths:Y,heights:w}}getLabelForValue($){return $}getPixelForValue($,J){return NaN}getValueForPixel($){}getPixelForTick($){let J=this.ticks;if($<0||$>J.length-1)return null;return this.getPixelForValue(J[$].value)}getPixelForDecimal($){if(this._reversePixels)$=1-$;let J=this._startPixel+$*this._length;return f3(this._alignToPixels?r1(this.chart,J,0):J)}getDecimalForPixel($){let J=($-this._startPixel)/this._length;return this._reversePixels?1-J:J}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:$,max:J}=this;return $<0&&J<0?J:$>0&&J>0?$:0}getContext($){let J=this.ticks||[];if($>=0&&$<J.length){let Z=J[$];return Z.$context||(Z.$context=eX(this.getContext(),$,Z))}return this.$context||(this.$context=tX(this.chart.getContext(),this))}_tickSize(){let $=this.options.ticks,J=Y1(this.labelRotation),Z=Math.abs(Math.cos(J)),q=Math.abs(Math.sin(J)),Q=this._getLabelSizes(),Y=$.autoSkipPadding||0,w=Q?Q.widest.width+Y:0,X=Q?Q.highest.height+Y:0;return this.isHorizontal()?X*Z>w*q?w/Z:X/q:X*q<w*Z?X/Z:w/q}_isVisible(){let $=this.options.display;if($!=="auto")return!!$;return this.getMatchingVisibleMetas().length>0}_computeGridLineItems($){let J=this.axis,Z=this.chart,q=this.options,{grid:Q,position:Y,border:w}=q,X=Q.offset,U=this.isHorizontal(),G=this.ticks.length+(X?1:0),T=k5(Q),M=[],z=w.setContext(this.getContext()),F=z.display?z.width:0,H=F/2,W=function(n){return r1(Z,n,F)},j,_,V,D,L,C,S,P,I,v,b,Q0;if(Y==="top")j=W(this.bottom),C=this.bottom-T,P=j-H,v=W($.top)+H,Q0=$.bottom;else if(Y==="bottom")j=W(this.top),v=$.top,Q0=W($.bottom)-H,C=j+H,P=this.top+T;else if(Y==="left")j=W(this.right),L=this.right-T,S=j-H,I=W($.left)+H,b=$.right;else if(Y==="right")j=W(this.left),I=$.left,b=W($.right)-H,L=j+H,S=this.left+T;else if(J==="x"){if(Y==="center")j=W(($.top+$.bottom)/2+0.5);else if(o(Y)){let n=Object.keys(Y)[0],J0=Y[n];j=W(this.chart.scales[n].getPixelForValue(J0))}v=$.top,Q0=$.bottom,C=j+H,P=C+T}else if(J==="y"){if(Y==="center")j=W(($.left+$.right)/2);else if(o(Y)){let n=Object.keys(Y)[0],J0=Y[n];j=W(this.chart.scales[n].getPixelForValue(J0))}L=j-H,S=L-T,I=$.left,b=$.right}let k0=p(q.ticks.maxTicksLimit,G),Z0=Math.max(1,Math.ceil(G/k0));for(_=0;_<G;_+=Z0){let n=this.getContext(_),J0=Q.setContext(n),F0=w.setContext(n),k=J0.lineWidth,W0=J0.color,l1=F0.dash||[],M1=F0.dashOffset,z1=J0.tickWidth,T0=J0.tickColor,D0=J0.tickBorderDash||[],s0=J0.tickBorderDashOffset;if(V=nX(this,_,X),V===void 0)continue;if(D=r1(Z,V,k),U)L=S=I=b=D;else C=P=v=Q0=D;M.push({tx1:L,ty1:C,tx2:S,ty2:P,x1:I,y1:v,x2:b,y2:Q0,width:k,color:W0,borderDash:l1,borderDashOffset:M1,tickWidth:z1,tickColor:T0,tickBorderDash:D0,tickBorderDashOffset:s0})}return this._ticksLength=G,this._borderValue=j,M}_computeLabelItems($){let J=this.axis,Z=this.options,{position:q,ticks:Q}=Z,Y=this.isHorizontal(),w=this.ticks,{align:X,crossAlign:U,padding:B,mirror:G}=Q,T=k5(Z.grid),M=T+B,z=G?-B:M,F=-Y1(this.labelRotation),H=[],W,j,_,V,D,L,C,S,P,I,v,b,Q0="middle";if(q==="top")L=this.bottom-z,C=this._getXAxisLabelAlignment();else if(q==="bottom")L=this.top+z,C=this._getXAxisLabelAlignment();else if(q==="left"){let Z0=this._getYAxisLabelAlignment(T);C=Z0.textAlign,D=Z0.x}else if(q==="right"){let Z0=this._getYAxisLabelAlignment(T);C=Z0.textAlign,D=Z0.x}else if(J==="x"){if(q==="center")L=($.top+$.bottom)/2+M;else if(o(q)){let Z0=Object.keys(q)[0],n=q[Z0];L=this.chart.scales[Z0].getPixelForValue(n)+M}C=this._getXAxisLabelAlignment()}else if(J==="y"){if(q==="center")D=($.left+$.right)/2-M;else if(o(q)){let Z0=Object.keys(q)[0],n=q[Z0];D=this.chart.scales[Z0].getPixelForValue(n)}C=this._getYAxisLabelAlignment(T).textAlign}if(J==="y"){if(X==="start")Q0="top";else if(X==="end")Q0="bottom"}let k0=this._getLabelSizes();for(W=0,j=w.length;W<j;++W){_=w[W],V=_.label;let Z0=Q.setContext(this.getContext(W));S=this.getPixelForTick(W)+Q.labelOffset,P=this._resolveTickFontOptions(W),I=P.lineHeight,v=G0(V)?V.length:1;let n=v/2,J0=Z0.color,F0=Z0.textStrokeColor,k=Z0.textStrokeWidth,W0=C;if(Y){if(D=S,C==="inner")if(W===j-1)W0=!this.options.reverse?"right":"left";else if(W===0)W0=!this.options.reverse?"left":"right";else W0="center";if(q==="top")if(U==="near"||F!==0)b=-v*I+I/2;else if(U==="center")b=-k0.highest.height/2-n*I+I;else b=-k0.highest.height+I/2;else if(U==="near"||F!==0)b=I/2;else if(U==="center")b=k0.highest.height/2-n*I;else b=k0.highest.height-v*I;if(G)b*=-1;if(F!==0&&!Z0.showLabelBackdrop)D+=I/2*Math.sin(F)}else L=S,b=(1-v)*I/2;let l1;if(Z0.showLabelBackdrop){let M1=b0(Z0.backdropPadding),z1=k0.heights[W],T0=k0.widths[W],D0=b-M1.top,s0=0-M1.left;switch(Q0){case"middle":D0-=z1/2;break;case"bottom":D0-=z1;break}switch(C){case"center":s0-=T0/2;break;case"right":s0-=T0;break;case"inner":if(W===j-1)s0-=T0;else if(W>0)s0-=T0/2;break}l1={left:s0,top:D0,width:T0+M1.width,height:z1+M1.height,color:Z0.backdropColor}}H.push({label:V,font:P,textOffset:b,options:{rotation:F,color:J0,strokeColor:F0,strokeWidth:k,textAlign:W0,textBaseline:Q0,translation:[D,L],backdrop:l1}})}return H}_getXAxisLabelAlignment(){let{position:$,ticks:J}=this.options;if(-Y1(this.labelRotation))return $==="top"?"left":"right";let q="center";if(J.align==="start")q="left";else if(J.align==="end")q="right";else if(J.align==="inner")q="inner";return q}_getYAxisLabelAlignment($){let{position:J,ticks:{crossAlign:Z,mirror:q,padding:Q}}=this.options,Y=this._getLabelSizes(),w=$+Q,X=Y.widest.width,U,B;if(J==="left")if(q)if(B=this.right+Q,Z==="near")U="left";else if(Z==="center")U="center",B+=X/2;else U="right",B+=X;else if(B=this.right-w,Z==="near")U="right";else if(Z==="center")U="center",B-=X/2;else U="left",B=this.left;else if(J==="right")if(q)if(B=this.left+Q,Z==="near")U="right";else if(Z==="center")U="center",B-=X/2;else U="left",B-=X;else if(B=this.left+w,Z==="near")U="left";else if(Z==="center")U="center",B+=X/2;else U="right",B=this.right;else U="right";return{textAlign:U,x:B}}_computeLabelArea(){if(this.options.ticks.mirror)return;let $=this.chart,J=this.options.position;if(J==="left"||J==="right")return{top:0,left:this.left,bottom:$.height,right:this.right};if(J==="top"||J==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:$.width}}drawBackground(){let{ctx:$,options:{backgroundColor:J},left:Z,top:q,width:Q,height:Y}=this;if(J)$.save(),$.fillStyle=J,$.fillRect(Z,q,Q,Y),$.restore()}getLineWidthForValue($){let J=this.options.grid;if(!this._isVisible()||!J.display)return 0;let q=this.ticks.findIndex((Q)=>Q.value===$);if(q>=0)return J.setContext(this.getContext(q)).lineWidth;return 0}drawGrid($){let J=this.options.grid,Z=this.ctx,q=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems($)),Q,Y,w=(X,U,B)=>{if(!B.width||!B.color)return;Z.save(),Z.lineWidth=B.width,Z.strokeStyle=B.color,Z.setLineDash(B.borderDash||[]),Z.lineDashOffset=B.borderDashOffset,Z.beginPath(),Z.moveTo(X.x,X.y),Z.lineTo(U.x,U.y),Z.stroke(),Z.restore()};if(J.display)for(Q=0,Y=q.length;Q<Y;++Q){let X=q[Q];if(J.drawOnChartArea)w({x:X.x1,y:X.y1},{x:X.x2,y:X.y2},X);if(J.drawTicks)w({x:X.tx1,y:X.ty1},{x:X.tx2,y:X.ty2},{color:X.tickColor,width:X.tickWidth,borderDash:X.tickBorderDash,borderDashOffset:X.tickBorderDashOffset})}}drawBorder(){let{chart:$,ctx:J,options:{border:Z,grid:q}}=this,Q=Z.setContext(this.getContext()),Y=Z.display?Q.width:0;if(!Y)return;let w=q.setContext(this.getContext(0)).lineWidth,X=this._borderValue,U,B,G,T;if(this.isHorizontal())U=r1($,this.left,Y)-Y/2,B=r1($,this.right,w)+w/2,G=T=X;else G=r1($,this.top,Y)-Y/2,T=r1($,this.bottom,w)+w/2,U=B=X;J.save(),J.lineWidth=Q.width,J.strokeStyle=Q.color,J.beginPath(),J.moveTo(U,G),J.lineTo(B,T),J.stroke(),J.restore()}drawLabels($){if(!this.options.ticks.display)return;let Z=this.ctx,q=this._computeLabelArea();if(q)V5(Z,q);let Q=this.getLabelItems($);for(let Y of Q){let{options:w,font:X,label:U,textOffset:B}=Y;X2(Z,U,0,B,X,w)}if(q)I5(Z)}drawTitle(){let{ctx:$,options:{position:J,title:Z,reverse:q}}=this;if(!Z.display)return;let Q=C0(Z.font),Y=b0(Z.padding),w=Z.align,X=Q.lineHeight/2;if(J==="bottom"||J==="center"||o(J)){if(X+=Y.bottom,G0(Z.text))X+=Q.lineHeight*(Z.text.length-1)}else X+=Y.top;let{titleX:U,titleY:B,maxWidth:G,rotation:T}=JK(this,X,J,w);X2($,Z.text,0,0,Q,{color:Z.color,maxWidth:G,rotation:T,textAlign:$K(w,J,q),textBaseline:"middle",translation:[U,B]})}draw($){if(!this._isVisible())return;this.drawBackground(),this.drawGrid($),this.drawBorder(),this.drawTitle(),this.drawLabels($)}_layers(){let $=this.options,J=$.ticks&&$.ticks.z||0,Z=p($.grid&&$.grid.z,-1),q=p($.border&&$.border.z,0);if(!this._isVisible()||this.draw!==T2.prototype.draw)return[{z:J,draw:(Q)=>{this.draw(Q)}}];return[{z:Z,draw:(Q)=>{this.drawBackground(),this.drawGrid(Q),this.drawTitle()}},{z:q,draw:()=>{this.drawBorder()}},{z:J,draw:(Q)=>{this.drawLabels(Q)}}]}getMatchingVisibleMetas($){let J=this.chart.getSortedVisibleDatasetMetas(),Z=this.axis+"AxisID",q=[],Q,Y;for(Q=0,Y=J.length;Q<Y;++Q){let w=J[Q];if(w[Z]===this.id&&(!$||w.type===$))q.push(w)}return q}_resolveTickFontOptions($){let J=this.options.ticks.setContext(this.getContext($));return C0(J.font)}_maxDigits(){let $=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/$}}class v5{constructor($,J,Z){this.type=$,this.scope=J,this.override=Z,this.items=Object.create(null)}isForType($){return Object.prototype.isPrototypeOf.call(this.type.prototype,$.prototype)}register($){let J=Object.getPrototypeOf($),Z;if(QK(J))Z=this.register(J);let q=this.items,Q=$.id,Y=this.scope+"."+Q;if(!Q)throw new Error("class does not have id: "+$);if(Q in q)return Y;if(q[Q]=$,ZK($,Y,Z),this.override)z0.override($.id,$.overrides);return Y}get($){return this.items[$]}unregister($){let J=this.items,Z=$.id,q=this.scope;if(Z in J)delete J[Z];if(q&&Z in z0[q]){if(delete z0[q][Z],this.override)delete p1[Z]}}}function ZK($,J,Z){let q=y2(Object.create(null),[Z?z0.get(Z):{},z0.get(J),$.defaults]);if(z0.set(J,q),$.defaultRoutes)qK(J,$.defaultRoutes);if($.descriptors)z0.describe(J,$.descriptors)}function qK($,J){Object.keys(J).forEach((Z)=>{let q=Z.split("."),Q=q.pop(),Y=[$].concat(q).join("."),w=J[Z].split("."),X=w.pop(),U=w.join(".");z0.route(Y,Q,U,X)})}function QK($){return"id"in $&&"defaults"in $}class KZ{constructor(){this.controllers=new v5(M8,"datasets",!0),this.elements=new v5(o1,"elements"),this.plugins=new v5(Object,"plugins"),this.scales=new v5(T2,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...$){this._each("register",$)}remove(...$){this._each("unregister",$)}addControllers(...$){this._each("register",$,this.controllers)}addElements(...$){this._each("register",$,this.elements)}addPlugins(...$){this._each("register",$,this.plugins)}addScales(...$){this._each("register",$,this.scales)}getController($){return this._get($,this.controllers,"controller")}getElement($){return this._get($,this.elements,"element")}getPlugin($){return this._get($,this.plugins,"plugin")}getScale($){return this._get($,this.scales,"scale")}removeControllers(...$){this._each("unregister",$,this.controllers)}removeElements(...$){this._each("unregister",$,this.elements)}removePlugins(...$){this._each("unregister",$,this.plugins)}removeScales(...$){this._each("unregister",$,this.scales)}_each($,J,Z){[...J].forEach((q)=>{let Q=Z||this._getRegistryForType(q);if(Z||Q.isForType(q)||Q===this.plugins&&q.id)this._exec($,Q,q);else $0(q,(Y)=>{let w=Z||this._getRegistryForType(Y);this._exec($,w,Y)})})}_exec($,J,Z){let q=l4($);q0(Z["before"+q],[],Z),J[$](Z),q0(Z["after"+q],[],Z)}_getRegistryForType($){for(let J=0;J<this._typedRegistries.length;J++){let Z=this._typedRegistries[J];if(Z.isForType($))return Z}return this.plugins}_get($,J,Z){let q=J.get($);if(q===void 0)throw new Error('"'+$+'" is not a registered '+Z+".");return q}}var T1=new KZ;class UZ{constructor(){this._init=void 0}notify($,J,Z,q){if(J==="beforeInit")this._init=this._createDescriptors($,!0),this._notify(this._init,$,"install");if(this._init===void 0)return;let Q=q?this._descriptors($).filter(q):this._descriptors($),Y=this._notify(Q,$,J,Z);if(J==="afterDestroy")this._notify(Q,$,"stop"),this._notify(this._init,$,"uninstall"),this._init=void 0;return Y}_notify($,J,Z,q){q=q||{};for(let Q of $){let Y=Q.plugin,w=Y[Z],X=[J,q,Q.options];if(q0(w,X,Y)===!1&&q.cancelable)return!1}return!0}invalidate(){if(!e(this._cache))this._oldCache=this._cache,this._cache=void 0}_descriptors($){if(this._cache)return this._cache;let J=this._cache=this._createDescriptors($);return this._notifyStateChanges($),J}_createDescriptors($,J){let Z=$&&$.config,q=p(Z.options&&Z.options.plugins,{}),Q=YK(Z);return q===!1&&!J?[]:XK($,Q,q,J)}_notifyStateChanges($){let J=this._oldCache||[],Z=this._cache,q=(Q,Y)=>Q.filter((w)=>!Y.some((X)=>w.plugin.id===X.plugin.id));this._notify(q(J,Z),$,"stop"),this._notify(q(Z,J),$,"start")}}function YK($){let J={},Z=[],q=Object.keys(T1.plugins.items);for(let Y=0;Y<q.length;Y++)Z.push(T1.getPlugin(q[Y]));let Q=$.plugins||[];for(let Y=0;Y<Q.length;Y++){let w=Q[Y];if(Z.indexOf(w)===-1)Z.push(w),J[w.id]=!0}return{plugins:Z,localIds:J}}function wK($,J){if(!J&&$===!1)return null;if($===!0)return{};return $}function XK($,{plugins:J,localIds:Z},q,Q){let Y=[],w=$.getContext();for(let X of J){let U=X.id,B=wK(q[U],Q);if(B===null)continue;Y.push({plugin:X,options:KK($.config,{plugin:X,local:Z[U]},B,w)})}return Y}function KK($,{plugin:J,local:Z},q,Q){let Y=$.pluginScopeKeys(J),w=$.getOptionScopes(q,Y);if(Z&&J.defaults)w.push(J.defaults);return $.createResolver(w,Q,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function V7($,J){let Z=z0.datasets[$]||{};return((J.datasets||{})[$]||{}).indexAxis||J.indexAxis||Z.indexAxis||"x"}function UK($,J){let Z=$;if($==="_index_")Z=J;else if($==="_value_")Z=J==="x"?"y":"x";return Z}function BK($,J){return $===J?"_index_":"_value_"}function DJ($){if($==="x"||$==="y"||$==="r")return $}function GK($){if($==="top"||$==="bottom")return"x";if($==="left"||$==="right")return"y"}function I7($,...J){if(DJ($))return $;for(let Z of J){let q=Z.axis||GK(Z.position)||$.length>1&&DJ($[0].toLowerCase());if(q)return q}throw new Error(`Cannot determine type of '${$}' axis. Please provide 'axis' or 'position' option.`)}function PJ($,J,Z){if(Z[J+"AxisID"]===$)return{axis:J}}function TK($,J){if(J.data&&J.data.datasets){let Z=J.data.datasets.filter((q)=>q.xAxisID===$||q.yAxisID===$);if(Z.length)return PJ($,"x",Z[0])||PJ($,"y",Z[0])}return{}}function MK($,J){let Z=p1[$.type]||{scales:{}},q=J.scales||{},Q=V7($.type,J),Y=Object.create(null);return Object.keys(q).forEach((w)=>{let X=q[w];if(!o(X))return console.error(`Invalid scale configuration for scale: ${w}`);if(X._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${w}`);let U=I7(w,X,TK(w,$),z0.scales[X.type]),B=BK(U,Q),G=Z.scales||{};Y[w]=u2(Object.create(null),[{axis:U},X,G[U],G[B]])}),$.data.datasets.forEach((w)=>{let X=w.type||$.type,U=w.indexAxis||V7(X,J),G=(p1[X]||{}).scales||{};Object.keys(G).forEach((T)=>{let M=UK(T,U),z=w[M+"AxisID"]||M;Y[z]=Y[z]||Object.create(null),u2(Y[z],[{axis:M},q[z],G[T]])})}),Object.keys(Y).forEach((w)=>{let X=Y[w];u2(X,[z0.scales[X.type],z0.scale])}),Y}function BZ($){let J=$.options||($.options={});J.plugins=p(J.plugins,{}),J.scales=MK($,J)}function GZ($){return $=$||{},$.datasets=$.datasets||[],$.labels=$.labels||[],$}function zK($){return $=$||{},$.data=GZ($.data),BZ($),$}var VJ=new Map,TZ=new Set;function w8($,J){let Z=VJ.get($);if(!Z)Z=J(),VJ.set($,Z),TZ.add(Z);return Z}var f5=($,J,Z)=>{let q=g2(J,Z);if(q!==void 0)$.add(q)};class MZ{constructor($){this._config=zK($),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type($){this._config.type=$}get data(){return this._config.data}set data($){this._config.data=GZ($)}get options(){return this._config.options}set options($){this._config.options=$}get plugins(){return this._config.plugins}update(){let $=this._config;this.clearCache(),BZ($)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys($){return w8($,()=>[[`datasets.${$}`,""]])}datasetAnimationScopeKeys($,J){return w8(`${$}.transition.${J}`,()=>[[`datasets.${$}.transitions.${J}`,`transitions.${J}`],[`datasets.${$}`,""]])}datasetElementScopeKeys($,J){return w8(`${$}-${J}`,()=>[[`datasets.${$}.elements.${J}`,`datasets.${$}`,`elements.${J}`,""]])}pluginScopeKeys($){let J=$.id,Z=this.type;return w8(`${Z}-plugin-${J}`,()=>[[`plugins.${J}`,...$.additionalOptionScopes||[]]])}_cachedScopes($,J){let Z=this._scopeCache,q=Z.get($);if(!q||J)q=new Map,Z.set($,q);return q}getOptionScopes($,J,Z){let{options:q,type:Q}=this,Y=this._cachedScopes($,Z),w=Y.get(J);if(w)return w;let X=new Set;J.forEach((B)=>{if($)X.add($),B.forEach((G)=>f5(X,$,G));B.forEach((G)=>f5(X,q,G)),B.forEach((G)=>f5(X,p1[Q]||{},G)),B.forEach((G)=>f5(X,z0,G)),B.forEach((G)=>f5(X,a4,G))});let U=Array.from(X);if(U.length===0)U.push(Object.create(null));if(TZ.has(J))Y.set(J,U);return U}chartOptionScopes(){let{options:$,type:J}=this;return[$,p1[J]||{},z0.datasets[J]||{},{type:J},z0,a4]}resolveNamedOptions($,J,Z,q=[""]){let Q={$shared:!0},{resolver:Y,subPrefixes:w}=IJ(this._resolverCache,$,q),X=Y;if(FK(Y,J)){Q.$shared=!1,Z=V1(Z)?Z():Z;let U=this.createResolver($,Z,w);X=w2(Y,Z,U)}for(let U of J)Q[U]=X[U];return Q}createResolver($,J,Z=[""],q){let{resolver:Q}=IJ(this._resolverCache,$,Z);return o(J)?w2(Q,J,void 0,q):Q}}function IJ($,J,Z){let q=$.get(J);if(!q)q=new Map,$.set(J,q);let Q=Z.join(),Y=q.get(Q);if(!Y)Y={resolver:$8(J,Z),subPrefixes:Z.filter((X)=>!X.toLowerCase().includes("hover"))},q.set(Q,Y);return Y}var HK=($)=>o($)&&Object.getOwnPropertyNames($).some((J)=>V1($[J]));function FK($,J){let{isScriptable:Z,isIndexable:q}=w7($);for(let Q of J){let Y=Z(Q),w=q(Q),X=(w||Y)&&$[Q];if(Y&&(V1(X)||HK(X))||w&&G0(X))return!0}return!1}var WK="4.5.1",jK=["top","bottom","left","right","chartArea"];function SJ($,J){return $==="top"||$==="bottom"||jK.indexOf($)===-1&&J==="x"}function CJ($,J){return function(Z,q){return Z[$]===q[$]?Z[J]-q[J]:Z[$]-q[$]}}function NJ($){let J=$.chart,Z=J.options.animation;J.notifyPlugins("afterRender"),q0(Z&&Z.onComplete,[$],J)}function RK($){let J=$.chart,Z=J.options.animation;q0(Z&&Z.onProgress,[$],J)}function zZ($){if(J8()&&typeof $==="string")$=document.getElementById($);else if($&&$.length)$=$[0];if($&&$.canvas)$=$.canvas;return $}var B8={},AJ=($)=>{let J=zZ($);return Object.values(B8).filter((Z)=>Z.canvas===J).pop()};function _K($,J,Z){let q=Object.keys($);for(let Q of q){let Y=+Q;if(Y>=J){let w=$[Q];if(delete $[Q],Z>0||Y>J)$[Y+Z]=w}}}function LK($,J,Z,q){if(!Z||$.type==="mouseout")return null;if(q)return J;return $}class M2{static defaults=z0;static instances=B8;static overrides=p1;static registry=T1;static version=WK;static getChart=AJ;static register(...$){T1.add(...$),OJ()}static unregister(...$){T1.remove(...$),OJ()}constructor($,J){let Z=this.config=new MZ(J),q=zZ($),Q=AJ(q);if(Q)throw new Error("Canvas is already in use. Chart with ID '"+Q.id+"' must be destroyed before the canvas with ID '"+Q.canvas.id+"' can be reused.");let Y=Z.createResolver(Z.chartOptionScopes(),this.getContext());this.platform=new(Z.platform||dX(q)),this.platform.updateConfig(Z);let w=this.platform.acquireContext(q,Y.aspectRatio),X=w&&w.canvas,U=X&&X.height,B=X&&X.width;if(this.id=S3(),this.ctx=w,this.canvas=X,this.width=B,this.height=U,this._options=Y,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new UZ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=g3((G)=>this.update(G),Y.resizeDelay||0),this._dataChanges=[],B8[this.id]=this,!w||!X){console.error("Failed to create chart: can't acquire context from the given item");return}if(C1.listen(this,"complete",NJ),C1.listen(this,"progress",RK),this._initialize(),this.attached)this.update()}get aspectRatio(){let{options:{aspectRatio:$,maintainAspectRatio:J},width:Z,height:q,_aspectRatio:Q}=this;if(!e($))return $;if(J&&Q)return Q;return q?Z/q:null}get data(){return this.config.data}set data($){this.config.data=$}get options(){return this._options}set options($){this.config.options=$}get registry(){return T1}_initialize(){if(this.notifyPlugins("beforeInit"),this.options.responsive)this.resize();else U7(this,this.options.devicePixelRatio);return this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Q7(this.canvas,this.ctx),this}stop(){return C1.stop(this),this}resize($,J){if(!C1.running(this))this._resize($,J);else this._resizeBeforeDraw={width:$,height:J}}_resize($,J){let Z=this.options,q=this.canvas,Q=Z.maintainAspectRatio&&this.aspectRatio,Y=this.platform.getMaximumSize(q,$,J,Q),w=Z.devicePixelRatio||this.platform.getDevicePixelRatio(),X=this.width?"resize":"attach";if(this.width=Y.width,this.height=Y.height,this._aspectRatio=this.aspectRatio,!U7(this,w,!0))return;if(this.notifyPlugins("resize",{size:Y}),q0(Z.onResize,[this,Y],this),this.attached){if(this._doResize(X))this.render()}}ensureScalesHaveIDs(){let J=this.options.scales||{};$0(J,(Z,q)=>{Z.id=q})}buildOrUpdateScales(){let $=this.options,J=$.scales,Z=this.scales,q=Object.keys(Z).reduce((Y,w)=>{return Y[w]=!1,Y},{}),Q=[];if(J)Q=Q.concat(Object.keys(J).map((Y)=>{let w=J[Y],X=I7(Y,w),U=X==="r",B=X==="x";return{options:w,dposition:U?"chartArea":B?"bottom":"left",dtype:U?"radialLinear":B?"category":"linear"}}));$0(Q,(Y)=>{let w=Y.options,X=w.id,U=I7(X,w),B=p(w.type,Y.dtype);if(w.position===void 0||SJ(w.position,U)!==SJ(Y.dposition))w.position=Y.dposition;q[X]=!0;let G=null;if(X in Z&&Z[X].type===B)G=Z[X];else G=new(T1.getScale(B))({id:X,type:B,ctx:this.ctx,chart:this}),Z[G.id]=G;G.init(w,$)}),$0(q,(Y,w)=>{if(!Y)delete Z[w]}),$0(Z,(Y)=>{s1.configure(this,Y,Y.options),s1.addBox(this,Y)})}_updateMetasets(){let $=this._metasets,J=this.data.datasets.length,Z=$.length;if($.sort((q,Q)=>q.index-Q.index),Z>J){for(let q=J;q<Z;++q)this._destroyDatasetMeta(q);$.splice(J,Z-J)}this._sortedMetasets=$.slice(0).sort(CJ("order","index"))}_removeUnreferencedMetasets(){let{_metasets:$,data:{datasets:J}}=this;if($.length>J.length)delete this._stacks;$.forEach((Z,q)=>{if(J.filter((Q)=>Q===Z._dataset).length===0)this._destroyDatasetMeta(q)})}buildOrUpdateControllers(){let $=[],J=this.data.datasets,Z,q;this._removeUnreferencedMetasets();for(Z=0,q=J.length;Z<q;Z++){let Q=J[Z],Y=this.getDatasetMeta(Z),w=Q.type||this.config.type;if(Y.type&&Y.type!==w)this._destroyDatasetMeta(Z),Y=this.getDatasetMeta(Z);if(Y.type=w,Y.indexAxis=Q.indexAxis||V7(w,this.options),Y.order=Q.order||0,Y.index=Z,Y.label=""+Q.label,Y.visible=this.isDatasetVisible(Z),Y.controller)Y.controller.updateIndex(Z),Y.controller.linkScales();else{let X=T1.getController(w),{datasetElementType:U,dataElementType:B}=z0.datasets[w];Object.assign(X,{dataElementType:T1.getElement(B),datasetElementType:U&&T1.getElement(U)}),Y.controller=new X(this,Z),$.push(Y.controller)}}return this._updateMetasets(),$}_resetElements(){$0(this.data.datasets,($,J)=>{this.getDatasetMeta(J).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update($){let J=this.config;J.update();let Z=this._options=J.createResolver(J.chartOptionScopes(),this.getContext()),q=this._animationsDisabled=!Z.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:$,cancelable:!0})===!1)return;let Q=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let Y=0;for(let U=0,B=this.data.datasets.length;U<B;U++){let{controller:G}=this.getDatasetMeta(U),T=!q&&Q.indexOf(G)===-1;G.buildOrUpdateElements(T),Y=Math.max(+G.getMaxOverflow(),Y)}if(Y=this._minPadding=Z.layout.autoPadding?Y:0,this._updateLayout(Y),!q)$0(Q,(U)=>{U.reset()});this._updateDatasets($),this.notifyPlugins("afterUpdate",{mode:$}),this._layers.sort(CJ("z","_idx"));let{_active:w,_lastEvent:X}=this;if(X)this._eventHandler(X,!0);else if(w.length)this._updateHoverStyles(w,w,!0);this.render()}_updateScales(){$0(this.scales,($)=>{s1.removeBox(this,$)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let $=this.options,J=new Set(Object.keys(this._listeners)),Z=new Set($.events);if(!o9(J,Z)||!!this._responsiveListeners!==$.responsive)this.unbindEvents(),this.bindEvents()}_updateHiddenIndices(){let{_hiddenIndices:$}=this,J=this._getUniformDataChanges()||[];for(let{method:Z,start:q,count:Q}of J){let Y=Z==="_removeElements"?-Q:Q;_K($,q,Y)}}_getUniformDataChanges(){let $=this._dataChanges;if(!$||!$.length)return;this._dataChanges=[];let J=this.data.datasets.length,Z=(Q)=>new Set($.filter((Y)=>Y[0]===Q).map((Y,w)=>w+","+Y.splice(1).join(","))),q=Z(0);for(let Q=1;Q<J;Q++)if(!o9(q,Z(Q)))return;return Array.from(q).map((Q)=>Q.split(",")).map((Q)=>({method:Q[1],start:+Q[2],count:+Q[3]}))}_updateLayout($){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;s1.update(this,this.width,this.height,$);let J=this.chartArea,Z=J.width<=0||J.height<=0;this._layers=[],$0(this.boxes,(q)=>{if(Z&&q.position==="chartArea")return;if(q.configure)q.configure();this._layers.push(...q._layers())},this),this._layers.forEach((q,Q)=>{q._idx=Q}),this.notifyPlugins("afterLayout")}_updateDatasets($){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:$,cancelable:!0})===!1)return;for(let J=0,Z=this.data.datasets.length;J<Z;++J)this.getDatasetMeta(J).controller.configure();for(let J=0,Z=this.data.datasets.length;J<Z;++J)this._updateDataset(J,V1($)?$({datasetIndex:J}):$);this.notifyPlugins("afterDatasetsUpdate",{mode:$})}_updateDataset($,J){let Z=this.getDatasetMeta($),q={meta:Z,index:$,mode:J,cancelable:!0};if(this.notifyPlugins("beforeDatasetUpdate",q)===!1)return;Z.controller._update(J),q.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",q)}render(){if(this.notifyPlugins("beforeRender",{cancelable:!0})===!1)return;if(C1.has(this)){if(this.attached&&!C1.running(this))C1.start(this)}else this.draw(),NJ({chart:this})}draw(){let $;if(this._resizeBeforeDraw){let{width:Z,height:q}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(Z,q)}if(this.clear(),this.width<=0||this.height<=0)return;if(this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let J=this._layers;for($=0;$<J.length&&J[$].z<=0;++$)J[$].draw(this.chartArea);this._drawDatasets();for(;$<J.length;++$)J[$].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas($){let J=this._sortedMetasets,Z=[],q,Q;for(q=0,Q=J.length;q<Q;++q){let Y=J[q];if(!$||Y.visible)Z.push(Y)}return Z}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let $=this.getSortedVisibleDatasetMetas();for(let J=$.length-1;J>=0;--J)this._drawDataset($[J]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset($){let J=this.ctx,Z={meta:$,index:$.index,cancelable:!0},q=H7(this,$);if(this.notifyPlugins("beforeDatasetDraw",Z)===!1)return;if(q)V5(J,q);if($.controller.draw(),q)I5(J);Z.cancelable=!1,this.notifyPlugins("afterDatasetDraw",Z)}isPointInArea($){return U1($,this.chartArea,this._minPadding)}getElementsAtEventForMode($,J,Z,q){let Q=PX.modes[J];if(typeof Q==="function")return Q(this,$,Z,q);return[]}getDatasetMeta($){let J=this.data.datasets[$],Z=this._metasets,q=Z.filter((Q)=>Q&&Q._dataset===J).pop();if(!q)q={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:J&&J.order||0,index:$,_dataset:J,_parsed:[],_sorted:!1},Z.push(q);return q}getContext(){return this.$context||(this.$context=S1(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible($){let J=this.data.datasets[$];if(!J)return!1;let Z=this.getDatasetMeta($);return typeof Z.hidden==="boolean"?!Z.hidden:!J.hidden}setDatasetVisibility($,J){let Z=this.getDatasetMeta($);Z.hidden=!J}toggleDataVisibility($){this._hiddenIndices[$]=!this._hiddenIndices[$]}getDataVisibility($){return!this._hiddenIndices[$]}_updateVisibility($,J,Z){let q=Z?"show":"hide",Q=this.getDatasetMeta($),Y=Q.controller._resolveAnimations(void 0,q);if(L5(J))Q.data[J].hidden=!Z,this.update();else this.setDatasetVisibility($,Z),Y.update(Q,{visible:Z}),this.update((w)=>w.datasetIndex===$?q:void 0)}hide($,J){this._updateVisibility($,J,!1)}show($,J){this._updateVisibility($,J,!0)}_destroyDatasetMeta($){let J=this._metasets[$];if(J&&J.controller)J.controller._destroy();delete this._metasets[$]}_stop(){let $,J;this.stop(),C1.remove(this);for($=0,J=this.data.datasets.length;$<J;++$)this._destroyDatasetMeta($)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:$,ctx:J}=this;if(this._stop(),this.config.clearCache(),$)this.unbindEvents(),Q7($,J),this.platform.releaseContext(J),this.canvas=null,this.ctx=null;delete B8[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...$){return this.canvas.toDataURL(...$)}bindEvents(){if(this.bindUserEvents(),this.options.responsive)this.bindResponsiveEvents();else this.attached=!0}bindUserEvents(){let $=this._listeners,J=this.platform,Z=(Q,Y)=>{J.addEventListener(this,Q,Y),$[Q]=Y},q=(Q,Y,w)=>{Q.offsetX=Y,Q.offsetY=w,this._eventHandler(Q)};$0(this.options.events,(Q)=>Z(Q,q))}bindResponsiveEvents(){if(!this._responsiveListeners)this._responsiveListeners={};let $=this._responsiveListeners,J=this.platform,Z=(X,U)=>{J.addEventListener(this,X,U),$[X]=U},q=(X,U)=>{if($[X])J.removeEventListener(this,X,U),delete $[X]},Q=(X,U)=>{if(this.canvas)this.resize(X,U)},Y,w=()=>{q("attach",w),this.attached=!0,this.resize(),Z("resize",Q),Z("detach",Y)};if(Y=()=>{this.attached=!1,q("resize",Q),this._stop(),this._resize(0,0),Z("attach",w)},J.isAttached(this.canvas))w();else Y()}unbindEvents(){$0(this._listeners,($,J)=>{this.platform.removeEventListener(this,J,$)}),this._listeners={},$0(this._responsiveListeners,($,J)=>{this.platform.removeEventListener(this,J,$)}),this._responsiveListeners=void 0}updateHoverStyle($,J,Z){let q=Z?"set":"remove",Q,Y,w,X;if(J==="dataset")Q=this.getDatasetMeta($[0].datasetIndex),Q.controller["_"+q+"DatasetHoverStyle"]();for(w=0,X=$.length;w<X;++w){Y=$[w];let U=Y&&this.getDatasetMeta(Y.datasetIndex).controller;if(U)U[q+"HoverStyle"](Y.element,Y.datasetIndex,Y.index)}}getActiveElements(){return this._active||[]}setActiveElements($){let J=this._active||[],Z=$.map(({datasetIndex:Q,index:Y})=>{let w=this.getDatasetMeta(Q);if(!w)throw new Error("No dataset found at index "+Q);return{datasetIndex:Q,element:w.data[Y],index:Y}});if(!_5(Z,J))this._active=Z,this._lastEvent=null,this._updateHoverStyles(Z,J)}notifyPlugins($,J,Z){return this._plugins.notify(this,$,J,Z)}isPluginEnabled($){return this._plugins._cache.filter((J)=>J.plugin.id===$).length===1}_updateHoverStyles($,J,Z){let q=this.options.hover,Q=(X,U)=>X.filter((B)=>!U.some((G)=>B.datasetIndex===G.datasetIndex&&B.index===G.index)),Y=Q(J,$),w=Z?$:Q($,J);if(Y.length)this.updateHoverStyle(Y,q.mode,!1);if(w.length&&q.mode)this.updateHoverStyle(w,q.mode,!0)}_eventHandler($,J){let Z={event:$,replay:J,cancelable:!0,inChartArea:this.isPointInArea($)},q=(Y)=>(Y.options.events||this.options.events).includes($.native.type);if(this.notifyPlugins("beforeEvent",Z,q)===!1)return;let Q=this._handleEvent($,J,Z.inChartArea);if(Z.cancelable=!1,this.notifyPlugins("afterEvent",Z,q),Q||Z.changed)this.render();return this}_handleEvent($,J,Z){let{_active:q=[],options:Q}=this,Y=J,w=this._getActiveElements($,q,Z,Y),X=A3($),U=LK($,this._lastEvent,Z,X);if(Z){if(this._lastEvent=null,q0(Q.onHover,[$,w,this],this),X)q0(Q.onClick,[$,w,this],this)}let B=!_5(w,q);if(B||J)this._active=w,this._updateHoverStyles(w,q,J);return this._lastEvent=U,B}_getActiveElements($,J,Z,q){if($.type==="mouseout")return[];if(!Z)return J;let Q=this.options.hover;return this.getElementsAtEventForMode($,Q.mode,Q,q)}}function OJ(){return $0(M2.instances,($)=>$._plugins.invalidate())}function DK($,J,Z){let{startAngle:q,x:Q,y:Y,outerRadius:w,innerRadius:X,options:U}=J,{borderWidth:B,borderJoinStyle:G}=U,T=Math.min(B/w,O0(q-Z));if($.beginPath(),$.arc(Q,Y,w-B/2,q+T/2,Z-T/2),X>0){let M=Math.min(B/X,O0(q-Z));$.arc(Q,Y,X+B/2,Z-M/2,q+M/2,!0)}else{let M=Math.min(B/2,w*O0(q-Z));if(G==="round")$.arc(Q,Y,M,Z-t/2,q+t/2,!0);else if(G==="bevel"){let z=2*M*M,F=-z*Math.cos(Z+t/2)+Q,H=-z*Math.sin(Z+t/2)+Y,W=z*Math.cos(q+t/2)+Q,j=z*Math.sin(q+t/2)+Y;$.lineTo(F,H),$.lineTo(W,j)}}$.closePath(),$.moveTo(0,0),$.rect(0,0,$.canvas.width,$.canvas.height),$.clip("evenodd")}function PK($,J,Z){let{startAngle:q,pixelMargin:Q,x:Y,y:w,outerRadius:X,innerRadius:U}=J,B=Q/X;if($.beginPath(),$.arc(Y,w,X,q-B,Z+B),U>Q)B=Q/U,$.arc(Y,w,U,Z+B,q-B,!0);else $.arc(Y,w,Q,Z+H0,q-H0);$.closePath(),$.clip()}function VK($){return e4($,["outerStart","outerEnd","innerStart","innerEnd"])}function IK($,J,Z,q){let Q=VK($.options.borderRadius),Y=(Z-J)/2,w=Math.min(Y,q*J/2),X=(U)=>{let B=(Z-Math.min(Y,U))*q/2;return f0(U,0,Math.min(Y,B))};return{outerStart:X(Q.outerStart),outerEnd:X(Q.outerEnd),innerStart:f0(Q.innerStart,0,w),innerEnd:f0(Q.innerEnd,0,w)}}function d2($,J,Z,q){return{x:Z+$*Math.cos(J),y:q+$*Math.sin(J)}}function T8($,J,Z,q,Q,Y){let{x:w,y:X,startAngle:U,pixelMargin:B,innerRadius:G}=J,T=Math.max(J.outerRadius+q+Z-B,0),M=G>0?G+q+Z+B:0,z=0,F=Q-U;if(q){let n=G>0?G-q:0,J0=T>0?T-q:0,F0=(n+J0)/2,k=F0!==0?F*F0/(F0+q):F;z=(F-k)/2}let H=Math.max(0.001,F*T-Z/t)/T,W=(F-H)/2,j=U+W+z,_=Q-W-z,{outerStart:V,outerEnd:D,innerStart:L,innerEnd:C}=IK(J,M,T,_-j),S=T-V,P=T-D,I=j+V/S,v=_-D/P,b=M+L,Q0=M+C,k0=j+L/b,Z0=_-C/Q0;if($.beginPath(),Y){let n=(I+v)/2;if($.arc(w,X,T,I,n),$.arc(w,X,T,n,v),D>0){let W0=d2(P,v,w,X);$.arc(W0.x,W0.y,D,v,_+H0)}let J0=d2(Q0,_,w,X);if($.lineTo(J0.x,J0.y),C>0){let W0=d2(Q0,Z0,w,X);$.arc(W0.x,W0.y,C,_+H0,Z0+Math.PI)}let F0=(_-C/M+(j+L/M))/2;if($.arc(w,X,M,_-C/M,F0,!0),$.arc(w,X,M,F0,j+L/M,!0),L>0){let W0=d2(b,k0,w,X);$.arc(W0.x,W0.y,L,k0+Math.PI,j-H0)}let k=d2(S,j,w,X);if($.lineTo(k.x,k.y),V>0){let W0=d2(S,I,w,X);$.arc(W0.x,W0.y,V,j-H0,I)}}else{$.moveTo(w,X);let n=Math.cos(I)*T+w,J0=Math.sin(I)*T+X;$.lineTo(n,J0);let F0=Math.cos(v)*T+w,k=Math.sin(v)*T+X;$.lineTo(F0,k)}$.closePath()}function SK($,J,Z,q,Q){let{fullCircles:Y,startAngle:w,circumference:X}=J,U=J.endAngle;if(Y){T8($,J,Z,q,U,Q);for(let B=0;B<Y;++B)$.fill();if(!isNaN(X))U=w+(X%X0||X0)}return T8($,J,Z,q,U,Q),$.fill(),U}function CK($,J,Z,q,Q){let{fullCircles:Y,startAngle:w,circumference:X,options:U}=J,{borderWidth:B,borderJoinStyle:G,borderDash:T,borderDashOffset:M,borderRadius:z}=U,F=U.borderAlign==="inner";if(!B)return;if($.setLineDash(T||[]),$.lineDashOffset=M,F)$.lineWidth=B*2,$.lineJoin=G||"round";else $.lineWidth=B,$.lineJoin=G||"bevel";let H=J.endAngle;if(Y){T8($,J,Z,q,H,Q);for(let W=0;W<Y;++W)$.stroke();if(!isNaN(X))H=w+(X%X0||X0)}if(F)PK($,J,H);if(U.selfJoin&&H-w>=t&&z===0&&G!=="miter")DK($,J,H);if(!Y)T8($,J,Z,q,H,Q),$.stroke()}class u7 extends o1{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:($)=>$!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor($){super();if(this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,$)Object.assign(this,$)}inRange($,J,Z){let q=this.getProps(["x","y"],Z),{angle:Q,distance:Y}=a9(q,{x:$,y:J}),{startAngle:w,endAngle:X,innerRadius:U,outerRadius:B,circumference:G}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],Z),T=(this.options.spacing+this.options.borderWidth)/2,M=p(G,X-w),z=m2(Q,w,X)&&w!==X,F=M>=X0||z,H=d1(Y,U+T,B+T);return F&&H}getCenterPoint($){let{x:J,y:Z,startAngle:q,endAngle:Q,innerRadius:Y,outerRadius:w}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],$),{offset:X,spacing:U}=this.options,B=(q+Q)/2,G=(Y+w+U+X)/2;return{x:J+Math.cos(B)*G,y:Z+Math.sin(B)*G}}tooltipPosition($){return this.getCenterPoint($)}draw($){let{options:J,circumference:Z}=this,q=(J.offset||0)/4,Q=(J.spacing||0)/2,Y=J.circular;if(this.pixelMargin=J.borderAlign==="inner"?0.33:0,this.fullCircles=Z>X0?Math.floor(Z/X0):0,Z===0||this.innerRadius<0||this.outerRadius<0)return;$.save();let w=(this.startAngle+this.endAngle)/2;$.translate(Math.cos(w)*q,Math.sin(w)*q);let X=1-Math.sin(Math.min(t,Z||0)),U=q*X;$.fillStyle=J.backgroundColor,$.strokeStyle=J.borderColor,SK($,this,U,Q,Y),CK($,this,U,Q,Y),$.restore()}}function HZ($,J,Z=J){$.lineCap=p(Z.borderCapStyle,J.borderCapStyle),$.setLineDash(p(Z.borderDash,J.borderDash)),$.lineDashOffset=p(Z.borderDashOffset,J.borderDashOffset),$.lineJoin=p(Z.borderJoinStyle,J.borderJoinStyle),$.lineWidth=p(Z.borderWidth,J.borderWidth),$.strokeStyle=p(Z.borderColor,J.borderColor)}function NK($,J,Z){$.lineTo(Z.x,Z.y)}function AK($){if($.stepped)return c3;if($.tension||$.cubicInterpolationMode==="monotone")return s3;return NK}function FZ($,J,Z={}){let q=$.length,{start:Q=0,end:Y=q-1}=Z,{start:w,end:X}=J,U=Math.max(Q,w),B=Math.min(Y,X),G=Q<w&&Y<w||Q>X&&Y>X;return{count:q,start:U,loop:J.loop,ilen:B<U&&!G?q+B-U:B-U}}function OK($,J,Z,q){let{points:Q,options:Y}=J,{count:w,start:X,loop:U,ilen:B}=FZ(Q,Z,q),G=AK(Y),{move:T=!0,reverse:M}=q||{},z,F,H;for(z=0;z<=B;++z){if(F=Q[(X+(M?B-z:z))%w],F.skip)continue;else if(T)$.moveTo(F.x,F.y),T=!1;else G($,H,F,M,Y.stepped);H=F}if(U)F=Q[(X+(M?B:0))%w],G($,H,F,M,Y.stepped);return!!U}function kK($,J,Z,q){let Q=J.points,{count:Y,start:w,ilen:X}=FZ(Q,Z,q),{move:U=!0,reverse:B}=q||{},G=0,T=0,M,z,F,H,W,j,_=(D)=>(w+(B?X-D:D))%Y,V=()=>{if(H!==W)$.lineTo(G,W),$.lineTo(G,H),$.lineTo(G,j)};if(U)z=Q[_(0)],$.moveTo(z.x,z.y);for(M=0;M<=X;++M){if(z=Q[_(M)],z.skip)continue;let{x:D,y:L}=z,C=D|0;if(C===F){if(L<H)H=L;else if(L>W)W=L;G=(T*G+D)/++T}else V(),$.lineTo(D,L),F=C,T=0,H=W=L;j=L}V()}function S7($){let J=$.options,Z=J.borderDash&&J.borderDash.length;return!$._decimated&&!$._loop&&!J.tension&&J.cubicInterpolationMode!=="monotone"&&!J.stepped&&!Z?kK:OK}function fK($){if($.stepped)return ZJ;if($.tension||$.cubicInterpolationMode==="monotone")return qJ;return h1}function bK($,J,Z,q){let Q=J._path;if(!Q){if(Q=J._path=new Path2D,J.path(Q,Z,q))Q.closePath()}HZ($,J.options),$.stroke(Q)}function vK($,J,Z,q){let{segments:Q,options:Y}=J,w=S7(J);for(let X of Q){if(HZ($,Y,X.style),$.beginPath(),w($,J,X,{start:Z,end:Z+q-1}))$.closePath();$.stroke()}}var yK=typeof Path2D==="function";function EK($,J,Z,q){if(yK&&!J.options.segment)bK($,J,Z,q);else vK($,J,Z,q)}class p2 extends o1{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:($)=>$!=="borderDash"&&$!=="fill"};constructor($){super();if(this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,$)Object.assign(this,$)}updateControlPoints($,J){let Z=this.options;if((Z.tension||Z.cubicInterpolationMode==="monotone")&&!Z.stepped&&!this._pointsUpdated){let q=Z.spanGaps?this._loop:this._fullLoop;e3(this._points,Z,$,q,J),this._pointsUpdated=!0}}set points($){this._points=$,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=YJ(this,this.options.segment))}first(){let $=this.segments,J=this.points;return $.length&&J[$[0].start]}last(){let $=this.segments,J=this.points,Z=$.length;return Z&&J[$[Z-1].end]}interpolate($,J){let Z=this.options,q=$[J],Q=this.points,Y=z7(this,{property:J,start:q,end:q});if(!Y.length)return;let w=[],X=fK(Z),U,B;for(U=0,B=Y.length;U<B;++U){let{start:G,end:T}=Y[U],M=Q[G],z=Q[T];if(M===z){w.push(M);continue}let F=Math.abs((q-M[J])/(z[J]-M[J])),H=X(M,z,F,Z.stepped);H[J]=$[J],w.push(H)}return w.length===1?w[0]:w}pathSegment($,J,Z){return S7(this)($,this,J,Z)}path($,J,Z){let q=this.segments,Q=S7(this),Y=this._loop;J=J||0,Z=Z||this.points.length-J;for(let w of q)Y&=Q($,this,w,{start:J,end:J+Z-1});return!!Y}draw($,J,Z,q){let Q=this.options||{};if((this.points||[]).length&&Q.borderWidth)$.save(),EK($,this,Z,q),$.restore();if(this.animated)this._pointsUpdated=!1,this._path=void 0}}function kJ($,J,Z,q){let Q=$.options,{[Z]:Y}=$.getProps([Z],q);return Math.abs(J-Y)<Q.radius+Q.hitRadius}class g7 extends o1{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor($){super();if(this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,$)Object.assign(this,$)}inRange($,J,Z){let q=this.options,{x:Q,y:Y}=this.getProps(["x","y"],Z);return Math.pow($-Q,2)+Math.pow(J-Y,2)<Math.pow(q.hitRadius+q.radius,2)}inXRange($,J){return kJ(this,$,"x",J)}inYRange($,J){return kJ(this,$,"y",J)}getCenterPoint($){let{x:J,y:Z}=this.getProps(["x","y"],$);return{x:J,y:Z}}size($){$=$||this.options||{};let J=$.radius||0;J=Math.max(J,J&&$.hoverRadius||0);let Z=J&&$.borderWidth||0;return(J+Z)*2}draw($,J){let Z=this.options;if(this.skip||Z.radius<0.1||!U1(this,J,this.size(Z)/2))return;$.strokeStyle=Z.borderColor,$.lineWidth=Z.borderWidth,$.fillStyle=Z.backgroundColor,t4($,Z,this.x,this.y)}getRange(){let $=this.options||{};return $.radius+$.hitRadius}}function uK($,J,Z){let{segments:q,points:Q}=$,Y=J.points,w=[];for(let X of q){let{start:U,end:B}=X;B=z8(U,B,Q);let G=C7(Z,Q[U],Q[B],X.loop);if(!J.segments){w.push({source:X,target:G,start:Q[U],end:Q[B]});continue}let T=z7(J,G);for(let M of T){let z=C7(Z,Y[M.start],Y[M.end],M.loop),F=M7(X,Q,z);for(let H of F)w.push({source:H,target:M,start:{[Z]:fJ(G,z,"start",Math.max)},end:{[Z]:fJ(G,z,"end",Math.min)}})}}return w}function C7($,J,Z,q){if(q)return;let Q=J[$],Y=Z[$];if($==="angle")Q=O0(Q),Y=O0(Y);return{property:$,start:Q,end:Y}}function gK($,J){let{x:Z=null,y:q=null}=$||{},Q=J.points,Y=[];return J.segments.forEach(({start:w,end:X})=>{X=z8(w,X,Q);let U=Q[w],B=Q[X];if(q!==null)Y.push({x:U.x,y:q}),Y.push({x:B.x,y:q});else if(Z!==null)Y.push({x:Z,y:U.y}),Y.push({x:Z,y:B.y})}),Y}function z8($,J,Z){for(;J>$;J--){let q=Z[J];if(!isNaN(q.x)&&!isNaN(q.y))break}return J}function fJ($,J,Z,q){if($&&J)return q($[Z],J[Z]);return $?$[Z]:J?J[Z]:0}function WZ($,J){let Z=[],q=!1;if(G0($))q=!0,Z=$;else Z=gK($,J);return Z.length?new p2({points:Z,options:{tension:0},_loop:q,_fullLoop:q}):null}function bJ($){return $&&$.fill!==!1}function hK($,J,Z){let Q=$[J].fill,Y=[J],w;if(!Z)return Q;while(Q!==!1&&Y.indexOf(Q)===-1){if(!M0(Q))return Q;if(w=$[Q],!w)return!1;if(w.visible)return Q;Y.push(Q),Q=w.fill}return!1}function xK($,J,Z){let q=rK($);if(o(q))return isNaN(q.value)?!1:q;let Q=parseFloat(q);if(M0(Q)&&Math.floor(Q)===Q)return mK(q[0],J,Q,Z);return["origin","start","end","stack","shape"].indexOf(q)>=0&&q}function mK($,J,Z,q){if($==="-"||$==="+")Z=J+Z;if(Z===J||Z<0||Z>=q)return!1;return Z}function dK($,J){let Z=null;if($==="start")Z=J.bottom;else if($==="end")Z=J.top;else if(o($))Z=J.getPixelForValue($.value);else if(J.getBasePixel)Z=J.getBasePixel();return Z}function pK($,J,Z){let q;if($==="start")q=Z;else if($==="end")q=J.options.reverse?J.min:J.max;else if(o($))q=$.value;else q=J.getBaseValue();return q}function rK($){let J=$.options,Z=J.fill,q=p(Z&&Z.target,Z);if(q===void 0)q=!!J.backgroundColor;if(q===!1||q===null)return!1;if(q===!0)return"origin";return q}function cK($){let{scale:J,index:Z,line:q}=$,Q=[],Y=q.segments,w=q.points,X=sK(J,Z);X.push(WZ({x:null,y:J.bottom},q));for(let U=0;U<Y.length;U++){let B=Y[U];for(let G=B.start;G<=B.end;G++)oK(Q,w[G],X)}return new p2({points:Q,options:{}})}function sK($,J){let Z=[],q=$.getMatchingVisibleMetas("line");for(let Q=0;Q<q.length;Q++){let Y=q[Q];if(Y.index===J)break;if(!Y.hidden)Z.unshift(Y.dataset)}return Z}function oK($,J,Z){let q=[];for(let Q=0;Q<Z.length;Q++){let Y=Z[Q],{first:w,last:X,point:U}=lK(Y,J,"x");if(!U||w&&X)continue;if(w)q.unshift(U);else if($.push(U),!X)break}$.push(...q)}function lK($,J,Z){let q=$.interpolate(J,Z);if(!q)return{};let Q=q[Z],Y=$.segments,w=$.points,X=!1,U=!1;for(let B=0;B<Y.length;B++){let G=Y[B],T=w[G.start][Z],M=w[G.end][Z];if(d1(Q,T,M)){X=Q===T,U=Q===M;break}}return{first:X,last:U,point:q}}class h7{constructor($){this.x=$.x,this.y=$.y,this.radius=$.radius}pathSegment($,J,Z){let{x:q,y:Q,radius:Y}=this;return J=J||{start:0,end:X0},$.arc(q,Q,Y,J.end,J.start,!0),!Z.bounds}interpolate($){let{x:J,y:Z,radius:q}=this,Q=$.angle;return{x:J+Math.cos(Q)*q,y:Z+Math.sin(Q)*q,angle:Q}}}function iK($){let{chart:J,fill:Z,line:q}=$;if(M0(Z))return nK(J,Z);if(Z==="stack")return cK($);if(Z==="shape")return!0;let Q=aK($);if(Q instanceof h7)return Q;return WZ(Q,q)}function nK($,J){let Z=$.getDatasetMeta(J);return Z&&$.isDatasetVisible(J)?Z.dataset:null}function aK($){if(($.scale||{}).getPointPositionForValue)return eK($);return tK($)}function tK($){let{scale:J={},fill:Z}=$,q=dK(Z,J);if(M0(q)){let Q=J.isHorizontal();return{x:Q?q:null,y:Q?null:q}}return null}function eK($){let{scale:J,fill:Z}=$,q=J.options,Q=J.getLabels().length,Y=q.reverse?J.max:J.min,w=pK(Z,J,Y),X=[];if(q.grid.circular){let U=J.getPointPositionForValue(0,Y);return new h7({x:U.x,y:U.y,radius:J.getDistanceFromCenterForValue(w)})}for(let U=0;U<Q;++U)X.push(J.getPointPositionForValue(U,w));return X}function D7($,J,Z){let q=iK(J),{chart:Q,index:Y,line:w,scale:X,axis:U}=J,B=w.options,G=B.fill,T=B.backgroundColor,{above:M=T,below:z=T}=G||{},F=Q.getDatasetMeta(Y),H=H7(Q,F);if(q&&w.points.length)V5($,Z),$U($,{line:w,target:q,above:M,below:z,area:Z,scale:X,axis:U,clip:H}),I5($)}function $U($,J){let{line:Z,target:q,above:Q,below:Y,area:w,scale:X,clip:U}=J,B=Z._loop?"angle":J.axis;$.save();let G=Y;if(Y!==Q){if(B==="x")vJ($,q,w.top),P7($,{line:Z,target:q,color:Q,scale:X,property:B,clip:U}),$.restore(),$.save(),vJ($,q,w.bottom);else if(B==="y")yJ($,q,w.left),P7($,{line:Z,target:q,color:Y,scale:X,property:B,clip:U}),$.restore(),$.save(),yJ($,q,w.right),G=Q}P7($,{line:Z,target:q,color:G,scale:X,property:B,clip:U}),$.restore()}function vJ($,J,Z){let{segments:q,points:Q}=J,Y=!0,w=!1;$.beginPath();for(let X of q){let{start:U,end:B}=X,G=Q[U],T=Q[z8(U,B,Q)];if(Y)$.moveTo(G.x,G.y),Y=!1;else $.lineTo(G.x,Z),$.lineTo(G.x,G.y);if(w=!!J.pathSegment($,X,{move:w}),w)$.closePath();else $.lineTo(T.x,Z)}$.lineTo(J.first().x,Z),$.closePath(),$.clip()}function yJ($,J,Z){let{segments:q,points:Q}=J,Y=!0,w=!1;$.beginPath();for(let X of q){let{start:U,end:B}=X,G=Q[U],T=Q[z8(U,B,Q)];if(Y)$.moveTo(G.x,G.y),Y=!1;else $.lineTo(Z,G.y),$.lineTo(G.x,G.y);if(w=!!J.pathSegment($,X,{move:w}),w)$.closePath();else $.lineTo(Z,T.y)}$.lineTo(Z,J.first().y),$.closePath(),$.clip()}function P7($,J){let{line:Z,target:q,property:Q,color:Y,scale:w,clip:X}=J,U=uK(Z,q,Q);for(let{source:B,target:G,start:T,end:M}of U){let{style:{backgroundColor:z=Y}={}}=B,F=q!==!0;$.save(),$.fillStyle=z,JU($,w,X,F&&C7(Q,T,M)),$.beginPath();let H=!!Z.pathSegment($,B),W;if(F){if(H)$.closePath();else EJ($,q,M,Q);let j=!!q.pathSegment($,G,{move:H,reverse:!0});if(W=H&&j,!W)EJ($,q,T,Q)}$.closePath(),$.fill(W?"evenodd":"nonzero"),$.restore()}}function JU($,J,Z,q){let Q=J.chart.chartArea,{property:Y,start:w,end:X}=q||{};if(Y==="x"||Y==="y"){let U,B,G,T;if(Y==="x")U=w,B=Q.top,G=X,T=Q.bottom;else U=Q.left,B=w,G=Q.right,T=X;if($.beginPath(),Z)U=Math.max(U,Z.left),G=Math.min(G,Z.right),B=Math.max(B,Z.top),T=Math.min(T,Z.bottom);$.rect(U,B,G-U,T-B),$.clip()}}function EJ($,J,Z,q){let Q=J.interpolate(Z,q);if(Q)$.lineTo(Q.x,Q.y)}var jZ={id:"filler",afterDatasetsUpdate($,J,Z){let q=($.data.datasets||[]).length,Q=[],Y,w,X,U;for(w=0;w<q;++w){if(Y=$.getDatasetMeta(w),X=Y.dataset,U=null,X&&X.options&&X instanceof p2)U={visible:$.isDatasetVisible(w),index:w,fill:xK(X,w,q),chart:$,axis:Y.controller.options.indexAxis,scale:Y.vScale,line:X};Y.$filler=U,Q.push(U)}for(w=0;w<q;++w){if(U=Q[w],!U||U.fill===!1)continue;U.fill=hK(Q,w,Z.propagate)}},beforeDraw($,J,Z){let q=Z.drawTime==="beforeDraw",Q=$.getSortedVisibleDatasetMetas(),Y=$.chartArea;for(let w=Q.length-1;w>=0;--w){let X=Q[w].$filler;if(!X)continue;if(X.line.updateControlPoints(Y,X.axis),q&&X.fill)D7($.ctx,X,Y)}},beforeDatasetsDraw($,J,Z){if(Z.drawTime!=="beforeDatasetsDraw")return;let q=$.getSortedVisibleDatasetMetas();for(let Q=q.length-1;Q>=0;--Q){let Y=q[Q].$filler;if(bJ(Y))D7($.ctx,Y,$.chartArea)}},beforeDatasetDraw($,J,Z){let q=J.meta.$filler;if(!bJ(q)||Z.drawTime!=="beforeDatasetDraw")return;D7($.ctx,q,$.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},uJ=($,J)=>{let{boxHeight:Z=J,boxWidth:q=J}=$;if($.usePointStyle)Z=Math.min(Z,J),q=$.pointStyleWidth||Math.min(q,J);return{boxWidth:q,boxHeight:Z,itemHeight:Math.max(J,Z)}},ZU=($,J)=>$!==null&&J!==null&&$.datasetIndex===J.datasetIndex&&$.index===J.index;class N7 extends o1{constructor($){super();this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=$.chart,this.options=$.options,this.ctx=$.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update($,J,Z){this.maxWidth=$,this.maxHeight=J,this._margins=Z,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){if(this.isHorizontal())this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width;else this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height}buildLabels(){let $=this.options.labels||{},J=q0($.generateLabels,[this.chart],this)||[];if($.filter)J=J.filter((Z)=>$.filter(Z,this.chart.data));if($.sort)J=J.sort((Z,q)=>$.sort(Z,q,this.chart.data));if(this.options.reverse)J.reverse();this.legendItems=J}fit(){let{options:$,ctx:J}=this;if(!$.display){this.width=this.height=0;return}let Z=$.labels,q=C0(Z.font),Q=q.size,Y=this._computeTitleHeight(),{boxWidth:w,itemHeight:X}=uJ(Z,Q),U,B;if(J.font=q.string,this.isHorizontal())U=this.maxWidth,B=this._fitRows(Y,Q,w,X)+10;else B=this.maxHeight,U=this._fitCols(Y,q,w,X)+10;this.width=Math.min(U,$.maxWidth||this.maxWidth),this.height=Math.min(B,$.maxHeight||this.maxHeight)}_fitRows($,J,Z,q){let{ctx:Q,maxWidth:Y,options:{labels:{padding:w}}}=this,X=this.legendHitBoxes=[],U=this.lineWidths=[0],B=q+w,G=$;Q.textAlign="left",Q.textBaseline="middle";let T=-1,M=-B;return this.legendItems.forEach((z,F)=>{let H=Z+J/2+Q.measureText(z.text).width;if(F===0||U[U.length-1]+H+2*w>Y)G+=B,U[U.length-(F>0?0:1)]=0,M+=B,T++;X[F]={left:0,top:M,row:T,width:H,height:q},U[U.length-1]+=H+w}),G}_fitCols($,J,Z,q){let{ctx:Q,maxHeight:Y,options:{labels:{padding:w}}}=this,X=this.legendHitBoxes=[],U=this.columnSizes=[],B=Y-$,G=w,T=0,M=0,z=0,F=0;return this.legendItems.forEach((H,W)=>{let{itemWidth:j,itemHeight:_}=qU(Z,J,Q,H,q);if(W>0&&M+_+2*w>B)G+=T+w,U.push({width:T,height:M}),z+=T+w,F++,T=M=0;X[W]={left:z,top:M,col:F,width:j,height:_},T=Math.max(T,j),M+=_+w}),G+=T,U.push({width:T,height:M}),G}adjustHitBoxes(){if(!this.options.display)return;let $=this._computeTitleHeight(),{legendHitBoxes:J,options:{align:Z,labels:{padding:q},rtl:Q}}=this,Y=U2(Q,this.left,this.width);if(this.isHorizontal()){let w=0,X=g0(Z,this.left+q,this.right-this.lineWidths[w]);for(let U of J){if(w!==U.row)w=U.row,X=g0(Z,this.left+q,this.right-this.lineWidths[w]);U.top+=this.top+$+q,U.left=Y.leftForLtr(Y.x(X),U.width),X+=U.width+q}}else{let w=0,X=g0(Z,this.top+$+q,this.bottom-this.columnSizes[w].height);for(let U of J){if(U.col!==w)w=U.col,X=g0(Z,this.top+$+q,this.bottom-this.columnSizes[w].height);U.top=X,U.left+=this.left+q,U.left=Y.leftForLtr(Y.x(U.left),U.width),X+=U.height+q}}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let $=this.ctx;V5($,this),this._draw(),I5($)}}_draw(){let{options:$,columnSizes:J,lineWidths:Z,ctx:q}=this,{align:Q,labels:Y}=$,w=z0.color,X=U2($.rtl,this.left,this.width),U=C0(Y.font),{padding:B}=Y,G=U.size,T=G/2,M;this.drawTitle(),q.textAlign=X.textAlign("left"),q.textBaseline="middle",q.lineWidth=0.5,q.font=U.string;let{boxWidth:z,boxHeight:F,itemHeight:H}=uJ(Y,G),W=function(L,C,S){if(isNaN(z)||z<=0||isNaN(F)||F<0)return;q.save();let P=p(S.lineWidth,1);if(q.fillStyle=p(S.fillStyle,w),q.lineCap=p(S.lineCap,"butt"),q.lineDashOffset=p(S.lineDashOffset,0),q.lineJoin=p(S.lineJoin,"miter"),q.lineWidth=P,q.strokeStyle=p(S.strokeStyle,w),q.setLineDash(p(S.lineDash,[])),Y.usePointStyle){let I={radius:F*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:P},v=X.xPlus(L,z/2),b=C+T;Y7(q,I,v,b,Y.pointStyleWidth&&z)}else{let I=C+Math.max((G-F)/2,0),v=X.leftForLtr(L,z),b=K2(S.borderRadius);if(q.beginPath(),Object.values(b).some((Q0)=>Q0!==0))S5(q,{x:v,y:I,w:z,h:F,radius:b});else q.rect(v,I,z,F);if(q.fill(),P!==0)q.stroke()}q.restore()},j=function(L,C,S){X2(q,S.text,L,C+H/2,U,{strikethrough:S.hidden,textAlign:X.textAlign(S.textAlign)})},_=this.isHorizontal(),V=this._computeTitleHeight();if(_)M={x:g0(Q,this.left+B,this.right-Z[0]),y:this.top+B+V,line:0};else M={x:this.left+B,y:g0(Q,this.top+V+B,this.bottom-J[0].height),line:0};G7(this.ctx,$.textDirection);let D=H+B;this.legendItems.forEach((L,C)=>{q.strokeStyle=L.fontColor,q.fillStyle=L.fontColor;let S=q.measureText(L.text).width,P=X.textAlign(L.textAlign||(L.textAlign=Y.textAlign)),I=z+T+S,v=M.x,b=M.y;if(X.setWidth(this.width),_){if(C>0&&v+I+B>this.right)b=M.y+=D,M.line++,v=M.x=g0(Q,this.left+B,this.right-Z[M.line])}else if(C>0&&b+D>this.bottom)v=M.x=v+J[M.line].width+B,M.line++,b=M.y=g0(Q,this.top+V+B,this.bottom-J[M.line].height);let Q0=X.x(v);if(W(Q0,b,L),v=h3(P,v+z+T,_?v+I:this.right,$.rtl),j(X.x(v),b,L),_)M.x+=I+B;else if(typeof L.text!=="string"){let k0=U.lineHeight;M.y+=RZ(L,k0)+B}else M.y+=D}),T7(this.ctx,$.textDirection)}drawTitle(){let $=this.options,J=$.title,Z=C0(J.font),q=b0(J.padding);if(!J.display)return;let Q=U2($.rtl,this.left,this.width),Y=this.ctx,w=J.position,X=Z.size/2,U=q.top+X,B,G=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),B=this.top+U,G=g0($.align,G,this.right-T);else{let z=this.columnSizes.reduce((F,H)=>Math.max(F,H.height),0);B=U+g0($.align,this.top,this.bottom-z-$.labels.padding-this._computeTitleHeight())}let M=g0(w,G,G+T);Y.textAlign=Q.textAlign(J7(w)),Y.textBaseline="middle",Y.strokeStyle=J.color,Y.fillStyle=J.color,Y.font=Z.string,X2(Y,J.text,M,B,Z)}_computeTitleHeight(){let $=this.options.title,J=C0($.font),Z=b0($.padding);return $.display?J.lineHeight+Z.height:0}_getLegendItemAt($,J){let Z,q,Q;if(d1($,this.left,this.right)&&d1(J,this.top,this.bottom)){Q=this.legendHitBoxes;for(Z=0;Z<Q.length;++Z)if(q=Q[Z],d1($,q.left,q.left+q.width)&&d1(J,q.top,q.top+q.height))return this.legendItems[Z]}return null}handleEvent($){let J=this.options;if(!wU($.type,J))return;let Z=this._getLegendItemAt($.x,$.y);if($.type==="mousemove"||$.type==="mouseout"){let q=this._hoveredItem,Q=ZU(q,Z);if(q&&!Q)q0(J.onLeave,[$,q,this],this);if(this._hoveredItem=Z,Z&&!Q)q0(J.onHover,[$,Z,this],this)}else if(Z)q0(J.onClick,[$,Z,this],this)}}function qU($,J,Z,q,Q){let Y=QU(q,$,J,Z),w=YU(Q,q,J.lineHeight);return{itemWidth:Y,itemHeight:w}}function QU($,J,Z,q){let Q=$.text;if(Q&&typeof Q!=="string")Q=Q.reduce((Y,w)=>Y.length>w.length?Y:w);return J+Z.size/2+q.measureText(Q).width}function YU($,J,Z){let q=$;if(typeof J.text!=="string")q=RZ(J,Z);return q}function RZ($,J){let Z=$.text?$.text.length:0;return J*Z}function wU($,J){if(($==="mousemove"||$==="mouseout")&&(J.onHover||J.onLeave))return!0;if(J.onClick&&($==="click"||$==="mouseup"))return!0;return!1}var _Z={id:"legend",_element:N7,start($,J,Z){let q=$.legend=new N7({ctx:$.ctx,options:Z,chart:$});s1.configure($,q,Z),s1.addBox($,q)},stop($){s1.removeBox($,$.legend),delete $.legend},beforeUpdate($,J,Z){let q=$.legend;s1.configure($,q,Z),q.options=Z},afterUpdate($){let J=$.legend;J.buildLabels(),J.adjustHitBoxes()},afterEvent($,J){if(!J.replay)$.legend.handleEvent(J.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1000,onClick($,J,Z){let q=J.datasetIndex,Q=Z.chart;if(Q.isDatasetVisible(q))Q.hide(q),J.hidden=!0;else Q.show(q),J.hidden=!1},onHover:null,onLeave:null,labels:{color:($)=>$.chart.options.color,boxWidth:40,padding:10,generateLabels($){let J=$.data.datasets,{labels:{usePointStyle:Z,pointStyle:q,textAlign:Q,color:Y,useBorderRadius:w,borderRadius:X}}=$.legend.options;return $._getSortedDatasetMetas().map((U)=>{let B=U.controller.getStyle(Z?0:void 0),G=b0(B.borderWidth);return{text:J[U.index].label,fillStyle:B.backgroundColor,fontColor:Y,hidden:!U.visible,lineCap:B.borderCapStyle,lineDash:B.borderDash,lineDashOffset:B.borderDashOffset,lineJoin:B.borderJoinStyle,lineWidth:(G.width+G.height)/4,strokeStyle:B.borderColor,pointStyle:q||B.pointStyle,rotation:B.rotation,textAlign:Q||B.textAlign,borderRadius:w&&(X||B.borderRadius),datasetIndex:U.index}},this)}},title:{color:($)=>$.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:($)=>!$.startsWith("on"),labels:{_scriptable:($)=>!["generateLabels","filter","sort"].includes($)}}};var y5={average($){if(!$.length)return!1;let J,Z,q=new Set,Q=0,Y=0;for(J=0,Z=$.length;J<Z;++J){let X=$[J].element;if(X&&X.hasValue()){let U=X.tooltipPosition();q.add(U.x),Q+=U.y,++Y}}if(Y===0||q.size===0)return!1;return{x:[...q].reduce((X,U)=>X+U)/q.size,y:Q/Y}},nearest($,J){if(!$.length)return!1;let{x:Z,y:q}=J,Q=Number.POSITIVE_INFINITY,Y,w,X;for(Y=0,w=$.length;Y<w;++Y){let U=$[Y].element;if(U&&U.hasValue()){let B=U.getCenterPoint(),G=s4(J,B);if(G<Q)Q=G,X=U}}if(X){let U=X.tooltipPosition();Z=U.x,q=U.y}return{x:Z,y:q}}};function G1($,J){if(J)if(G0(J))Array.prototype.push.apply($,J);else $.push(J);return $}function N1($){if((typeof $==="string"||$ instanceof String)&&$.indexOf(`
`)>-1)return $.split(`
`);return $}function XU($,J){let{element:Z,datasetIndex:q,index:Q}=J,Y=$.getDatasetMeta(q).controller,{label:w,value:X}=Y.getLabelAndValue(Q);return{chart:$,label:w,parsed:Y.getParsed(Q),raw:$.data.datasets[q].data[Q],formattedValue:X,dataset:Y.getDataset(),dataIndex:Q,datasetIndex:q,element:Z}}function gJ($,J){let Z=$.chart.ctx,{body:q,footer:Q,title:Y}=$,{boxWidth:w,boxHeight:X}=J,U=C0(J.bodyFont),B=C0(J.titleFont),G=C0(J.footerFont),T=Y.length,M=Q.length,z=q.length,F=b0(J.padding),H=F.height,W=0,j=q.reduce((D,L)=>D+L.before.length+L.lines.length+L.after.length,0);if(j+=$.beforeBody.length+$.afterBody.length,T)H+=T*B.lineHeight+(T-1)*J.titleSpacing+J.titleMarginBottom;if(j){let D=J.displayColors?Math.max(X,U.lineHeight):U.lineHeight;H+=z*D+(j-z)*U.lineHeight+(j-1)*J.bodySpacing}if(M)H+=J.footerMarginTop+M*G.lineHeight+(M-1)*J.footerSpacing;let _=0,V=function(D){W=Math.max(W,Z.measureText(D).width+_)};return Z.save(),Z.font=B.string,$0($.title,V),Z.font=U.string,$0($.beforeBody.concat($.afterBody),V),_=J.displayColors?w+2+J.boxPadding:0,$0(q,(D)=>{$0(D.before,V),$0(D.lines,V),$0(D.after,V)}),_=0,Z.font=G.string,$0($.footer,V),Z.restore(),W+=F.width,{width:W,height:H}}function KU($,J){let{y:Z,height:q}=J;if(Z<q/2)return"top";else if(Z>$.height-q/2)return"bottom";return"center"}function UU($,J,Z,q){let{x:Q,width:Y}=q,w=Z.caretSize+Z.caretPadding;if($==="left"&&Q+Y+w>J.width)return!0;if($==="right"&&Q-Y-w<0)return!0}function BU($,J,Z,q){let{x:Q,width:Y}=Z,{width:w,chartArea:{left:X,right:U}}=$,B="center";if(q==="center")B=Q<=(X+U)/2?"left":"right";else if(Q<=Y/2)B="left";else if(Q>=w-Y/2)B="right";if(UU(B,$,J,Z))B="center";return B}function hJ($,J,Z){let q=Z.yAlign||J.yAlign||KU($,Z);return{xAlign:Z.xAlign||J.xAlign||BU($,J,Z,q),yAlign:q}}function GU($,J){let{x:Z,width:q}=$;if(J==="right")Z-=q;else if(J==="center")Z-=q/2;return Z}function TU($,J,Z){let{y:q,height:Q}=$;if(J==="top")q+=Z;else if(J==="bottom")q-=Q+Z;else q-=Q/2;return q}function xJ($,J,Z,q){let{caretSize:Q,caretPadding:Y,cornerRadius:w}=$,{xAlign:X,yAlign:U}=Z,B=Q+Y,{topLeft:G,topRight:T,bottomLeft:M,bottomRight:z}=K2(w),F=GU(J,X),H=TU(J,U,B);if(U==="center"){if(X==="left")F+=B;else if(X==="right")F-=B}else if(X==="left")F-=Math.max(G,M)+Q;else if(X==="right")F+=Math.max(T,z)+Q;return{x:f0(F,0,q.width-J.width),y:f0(H,0,q.height-J.height)}}function X8($,J,Z){let q=b0(Z.padding);return J==="center"?$.x+$.width/2:J==="right"?$.x+$.width-q.right:$.x+q.left}function mJ($){return G1([],N1($))}function MU($,J,Z){return S1($,{tooltip:J,tooltipItems:Z,type:"tooltip"})}function dJ($,J){let Z=J&&J.dataset&&J.dataset.tooltip&&J.dataset.tooltip.callbacks;return Z?$.override(Z):$}var LZ={beforeTitle:B1,title($){if($.length>0){let J=$[0],Z=J.chart.data.labels,q=Z?Z.length:0;if(this&&this.options&&this.options.mode==="dataset")return J.dataset.label||"";else if(J.label)return J.label;else if(q>0&&J.dataIndex<q)return Z[J.dataIndex]}return""},afterTitle:B1,beforeBody:B1,beforeLabel:B1,label($){if(this&&this.options&&this.options.mode==="dataset")return $.label+": "+$.formattedValue||$.formattedValue;let J=$.dataset.label||"";if(J)J+=": ";let Z=$.formattedValue;if(!e(Z))J+=Z;return J},labelColor($){let Z=$.chart.getDatasetMeta($.datasetIndex).controller.getStyle($.dataIndex);return{borderColor:Z.borderColor,backgroundColor:Z.backgroundColor,borderWidth:Z.borderWidth,borderDash:Z.borderDash,borderDashOffset:Z.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle($){let Z=$.chart.getDatasetMeta($.datasetIndex).controller.getStyle($.dataIndex);return{pointStyle:Z.pointStyle,rotation:Z.rotation}},afterLabel:B1,afterBody:B1,beforeFooter:B1,footer:B1,afterFooter:B1};function h0($,J,Z,q){let Q=$[J].call(Z,q);if(typeof Q==="undefined")return LZ[J].call(Z,q);return Q}class A7 extends o1{static positioners=y5;constructor($){super();this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=$.chart,this.options=$.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize($){this.options=$,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let $=this._cachedAnimations;if($)return $;let J=this.chart,Z=this.options.setContext(this.getContext()),q=Z.enabled&&J.options.animation&&Z.animations,Q=new f7(this.chart,q);if(q._cacheable)this._cachedAnimations=Object.freeze(Q);return Q}getContext(){return this.$context||(this.$context=MU(this.chart.getContext(),this,this._tooltipItems))}getTitle($,J){let{callbacks:Z}=J,q=h0(Z,"beforeTitle",this,$),Q=h0(Z,"title",this,$),Y=h0(Z,"afterTitle",this,$),w=[];return w=G1(w,N1(q)),w=G1(w,N1(Q)),w=G1(w,N1(Y)),w}getBeforeBody($,J){return mJ(h0(J.callbacks,"beforeBody",this,$))}getBody($,J){let{callbacks:Z}=J,q=[];return $0($,(Q)=>{let Y={before:[],lines:[],after:[]},w=dJ(Z,Q);G1(Y.before,N1(h0(w,"beforeLabel",this,Q))),G1(Y.lines,h0(w,"label",this,Q)),G1(Y.after,N1(h0(w,"afterLabel",this,Q))),q.push(Y)}),q}getAfterBody($,J){return mJ(h0(J.callbacks,"afterBody",this,$))}getFooter($,J){let{callbacks:Z}=J,q=h0(Z,"beforeFooter",this,$),Q=h0(Z,"footer",this,$),Y=h0(Z,"afterFooter",this,$),w=[];return w=G1(w,N1(q)),w=G1(w,N1(Q)),w=G1(w,N1(Y)),w}_createItems($){let J=this._active,Z=this.chart.data,q=[],Q=[],Y=[],w=[],X,U;for(X=0,U=J.length;X<U;++X)w.push(XU(this.chart,J[X]));if($.filter)w=w.filter((B,G,T)=>$.filter(B,G,T,Z));if($.itemSort)w=w.sort((B,G)=>$.itemSort(B,G,Z));return $0(w,(B)=>{let G=dJ($.callbacks,B);q.push(h0(G,"labelColor",this,B)),Q.push(h0(G,"labelPointStyle",this,B)),Y.push(h0(G,"labelTextColor",this,B))}),this.labelColors=q,this.labelPointStyles=Q,this.labelTextColors=Y,this.dataPoints=w,w}update($,J){let Z=this.options.setContext(this.getContext()),q=this._active,Q,Y=[];if(!q.length){if(this.opacity!==0)Q={opacity:0}}else{let w=y5[Z.position].call(this,q,this._eventPosition);Y=this._createItems(Z),this.title=this.getTitle(Y,Z),this.beforeBody=this.getBeforeBody(Y,Z),this.body=this.getBody(Y,Z),this.afterBody=this.getAfterBody(Y,Z),this.footer=this.getFooter(Y,Z);let X=this._size=gJ(this,Z),U=Object.assign({},w,X),B=hJ(this.chart,Z,U),G=xJ(Z,U,B,this.chart);this.xAlign=B.xAlign,this.yAlign=B.yAlign,Q={opacity:1,x:G.x,y:G.y,width:X.width,height:X.height,caretX:w.x,caretY:w.y}}if(this._tooltipItems=Y,this.$context=void 0,Q)this._resolveAnimations().update(this,Q);if($&&Z.external)Z.external.call(this,{chart:this.chart,tooltip:this,replay:J})}drawCaret($,J,Z,q){let Q=this.getCaretPosition($,Z,q);J.lineTo(Q.x1,Q.y1),J.lineTo(Q.x2,Q.y2),J.lineTo(Q.x3,Q.y3)}getCaretPosition($,J,Z){let{xAlign:q,yAlign:Q}=this,{caretSize:Y,cornerRadius:w}=Z,{topLeft:X,topRight:U,bottomLeft:B,bottomRight:G}=K2(w),{x:T,y:M}=$,{width:z,height:F}=J,H,W,j,_,V,D;if(Q==="center"){if(V=M+F/2,q==="left")H=T,W=H-Y,_=V+Y,D=V-Y;else H=T+z,W=H+Y,_=V-Y,D=V+Y;j=H}else{if(q==="left")W=T+Math.max(X,B)+Y;else if(q==="right")W=T+z-Math.max(U,G)-Y;else W=this.caretX;if(Q==="top")_=M,V=_-Y,H=W-Y,j=W+Y;else _=M+F,V=_+Y,H=W+Y,j=W-Y;D=_}return{x1:H,x2:W,x3:j,y1:_,y2:V,y3:D}}drawTitle($,J,Z){let q=this.title,Q=q.length,Y,w,X;if(Q){let U=U2(Z.rtl,this.x,this.width);$.x=X8(this,Z.titleAlign,Z),J.textAlign=U.textAlign(Z.titleAlign),J.textBaseline="middle",Y=C0(Z.titleFont),w=Z.titleSpacing,J.fillStyle=Z.titleColor,J.font=Y.string;for(X=0;X<Q;++X)if(J.fillText(q[X],U.x($.x),$.y+Y.lineHeight/2),$.y+=Y.lineHeight+w,X+1===Q)$.y+=Z.titleMarginBottom-w}}_drawColorBox($,J,Z,q,Q){let Y=this.labelColors[Z],w=this.labelPointStyles[Z],{boxHeight:X,boxWidth:U}=Q,B=C0(Q.bodyFont),G=X8(this,"left",Q),T=q.x(G),M=X<B.lineHeight?(B.lineHeight-X)/2:0,z=J.y+M;if(Q.usePointStyle){let F={radius:Math.min(U,X)/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:1},H=q.leftForLtr(T,U)+U/2,W=z+X/2;$.strokeStyle=Q.multiKeyBackground,$.fillStyle=Q.multiKeyBackground,t4($,F,H,W),$.strokeStyle=Y.borderColor,$.fillStyle=Y.backgroundColor,t4($,F,H,W)}else{$.lineWidth=o(Y.borderWidth)?Math.max(...Object.values(Y.borderWidth)):Y.borderWidth||1,$.strokeStyle=Y.borderColor,$.setLineDash(Y.borderDash||[]),$.lineDashOffset=Y.borderDashOffset||0;let F=q.leftForLtr(T,U),H=q.leftForLtr(q.xPlus(T,1),U-2),W=K2(Y.borderRadius);if(Object.values(W).some((j)=>j!==0))$.beginPath(),$.fillStyle=Q.multiKeyBackground,S5($,{x:F,y:z,w:U,h:X,radius:W}),$.fill(),$.stroke(),$.fillStyle=Y.backgroundColor,$.beginPath(),S5($,{x:H,y:z+1,w:U-2,h:X-2,radius:W}),$.fill();else $.fillStyle=Q.multiKeyBackground,$.fillRect(F,z,U,X),$.strokeRect(F,z,U,X),$.fillStyle=Y.backgroundColor,$.fillRect(H,z+1,U-2,X-2)}$.fillStyle=this.labelTextColors[Z]}drawBody($,J,Z){let{body:q}=this,{bodySpacing:Q,bodyAlign:Y,displayColors:w,boxHeight:X,boxWidth:U,boxPadding:B}=Z,G=C0(Z.bodyFont),T=G.lineHeight,M=0,z=U2(Z.rtl,this.x,this.width),F=function(S){J.fillText(S,z.x($.x+M),$.y+T/2),$.y+=T+Q},H=z.textAlign(Y),W,j,_,V,D,L,C;J.textAlign=Y,J.textBaseline="middle",J.font=G.string,$.x=X8(this,H,Z),J.fillStyle=Z.bodyColor,$0(this.beforeBody,F),M=w&&H!=="right"?Y==="center"?U/2+B:U+2+B:0;for(V=0,L=q.length;V<L;++V){if(W=q[V],j=this.labelTextColors[V],J.fillStyle=j,$0(W.before,F),_=W.lines,w&&_.length)this._drawColorBox(J,$,V,z,Z),T=Math.max(G.lineHeight,X);for(D=0,C=_.length;D<C;++D)F(_[D]),T=G.lineHeight;$0(W.after,F)}M=0,T=G.lineHeight,$0(this.afterBody,F),$.y-=Q}drawFooter($,J,Z){let q=this.footer,Q=q.length,Y,w;if(Q){let X=U2(Z.rtl,this.x,this.width);$.x=X8(this,Z.footerAlign,Z),$.y+=Z.footerMarginTop,J.textAlign=X.textAlign(Z.footerAlign),J.textBaseline="middle",Y=C0(Z.footerFont),J.fillStyle=Z.footerColor,J.font=Y.string;for(w=0;w<Q;++w)J.fillText(q[w],X.x($.x),$.y+Y.lineHeight/2),$.y+=Y.lineHeight+Z.footerSpacing}}drawBackground($,J,Z,q){let{xAlign:Q,yAlign:Y}=this,{x:w,y:X}=$,{width:U,height:B}=Z,{topLeft:G,topRight:T,bottomLeft:M,bottomRight:z}=K2(q.cornerRadius);if(J.fillStyle=q.backgroundColor,J.strokeStyle=q.borderColor,J.lineWidth=q.borderWidth,J.beginPath(),J.moveTo(w+G,X),Y==="top")this.drawCaret($,J,Z,q);if(J.lineTo(w+U-T,X),J.quadraticCurveTo(w+U,X,w+U,X+T),Y==="center"&&Q==="right")this.drawCaret($,J,Z,q);if(J.lineTo(w+U,X+B-z),J.quadraticCurveTo(w+U,X+B,w+U-z,X+B),Y==="bottom")this.drawCaret($,J,Z,q);if(J.lineTo(w+M,X+B),J.quadraticCurveTo(w,X+B,w,X+B-M),Y==="center"&&Q==="left")this.drawCaret($,J,Z,q);if(J.lineTo(w,X+G),J.quadraticCurveTo(w,X,w+G,X),J.closePath(),J.fill(),q.borderWidth>0)J.stroke()}_updateAnimationTarget($){let J=this.chart,Z=this.$animations,q=Z&&Z.x,Q=Z&&Z.y;if(q||Q){let Y=y5[$.position].call(this,this._active,this._eventPosition);if(!Y)return;let w=this._size=gJ(this,$),X=Object.assign({},Y,this._size),U=hJ(J,$,X),B=xJ($,X,U,J);if(q._to!==B.x||Q._to!==B.y)this.xAlign=U.xAlign,this.yAlign=U.yAlign,this.width=w.width,this.height=w.height,this.caretX=Y.x,this.caretY=Y.y,this._resolveAnimations().update(this,B)}}_willRender(){return!!this.opacity}draw($){let J=this.options.setContext(this.getContext()),Z=this.opacity;if(!Z)return;this._updateAnimationTarget(J);let q={width:this.width,height:this.height},Q={x:this.x,y:this.y};Z=Math.abs(Z)<0.001?0:Z;let Y=b0(J.padding),w=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;if(J.enabled&&w)$.save(),$.globalAlpha=Z,this.drawBackground(Q,$,q,J),G7($,J.textDirection),Q.y+=Y.top,this.drawTitle(Q,$,J),this.drawBody(Q,$,J),this.drawFooter(Q,$,J),T7($,J.textDirection),$.restore()}getActiveElements(){return this._active||[]}setActiveElements($,J){let Z=this._active,q=$.map(({datasetIndex:w,index:X})=>{let U=this.chart.getDatasetMeta(w);if(!U)throw new Error("Cannot find a dataset at index "+w);return{datasetIndex:w,element:U.data[X],index:X}}),Q=!_5(Z,q),Y=this._positionChanged(q,J);if(Q||Y)this._active=q,this._eventPosition=J,this._ignoreReplayEvents=!0,this.update(!0)}handleEvent($,J,Z=!0){if(J&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let q=this.options,Q=this._active||[],Y=this._getActiveElements($,Q,J,Z),w=this._positionChanged(Y,$),X=J||!_5(Y,Q)||w;if(X){if(this._active=Y,q.enabled||q.external)this._eventPosition={x:$.x,y:$.y},this.update(!0,J)}return X}_getActiveElements($,J,Z,q){let Q=this.options;if($.type==="mouseout")return[];if(!q)return J.filter((w)=>this.chart.data.datasets[w.datasetIndex]&&this.chart.getDatasetMeta(w.datasetIndex).controller.getParsed(w.index)!==void 0);let Y=this.chart.getElementsAtEventForMode($,Q.mode,Q,Z);if(Q.reverse)Y.reverse();return Y}_positionChanged($,J){let{caretX:Z,caretY:q,options:Q}=this,Y=y5[Q.position].call(this,$,J);return Y!==!1&&(Z!==Y.x||q!==Y.y)}}var DZ={id:"tooltip",_element:A7,positioners:y5,afterInit($,J,Z){if(Z)$.tooltip=new A7({chart:$,options:Z})},beforeUpdate($,J,Z){if($.tooltip)$.tooltip.initialize(Z)},reset($,J,Z){if($.tooltip)$.tooltip.initialize(Z)},afterDraw($){let J=$.tooltip;if(J&&J._willRender()){let Z={tooltip:J};if($.notifyPlugins("beforeTooltipDraw",{...Z,cancelable:!0})===!1)return;J.draw($.ctx),$.notifyPlugins("afterTooltipDraw",Z)}},afterEvent($,J){if($.tooltip){let Z=J.replay;if($.tooltip.handleEvent(J.event,Z,J.inChartArea))J.changed=!0}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:($,J)=>J.bodyFont.size,boxWidth:($,J)=>J.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:LZ},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:($)=>$!=="filter"&&$!=="itemSort"&&$!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};var zU=($,J,Z,q)=>{if(typeof J==="string")Z=$.push(J)-1,q.unshift({index:Z,label:J});else if(isNaN(J))Z=null;return Z};function HU($,J,Z,q){let Q=$.indexOf(J);if(Q===-1)return zU($,J,Z,q);let Y=$.lastIndexOf(J);return Q!==Y?Z:Q}var FU=($,J)=>$===null?null:f0(Math.round($),0,J);function pJ($){let J=this.getLabels();if($>=0&&$<J.length)return J[$];return $}class x7 extends T2{static id="category";static defaults={ticks:{callback:pJ}};constructor($){super($);this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init($){let J=this._addedLabels;if(J.length){let Z=this.getLabels();for(let{index:q,label:Q}of J)if(Z[q]===Q)Z.splice(q,1);this._addedLabels=[]}super.init($)}parse($,J){if(e($))return null;let Z=this.getLabels();return J=isFinite(J)&&Z[J]===$?J:HU(Z,$,p(J,$),this._addedLabels),FU(J,Z.length-1)}determineDataLimits(){let{minDefined:$,maxDefined:J}=this.getUserBounds(),{min:Z,max:q}=this.getMinMax(!0);if(this.options.bounds==="ticks"){if(!$)Z=0;if(!J)q=this.getLabels().length-1}this.min=Z,this.max=q}buildTicks(){let $=this.min,J=this.max,Z=this.options.offset,q=[],Q=this.getLabels();Q=$===0&&J===Q.length-1?Q:Q.slice($,J+1),this._valueRange=Math.max(Q.length-(Z?0:1),1),this._startValue=this.min-(Z?0.5:0);for(let Y=$;Y<=J;Y++)q.push({value:Y});return q}getLabelForValue($){return pJ.call(this,$)}configure(){if(super.configure(),!this.isHorizontal())this._reversePixels=!this._reversePixels}getPixelForValue($){if(typeof $!=="number")$=this.parse($);return $===null?NaN:this.getPixelForDecimal(($-this._startValue)/this._valueRange)}getPixelForTick($){let J=this.ticks;if($<0||$>J.length-1)return null;return this.getPixelForValue(J[$].value)}getValueForPixel($){return Math.round(this._startValue+this.getDecimalForPixel($)*this._valueRange)}getBasePixel(){return this.bottom}}function WU($,J){let Z=[],q=0.00000000000001,{bounds:Q,step:Y,min:w,max:X,precision:U,count:B,maxTicks:G,maxDigits:T,includeBounds:M}=$,z=Y||1,F=G-1,{min:H,max:W}=J,j=!e(w),_=!e(X),V=!e(B),D=(W-H)/(T+1),L=l9((W-H)/F/z)*z,C,S,P,I;if(L<0.00000000000001&&!j&&!_)return[{value:H},{value:W}];if(I=Math.ceil(W/L)-Math.floor(H/L),I>F)L=l9(I*L/F/z)*z;if(!e(U))C=Math.pow(10,U),L=Math.ceil(L*C)/C;if(Q==="ticks")S=Math.floor(H/L)*L,P=Math.ceil(W/L)*L;else S=H,P=W;if(j&&_&&Y&&k3((X-w)/Y,L/1000))I=Math.round(Math.min((X-w)/L,G)),L=(X-w)/I,S=w,P=X;else if(V)S=j?w:S,P=_?X:P,I=B-1,L=(P-S)/I;else if(I=(P-S)/L,h2(I,Math.round(I),L/1000))I=Math.round(I);else I=Math.ceil(I);let v=Math.max(n9(L),n9(S));C=Math.pow(10,e(U)?v:U),S=Math.round(S*C)/C,P=Math.round(P*C)/C;let b=0;if(j){if(M&&S!==w){if(Z.push({value:w}),S<w)b++;if(h2(Math.round((S+b*L)*C)/C,w,rJ(w,D,$)))b++}else if(S<w)b++}for(;b<I;++b){let Q0=Math.round((S+b*L)*C)/C;if(_&&Q0>X)break;Z.push({value:Q0})}if(_&&M&&P!==X)if(Z.length&&h2(Z[Z.length-1].value,X,rJ(X,D,$)))Z[Z.length-1].value=X;else Z.push({value:X});else if(!_||P===X)Z.push({value:P});return Z}function rJ($,J,{horizontal:Z,minRotation:q}){let Q=Y1(q),Y=(Z?Math.sin(Q):Math.cos(Q))||0.001,w=0.75*J*(""+$).length;return Math.min(J/Y,w)}class u5 extends T2{constructor($){super($);this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse($,J){if(e($))return null;if((typeof $==="number"||$ instanceof Number)&&!isFinite(+$))return null;return+$}handleTickRangeOptions(){let{beginAtZero:$}=this.options,{minDefined:J,maxDefined:Z}=this.getUserBounds(),{min:q,max:Q}=this,Y=(X)=>q=J?q:X,w=(X)=>Q=Z?Q:X;if($){let X=Y2(q),U=Y2(Q);if(X<0&&U<0)w(0);else if(X>0&&U>0)Y(0)}if(q===Q){let X=Q===0?1:Math.abs(Q*0.05);if(w(Q+X),!$)Y(q-X)}this.min=q,this.max=Q}getTickLimit(){let $=this.options.ticks,{maxTicksLimit:J,stepSize:Z}=$,q;if(Z){if(q=Math.ceil(this.max/Z)-Math.floor(this.min/Z)+1,q>1000)console.warn(`scales.${this.id}.ticks.stepSize: ${Z} would result generating up to ${q} ticks. Limiting to 1000.`),q=1000}else q=this.computeTickLimit(),J=J||11;if(J)q=Math.min(J,q);return q}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let $=this.options,J=$.ticks,Z=this.getTickLimit();Z=Math.max(2,Z);let q={maxTicks:Z,bounds:$.bounds,min:$.min,max:$.max,precision:J.precision,step:J.stepSize,count:J.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:J.minRotation||0,includeBounds:J.includeBounds!==!1},Q=this._range||this,Y=WU(q,Q);if($.bounds==="ticks")i9(Y,this,"value");if($.reverse)Y.reverse(),this.start=this.max,this.end=this.min;else this.start=this.min,this.end=this.max;return Y}configure(){let $=this.ticks,J=this.min,Z=this.max;if(super.configure(),this.options.offset&&$.length){let q=(Z-J)/Math.max($.length-1,1)/2;J-=q,Z+=q}this._startValue=J,this._endValue=Z,this._valueRange=Z-J}getLabelForValue($){return D5($,this.chart.options.locale,this.options.ticks.format)}}class m7 extends u5{static id="linear";static defaults={ticks:{callback:P5.formatters.numeric}};determineDataLimits(){let{min:$,max:J}=this.getMinMax(!0);this.min=M0($)?$:0,this.max=M0(J)?J:1,this.handleTickRangeOptions()}computeTickLimit(){let $=this.isHorizontal(),J=$?this.width:this.height,Z=Y1(this.options.ticks.minRotation),q=($?Math.sin(Z):Math.cos(Z))||0.001,Q=this._resolveTickFontOptions(0);return Math.ceil(J/Math.min(40,Q.lineHeight/q))}getPixelForValue($){return $===null?NaN:this.getPixelForDecimal(($-this._startValue)/this._valueRange)}getValueForPixel($){return this._startValue+this.getDecimalForPixel($)*this._valueRange}}var g5=($)=>Math.floor(I1($)),G2=($,J)=>Math.pow(10,g5($)+J);function cJ($){return $/Math.pow(10,g5($))===1}function sJ($,J,Z){let q=Math.pow(10,Z),Q=Math.floor($/q);return Math.ceil(J/q)-Q}function jU($,J){let Z=J-$,q=g5(Z);while(sJ($,J,q)>10)q++;while(sJ($,J,q)<10)q--;return Math.min(q,g5($))}function RU($,{min:J,max:Z}){J=u0($.min,J);let q=[],Q=g5(J),Y=jU(J,Z),w=Y<0?Math.pow(10,Math.abs(Y)):1,X=Math.pow(10,Y),U=Q>Y?Math.pow(10,Q):0,B=Math.round((J-U)*w)/w,G=Math.floor((J-U)/X/10)*X*10,T=Math.floor((B-G)/Math.pow(10,Y)),M=u0($.min,Math.round((U+G+T*Math.pow(10,Y))*w)/w);while(M<Z){if(q.push({value:M,major:cJ(M),significand:T}),T>=10)T=T<15?15:20;else T++;if(T>=20)Y++,T=2,w=Y>=0?1:w;M=Math.round((U+G+T*Math.pow(10,Y))*w)/w}let z=u0($.max,M);return q.push({value:z,major:cJ(z),significand:T}),q}class _U extends T2{static id="logarithmic";static defaults={ticks:{callback:P5.formatters.logarithmic,major:{enabled:!0}}};constructor($){super($);this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse($,J){let Z=u5.prototype.parse.apply(this,[$,J]);if(Z===0){this._zero=!0;return}return M0(Z)&&Z>0?Z:null}determineDataLimits(){let{min:$,max:J}=this.getMinMax(!0);if(this.min=M0($)?Math.max(0,$):null,this.max=M0(J)?Math.max(0,J):null,this.options.beginAtZero)this._zero=!0;if(this._zero&&this.min!==this._suggestedMin&&!M0(this._userMin))this.min=$===G2(this.min,0)?G2(this.min,-1):G2(this.min,0);this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:$,maxDefined:J}=this.getUserBounds(),Z=this.min,q=this.max,Q=(w)=>Z=$?Z:w,Y=(w)=>q=J?q:w;if(Z===q)if(Z<=0)Q(1),Y(10);else Q(G2(Z,-1)),Y(G2(q,1));if(Z<=0)Q(G2(q,-1));if(q<=0)Y(G2(Z,1));this.min=Z,this.max=q}buildTicks(){let $=this.options,J={min:this._userMin,max:this._userMax},Z=RU(J,this);if($.bounds==="ticks")i9(Z,this,"value");if($.reverse)Z.reverse(),this.start=this.max,this.end=this.min;else this.start=this.min,this.end=this.max;return Z}getLabelForValue($){return $===void 0?"0":D5($,this.chart.options.locale,this.options.ticks.format)}configure(){let $=this.min;super.configure(),this._startValue=I1($),this._valueRange=I1(this.max)-I1($)}getPixelForValue($){if($===void 0||$===0)$=this.min;if($===null||isNaN($))return NaN;return this.getPixelForDecimal($===this.min?0:(I1($)-this._startValue)/this._valueRange)}getValueForPixel($){let J=this.getDecimalForPixel($);return Math.pow(10,this._startValue+J*this._valueRange)}}function O7($){let J=$.ticks;if(J.display&&$.display){let Z=b0(J.backdropPadding);return p(J.font&&J.font.size,z0.font.size)+Z.height}return 0}function LU($,J,Z){return Z=G0(Z)?Z:[Z],{w:r3($,J.string,Z),h:Z.length*J.lineHeight}}function oJ($,J,Z,q,Q){if($===q||$===Q)return{start:J-Z/2,end:J+Z/2};else if($<q||$>Q)return{start:J-Z,end:J};return{start:J,end:J+Z}}function DU($){let J={l:$.left+$._padding.left,r:$.right-$._padding.right,t:$.top+$._padding.top,b:$.bottom-$._padding.bottom},Z=Object.assign({},J),q=[],Q=[],Y=$._pointLabels.length,w=$.options.pointLabels,X=w.centerPointLabels?t/Y:0;for(let U=0;U<Y;U++){let B=w.setContext($.getPointLabelContext(U));Q[U]=B.padding;let G=$.getPointPosition(U,$.drawingArea+Q[U],X),T=C0(B.font),M=LU($.ctx,T,$._pointLabels[U]);q[U]=M;let z=O0($.getIndexAngle(U)+X),F=Math.round(i4(z)),H=oJ(F,G.x,M.w,0,180),W=oJ(F,G.y,M.h,90,270);PU(Z,J,z,H,W)}$.setCenterPoint(J.l-Z.l,Z.r-J.r,J.t-Z.t,Z.b-J.b),$._pointLabelItems=SU($,q,Q)}function PU($,J,Z,q,Q){let Y=Math.abs(Math.sin(Z)),w=Math.abs(Math.cos(Z)),X=0,U=0;if(q.start<J.l)X=(J.l-q.start)/Y,$.l=Math.min($.l,J.l-X);else if(q.end>J.r)X=(q.end-J.r)/Y,$.r=Math.max($.r,J.r+X);if(Q.start<J.t)U=(J.t-Q.start)/w,$.t=Math.min($.t,J.t-U);else if(Q.end>J.b)U=(Q.end-J.b)/w,$.b=Math.max($.b,J.b+U)}function VU($,J,Z){let q=$.drawingArea,{extra:Q,additionalAngle:Y,padding:w,size:X}=Z,U=$.getPointPosition(J,q+Q+w,Y),B=Math.round(i4(O0(U.angle+H0))),G=AU(U.y,X.h,B),T=CU(B),M=NU(U.x,X.w,T);return{visible:!0,x:U.x,y:G,textAlign:T,left:M,top:G,right:M+X.w,bottom:G+X.h}}function IU($,J){if(!J)return!0;let{left:Z,top:q,right:Q,bottom:Y}=$;return!(U1({x:Z,y:q},J)||U1({x:Z,y:Y},J)||U1({x:Q,y:q},J)||U1({x:Q,y:Y},J))}function SU($,J,Z){let q=[],Q=$._pointLabels.length,Y=$.options,{centerPointLabels:w,display:X}=Y.pointLabels,U={extra:O7(Y)/2,additionalAngle:w?t/Q:0},B;for(let G=0;G<Q;G++){U.padding=Z[G],U.size=J[G];let T=VU($,G,U);if(q.push(T),X==="auto"){if(T.visible=IU(T,B),T.visible)B=T}}return q}function CU($){if($===0||$===180)return"center";else if($<180)return"left";return"right"}function NU($,J,Z){if(Z==="right")$-=J;else if(Z==="center")$-=J/2;return $}function AU($,J,Z){if(Z===90||Z===270)$-=J/2;else if(Z>270||Z<90)$-=J;return $}function OU($,J,Z){let{left:q,top:Q,right:Y,bottom:w}=Z,{backdropColor:X}=J;if(!e(X)){let U=K2(J.borderRadius),B=b0(J.backdropPadding);$.fillStyle=X;let G=q-B.left,T=Q-B.top,M=Y-q+B.width,z=w-Q+B.height;if(Object.values(U).some((F)=>F!==0))$.beginPath(),S5($,{x:G,y:T,w:M,h:z,radius:U}),$.fill();else $.fillRect(G,T,M,z)}}function kU($,J){let{ctx:Z,options:{pointLabels:q}}=$;for(let Q=J-1;Q>=0;Q--){let Y=$._pointLabelItems[Q];if(!Y.visible)continue;let w=q.setContext($.getPointLabelContext(Q));OU(Z,w,Y);let X=C0(w.font),{x:U,y:B,textAlign:G}=Y;X2(Z,$._pointLabels[Q],U,B+X.lineHeight/2,X,{color:w.color,textAlign:G,textBaseline:"middle"})}}function PZ($,J,Z,q){let{ctx:Q}=$;if(Z)Q.arc($.xCenter,$.yCenter,J,0,X0);else{let Y=$.getPointPosition(0,J);Q.moveTo(Y.x,Y.y);for(let w=1;w<q;w++)Y=$.getPointPosition(w,J),Q.lineTo(Y.x,Y.y)}}function fU($,J,Z,q,Q){let Y=$.ctx,w=J.circular,{color:X,lineWidth:U}=J;if(!w&&!q||!X||!U||Z<0)return;Y.save(),Y.strokeStyle=X,Y.lineWidth=U,Y.setLineDash(Q.dash||[]),Y.lineDashOffset=Q.dashOffset,Y.beginPath(),PZ($,Z,w,q),Y.closePath(),Y.stroke(),Y.restore()}function bU($,J,Z){return S1($,{label:Z,index:J,type:"pointLabel"})}class vU extends u5{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:P5.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback($){return $},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor($){super($);this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let $=this._padding=b0(O7(this.options)/2),J=this.width=this.maxWidth-$.width,Z=this.height=this.maxHeight-$.height;this.xCenter=Math.floor(this.left+J/2+$.left),this.yCenter=Math.floor(this.top+Z/2+$.top),this.drawingArea=Math.floor(Math.min(J,Z)/2)}determineDataLimits(){let{min:$,max:J}=this.getMinMax(!1);this.min=M0($)&&!isNaN($)?$:0,this.max=M0(J)&&!isNaN(J)?J:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/O7(this.options))}generateTickLabels($){u5.prototype.generateTickLabels.call(this,$),this._pointLabels=this.getLabels().map((J,Z)=>{let q=q0(this.options.pointLabels.callback,[J,Z],this);return q||q===0?q:""}).filter((J,Z)=>this.chart.getDataVisibility(Z))}fit(){let $=this.options;if($.display&&$.pointLabels.display)DU(this);else this.setCenterPoint(0,0,0,0)}setCenterPoint($,J,Z,q){this.xCenter+=Math.floor(($-J)/2),this.yCenter+=Math.floor((Z-q)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max($,J,Z,q))}getIndexAngle($){let J=X0/(this._pointLabels.length||1),Z=this.options.startAngle||0;return O0($*J+Y1(Z))}getDistanceFromCenterForValue($){if(e($))return NaN;let J=this.drawingArea/(this.max-this.min);if(this.options.reverse)return(this.max-$)*J;return($-this.min)*J}getValueForDistanceFromCenter($){if(e($))return NaN;let J=$/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-J:this.min+J}getPointLabelContext($){let J=this._pointLabels||[];if($>=0&&$<J.length){let Z=J[$];return bU(this.getContext(),$,Z)}}getPointPosition($,J,Z=0){let q=this.getIndexAngle($)-H0+Z;return{x:Math.cos(q)*J+this.xCenter,y:Math.sin(q)*J+this.yCenter,angle:q}}getPointPositionForValue($,J){return this.getPointPosition($,this.getDistanceFromCenterForValue(J))}getBasePosition($){return this.getPointPositionForValue($||0,this.getBaseValue())}getPointLabelPosition($){let{left:J,top:Z,right:q,bottom:Q}=this._pointLabelItems[$];return{left:J,top:Z,right:q,bottom:Q}}drawBackground(){let{backgroundColor:$,grid:{circular:J}}=this.options;if($){let Z=this.ctx;Z.save(),Z.beginPath(),PZ(this,this.getDistanceFromCenterForValue(this._endValue),J,this._pointLabels.length),Z.closePath(),Z.fillStyle=$,Z.fill(),Z.restore()}}drawGrid(){let $=this.ctx,J=this.options,{angleLines:Z,grid:q,border:Q}=J,Y=this._pointLabels.length,w,X,U;if(J.pointLabels.display)kU(this,Y);if(q.display)this.ticks.forEach((B,G)=>{if(G!==0||G===0&&this.min<0){X=this.getDistanceFromCenterForValue(B.value);let T=this.getContext(G),M=q.setContext(T),z=Q.setContext(T);fU(this,M,X,Y,z)}});if(Z.display){$.save();for(w=Y-1;w>=0;w--){let B=Z.setContext(this.getPointLabelContext(w)),{color:G,lineWidth:T}=B;if(!T||!G)continue;$.lineWidth=T,$.strokeStyle=G,$.setLineDash(B.borderDash),$.lineDashOffset=B.borderDashOffset,X=this.getDistanceFromCenterForValue(J.reverse?this.min:this.max),U=this.getPointPosition(w,X),$.beginPath(),$.moveTo(this.xCenter,this.yCenter),$.lineTo(U.x,U.y),$.stroke()}$.restore()}}drawBorder(){}drawLabels(){let $=this.ctx,J=this.options,Z=J.ticks;if(!Z.display)return;let q=this.getIndexAngle(0),Q,Y;$.save(),$.translate(this.xCenter,this.yCenter),$.rotate(q),$.textAlign="center",$.textBaseline="middle",this.ticks.forEach((w,X)=>{if(X===0&&this.min>=0&&!J.reverse)return;let U=Z.setContext(this.getContext(X)),B=C0(U.font);if(Q=this.getDistanceFromCenterForValue(this.ticks[X].value),U.showLabelBackdrop){$.font=B.string,Y=$.measureText(w.label).width,$.fillStyle=U.backdropColor;let G=b0(U.backdropPadding);$.fillRect(-Y/2-G.left,-Q-B.size/2-G.top,Y+G.width,B.size+G.height)}X2($,w.label,0,-Q,B,{color:U.color,strokeColor:U.textStrokeColor,strokeWidth:U.textStrokeWidth})}),$.restore()}drawTitle(){}}var H8={millisecond:{common:!0,size:1,steps:1000},second:{common:!0,size:1000,steps:60},minute:{common:!0,size:60000,steps:60},hour:{common:!0,size:3600000,steps:24},day:{common:!0,size:86400000,steps:30},week:{common:!1,size:604800000,steps:4},month:{common:!0,size:2628000000,steps:12},quarter:{common:!1,size:7884000000,steps:4},year:{common:!0,size:31540000000}},x0=Object.keys(H8);function lJ($,J){return $-J}function iJ($,J){if(e(J))return null;let Z=$._adapter,{parser:q,round:Q,isoWeekday:Y}=$._parseOpts,w=J;if(typeof q==="function")w=q(w);if(!M0(w))w=typeof q==="string"?Z.parse(w,q):Z.parse(w);if(w===null)return null;if(Q)w=Q==="week"&&(x2(Y)||Y===!0)?Z.startOf(w,"isoWeek",Y):Z.startOf(w,Q);return+w}function nJ($,J,Z,q){let Q=x0.length;for(let Y=x0.indexOf($);Y<Q-1;++Y){let w=H8[x0[Y]],X=w.steps?w.steps:Number.MAX_SAFE_INTEGER;if(w.common&&Math.ceil((Z-J)/(X*w.size))<=q)return x0[Y]}return x0[Q-1]}function yU($,J,Z,q,Q){for(let Y=x0.length-1;Y>=x0.indexOf(Z);Y--){let w=x0[Y];if(H8[w].common&&$._adapter.diff(Q,q,w)>=J-1)return w}return x0[Z?x0.indexOf(Z):0]}function EU($){for(let J=x0.indexOf($)+1,Z=x0.length;J<Z;++J)if(H8[x0[J]].common)return x0[J]}function aJ($,J,Z){if(!Z)$[J]=!0;else if(Z.length){let{lo:q,hi:Q}=n4(Z,J),Y=Z[q]>=J?Z[q]:Z[Q];$[Y]=!0}}function uU($,J,Z,q){let Q=$._adapter,Y=+Q.startOf(J[0].value,q),w=J[J.length-1].value,X,U;for(X=Y;X<=w;X=+Q.add(X,1,q))if(U=Z[X],U>=0)J[U].major=!0;return J}function tJ($,J,Z){let q=[],Q={},Y=J.length,w,X;for(w=0;w<Y;++w)X=J[w],Q[X]=w,q.push({value:X,major:!1});return Y===0||!Z?q:uU($,q,Q,Z)}class k7 extends T2{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor($){super($);this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init($,J={}){let Z=$.time||($.time={}),q=this._adapter=new jX._date($.adapters.date);q.init(J),u2(Z.displayFormats,q.formats()),this._parseOpts={parser:Z.parser,round:Z.round,isoWeekday:Z.isoWeekday},super.init($),this._normalized=J.normalized}parse($,J){if($===void 0)return null;return iJ(this,$)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let $=this.options,J=this._adapter,Z=$.time.unit||"day",{min:q,max:Q,minDefined:Y,maxDefined:w}=this.getUserBounds();function X(U){if(!Y&&!isNaN(U.min))q=Math.min(q,U.min);if(!w&&!isNaN(U.max))Q=Math.max(Q,U.max)}if(!Y||!w){if(X(this._getLabelBounds()),$.bounds!=="ticks"||$.ticks.source!=="labels")X(this.getMinMax(!1))}q=M0(q)&&!isNaN(q)?q:+J.startOf(Date.now(),Z),Q=M0(Q)&&!isNaN(Q)?Q:+J.endOf(Date.now(),Z)+1,this.min=Math.min(q,Q-1),this.max=Math.max(q+1,Q)}_getLabelBounds(){let $=this.getLabelTimestamps(),J=Number.POSITIVE_INFINITY,Z=Number.NEGATIVE_INFINITY;if($.length)J=$[0],Z=$[$.length-1];return{min:J,max:Z}}buildTicks(){let $=this.options,J=$.time,Z=$.ticks,q=Z.source==="labels"?this.getLabelTimestamps():this._generate();if($.bounds==="ticks"&&q.length)this.min=this._userMin||q[0],this.max=this._userMax||q[q.length-1];let Q=this.min,Y=this.max,w=v3(q,Q,Y);if(this._unit=J.unit||(Z.autoSkip?nJ(J.minUnit,this.min,this.max,this._getLabelCapacity(Q)):yU(this,w.length,J.minUnit,this.min,this.max)),this._majorUnit=!Z.major.enabled||this._unit==="year"?void 0:EU(this._unit),this.initOffsets(q),$.reverse)w.reverse();return tJ(this,w,this._majorUnit)}afterAutoSkip(){if(this.options.offsetAfterAutoskip)this.initOffsets(this.ticks.map(($)=>+$.value))}initOffsets($=[]){let J=0,Z=0,q,Q;if(this.options.offset&&$.length){if(q=this.getDecimalForValue($[0]),$.length===1)J=1-q;else J=(this.getDecimalForValue($[1])-q)/2;if(Q=this.getDecimalForValue($[$.length-1]),$.length===1)Z=Q;else Z=(Q-this.getDecimalForValue($[$.length-2]))/2}let Y=$.length<3?0.5:0.25;J=f0(J,0,Y),Z=f0(Z,0,Y),this._offsets={start:J,end:Z,factor:1/(J+1+Z)}}_generate(){let $=this._adapter,J=this.min,Z=this.max,q=this.options,Q=q.time,Y=Q.unit||nJ(Q.minUnit,J,Z,this._getLabelCapacity(J)),w=p(q.ticks.stepSize,1),X=Y==="week"?Q.isoWeekday:!1,U=x2(X)||X===!0,B={},G=J,T,M;if(U)G=+$.startOf(G,"isoWeek",X);if(G=+$.startOf(G,U?"day":Y),$.diff(Z,J,Y)>1e5*w)throw new Error(J+" and "+Z+" are too far apart with stepSize of "+w+" "+Y);let z=q.ticks.source==="data"&&this.getDataTimestamps();for(T=G,M=0;T<Z;T=+$.add(T,w,Y),M++)aJ(B,T,z);if(T===Z||q.bounds==="ticks"||M===1)aJ(B,T,z);return Object.keys(B).sort(lJ).map((F)=>+F)}getLabelForValue($){let J=this._adapter,Z=this.options.time;if(Z.tooltipFormat)return J.format($,Z.tooltipFormat);return J.format($,Z.displayFormats.datetime)}format($,J){let q=this.options.time.displayFormats,Q=this._unit,Y=J||q[Q];return this._adapter.format($,Y)}_tickFormatFunction($,J,Z,q){let Q=this.options,Y=Q.ticks.callback;if(Y)return q0(Y,[$,J,Z],this);let w=Q.time.displayFormats,X=this._unit,U=this._majorUnit,B=X&&w[X],G=U&&w[U],T=Z[J],M=U&&G&&T&&T.major;return this._adapter.format($,q||(M?G:B))}generateTickLabels($){let J,Z,q;for(J=0,Z=$.length;J<Z;++J)q=$[J],q.label=this._tickFormatFunction(q.value,J,$)}getDecimalForValue($){return $===null?NaN:($-this.min)/(this.max-this.min)}getPixelForValue($){let J=this._offsets,Z=this.getDecimalForValue($);return this.getPixelForDecimal((J.start+Z)*J.factor)}getValueForPixel($){let J=this._offsets,Z=this.getDecimalForPixel($)/J.factor-J.end;return this.min+Z*(this.max-this.min)}_getLabelSize($){let J=this.options.ticks,Z=this.ctx.measureText($).width,q=Y1(this.isHorizontal()?J.maxRotation:J.minRotation),Q=Math.cos(q),Y=Math.sin(q),w=this._resolveTickFontOptions(0).size;return{w:Z*Q+w*Y,h:Z*Y+w*Q}}_getLabelCapacity($){let J=this.options.time,Z=J.displayFormats,q=Z[J.unit]||Z.millisecond,Q=this._tickFormatFunction($,0,tJ(this,[$],this._majorUnit),q),Y=this._getLabelSize(Q),w=Math.floor(this.isHorizontal()?this.width/Y.w:this.height/Y.h)-1;return w>0?w:1}getDataTimestamps(){let $=this._cache.data||[],J,Z;if($.length)return $;let q=this.getMatchingVisibleMetas();if(this._normalized&&q.length)return this._cache.data=q[0].controller.getAllParsedValues(this);for(J=0,Z=q.length;J<Z;++J)$=$.concat(q[J].controller.getAllParsedValues(this));return this._cache.data=this.normalize($)}getLabelTimestamps(){let $=this._cache.labels||[],J,Z;if($.length)return $;let q=this.getLabels();for(J=0,Z=q.length;J<Z;++J)$.push(iJ(this,q[J]));return this._cache.labels=this._normalized?$:this.normalize($)}normalize($){return u3($.sort(lJ))}}function K8($,J,Z){let q=0,Q=$.length-1,Y,w,X,U;if(Z){if(J>=$[q].pos&&J<=$[Q].pos)({lo:q,hi:Q}=x1($,"pos",J));({pos:Y,time:X}=$[q]),{pos:w,time:U}=$[Q]}else{if(J>=$[q].time&&J<=$[Q].time)({lo:q,hi:Q}=x1($,"time",J));({time:Y,pos:X}=$[q]),{time:w,pos:U}=$[Q]}let B=w-Y;return B?X+(U-X)*(J-Y)/B:X}class gU extends k7{static id="timeseries";static defaults=k7.defaults;constructor($){super($);this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let $=this._getTimestampsForTable(),J=this._table=this.buildLookupTable($);this._minPos=K8(J,this.min),this._tableRange=K8(J,this.max)-this._minPos,super.initOffsets($)}buildLookupTable($){let{min:J,max:Z}=this,q=[],Q=[],Y,w,X,U,B;for(Y=0,w=$.length;Y<w;++Y)if(U=$[Y],U>=J&&U<=Z)q.push(U);if(q.length<2)return[{time:J,pos:0},{time:Z,pos:1}];for(Y=0,w=q.length;Y<w;++Y)if(B=q[Y+1],X=q[Y-1],U=q[Y],Math.round((B+X)/2)!==U)Q.push({time:U,pos:Y/(w-1)});return Q}_generate(){let $=this.min,J=this.max,Z=super.getDataTimestamps();if(!Z.includes($)||!Z.length)Z.splice(0,0,$);if(!Z.includes(J)||Z.length===1)Z.push(J);return Z.sort((q,Q)=>q-Q)}_getTimestampsForTable(){let $=this._cache.all||[];if($.length)return $;let J=this.getDataTimestamps(),Z=this.getLabelTimestamps();if(J.length&&Z.length)$=this.normalize(J.concat(Z));else $=J.length?J:Z;return $=this._cache.all=$,$}getDecimalForValue($){return(K8(this._table,$)-this._minPos)/this._tableRange}getValueForPixel($){let J=this._offsets,Z=this.getDecimalForPixel($)/J.factor-J.end;return K8(this._table,Z*this._tableRange+this._minPos,!0)}}M2.register(v7,p2,g7,m7,x7,jZ,b7,u7,DZ,_Z);var x5=60;function m5($){return getComputedStyle(document.documentElement).getPropertyValue($).trim()}function F8($=1){let J=m5("--color-primary");if(!J)return`rgba(139,92,246,${$})`;return`oklch(${J} / ${$})`}function w1($=1){let J=m5("--color-muted");if(!J)return`rgba(100,100,100,${$})`;return`oklch(${J} / ${$})`}function hU($=1){let J=m5("--color-destructive");if(!J)return`rgba(239,68,68,${$})`;return`oklch(${J} / ${$})`}function IZ($=1){let J=m5("--color-warning");if(!J)return`rgba(234,179,8,${$})`;return`oklch(${J} / ${$})`}function SZ($=1){let J=m5("--color-success");if(!J)return`rgba(34,197,94,${$})`;return`oklch(${J} / ${$})`}function VZ($,J=1){if($>90)return hU(J);if($>70)return IZ(J);return SZ(J)}var xU=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("circle",{cx:"12",cy:"12",r:"10"}),K("polyline",{points:"12 6 12 12 16 14"})),mU=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),K("circle",{cx:"9",cy:"7",r:"4"}),K("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),K("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})),dU=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),K("polyline",{points:"17 6 23 6 23 12"})),pU=()=>K("svg",{class:"size-8 text-muted-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},K("polygon",{points:"5 3 19 12 5 21 5 3"}));class d7 extends N{pollTimer=null;viewerChart=null;cpuGauge=null;memGauge=null;diskGauge=null;resourceChart=null;viewerCanvasRef=null;cpuCanvasRef=null;memCanvasRef=null;diskCanvasRef=null;resourceCanvasRef=null;state={status:null,hardware:null,loading:!0,error:null,viewerHistory:[],cpuHistory:[],memHistory:[],diskHistory:[],labels:[]};componentDidMount(){this.loadData(),this.pollTimer=setInterval(()=>this.loadData(),5000)}componentWillUnmount(){if(this.pollTimer)clearInterval(this.pollTimer);this.destroyCharts()}destroyCharts(){this.viewerChart?.destroy(),this.viewerChart=null,this.cpuGauge?.destroy(),this.cpuGauge=null,this.memGauge?.destroy(),this.memGauge=null,this.diskGauge?.destroy(),this.diskGauge=null,this.resourceChart?.destroy(),this.resourceChart=null}async loadData(){try{let[$,J]=await Promise.all([s.admin.getStatus(this.props.token),s.admin.getHardware(this.props.token).catch(()=>null)]),Z=$,q=J,Q=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),Y=[...this.state.viewerHistory,Z?.viewerCount||0].slice(-x5),w=q?.cpu?.[0]?.percent!=null?Math.round(q.cpu[0].percent):0,X=q?.memory?Math.round(q.memory.percent):0,U=q?.disk?Math.round(q.disk.percent):0,B=[...this.state.cpuHistory,w].slice(-x5),G=[...this.state.memHistory,X].slice(-x5),T=[...this.state.diskHistory,U].slice(-x5),M=[...this.state.labels,Q].slice(-x5);this.setState({status:$,hardware:J,loading:!1,error:null,viewerHistory:Y,cpuHistory:B,memHistory:G,diskHistory:T,labels:M},()=>{this.updateCharts()})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load",loading:!1})}}updateCharts(){let{viewerHistory:$,cpuHistory:J,memHistory:Z,diskHistory:q,labels:Q,status:Y,hardware:w}=this.state;if((Y?.online||!1)&&this.viewerCanvasRef)if(!this.viewerChart)this.viewerChart=new M2(this.viewerCanvasRef,{type:"line",data:{labels:Q,datasets:[{label:"Viewers",data:$,borderColor:F8(1),backgroundColor:F8(0.1),borderWidth:2,fill:!0,tension:0.4,pointRadius:0,pointHoverRadius:4,pointHoverBackgroundColor:F8(1)}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:300},interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",titleFont:{size:11},bodyFont:{size:11},padding:8,cornerRadius:6}},scales:{x:{display:!0,grid:{color:w1(0.1)},ticks:{color:w1(0.5),font:{size:9},maxTicksLimit:8}},y:{display:!0,beginAtZero:!0,grid:{color:w1(0.1)},ticks:{color:w1(0.5),font:{size:10},stepSize:1,callback:(G)=>Number.isInteger(G)?G:""}}}}});else this.viewerChart.data.labels=Q,this.viewerChart.data.datasets[0].data=$,this.viewerChart.update("none");if(w&&this.resourceCanvasRef)if(!this.resourceChart)this.resourceChart=new M2(this.resourceCanvasRef,{type:"line",data:{labels:Q,datasets:[{label:"CPU",data:J,borderColor:F8(0.9),backgroundColor:"transparent",borderWidth:1.5,tension:0.3,pointRadius:0},{label:"Memory",data:Z,borderColor:IZ(0.9),backgroundColor:"transparent",borderWidth:1.5,tension:0.3,pointRadius:0},{label:"Disk",data:q,borderColor:SZ(0.9),backgroundColor:"transparent",borderWidth:1.5,tension:0.3,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:300},interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"bottom",labels:{color:w1(0.7),font:{size:10},boxWidth:12,boxHeight:2,padding:12}},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",titleFont:{size:11},bodyFont:{size:11},padding:8,cornerRadius:6,callbacks:{label:(G)=>`${G.dataset.label}: ${G.parsed.y}%`}}},scales:{x:{display:!0,grid:{color:w1(0.1)},ticks:{color:w1(0.5),font:{size:9},maxTicksLimit:8}},y:{display:!0,min:0,max:100,grid:{color:w1(0.1)},ticks:{color:w1(0.5),font:{size:10},stepSize:25,callback:(G)=>`${G}%`}}}}});else this.resourceChart.data.labels=Q,this.resourceChart.data.datasets[0].data=J,this.resourceChart.data.datasets[1].data=Z,this.resourceChart.data.datasets[2].data=q,this.resourceChart.update("none");let B=w;if(B){let G=B.cpu?.[0]?.percent!=null?Math.round(B.cpu[0].percent):0,T=B.memory?Math.round(B.memory.percent):0,M=B.disk?Math.round(B.disk.percent):0;this.updateGauge("cpu",this.cpuCanvasRef,G),this.updateGauge("mem",this.memCanvasRef,T),this.updateGauge("disk",this.diskCanvasRef,M)}}updateGauge($,J,Z){if(!J)return;let q=$==="cpu"?"cpuGauge":$==="mem"?"memGauge":"diskGauge",Q=this[q];if(!Q)this[q]=new M2(J,{type:"doughnut",data:{datasets:[{data:[Z,100-Z],backgroundColor:[VZ(Z,0.8),w1(0.15)],borderWidth:0,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!0,cutout:"75%",rotation:-90,circumference:180,animation:{duration:400,easing:"easeOutQuart"},plugins:{legend:{display:!1},tooltip:{enabled:!1}}}});else Q.data.datasets[0].data=[Z,100-Z],Q.data.datasets[0].backgroundColor=[VZ(Z,0.8),w1(0.15)],Q.update("none")}renderOnlineState($){let J=$?.viewerCount||0,Z=$?.sessionPeakViewerCount||0,q=$?.lastConnectTime,Q=$?.broadcaster,Y=Q?.streamDetails;return K("div",{class:"space-y-6"},K("div",{class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},K(E,null,K(h,null,K(a,{className:"flex items-center gap-1.5"},K(xU,null),"Stream started"),K(c,{className:"text-2xl tabular-nums"},q?m0(q):"Just now"))),K(E,null,K(h,null,K(a,{className:"flex items-center gap-1.5"},K(mU,null),"Current viewers"),K(c,{className:"text-2xl tabular-nums"},J))),K(E,null,K(h,null,K(a,{className:"flex items-center gap-1.5"},K(dU,null),"Session peak"),K(c,{className:"text-2xl tabular-nums"},Z)))),K(E,null,K(h,null,K(c,null,"Viewers Over Time"),K(a,null,"Real-time viewer count  updates every 5s")),K(x,null,K("div",{style:{height:"220px"}},K("canvas",{ref:(w)=>{this.viewerCanvasRef=w}})))),K("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},K(E,null,K(h,null,K(c,null,"Inbound Stream"),K(a,null,"Details from the broadcasting source")),K(x,null,K("div",{class:"space-y-2"},Q?.remoteAddr&&K("div",{class:"flex justify-between text-sm"},K("span",{class:"text-muted-foreground"},"Source"),K("span",{class:"font-mono text-foreground"},Q.remoteAddr)),Y&&K(t2,null,K(_1,null),K("div",{class:"flex justify-between text-sm"},K("span",{class:"text-muted-foreground"},"Video"),K("span",{class:"text-foreground"},Y.videoCodec,"  ",Y.videoBitrate," kbps")),K("div",{class:"flex justify-between text-sm"},K("span",{class:"text-muted-foreground"},"Resolution"),K("span",{class:"text-foreground"},Y.width,"",Y.height," @ ",Y.framerate,"fps")),K("div",{class:"flex justify-between text-sm"},K("span",{class:"text-muted-foreground"},"Audio"),K("span",{class:"text-foreground"},Y.audioCodec,"  ",Y.audioBitrate," kbps"))),!Y&&!Q?.remoteAddr&&K("p",{class:"text-sm text-muted-foreground italic"},"No stream details available")))),this.renderHardwareGauges()),this.state.hardware&&K(E,null,K(h,null,K(c,null,"Resource History"),K(a,null,"CPU, memory, and disk usage over time")),K(x,null,K("div",{style:{height:"200px"}},K("canvas",{ref:(w)=>{this.resourceCanvasRef=w}})))))}renderOfflineState($){let J=$?.lastDisconnectTime;return K("div",{class:"space-y-6"},K(E,null,K(x,{className:"py-12"},K("div",{class:"flex flex-col items-center text-center"},K("div",{class:"flex size-12 items-center justify-center rounded-full bg-muted mb-4"},K(pU,null)),K("h3",{class:"text-lg font-semibold"},"No active stream"),K("p",{class:"text-sm text-muted-foreground mt-1 mb-2 max-w-sm"},"Start streaming to see your dashboard come alive with real-time charts and stats."),J&&K(g,{variant:"outline",className:"mt-1"},"Last stream ended ",m0(J))))),K("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4"},K(E,null,K(h,null,K(c,null,"Broadcasting Software"),K(a,null,"Get started with OBS or Streamlabs")),K(x,null,K("p",{class:"text-sm text-muted-foreground leading-relaxed"},"Point your streaming software to your server's RTMP endpoint to begin broadcasting."))),K(E,null,K(h,null,K(c,null,"Stream Key"),K(a,null,"Found in Video configuration")),K(x,null,K("p",{class:"text-sm text-muted-foreground leading-relaxed"},"Your stream key is in the Video tab. Keep it secret  anyone with the key can stream to your server.")))),this.renderHardwareGauges(),this.state.hardware&&K(E,null,K(h,null,K(c,null,"Resource History"),K(a,null,"CPU, memory, and disk usage over time")),K(x,null,K("div",{style:{height:"200px"}},K("canvas",{ref:(Z)=>{this.resourceCanvasRef=Z}})))))}renderHardwareGauges(){let{hardware:$}=this.state;if(!$)return null;let J=$,Z=J.cpu?.[0]?.percent!=null?Math.round(J.cpu[0].percent):0,q=J.memory?Math.round(J.memory.percent):0,Q=J.disk?Math.round(J.disk.percent):0;return K(E,null,K(h,null,K(c,null,"System Resources"),K(a,null,J.cpu?.[0]?.modelName||"Server hardware")),K(x,null,K("div",{class:"grid grid-cols-3 gap-4"},K("div",{class:"flex flex-col items-center"},K("div",{class:"relative",style:{width:"100px",height:"60px"}},K("canvas",{ref:(Y)=>{this.cpuCanvasRef=Y}}),K("div",{class:"absolute inset-x-0 bottom-0 text-center"},K("span",{class:R("text-lg font-bold tabular-nums",Z>90?"text-destructive":"")},Z,"%"))),K("span",{class:"text-xs text-muted-foreground mt-1"},"CPU")),K("div",{class:"flex flex-col items-center"},K("div",{class:"relative",style:{width:"100px",height:"60px"}},K("canvas",{ref:(Y)=>{this.memCanvasRef=Y}}),K("div",{class:"absolute inset-x-0 bottom-0 text-center"},K("span",{class:R("text-lg font-bold tabular-nums",q>90?"text-destructive":"")},q,"%"))),K("span",{class:"text-xs text-muted-foreground mt-1"},"Memory")),K("div",{class:"flex flex-col items-center"},K("div",{class:"relative",style:{width:"100px",height:"60px"}},K("canvas",{ref:(Y)=>{this.diskCanvasRef=Y}}),K("div",{class:"absolute inset-x-0 bottom-0 text-center"},K("span",{class:R("text-lg font-bold tabular-nums",Q>90?"text-destructive":"")},Q,"%"))),K("span",{class:"text-xs text-muted-foreground mt-1"},"Disk")))))}render(){let{status:$,loading:J,error:Z}=this.state;if(J)return K("div",{class:"space-y-4"},K(m,{className:"h-8 w-48"}),K("div",{class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},K(m,{className:"h-24 rounded-xl"}),K(m,{className:"h-24 rounded-xl"}),K(m,{className:"h-24 rounded-xl"})),K(m,{className:"h-64 rounded-xl"}),K("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},K(m,{className:"h-48 rounded-xl"}),K(m,{className:"h-48 rounded-xl"})));if(Z)return K(j0,{variant:"destructive"},K(R0,null,Z));let q=$,Q=q?.online||!1;return K("div",null,K("div",{class:"mb-6"},K("h1",{class:"text-2xl font-bold tracking-tight"},"Dashboard"),K("p",{class:"text-sm text-muted-foreground mt-1"},Q?"Your stream is live.":"Server overview and quick actions.")),Q?this.renderOnlineState(q):this.renderOfflineState(q))}}class p7 extends N{state={config:null,loading:!0,saving:!1,error:null,success:null,name:"",title:"",summary:"",logo:"",tags:"",offlineMessage:"",nsfw:!1};componentDidMount(){this.loadConfig()}async loadConfig(){try{let $=await s.admin.getConfig(this.props.token),J=$?.instanceDetails||{};this.setState({config:$,loading:!1,name:J.name||"",title:J.title||"",summary:J.summary||"",logo:J.logo||"",tags:(J.tags||[]).join(", "),offlineMessage:J.offlineMessage||"",nsfw:J.nsfw||!1})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load config",loading:!1})}}handleSave=async()=>{this.setState({saving:!0,error:null,success:null});try{let $=this.state.tags.split(",").map((J)=>J.trim()).filter(Boolean);await s.admin.updateConfig(this.props.token,{instanceDetails:{name:this.state.name,title:this.state.title,summary:this.state.summary,logo:this.state.logo,tags:$,offlineMessage:this.state.offlineMessage,nsfw:this.state.nsfw}}),this.setState({saving:!1,success:"Configuration saved."}),U0({title:"Configuration saved",description:"Your changes have been applied."}),setTimeout(()=>this.setState({success:null}),3000)}catch($){let J=$ instanceof Error?$.message:"Failed to save";this.setState({saving:!1,error:J}),U0({title:"Save failed",description:J,variant:"destructive"})}};handleInput=($)=>(J)=>{this.setState({[$]:J.target.value})};render(){let{loading:$,saving:J,error:Z,success:q,name:Q,title:Y,summary:w,tags:X,offlineMessage:U,nsfw:B}=this.state;if($)return K("div",{class:"max-w-3xl space-y-4"},K(m,{className:"h-8 w-64"}),K(m,{className:"h-4 w-96"}),K(m,{className:"h-64 rounded-xl"}),K(m,{className:"h-32 rounded-xl"}),K(m,{className:"h-20 rounded-xl"}));return K("div",{class:"max-w-3xl space-y-6"},K("div",null,K("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"General Configuration"),K("p",{class:"text-sm text-muted-foreground mt-1"},"Configure your server's public-facing information.")),Z&&K(j0,{variant:"destructive"},K(R0,null,Z)),q&&K(j0,null,K(R0,{className:"text-success"},q)),K(E,null,K(h,null,K(c,null,"Instance Details"),K(a,null,"Basic information about your streaming server.")),K(x,null,K("div",{class:"space-y-4"},K("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4"},K("div",{class:"space-y-1.5"},K(K0,null,"Server Name"),K(Y0,{type:"text",value:Q,onInput:this.handleInput("name"),placeholder:"My Stream"}),K("p",{class:"text-xs text-muted-foreground"},"The public name of your server.")),K("div",{class:"space-y-1.5"},K(K0,null,"Stream Title"),K(Y0,{type:"text",value:Y,onInput:this.handleInput("title"),placeholder:"What are you streaming?"}),K("p",{class:"text-xs text-muted-foreground"},"Shown when your stream is live."))),K("div",{class:"space-y-1.5"},K(K0,null,"Summary"),K($2,{className:"min-h-[100px]",value:w,onInput:this.handleInput("summary"),placeholder:"Tell viewers about your stream..."}),K("p",{class:"text-xs text-muted-foreground"},"A brief description shown on your stream page.")),K("div",{class:"space-y-1.5"},K(K0,null,"Tags"),K(Y0,{type:"text",value:X,onInput:this.handleInput("tags"),placeholder:"gaming, music, art"}),K("p",{class:"text-xs text-muted-foreground"},"Comma-separated tags to help people discover your stream."))))),K(E,null,K(h,null,K(c,null,"Appearance"),K(a,null,"Customize what viewers see when your stream is offline.")),K(x,null,K("div",{class:"space-y-1.5"},K(K0,null,"Offline Message"),K($2,{className:"min-h-[80px]",value:U,onInput:this.handleInput("offlineMessage"),placeholder:"Custom message shown when stream is offline"}),K("p",{class:"text-xs text-muted-foreground"},"Displayed to visitors when you're not streaming.")))),K(E,null,K(h,null,K(c,null,"Content Settings")),K(x,null,K("div",{class:"flex items-center justify-between rounded-lg border p-4"},K("div",null,K("p",{class:"text-sm font-medium"},"NSFW Content"),K("p",{class:"text-sm text-muted-foreground"},"Mark your stream as containing adult content.")),K(i0,{checked:B,onChange:(G)=>this.setState({nsfw:G})})))),K("div",{class:"flex items-center gap-4 pt-2 pb-8"},K(f,{onClick:this.handleSave,disabled:J,className:"px-8"},J?"Saving...":"Save Configuration"),q&&K(g,{variant:"outline",className:"text-success border-success/30"},"Saved")))}}var rU=[{value:1,label:"Low Latency",description:"~4s delay. Best for interactive streams."},{value:2,label:"Medium",description:"~8s delay. Good balance of quality and latency."},{value:3,label:"High Quality",description:"~15s delay. Best video quality, higher latency."},{value:4,label:"Offline",description:"Optimized for VOD-style playback."}],cU=[{value:1,label:"Fastest",description:"Lowest quality, minimal CPU"},{value:2,label:"Faster",description:"Low quality, low CPU"},{value:3,label:"Medium",description:"Balanced quality and CPU"},{value:4,label:"Slower",description:"High quality, more CPU"},{value:5,label:"Slowest",description:"Best quality, maximum CPU"}],sU=[{label:"Source (passthrough)",width:0,height:0},{label:"1080p",width:1920,height:1080},{label:"720p",width:1280,height:720},{label:"480p",width:854,height:480},{label:"360p",width:640,height:360}];var oU=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),K("line",{x1:"5",y1:"12",x2:"19",y2:"12"})),lU=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("polyline",{points:"3 6 5 6 21 6"}),K("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})),iU=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),K("circle",{cx:"12",cy:"12",r:"3"})),nU=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),K("line",{x1:"1",y1:"1",x2:"23",y2:"23"}));var CZ=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),K("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}));function NZ(){return{videoPassthrough:!1,audioPassthrough:!1,videoBitrate:1200,audioBitrate:128,scaledWidth:1280,scaledHeight:720,framerate:24,cpuUsageLevel:3}}class r7 extends N{state={loading:!0,saving:!1,error:null,latencyLevel:2,variants:[],streamKey:"",showStreamKey:!1,newStreamKey:"",rtmpPort:1935,webPort:8080};componentDidMount(){this.loadConfig()}async loadConfig(){try{let $=await s.admin.getConfig(this.props.token),J=$?.videoSettings||{};this.setState({loading:!1,latencyLevel:J.latencyLevel||2,variants:J.videoQualityVariants||[NZ()],streamKey:$?.streamKey||"",rtmpPort:$?.rtmpServerPort||1935,webPort:$?.webServerPort||8080})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load config",loading:!1})}}handleSave=async()=>{this.setState({saving:!0,error:null});try{await s.admin.updateConfig(this.props.token,{videoSettings:{latencyLevel:this.state.latencyLevel,videoQualityVariants:this.state.variants}}),this.setState({saving:!1}),U0({title:"Video configuration saved",description:"Changes will apply on next stream start."})}catch($){let J=$ instanceof Error?$.message:"Failed to save";this.setState({saving:!1,error:J}),U0({title:"Save failed",description:J,variant:"destructive"})}};handleStreamKeyChange=async()=>{let $=this.state.newStreamKey.trim();if(!$)return;try{await s.admin.setStreamKey(this.props.token,$),this.setState({streamKey:$,newStreamKey:""}),U0({title:"Stream key updated"})}catch(J){U0({title:"Failed to update stream key",variant:"destructive"})}};updateVariant($,J){let Z=[...this.state.variants];Z[$]={...Z[$],...J},this.setState({variants:Z})}addVariant=()=>{this.setState({variants:[...this.state.variants,NZ()]})};removeVariant=($)=>{if(this.state.variants.length<=1)return;let J=this.state.variants.filter((Z,q)=>q!==$);this.setState({variants:J})};copyToClipboard($){navigator.clipboard.writeText($).then(()=>{U0({title:"Copied to clipboard"})}).catch(()=>{})}renderVariantCard($,J){let Z=$.videoPassthrough,q=Z?"Source":$.scaledWidth===0?"Source":`${$.scaledWidth}${$.scaledHeight}`;return K(E,{key:J},K(h,null,K("div",{class:"flex items-center justify-between"},K("div",{class:"flex items-center gap-2"},K(c,null,"Output #",J+1),K(g,{variant:"secondary"},q),Z&&K(g,{variant:"outline"},"Passthrough")),this.state.variants.length>1&&K(f,{variant:"ghost",size:"icon-sm",className:"text-destructive/60 hover:text-destructive hover:bg-destructive/10",onClick:()=>this.removeVariant(J)},K(lU,null)))),K(x,null,K("div",{class:"space-y-6"},K("div",{class:"flex items-center justify-between rounded-lg border p-4"},K("div",{class:"pr-4"},K("p",{class:"text-sm font-medium"},"Video Passthrough"),K("p",{class:"text-sm text-muted-foreground mt-0.5"},"Re-use the inbound stream without re-encoding. Lowest CPU.")),K(i0,{checked:$.videoPassthrough,onChange:(Q)=>this.updateVariant(J,{videoPassthrough:Q})})),!$.videoPassthrough&&K(t2,null,K("div",{class:"space-y-3"},K(K0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Resolution"),K("div",{class:"flex flex-wrap gap-2"},sU.map((Q)=>{let Y=$.scaledWidth===Q.width&&$.scaledHeight===Q.height;return K("button",{key:Q.label,class:R("pill-btn px-4 py-2 rounded-lg text-xs font-medium cursor-pointer",Y&&"active"),onClick:()=>this.updateVariant(J,{scaledWidth:Q.width,scaledHeight:Q.height})},Q.label)})),$.scaledWidth>0&&K("div",{class:"flex gap-3 mt-1"},K("div",{class:"space-y-1.5"},K(K0,{className:"text-[11px] text-muted-foreground"},"Width"),K(Y0,{type:"number",className:"h-9 w-28 text-xs tabular-nums",value:String($.scaledWidth),onInput:(Q)=>this.updateVariant(J,{scaledWidth:parseInt(Q.target.value)||0})})),K("div",{class:"space-y-1.5"},K(K0,{className:"text-[11px] text-muted-foreground"},"Height"),K(Y0,{type:"number",className:"h-9 w-28 text-xs tabular-nums",value:String($.scaledHeight),onInput:(Q)=>this.updateVariant(J,{scaledHeight:parseInt(Q.target.value)||0})})))),K("div",{class:"section-divider"}),K("div",{class:"space-y-3"},K("div",{class:"flex items-center justify-between"},K(K0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Video Bitrate"),K(g,{variant:"outline",className:"tabular-nums font-mono text-xs"},$.videoBitrate," kbps")),K("input",{type:"range",min:"200",max:"6000",step:"100",value:String($.videoBitrate),onInput:(Q)=>this.updateVariant(J,{videoBitrate:parseInt(Q.target.value)})}),K("div",{class:"flex justify-between text-[10px] text-muted-foreground/40 px-1"},K("span",null,"200 kbps"),K("span",null,"6000 kbps"))),K("div",{class:"space-y-3"},K(K0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Framerate"),K("div",{class:"flex flex-wrap gap-2"},[24,30,60].map((Q)=>{let Y=$.framerate===Q;return K("button",{key:Q,class:R("pill-btn px-4 py-2 rounded-lg text-xs font-medium cursor-pointer",Y&&"active"),onClick:()=>this.updateVariant(J,{framerate:Q})},Q," fps")}),K(Y0,{type:"number",className:"h-9 w-24 text-xs",placeholder:"Custom",value:[24,30,60].includes($.framerate)?"":String($.framerate),onInput:(Q)=>{let Y=parseInt(Q.target.value);if(Y>0)this.updateVariant(J,{framerate:Y})}}))),K("div",{class:"section-divider"}),K("div",{class:"space-y-3"},K(K0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Encoding Speed"),K("div",{class:"grid grid-cols-1 sm:grid-cols-5 gap-2"},cU.map((Q)=>{let Y=$.cpuUsageLevel===Q.value;return K("button",{key:Q.value,class:R("radio-card rounded-lg px-3 py-3 text-center cursor-pointer",Y&&"active"),onClick:()=>this.updateVariant(J,{cpuUsageLevel:Q.value})},K("p",{class:R("text-xs font-semibold",Y?"text-primary":"text-foreground")},Q.label),K("p",{class:"text-[10px] text-muted-foreground mt-0.5 leading-tight"},Q.description.split(",")[0]))})))),K("div",{class:"section-divider"}),K("div",{class:"flex items-center justify-between rounded-xl border border-border bg-muted/20 p-4"},K("div",{class:"pr-4"},K("p",{class:"text-sm font-medium text-foreground"},"Audio Passthrough"),K("p",{class:"text-xs text-muted-foreground mt-0.5"},"Re-use the inbound audio stream without re-encoding.")),K(i0,{checked:$.audioPassthrough,onChange:(Q)=>this.updateVariant(J,{audioPassthrough:Q})})),!$.audioPassthrough&&K("div",{class:"space-y-3"},K("div",{class:"flex items-center justify-between"},K(K0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Audio Bitrate"),K(g,{variant:"outline",className:"tabular-nums font-mono text-xs"},$.audioBitrate," kbps")),K("input",{type:"range",min:"64",max:"320",step:"16",value:String($.audioBitrate),onInput:(Q)=>this.updateVariant(J,{audioBitrate:parseInt(Q.target.value)})}),K("div",{class:"flex justify-between text-[10px] text-muted-foreground/40 px-1"},K("span",null,"64 kbps"),K("span",null,"320 kbps"))))))}render(){let{loading:$,saving:J,error:Z,latencyLevel:q,variants:Q,streamKey:Y,showStreamKey:w,newStreamKey:X,rtmpPort:U}=this.state;if($)return K("div",{class:"max-w-3xl space-y-4"},K(m,{className:"h-8 w-64"}),K(m,{className:"h-4 w-96"}),K(m,{className:"h-48 rounded-xl"}),K(m,{className:"h-64 rounded-xl"}));return K("div",{class:"max-w-3xl space-y-6"},K("div",null,K("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Video Configuration"),K("p",{class:"text-sm text-muted-foreground mt-1"},"Configure video output quality, latency, and stream key.")),Z&&K(j0,{variant:"destructive"},K(R0,null,Z)),K(E,null,K(h,null,K(c,null,"Stream Key"),K(a,null,"Authenticate with your broadcasting software.")),K(x,{className:"space-y-4"},K("div",{class:"flex items-center gap-2"},K("div",{class:"flex-1 relative"},K(Y0,{type:w?"text":"password",value:Y,readOnly:!0,className:"pr-20 font-mono text-xs"}),K("div",{class:"absolute right-1 top-1/2 -translate-y-1/2 flex gap-0.5"},K(f,{variant:"ghost",size:"icon-sm",className:"size-7",onClick:()=>this.setState({showStreamKey:!w})},w?K(nU,null):K(iU,null)),K(f,{variant:"ghost",size:"icon-sm",className:"size-7",onClick:()=>this.copyToClipboard(Y)},K(CZ,null))))),K("div",{class:"rounded-xl border border-border bg-muted/30 p-4"},K("p",{class:"text-[11px] text-muted-foreground mb-2 font-semibold uppercase tracking-wider"},"RTMP URL"),K("div",{class:"flex items-center gap-2"},K("code",{class:"text-xs text-foreground font-mono bg-background px-3 py-1.5 rounded-lg border border-border flex-1 truncate"},"rtmp://your-server:",U,"/live"),K(f,{variant:"outline",size:"icon-sm",className:"shrink-0",onClick:()=>this.copyToClipboard(`rtmp://your-server:${U}/live`)},K(CZ,null)))),K("div",{class:"section-divider"}),K("div",{class:"space-y-2"},K(K0,{className:"text-xs font-semibold text-muted-foreground"},"Change Stream Key"),K("div",{class:"flex gap-2"},K(Y0,{type:"text",className:"flex-1 text-xs",placeholder:"Enter new stream key",value:X,onInput:(B)=>this.setState({newStreamKey:B.target.value})}),K(f,{size:"sm",onClick:this.handleStreamKeyChange,disabled:!X.trim()},"Update"))))),K(E,null,K(h,null,K(c,null,"Latency"),K(a,null,"Lower latency is better for interactive streams. Higher latency produces better video quality.")),K(x,null,K("div",{class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},rU.map((B)=>{let G=q===B.value;return K("button",{key:B.value,class:R("radio-card rounded-xl px-4 py-4 text-left cursor-pointer",G&&"active"),onClick:()=>this.setState({latencyLevel:B.value})},K("div",{class:"flex items-center justify-between mb-1"},K("p",{class:R("text-sm font-semibold",G?"text-primary":"text-foreground")},B.label),G&&K("span",{class:"size-2.5 rounded-full bg-primary ring-2 ring-primary/30 shrink-0"})),K("p",{class:"text-xs text-muted-foreground leading-relaxed"},B.description))})))),K("div",{class:"flex items-center justify-between"},K("div",null,K("h2",{class:"text-lg font-semibold text-foreground"},"Output Variants"),K("p",{class:"text-xs text-muted-foreground mt-0.5"},"Each variant creates a separate quality option for viewers.")),K(f,{variant:"outline",size:"sm",onClick:this.addVariant,className:"gap-1.5"},K(oU,null),"Add Variant")),K("div",{class:"space-y-4"},Q.map((B,G)=>this.renderVariantCard(B,G))),K("div",{class:"flex items-center gap-4 pt-2 pb-8"},K(f,{onClick:this.handleSave,disabled:J,className:"px-8"},J?"Saving...":"Save Video Configuration"),K("p",{class:"text-xs text-muted-foreground"},"Changes take effect on next stream start.")))}}class c7 extends N{state={loading:!0,error:null,chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,chatSpamProtectionEnabled:!0,chatSlurFilterEnabled:!0,forbiddenUsernames:"",suggestedUsernames:"",hideViewerCount:!1,systemMessage:"",sendingMessage:!1};componentDidMount(){this.loadConfig()}async loadConfig(){try{let $=await s.admin.getConfig(this.props.token);this.setState({loading:!1,chatDisabled:$?.chatDisabled||!1,chatJoinMessagesEnabled:$?.chatJoinMessagesEnabled??!0,chatEstablishedUserMode:$?.chatEstablishedUserMode||!1,chatSpamProtectionEnabled:$?.chatSpamProtectionEnabled??!0,chatSlurFilterEnabled:$?.chatSlurFilterEnabled??!0,forbiddenUsernames:($?.forbiddenUsernames||[]).join(`
`),suggestedUsernames:($?.suggestedUsernames||[]).join(`
`),hideViewerCount:$?.hideViewerCount||!1})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load config",loading:!1})}}async toggleSetting($,J,Z){try{await $(this.props.token,Z),this.setState({[J]:Z}),U0({title:"Setting updated"})}catch(q){U0({title:"Failed to update setting",variant:"destructive"})}}handleSaveForbiddenUsernames=async()=>{try{let $=this.state.forbiddenUsernames.split(`
`).map((J)=>J.trim()).filter(Boolean);await s.admin.updateForbiddenUsernames(this.props.token,$),U0({title:"Forbidden usernames updated"})}catch{U0({title:"Failed to save",variant:"destructive"})}};handleSaveSuggestedUsernames=async()=>{try{let $=this.state.suggestedUsernames.split(`
`).map((J)=>J.trim()).filter(Boolean);await s.admin.updateSuggestedUsernames(this.props.token,$),U0({title:"Suggested usernames updated"})}catch{U0({title:"Failed to save",variant:"destructive"})}};handleSendSystemMessage=async()=>{let $=this.state.systemMessage.trim();if(!$)return;this.setState({sendingMessage:!0});try{await s.admin.sendSystemMessage(this.props.token,$),this.setState({systemMessage:"",sendingMessage:!1}),U0({title:"System message sent"})}catch{this.setState({sendingMessage:!1}),U0({title:"Failed to send message",variant:"destructive"})}};renderToggle($,J,Z,q,Q){return K("div",{class:"flex items-center justify-between rounded-xl border border-border bg-muted/20 p-4"},K("div",{class:"pr-4"},K("p",{class:"text-sm font-medium text-foreground"},$),K("p",{class:"text-xs text-muted-foreground mt-0.5 leading-relaxed"},J)),K(i0,{checked:Z,onChange:(Y)=>this.toggleSetting(Q,q,Y)}))}render(){let{loading:$,error:J,chatDisabled:Z,chatJoinMessagesEnabled:q,chatEstablishedUserMode:Q,chatSpamProtectionEnabled:Y,chatSlurFilterEnabled:w,forbiddenUsernames:X,suggestedUsernames:U,hideViewerCount:B,systemMessage:G,sendingMessage:T}=this.state;if($)return K("div",{class:"max-w-3xl space-y-4"},K(m,{className:"h-8 w-64"}),K(m,{className:"h-4 w-96"}),K(m,{className:"h-48 rounded-xl"}),K(m,{className:"h-48 rounded-xl"}));return K("div",{class:"max-w-3xl space-y-6"},K("div",null,K("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Chat Configuration"),K("p",{class:"text-sm text-muted-foreground mt-1"},"Configure chat settings, moderation, and spam protection.")),J&&K(j0,{variant:"destructive"},K(R0,null,J)),K(E,null,K(h,null,K(c,null,"Send System Message"),K(a,null,"Broadcast to all connected chat users.")),K(x,null,K("div",{class:"flex gap-2"},K(Y0,{className:"flex-1 text-xs",placeholder:"Type a system message...",value:G,onInput:(M)=>this.setState({systemMessage:M.target.value}),onKeyDown:(M)=>{if(M.key==="Enter")this.handleSendSystemMessage()}}),K(f,{size:"sm",onClick:this.handleSendSystemMessage,disabled:!G.trim()||T},T?"Sending...":"Send")))),K(E,null,K(h,null,K(c,null,"General")),K(x,null,K("div",{class:"space-y-3"},this.renderToggle("Disable Chat","Completely hide the chat from your stream page.",Z,"chatDisabled",s.admin.updateChatDisabled),this.renderToggle("Show Join Messages","Display a message when users join or leave the chat.",q,"chatJoinMessagesEnabled",s.admin.updateChatJoinMessages),this.renderToggle("Hide Viewer Count","Hide the number of current viewers from the public page.",B,"hideViewerCount",s.admin.updateHideViewerCount)))),K(E,null,K(h,null,K(c,null,"Moderation"),K(a,null,"Protect your chat from spam and unwanted content.")),K(x,null,K("div",{class:"space-y-3"},this.renderToggle("Established User Mode","Only allow users who have been registered for a while to chat. New users will need to wait before they can send messages.",Q,"chatEstablishedUserMode",s.admin.updateChatEstablishedMode),this.renderToggle("Spam Protection","Automatically detect and block spam messages, including repeated messages and excessive links.",Y,"chatSpamProtectionEnabled",s.admin.updateChatSpamProtection),this.renderToggle("Slur Filter","Automatically filter messages containing known slurs and offensive language.",w,"chatSlurFilterEnabled",s.admin.updateChatSlurFilter)))),K(E,null,K(h,null,K(c,null,"Usernames"),K(a,null,"Manage forbidden and suggested usernames for chat.")),K(x,null,K("div",{class:"space-y-5"},K("div",{class:"space-y-2"},K(K0,null,"Forbidden Usernames"),K("p",{class:"text-sm text-muted-foreground"},"Users will not be able to register with these names. One per line."),K($2,{className:"min-h-[80px] text-xs font-mono",placeholder:`admin
moderator
system`,value:X,onInput:(M)=>this.setState({forbiddenUsernames:M.target.value})}),K(f,{size:"sm",variant:"secondary",onClick:this.handleSaveForbiddenUsernames},"Save Forbidden List")),K(_1,null),K("div",{class:"space-y-2"},K(K0,null,"Suggested Usernames"),K("p",{class:"text-sm text-muted-foreground"},"Suggested names shown to new users when registering. One per line."),K($2,{className:"min-h-[80px] text-xs font-mono",placeholder:`Viewer
Chatter
Lurker`,value:U,onInput:(M)=>this.setState({suggestedUsernames:M.target.value})}),K(f,{size:"sm",variant:"secondary",onClick:this.handleSaveSuggestedUsernames},"Save Suggested List"))))))}}var aU=()=>K("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),K("circle",{cx:"9",cy:"7",r:"4"}),K("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),K("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})),tU=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("polyline",{points:"23 4 23 10 17 10"}),K("polyline",{points:"1 20 1 14 7 14"}),K("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})),eU=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("circle",{cx:"12",cy:"12",r:"10"}),K("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),K("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})),$B=()=>K("svg",{class:"size-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("circle",{cx:"12",cy:"12",r:"10"}),K("polyline",{points:"12 6 12 12 16 14"})),JB=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),K("circle",{cx:"12",cy:"7",r:"4"}));class s7 extends N{pollTimer=null;state={loading:!0,error:null,viewers:[],chatClients:[],pollTimer:null};componentDidMount(){this.loadData(),this.pollTimer=setInterval(()=>this.loadData(),1e4)}componentWillUnmount(){if(this.pollTimer)clearInterval(this.pollTimer)}async loadData(){try{let[$,J]=await Promise.all([s.admin.getViewers(this.props.token).catch(()=>[]),s.admin.getConnectedClients(this.props.token).catch(()=>[])]);this.setState({loading:!1,error:null,viewers:Array.isArray($)?$:[],chatClients:Array.isArray(J)?J:[]})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load viewers",loading:!1})}}handleRefresh=()=>{this.setState({loading:!0}),this.loadData()};render(){let{loading:$,error:J,viewers:Z,chatClients:q}=this.state,Q=Z.length,Y=q.length;if($&&Z.length===0)return K("div",{class:"space-y-4"},K(m,{className:"h-8 w-48"}),K(m,{className:"h-4 w-96"}),K("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-3"},K(m,{className:"h-20 rounded-xl"}),K(m,{className:"h-20 rounded-xl"})),K(m,{className:"h-64 rounded-xl"}));return K("div",null,K("div",{class:"flex items-center justify-between mb-6"},K("div",null,K("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Viewers"),K("p",{class:"text-sm text-muted-foreground mt-1"},"Connected viewers and chat participants.")),K(f,{variant:"secondary",size:"sm",onClick:this.handleRefresh},K(tU,null),"Refresh")),J&&K(j0,{variant:"destructive",className:"mb-4"},K(R0,null,J)),K("div",{class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6"},K(E,null,K(h,null,K(a,null,"Stream Viewers"),K(c,{className:"text-2xl tabular-nums"},Q))),K(E,null,K(h,null,K(a,null,"Chat Participants"),K(c,{className:"text-2xl tabular-nums"},Y)))),K(E,{className:"mb-4"},K(h,null,K(c,null,"Connected Viewers")),K(x,null,Q===0?K("div",{class:"text-center py-8"},K("div",{class:"size-12 rounded-full bg-muted/30 flex items-center justify-center mx-auto mb-3"},K(aU,null)),K("p",{class:"text-sm text-muted-foreground"},"No viewers connected"),K("p",{class:"text-xs text-muted-foreground mt-1"},"Viewers will appear here when someone watches your stream.")):K(v8,null,K(y8,null,K(B4,null,K(W2,null,"User"),K(W2,null,"Connected"),K(W2,null,"Location"),K(W2,null,"Client"))),K(E8,null,Z.map((w,X)=>K(B4,{key:w.id||w.clientID||X},K(j2,null,K("div",{class:"flex items-center gap-2 min-w-0"},K(JB,null),K("div",{class:"min-w-0"},K("p",{class:"text-sm truncate"},w.displayName||w.username||"Anonymous"),w.messageCount!=null&&w.messageCount>0&&K("p",{class:"text-xs text-muted-foreground"},w.messageCount," messages")))),K(j2,{className:"text-muted-foreground"},K("div",{class:"flex items-center gap-1"},K($B,null),w.connectedAt?m0(w.connectedAt):w.createdAt?m0(w.createdAt):"")),K(j2,{className:"text-muted-foreground"},K("div",{class:"flex items-center gap-1"},K(eU,null),K("span",{class:"truncate"},w.geo||""))),K(j2,{className:"text-muted-foreground text-xs"},w.userAgent?ZB(w.userAgent):""))))))),K(E,null,K(h,null,K(c,null,"Chat Participants")),K(x,null,Y===0?K("div",{class:"text-center py-6"},K("p",{class:"text-sm text-muted-foreground"},"No chat participants")):K("div",{class:"flex flex-wrap gap-2"},q.map((w,X)=>K(g,{key:w.id||X,variant:"secondary",className:"gap-1.5 py-1"},K("span",{class:"size-2 rounded-full bg-success"}),w.displayName||w.username||"Anonymous"))))),K("p",{class:"text-[10px] text-muted-foreground/30 mt-4 text-center"},"Auto-refreshes every 10 seconds"))}}function ZB($){if($.includes("Firefox"))return"Firefox";if($.includes("Chrome"))return"Chrome";if($.includes("Safari"))return"Safari";if($.includes("Edge"))return"Edge";if($.includes("OBS"))return"OBS";if($.includes("VLC"))return"VLC";if($.length>20)return $.slice(0,20)+"";return $}var qB=()=>K("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),K("polyline",{points:"14 2 14 8 20 8"}),K("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),K("line",{x1:"16",y1:"17",x2:"8",y2:"17"})),QB=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("polyline",{points:"23 4 23 10 17 10"}),K("polyline",{points:"1 20 1 14 7 14"}),K("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})),YB=()=>K("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),K("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),K("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"}));class o7 extends N{pollTimer=null;scrollRef=null;state={loading:!0,error:null,logs:[],warnings:[],activeView:"logs",filterLevel:"all",autoScroll:!0,search:""};componentDidMount(){this.loadData(),this.pollTimer=setInterval(()=>this.loadData(),5000)}componentWillUnmount(){if(this.pollTimer)clearInterval(this.pollTimer)}componentDidUpdate($,J){if(this.state.autoScroll&&this.scrollRef&&J.logs.length!==this.state.logs.length)this.scrollRef.scrollTop=this.scrollRef.scrollHeight}async loadData(){try{let[$,J]=await Promise.all([s.admin.getLogEntries(this.props.token).catch(()=>[]),s.admin.getWarnings(this.props.token).catch(()=>[])]);this.setState({loading:!1,error:null,logs:Array.isArray($)?$:[],warnings:Array.isArray(J)?J:[]})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load logs",loading:!1})}}handleRefresh=()=>{this.loadData()};getFilteredLogs(){let{logs:$,warnings:J,activeView:Z,filterLevel:q,search:Q}=this.state,Y=Z==="warnings"?J:$;if(q!=="all")Y=Y.filter((w)=>w.level===q);if(Q.trim()){let w=Q.toLowerCase();Y=Y.filter((X)=>X.message?.toLowerCase().includes(w))}return Y}getLevelColor($){switch($?.toLowerCase()){case"error":return"text-destructive";case"warn":case"warning":return"text-warning";case"info":return"text-blue-400";case"debug":return"text-muted-foreground/50";default:return"text-foreground"}}getLevelBadge($){let Z={error:"bg-destructive/10 text-destructive border-destructive/20",warn:"bg-warning/10 text-warning border-warning/20",warning:"bg-warning/10 text-warning border-warning/20",info:"bg-blue-500/10 text-blue-400 border-blue-500/20",debug:"bg-muted text-muted-foreground border-border/50"}[$?.toLowerCase()]||"bg-muted text-muted-foreground border-border/50";return K("span",{class:R("inline-flex items-center px-1.5 py-0 rounded text-[9px] font-mono uppercase border",Z)},($||"log").slice(0,4))}formatLogTime($){try{return new Date($).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return $||""}}render(){let{loading:$,error:J,activeView:Z,filterLevel:q,autoScroll:Q,search:Y,warnings:w}=this.state,X=this.getFilteredLogs();if($&&this.state.logs.length===0)return K("div",{class:"space-y-4"},K(m,{className:"h-8 w-48"}),K(m,{className:"h-4 w-96"}),K(m,{className:"h-96 rounded-xl"}));return K("div",null,K("div",{class:"flex items-center justify-between mb-6"},K("div",null,K("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Logs"),K("p",{class:"text-sm text-muted-foreground mt-1"},"Server logs and warnings.")),K("div",{class:"flex items-center gap-2"},K(f,{variant:"secondary",size:"sm",onClick:this.handleRefresh},K(QB,null),"Refresh"))),J&&K(j0,{variant:"destructive",className:"mb-4"},K(R0,null,J)),K("div",{class:"flex items-center gap-1 mb-4 p-1 bg-muted/30 rounded-lg w-fit"},K("button",{class:R("px-3 py-1.5 rounded-md text-xs font-medium transition-colors",Z==="logs"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),onClick:()=>this.setState({activeView:"logs"})},"All Logs"),K("button",{class:R("px-3 py-1.5 rounded-md text-xs font-medium transition-colors flex items-center gap-1.5",Z==="warnings"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),onClick:()=>this.setState({activeView:"warnings"})},K(YB,null),"Warnings",w.length>0&&K(g,{variant:"destructive",className:"text-[9px] px-1 py-0 h-4"},w.length))),K("div",{class:"flex items-center gap-3 mb-3"},K("div",{class:"flex items-center gap-1"},["all","error","warn","info","debug"].map((U)=>K("button",{key:U,class:R("px-2 py-1 rounded text-[10px] font-medium transition-colors uppercase",q===U?"bg-primary/15 text-primary":"text-muted-foreground/50 hover:text-muted-foreground hover:bg-muted/30"),onClick:()=>this.setState({filterLevel:U})},U))),K(_1,{orientation:"vertical",className:"h-5"}),K(Y0,{className:"h-7 text-xs flex-1 max-w-xs",placeholder:"Search logs...",value:Y,onInput:(U)=>this.setState({search:U.target.value})}),K("div",{class:"flex items-center gap-1.5"},K(i0,{checked:Q,onChange:(U)=>this.setState({autoScroll:U})}),K("span",{class:"text-[10px] text-muted-foreground select-none"},"Auto-scroll"))),K("div",{ref:(U)=>{this.scrollRef=U},class:"rounded-xl border border-border bg-card/40 overflow-hidden"},K("div",{class:"overflow-y-auto font-mono text-[11px] leading-relaxed",style:{"max-height":"600px"}},X.length===0?K("div",{class:"text-center py-12"},K("div",{class:"size-12 rounded-full bg-muted/30 flex items-center justify-center mx-auto mb-3"},K(qB,null)),K("p",{class:"text-sm text-muted-foreground"},"No log entries"),K("p",{class:"text-[11px] text-muted-foreground/50 mt-1"},Y?"Try a different search term.":"Logs will appear here as the server runs.")):X.map((U,B)=>K("div",{key:B,class:R("flex items-start gap-2 px-3 py-1.5 hover:bg-muted/20 transition-colors border-b border-border/10",U.level==="error"&&"bg-destructive/5",U.level==="warn"||U.level==="warning"?"bg-warning/5":"")},K("span",{class:"text-muted-foreground/40 shrink-0 w-16 text-right tabular-nums"},this.formatLogTime(U.time)),K("span",{class:"shrink-0 mt-0.5"},this.getLevelBadge(U.level)),K("span",{class:R("flex-1 break-all",this.getLevelColor(U.level))},U.message))))),K("p",{class:"text-[10px] text-muted-foreground/30 mt-3 text-center"},"Showing ",X.length," entries  Auto-refreshes every 5 seconds"))}}var wB=()=>K("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})),XB=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),K("line",{x1:"5",y1:"12",x2:"19",y2:"12"})),KB=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("polyline",{points:"3 6 5 6 21 6"}),K("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})),AZ=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),K("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})),UB=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),K("circle",{cx:"12",cy:"12",r:"3"})),BB=()=>K("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},K("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),K("line",{x1:"1",y1:"1",x2:"23",y2:"23"}));class l7 extends N{state={loading:!0,error:null,tokens:[],showCreate:!1,newTokenName:"",creating:!1,newlyCreatedToken:null,revealedTokens:new Set,confirmDelete:null};componentDidMount(){this.loadTokens()}async loadTokens(){try{let $=await s.admin.getAccessTokens(this.props.token);this.setState({loading:!1,tokens:Array.isArray($)?$:[]})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load tokens",loading:!1})}}handleCreate=async()=>{let $=this.state.newTokenName.trim();if(!$)return;this.setState({creating:!0});try{let J=await s.admin.createAccessToken(this.props.token,{name:$,scopes:[]});this.setState({creating:!1,showCreate:!1,newTokenName:"",newlyCreatedToken:J?.accessToken||null}),this.loadTokens(),U0({title:"Access token created"})}catch(J){this.setState({creating:!1}),U0({title:"Failed to create token",variant:"destructive"})}};handleDelete=async($)=>{try{await s.admin.deleteAccessToken(this.props.token,$),this.setState({confirmDelete:null}),this.loadTokens(),U0({title:"Token deleted"})}catch{U0({title:"Failed to delete token",variant:"destructive"})}};toggleReveal($){let J=new Set(this.state.revealedTokens);if(J.has($))J.delete($);else J.add($);this.setState({revealedTokens:J})}copyToClipboard($){navigator.clipboard.writeText($).then(()=>{U0({title:"Copied to clipboard"})}).catch(()=>{})}maskToken($){if($.length<=8)return"";return $.slice(0,4)+""+$.slice(-4)}render(){let{loading:$,error:J,tokens:Z,showCreate:q,newTokenName:Q,creating:Y,newlyCreatedToken:w,revealedTokens:X,confirmDelete:U}=this.state;if($)return K("div",{class:"space-y-4"},K(m,{className:"h-8 w-48"}),K(m,{className:"h-4 w-96"}),K(m,{className:"h-32 rounded-xl"}),K(m,{className:"h-32 rounded-xl"}));return K("div",{class:"max-w-3xl"},K("div",{class:"flex items-center justify-between mb-6"},K("div",null,K("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Access Tokens"),K("p",{class:"text-sm text-muted-foreground mt-1"},"Manage API access tokens for integrations and external tools.")),K(f,{variant:q?"outline":"secondary",size:"sm",onClick:()=>this.setState({showCreate:!q,newlyCreatedToken:null})},q?"Cancel":K("span",{class:"flex items-center gap-1.5"},K(XB,null)," New Token"))),J&&K(j0,{variant:"destructive",className:"mb-4"},K(R0,null,J)),w&&K(j0,{className:"mb-4 border-success/30 bg-success/5"},K(R0,null,K("div",{class:"space-y-2"},K("p",{class:"text-sm font-medium text-success"},"Token created successfully!"),K("p",{class:"text-sm text-muted-foreground"},"Copy this token now  you won't be able to see it again."),K("div",{class:"flex items-center gap-2"},K("code",{class:"text-xs font-mono bg-background px-2 py-1 rounded border border-border/40 flex-1 truncate text-foreground"},w),K(f,{variant:"secondary",size:"icon-sm",className:"shrink-0",onClick:()=>this.copyToClipboard(w)},K(AZ,null)))))),q&&K(E,{className:"mb-4"},K(h,null,K(c,null,"Create Access Token"),K(a,null,"Create a new token for API access or integrations.")),K(x,null,K("div",{class:"space-y-3"},K("div",{class:"space-y-1.5"},K(K0,null,"Token Name"),K(Y0,{type:"text",placeholder:"e.g. OBS Integration, Bot Access",value:Q,onInput:(B)=>this.setState({newTokenName:B.target.value}),onKeyDown:(B)=>{if(B.key==="Enter")this.handleCreate()}}),K("p",{class:"text-xs text-muted-foreground"},"A descriptive name to identify this token.")),K(f,{onClick:this.handleCreate,disabled:!Q.trim()||Y},Y?"Creating...":"Create Token")))),Z.length===0?K(E,null,K(x,{className:"py-12"},K("div",{class:"flex flex-col items-center text-center"},K("div",{class:"size-14 rounded-full bg-muted/30 flex items-center justify-center mb-3"},K(wB,null)),K("p",{class:"text-sm font-medium text-foreground mb-1"},"No access tokens"),K("p",{class:"text-xs text-muted-foreground max-w-sm"},"Create an access token to allow external tools and integrations to interact with your server.")))):K("div",{class:"space-y-3"},Z.map((B)=>{let G=X.has(B.accessToken),T=U===B.accessToken;return K(E,{key:B.accessToken},K(x,{className:"p-5"},K("div",{class:"flex items-start justify-between gap-3"},K("div",{class:"min-w-0 flex-1"},K("div",{class:"flex items-center gap-2 mb-1"},K("p",{class:"text-sm font-medium text-foreground"},B.displayName||"Unnamed Token"),B.scopes&&B.scopes.length>0&&B.scopes.map((M)=>K(g,{key:M,variant:"secondary",className:"text-[9px] px-1.5 py-0"},M.replace(/_/g," ")))),K("div",{class:"flex items-center gap-2 mb-2"},K("code",{class:"text-[11px] font-mono text-muted-foreground bg-muted/30 px-2 py-0.5 rounded"},G?B.accessToken:this.maskToken(B.accessToken)),K("button",{class:"text-muted-foreground/50 hover:text-muted-foreground transition-colors",onClick:()=>this.toggleReveal(B.accessToken)},G?K(BB,null):K(UB,null)),K("button",{class:"text-muted-foreground/50 hover:text-muted-foreground transition-colors",onClick:()=>this.copyToClipboard(B.accessToken)},K(AZ,null))),K("div",{class:"flex items-center gap-3 text-[10px] text-muted-foreground/50"},B.createdAt&&K("span",null,"Created ",m0(B.createdAt)),B.lastUsed&&K("span",null,"Last used ",m0(B.lastUsed)))),K("div",{class:"shrink-0"},T?K("div",{class:"flex items-center gap-1.5"},K(f,{variant:"destructive",size:"xs",onClick:()=>this.handleDelete(B.accessToken)},"Confirm"),K(f,{variant:"ghost",size:"xs",onClick:()=>this.setState({confirmDelete:null})},"Cancel")):K(f,{variant:"ghost",size:"icon-sm",className:"text-destructive/60 hover:text-destructive hover:bg-destructive/10",onClick:()=>this.setState({confirmDelete:B.accessToken})},K(KB,null))))))})),K("div",{class:"mt-6"},K("p",{class:"text-sm text-muted-foreground leading-relaxed"},"Access tokens allow external applications to interact with your Oni server's API. Tokens with admin access can modify server configuration. Keep your tokens secure and revoke any that are no longer needed.")))}}class i7 extends N{unsubManager=null;unsubRelay=null;state={manager:S2(),relayState:U9(),newRelayUrl:"",newProfileName:"",showAddProfile:!1};componentDidMount(){this.unsubManager=r$(()=>{this.setState({manager:S2()})}),this.unsubRelay=h$(()=>{this.setState({relayState:U9()})})}componentWillUnmount(){this.unsubManager?.(),this.unsubRelay?.()}handleAddRelay=($)=>{let J=this.state.newRelayUrl.trim();if(!J)return;C2($,J),this.setState({newRelayUrl:""})};handleCreateProfile=()=>{let $=this.state.newProfileName.trim();if(!$)return;s$($),this.setState({newProfileName:"",showAddProfile:!1})};getStatusColor($){switch(this.state.relayState.statuses.get($)){case"connected":return"bg-success";case"connecting":return"bg-warning";case"error":return"bg-destructive";default:return"bg-muted-foreground/30"}}getStatusLabel($){return this.state.relayState.statuses.get($)||"disconnected"}renderProfile($,J){return K(E,{key:$.id,className:R(J&&"border-primary/40")},K(h,null,K("div",{class:"flex items-center justify-between"},K("div",{class:"flex items-center gap-2"},K("button",{class:R("text-sm font-semibold cursor-pointer bg-transparent border-none",J?"text-primary":"text-foreground hover:text-primary"),onClick:()=>c$($.id)},$.name),J&&K(g,{variant:"default"},"Active"),$.builtin&&K(g,{variant:"secondary"},"Built-in")),K("div",{class:"flex items-center gap-2"},K(g,{variant:"outline"},$.relays.length," relays"),!$.builtin&&K(f,{variant:"ghost",size:"xs",className:"text-destructive hover:text-destructive",onClick:()=>o$($.id)},"Delete")))),K(x,null,K("div",{class:"space-y-1.5 mb-3"},$.relays.length===0?K("p",{class:"text-xs text-muted-foreground italic"},"No relays configured"):$.relays.map((Z)=>K("div",{key:Z,class:"flex items-center justify-between group px-2 py-1.5 rounded-md bg-background"},K("div",{class:"flex items-center gap-2 min-w-0"},K("span",{class:R("size-2 rounded-full shrink-0",this.getStatusColor(Z))}),K("span",{class:"text-xs text-foreground truncate"},Z),K(g,{variant:"ghost",className:"text-[10px] px-0"},this.getStatusLabel(Z))),K(f,{variant:"ghost",size:"xs",className:"text-destructive hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity shrink-0",onClick:()=>N4($.id,Z)},"Remove")))),K("div",{class:"flex gap-2"},K(Y0,{className:"flex-1 h-8 text-xs",placeholder:"wss://relay.example.com",value:this.state.newRelayUrl,onInput:(Z)=>this.setState({newRelayUrl:Z.target.value}),onKeyDown:(Z)=>{if(Z.key==="Enter")this.handleAddRelay($.id)}}),K(f,{size:"sm",className:"h-8",onClick:()=>this.handleAddRelay($.id)},"Add"))))}render(){let{manager:$,showAddProfile:J,newProfileName:Z}=this.state;return K("div",null,K("div",{class:"flex items-center justify-between mb-6"},K("div",null,K("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Relay Manager"),K("p",{class:"text-sm text-muted-foreground mt-1"},"Manage relay profiles and connections.")),K(f,{variant:J?"outline":"secondary",size:"sm",onClick:()=>this.setState({showAddProfile:!J})},J?"Cancel":"+ New Profile")),K("p",{class:"text-sm text-muted-foreground mb-4"},"Manage relay profiles for your Nostr identity. Outbox relays are where you publish events. Inbox relays are where others can find your posts. Indexers are used for bootstrapping."),J&&K("div",{class:"flex gap-2 mb-4"},K(Y0,{className:"flex-1",placeholder:"Profile name",value:Z,onInput:(q)=>this.setState({newProfileName:q.target.value}),onKeyDown:(q)=>{if(q.key==="Enter")this.handleCreateProfile()}}),K(f,{onClick:this.handleCreateProfile},"Create")),K("div",{class:"space-y-4"},$.profiles.map((q)=>this.renderProfile(q,q.id===$.activeProfileId))))}}class n7 extends N{unsubAuth=null;unsubBootstrap=null;unsubLive=null;state={pubkey:L0().pubkey,authLoading:L0().isLoading,authError:L0().error,profile:E1().profile,bootstrapPhase:E1().phase,relayCount:E1().relayList.length,followingCount:E1().followingCount,liveEventsEnabled:k2().enabled,liveEventPublishing:k2().isPublishing,liveEventError:k2().error,lastPublished:k2().lastPublished};componentDidMount(){this.unsubAuth=y1(()=>{let $=L0();this.setState({pubkey:$.pubkey,authLoading:$.isLoading,authError:$.error})}),this.unsubBootstrap=b4(()=>{let $=E1();this.setState({profile:$.profile,bootstrapPhase:$.phase,relayCount:$.relayList.length,followingCount:$.followingCount})}),this.unsubLive=Q3(()=>{let $=k2();this.setState({liveEventsEnabled:$.enabled,liveEventPublishing:$.isPublishing,liveEventError:$.error,lastPublished:$.lastPublished})})}componentWillUnmount(){this.unsubAuth?.(),this.unsubBootstrap?.(),this.unsubLive?.()}render(){let{pubkey:$,authLoading:J,authError:Z,profile:q,bootstrapPhase:Q,relayCount:Y,followingCount:w,liveEventsEnabled:X,liveEventPublishing:U,liveEventError:B,lastPublished:G}=this.state;return K("div",null,K("div",{class:"mb-6"},K("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Nostr Identity"),K("p",{class:"text-sm text-muted-foreground mt-1"},"Connect your Nostr account and manage live event publishing.")),K(E,{className:"mb-4"},K(h,null,K(c,null,"Account")),K(x,null,$?K("div",null,K("div",{class:"flex items-start gap-4 mb-4"},K(O1,{className:"size-16"},K(R1,{src:q?.picture,alt:""}),K(k1,{className:"text-xl"},(q?.displayName||q?.name||$.charAt(0)).charAt(0).toUpperCase())),K("div",{class:"min-w-0"},K("p",{class:"text-lg font-semibold text-foreground truncate"},q?.displayName||q?.name||P4($,8)),K("p",{class:"text-xs text-muted-foreground font-mono truncate mb-1"},V2($)),q?.nip05&&K(g,{variant:"outline",className:"text-[10px] border-primary/30 text-primary"},q.nip05),q?.about&&K("p",{class:"text-xs text-muted-foreground mt-1 line-clamp-2"},q.about))),K("div",{class:"grid grid-cols-3 gap-3 mb-4"},K("div",{class:"text-center p-2 rounded-md bg-background"},K("p",{class:"text-lg font-semibold text-foreground"},Y),K("p",{class:"text-xs text-muted-foreground"},"Relays")),K("div",{class:"text-center p-2 rounded-md bg-background"},K("p",{class:"text-lg font-semibold text-foreground"},w),K("p",{class:"text-xs text-muted-foreground"},"Following")),K("div",{class:"text-center p-2 rounded-md bg-background"},K("p",{class:"text-lg font-semibold text-foreground capitalize"},Q),K("p",{class:"text-xs text-muted-foreground"},"Status"))),K(f,{variant:"destructive",size:"sm",onClick:()=>A4()},"Sign Out")):K("div",null,K("p",{class:"text-sm text-muted-foreground mb-3"},"Connect your Nostr identity to publish NIP-53 live events and manage your stream's social presence."),K(f,{onClick:()=>N2(),disabled:J},J?"Connecting...":"Connect with Nostr"),Z&&K("p",{class:"text-xs text-destructive mt-2"},Z),K("p",{class:"text-xs text-muted-foreground mt-2"},"Requires a NIP-07 browser extension (nos2x-fox, Alby, etc.) or Amber on Android.")))),K(E,{className:"mb-4"},K(h,null,K("div",{class:"flex items-center justify-between"},K("div",null,K(c,null,"NIP-53 Live Events"),K(a,null,"Auto-publish live activity events to your outbox relays.")),K(i0,{checked:X,onChange:(T)=>Y3(T)}))),K(x,null,X&&!$&&K(j0,{variant:"destructive",className:"mb-2"},K(R0,null,"You must connect a Nostr identity above to publish live events.")),U&&K("p",{class:"text-xs text-primary"},"Publishing live event..."),B&&K("p",{class:"text-xs text-destructive mt-1"},B),G&&K("p",{class:"text-xs text-muted-foreground mt-1"},"Last published: ",new Date(G).toLocaleTimeString()))),K(E,null,K(h,null,K(c,null,"How it works")),K(x,null,K("ul",{class:"text-sm text-muted-foreground space-y-1.5"},K("li",null," Your Nostr identity is bootstrapped by querying indexer relays for your profile (kind 0) and relay list (NIP-65 kind 10002)."),K("li",null," Outbox and inbox relays from your NIP-65 list are automatically populated in the Relay Manager."),K("li",null," NIP-53 live events are published to your outbox relays so followers can discover your stream."),K("li",null," Indexer relays are discovered via rstate API or NIP-66 monitor relays as a fallback."),K("li",null," This is the same identity system used by Mycelium (app.mycelium.social).")))))}}class a7 extends N{unsubAuth=null;state={activeTab:"overview",token:"",authenticated:!1,authChecking:!0,authError:null,streamKeyInput:""};componentDidMount(){O4(),this.unsubAuth=y1(()=>this.onAuthChange()),this.onAuthChange()}componentWillUnmount(){this.unsubAuth?.()}async onAuthChange(){let $=L0();if($.pubkey)await this.verifyBearerToken($.pubkey);else if(!$.isLoading)this.setState({authChecking:!1})}async verifyBearerToken($){this.setState({authChecking:!0,authError:null});try{if(!(await fetch("/api/admin/serverconfig",{headers:{Authorization:`Bearer ${$}`}})).ok)throw new Error("Not authorized");this.setState({authenticated:!0,token:$,authChecking:!1,authError:null})}catch{this.setState({authenticated:!1,authChecking:!1,authError:"Your Nostr identity is not authorized as admin."})}}handleStreamKeyLogin=async($)=>{$.preventDefault();let J=this.state.streamKeyInput.trim();if(!J)return;this.setState({authChecking:!0,authError:null});try{if(!(await fetch("/api/admin/serverconfig",{headers:{Authorization:"Basic "+btoa("admin:"+J)}})).ok)throw new Error("Invalid stream key");this.setState({authenticated:!0,token:J,authChecking:!1,authError:null})}catch{this.setState({authenticated:!1,authChecking:!1,authError:"Invalid stream key."})}};handleNostrLogin=()=>{N2()};handleTabChange=($)=>{this.setState({activeTab:$})};getAuthHeaders(){let{token:$}=this.state;if($.length===64)return{Authorization:`Bearer ${$}`};return{Authorization:"Basic "+btoa("admin:"+$)}}renderTab(){let{activeTab:$,token:J}=this.state;switch($){case"overview":return K(d7,{token:J});case"general":return K(p7,{token:J});case"video":return K(r7,{token:J});case"chat":return K(c7,{token:J});case"viewers":return K(s7,{token:J});case"logs":return K(o7,{token:J});case"tokens":return K(l7,{token:J});case"nostr":return K(n7,null);case"relays":return K(i7,null);default:return null}}render(){let{authenticated:$,authChecking:J,authError:Z,streamKeyInput:q}=this.state,Q=L0();if(J)return K("div",{class:"flex items-center justify-center min-h-screen bg-background"},K("div",{class:"flex flex-col items-center gap-4"},K(X1,{size:"lg"}),K("p",{class:"text-sm text-muted-foreground"},"Checking authorization...")));if(!$)return K("div",{class:"flex items-center justify-center min-h-screen bg-background"},K(E,{className:"w-full max-w-sm py-6 gap-5 mx-4"},K(h,{className:"text-center"},K("div",{class:"mx-auto size-14 rounded-2xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center mb-3 ring-1 ring-primary/10"},K("svg",{class:"size-7 text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},K("polygon",{points:"5 3 19 12 5 21 5 3"}))),K(c,{className:"text-xl font-bold"},"Oni Admin"),K(a,{className:"text-sm mt-1"},Q.pubkey?"Your Nostr identity is not authorized. Use the stream key instead.":"Sign in with Nostr or enter your stream key.")),K(x,{className:"space-y-5"},!Q.pubkey&&K(f,{onClick:this.handleNostrLogin,className:"w-full h-10 gap-2 font-semibold",variant:"outline",disabled:Q.isLoading},Q.isLoading?K(X1,{size:"sm",className:"mr-1"}):K("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})),"Sign in with Nostr"),K("div",{class:"relative"},K("div",{class:"absolute inset-0 flex items-center"},K("span",{class:"w-full border-t border-border"})),K("div",{class:"relative flex justify-center text-xs uppercase"},K("span",{class:"bg-card px-3 text-muted-foreground/50 font-medium tracking-wider"},"or stream key"))),K("form",{onSubmit:this.handleStreamKeyLogin,class:"space-y-3"},K("div",{class:"space-y-2"},K(K0,{className:"text-xs font-semibold text-muted-foreground/70"},"Stream Key"),K(Y0,{type:"password",value:q,onInput:(Y)=>this.setState({streamKeyInput:Y.target.value}),placeholder:"Enter your stream key",className:"h-10"})),Z&&K(j0,{variant:"destructive",className:"py-2.5 border-destructive/20 bg-destructive/5"},K(R0,{className:"text-xs"},Z)),K(f,{type:"submit",className:"w-full h-10 font-semibold"},"Sign In"))),K(b8,{className:"justify-center pt-2"},K("a",{href:"/",class:"text-xs font-medium text-muted-foreground/50 hover:text-foreground transition-colors flex items-center gap-1.5"},K("svg",{class:"size-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},K("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})),"Back to stream"))));return K(g9,{activeTab:this.state.activeTab,onTabChange:this.handleTabChange},this.renderTab())}}var OZ=document.getElementById("root");if(OZ){let $=window.location.pathname.startsWith("/admin");N6($?K(a7,null):K(u9,null),OZ)}

//# debugId=08FFC85B1CBF9BDE64756E2164756E21
//# sourceMappingURL=main-mtyfvv6b.js.map
