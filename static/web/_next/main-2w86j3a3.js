import{a as CY,b as NY}from"../chunk-tvrdndbw.js";var o2=Array.isArray;function l5($){let J=typeof $;return J==="string"||J==="number"}function h($){return $===void 0||$===null}function l2($){return $===null||$===!1||$===!0||$===void 0}function o($){return typeof $==="function"}function i2($){return typeof $==="string"}function kq($){return typeof $==="number"}function y0($){return $===null}function vq($){return $===void 0}function L8($){return!y0($)&&typeof $==="object"}var C0={},t2="$F";class t1{constructor(){this.componentDidAppear=[],this.componentWillDisappear=[],this.componentWillMove=[]}}function V8($){return $.substring(2).toLowerCase()}function X7($,J){$.appendChild(J)}function t5($,J,Z){if(y0(Z))X7($,J);else $.insertBefore(J,Z)}function Eq($,J){if(J)return document.createElementNS("http://www.w3.org/2000/svg",$);return document.createElement($)}function yq($,J,Z){$.replaceChild(J,Z)}function U7($,J){$.removeChild(J)}function K7($){for(let J=0;J<$.length;J++)$[J]()}function gq($,J,Z){let q=$.children;if((Z&4)!==0)return q.$LI;if((Z&8192)!==0)return $.childFlags===2?q:q[J?0:q.length-1];return q}function i0($,J){let Z,q=$;while(!h(q)){if(Z=q.flags,(Z&1521)!==0)return q.dom;q=gq(q,J,Z)}return null}function e5($,J){let Z=$.length,q;while((q=$.pop())!==void 0)q(()=>{if(--Z<=0&&o(J))J()})}function hq($){for(let J=0;J<$.length;J++)$[J].fn();for(let J=0;J<$.length;J++){let Z=$[J];t5(Z.parent,Z.dom,Z.next)}$.splice(0,$.length)}function $4($,J,Z){while(!h($)){let q=$.flags;if((q&1521)!==0){if(!Z||$.dom.parentNode===J)U7(J,$.dom);return}let Q=$.children;if((q&4)!==0)$=Q.$LI;if((q&8)!==0)$=Q;if((q&8192)!==0)if($.childFlags===2)$=Q;else{for(let Y=0,X=Q.length;Y<X;++Y)$4(Q[Y],J,!1);return}}}function uq($,J){return function(){$4($,J,!0)}}function J4($,J,Z){if(Z.componentWillDisappear.length>0)e5(Z.componentWillDisappear,uq($,J));else $4($,J,!1)}function xq($,J,Z,q,Q,Y,X,K){$.componentWillMove.push({dom:q,fn:()=>{if((X&4)!==0)Z.componentWillMove(J,Q,q);else if((X&8)!==0)Z.onComponentWillMove(J,Q,q,K)},next:Y,parent:Q})}function G7($,J,Z,q,Q){let Y,X,K=J.flags;while(!h(J)){let G=J.flags;if((G&1521)!==0){if(!h(Y)&&(o(Y.componentWillMove)||o(Y.onComponentWillMove)))xq(Q,$,Y,J.dom,Z,q,K,X);else t5(Z,J.dom,q);return}let B=J.children;if((G&4)!==0)Y=J.children,X=J.props,J=B.$LI;else if((G&8)!==0)Y=J.ref,X=J.props,J=B;else if((G&8192)!==0)if(J.childFlags===2)J=B;else{for(let w=0,T=B.length;w<T;++w)G7($,B[w],Z,q,Q);return}}}function B7($,J,Z){if(o($.constructor.getDerivedStateFromProps))return{...Z,...$.constructor.getDerivedStateFromProps(J,Z)};return Z}var n2={v:!1},i5={createVNode:null};function c2($,J){$.textContent=J}function w7($,J){return L8($)&&$.event===J.event&&$.data===J.data}function T7($,J){for(let Z in J)if(vq($[Z]))$[Z]=J[Z];return $}function P8($,J){return o($)&&($(J),!0)}var s2="$";function Z4($,J,Z,q,Q,Y,X,K){this.childFlags=$,this.children=J,this.className=Z,this.dom=null,this.flags=q,this.key=Q===void 0?null:Q,this.props=Y===void 0?null:Y,this.ref=X===void 0?null:X,this.type=K}function I8($,J,Z,q,Q,Y,X,K){let G=Q===void 0?1:Q,B=new Z4(G,q,Z,$,X,Y,K,J);if(i5.createVNode)i5.createVNode(B);if(G===0)cq(B,B.children);return B}function mq($,J,Z){if($&4)return Z;let q=($&32768?J.render:J).defaultHooks;if(h(q))return Z;if(h(Z))return q;return T7(Z,q)}function pq($,J,Z){let q=($&32768?J.render:J).defaultProps;if(h(q))return Z;if(h(Z))return{...q};return T7(Z,q)}function dq($,J){if($&12)return $;if(J.prototype?.render)return 4;if(J.render)return 32776;return 8}function M7($,J,Z,q,Q){$=dq($,J);let Y=new Z4(1,null,null,$,q,pq($,J,Z),mq($,J,Q),J);if(o(i5.createVNode))i5.createVNode(Y);return Y}function e2($,J){return new Z4(1,h($)||$===!0||$===!1?"":$,null,16,J,null,null,null)}function q4($,J,Z){let q=I8(8192,8192,null,$,J,null,Z,null);switch(q.childFlags){case 1:q.children=Q4(),q.childFlags=2;break;case 16:q.children=[e2($)],q.childFlags=4;break}return q}function rq($){let{children:J,childFlags:Z}=$;return q4(Z===2?P0(J):J.map(P0),Z,$.key)}function P0($){let J=$.flags&-16385,Z=$.props;if(J&14){if(!y0(Z)){let q=Z;Z={};for(let Q in q)Z[Q]=q[Q]}}if((J&8192)===0)return new Z4($.childFlags,$.children,$.className,J,$.key,Z,$.ref,$.type);return rq($)}function Q4(){return e2("",null)}function H7($,J,Z,q){for(let Q=$.length;Z<Q;Z++){let Y=$[Z];if(!l2(Y)){let X=q+s2+Z;if(o2(Y))H7(Y,J,0,X);else{if(l5(Y))Y=e2(Y,X);else{let K=Y.key,G=i2(K)&&K[0]===s2;if(Y.flags&81920||G)Y=P0(Y);if(Y.flags|=65536,!G)if(y0(K))Y.key=X;else Y.key=q+K;else if(K.substring(0,q.length)!==q)Y.key=q+K}J.push(Y)}}}}function z7($){switch($){case"svg":return 32;case"input":return 64;case"select":return 256;case"textarea":return 128;case t2:return 8192;default:return 1}}function cq($,J){let Z,q=1;if(l2(J))Z=J;else if(l5(J))q=16,Z=J;else if(o2(J)){let Q=J.length;for(let Y=0;Y<Q;++Y){let X=J[Y];if(l2(X)||o2(X)){Z=Z||J.slice(0,Y),H7(J,Z,Y,"");break}else if(l5(X))Z=Z||J.slice(0,Y),Z.push(e2(X,s2+Y));else{let K=X.key,G=(X.flags&81920)>0,B=y0(K),w=i2(K)&&K[0]===s2;if(G||B||w){if(Z=Z||J.slice(0,Y),G||w)X=P0(X);if(B||w)X.key=s2+Y;Z.push(X)}else if(Z)Z.push(X);X.flags|=65536}}if(Z=Z||J,Z.length===0)q=1;else q=8}else{if(Z=J,Z.flags|=65536,J.flags&81920)Z=P0(J);q=2}return $.children=Z,$.childFlags=q,$}function S8($){if(l2($)||l5($))return e2($,null);if(o2($))return q4($,0,null);return $.flags&16384?P0($):$}var n1="http://www.w3.org/1999/xlink",j8="http://www.w3.org/XML/1998/namespace",$7={"xlink:actuate":n1,"xlink:arcrole":n1,"xlink:href":n1,"xlink:role":n1,"xlink:show":n1,"xlink:title":n1,"xlink:type":n1,"xml:base":j8,"xml:lang":j8,"xml:space":j8};function Y4($){return{onClick:$,onDblClick:$,onFocusIn:$,onFocusOut:$,onKeyDown:$,onKeyPress:$,onKeyUp:$,onMouseDown:$,onMouseMove:$,onMouseUp:$,onTouchEnd:$,onTouchMove:$,onTouchStart:$}}var W7=Y4(0),R8=Y4(null),F7=Y4(!0);function J7($,J){let Z=J.$EV;if(!Z)Z=J.$EV=Y4(null);if(!Z[$]){if(++W7[$]===1)R8[$]=$3($)}return Z}function j7($,J){let Z=J.$EV;if(Z?.[$]){if(--W7[$]===0)document.removeEventListener(V8($),R8[$]),R8[$]=null;Z[$]=null}}function sq($,J,Z,q){if(o(Z))J7($,q)[$]=Z;else if(L8(Z)){if(w7(J,Z))return;J7($,q)[$]=Z}else j7($,q)}function oq($){return o($.composedPath)?$.composedPath()[0]:$.target}function lq($,J,Z,q){let Q=oq($);do{if(J&&Q.disabled)return;let Y=Q.$EV;if(!h(Y)){let X=Y[Z];if(X){if(q.dom=Q,X.event)X.event(X.data,$);else X($);if($.cancelBubble)return}}Q=Q.parentNode}while(!y0(Q))}function iq(){if(this.cancelBubble=!0,!this.immediatePropagationStopped)this.stopImmediatePropagation()}function nq(){return this.defaultPrevented}function aq(){return this.cancelBubble}function tq($){let J={dom:document};return $.isDefaultPrevented=nq,$.isPropagationStopped=aq,$.stopPropagation=iq,Object.defineProperty($,"currentTarget",{configurable:!0,get:function Z(){return J.dom}}),J}function eq($){let J=$==="onClick"||$==="onDblClick";return function(Z){lq(Z,J,$,tq(Z))}}function $3($){let J=eq($);return document.addEventListener(V8($),J),J}function J3($,J){let Z=document.createElement("i");return Z.innerHTML=J,Z.innerHTML===$.innerHTML}function Z7($,J,Z){let q=$[J];if(q)if(q.event)q.event(q.data,Z);else q(Z);else{let Q=J.toLowerCase();if(o($[Q]))$[Q](Z)}}function $5($,J){let Z=function q(Q){let Y=this.$V;if(h(Y))return;let X=Y.props??C0,K=Y.dom;if(i2($))Z7(X,$,Q);else for(let G=0;G<$.length;++G)Z7(X,$[G],Q);if(o(J)){let G=this.$V,B=G.props??C0;J(B,K,!1,G)}};return Object.defineProperty(Z,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),Z}function a1($,J,Z){let q=`$${J}`,Q=$[q];if(Q){if(Q[1].wrapped)return;$.removeEventListener(Q[0],Q[1]),$[q]=null}if(o(Z))$.addEventListener(J,Z),$[q]=[J,Z]}function C8($){return $==="checkbox"||$==="radio"}var Z3=$5("onInput",N8),q3=$5(["onClick","onChange"],N8);function R7($){$.stopPropagation()}R7.wrapped=!0;function Q3($,J){if(C8(J.type))a1($,"change",q3),a1($,"click",R7);else a1($,"input",Z3)}function N8($,J){let{type:Z,value:q,checked:Q,multiple:Y,defaultValue:X}=$,K=!h(q);if(Z!=null&&Z!==J.type)J.setAttribute("type",Z);if(!h(Y)&&Y!==J.multiple)J.multiple=Y;if(!h(X)&&!K)J.defaultValue=X+"";if(C8(Z)){if(K)J.value=q;if(!h(Q))J.checked=Q}else if(K&&J.value!==q)J.defaultValue=q,J.value=q;else if(!h(Q))J.checked=Q}function r2($,J){if($.type==="option")Y3($,J);else{let{children:Z,flags:q}=$;if((q&4)!==0)r2(Z.$LI,J);else if((q&8)!==0)r2(Z,J);else if($.childFlags===2)r2(Z,J);else if(($.childFlags&12)!==0)for(let Q=0,Y=Z.length;Q<Y;++Q)r2(Z[Q],J)}}function Y3($,J){let Z=$.props??C0,q=Z.value,Q=$.dom;if(Q.value=q,q===J||o2(J)&&J.includes(q))Q.selected=!0;else if(!h(J)||!h(Z.selected))Q.selected=Boolean(Z.selected)}var X3=$5("onChange",_7);function U3($){a1($,"change",X3)}function _7($,J,Z,q){let Q=Boolean($.multiple);if(!h($.multiple)&&Q!==J.multiple)J.multiple=Q;let Y=$.selectedIndex;if(Y===-1)J.selectedIndex=-1;if(q.childFlags!==1){let K=$.value;if(kq(Y)&&Y>-1&&!h(J.options[Y]))K=J.options[Y].value;if(Z&&h(K))K=$.defaultValue;r2(q,K)}}var K3=$5("onInput",D7),G3=$5("onChange");function B3($,J){if(a1($,"input",K3),o(J.onChange))a1($,"change",G3)}function D7($,J,Z){let q=$.value,Q=J.value;if(h(q)){if(Z){let Y=$.defaultValue;if(!h(Y)&&Y!==Q)J.defaultValue=Y,J.value=Y}}else if(Q!==q)J.defaultValue=q,J.value=q}function L7($,J,Z,q,Q,Y){if(($&64)!==0)N8(q,Z);else if(($&256)!==0)_7(q,Z,Q,J);else if(($&128)!==0)D7(q,Z,Q);if(Y)Z.$V=J}function w3($,J,Z){if(($&64)!==0)Q3(J,Z);else if(($&256)!==0)U3(J);else if(($&128)!==0)B3(J,Z)}function V7($){return C8($.type)?!h($.checked):!h($.value)}function n5($){if(!h($)){if(!P8($,null)&&$.current)$.current=null}}function X4($,J,Z){if(!h($)&&(o($)||$.current!==void 0))Z.push(()=>{if(!P8($,J)&&$.current!==void 0)$.current=J})}function Z1($,J,Z){F1($,Z),J4($,J,Z)}function F1($,J){let{flags:Z,children:q}=$,Q;if((Z&481)!==0){Q=$.ref;let Y=$.props;n5(Q);let X=$.childFlags;if(!y0(Y)){let K=Object.keys(Y);for(let G=0,B=K.length;G<B;G++){let w=K[G];if(F7[w])j7(w,$.dom)}}if(X&12)a2(q,J);else if(X===2)F1(q,J)}else if(q){if(Z&4){if(o(q.componentWillUnmount))q.componentWillUnmount();let Y=J;if(o(q.componentWillDisappear))Y=new t1,q7(J,q,q.$LI.dom,Z,void 0);n5($.ref),q.$UN=!0,F1(q.$LI,Y)}else if(Z&8){let Y=J;if(Q=$.ref,!h(Q)){let X=null;if(o(Q.onComponentWillUnmount))X=i0($,!0),Q.onComponentWillUnmount(X,$.props||C0);if(o(Q.onComponentWillDisappear))Y=new t1,X=X||i0($,!0),q7(J,Q,X,Z,$.props)}F1(q,Y)}else if(Z&1024)Z1(q,$.ref,J);else if(Z&8192){if($.childFlags&12)a2(q,J)}}}function a2($,J){for(let Z=0,q=$.length;Z<q;++Z)F1($[Z],J)}function T3($,J){return function(){if(J)for(let Z=0;Z<$.length;Z++){let q=$[Z];$4(q,J,!1)}}}function s5($,J,Z){if(Z.componentWillDisappear.length>0)e5(Z.componentWillDisappear,T3(J,$));else $.textContent=""}function a5($,J,Z,q){if(a2(Z,q),J.flags&8192)J4(J,$,q);else s5($,Z,q)}function q7($,J,Z,q,Q){$.componentWillDisappear.push((Y)=>{if(q&4)J.componentWillDisappear(Z,Y);else if(q&8)J.onComponentWillDisappear(Z,Q,Y)})}function M3($){let J=$.event;return function(Z){J($.data,Z)}}function H3($,J,Z,q){if(L8(Z)){if(w7(J,Z))return;Z=M3(Z)}a1(q,V8($),Z)}function z3($,J,Z){if(h(J)){Z.removeAttribute("style");return}let q=Z.style,Q,Y;if(i2(J)){q.cssText=J;return}if(!h($)&&!i2($)){for(Q in J)if(Y=J[Q],Y!==$[Q])q.setProperty(Q,Y);for(Q in $)if(h(J[Q]))q.removeProperty(Q)}else for(Q in J)Y=J[Q],q.setProperty(Q,Y)}function W3($,J,Z,q,Q){let Y=$?.__html||"",X=J?.__html||"";if(Y!==X){if(!h(X)&&!J3(q,X)){if(!y0(Z)){if(Z.childFlags&12)a2(Z.children,Q);else if(Z.childFlags===2)F1(Z.children,Q);Z.children=null,Z.childFlags=1}q.innerHTML=X}}}function F3($,J,Z){let q=h($)?"":$;if(J[Z]!==q)J[Z]=q}function _8($,J,Z,q,Q,Y,X,K){switch($){case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":case"selectedIndex":break;case"autoFocus":q.autofocus=!!Z;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":q[$]=!!Z;break;case"defaultChecked":case"value":case"volume":if(Y&&$==="value")break;F3(Z,q,$);break;case"style":z3(J,Z,q);break;case"dangerouslySetInnerHTML":W3(J,Z,X,q,K);break;default:if(F7[$])sq($,J,Z,q);else if($.charCodeAt(0)===111&&$.charCodeAt(1)===110)H3($,J,Z,q);else if(h(Z))q.removeAttribute($);else if(Q&&$7[$])q.setAttributeNS($7[$],$,Z);else q.setAttribute($,Z);break}}function j3($,J,Z,q,Q,Y){let X=!1,K=(J&448)>0;if(K){if(X=V7(Z),X)w3(J,q,Z)}for(let G in Z)_8(G,null,Z[G],q,Q,X,null,Y);if(K)L7(J,$,q,Z,!0,X)}function P7($,J,Z){let q=S8($.render(J,$.state,Z)),Q=Z;if(o($.getChildContext))Q={...Z,...$.getChildContext()};return $.$CX=Q,q}function R3($,J,Z,q,Q,Y){let X=new J(Z,q),K=X.$N=Boolean(J.getDerivedStateFromProps||X.getSnapshotBeforeUpdate);if(X.$SVG=Q,X.$L=Y,$.children=X,X.$BS=!1,X.context=q,X.props===C0)X.props=Z;if(!K){if(o(X.componentWillMount)){X.$BR=!0,X.componentWillMount();let G=X.$PS;if(!y0(G)){let B=X.state;if(y0(B))X.state=G;else for(let w in G)B[w]=G[w];X.$PS=null}X.$BR=!1}}else X.state=B7(X,Z,X.state);return X.$LI=P7(X,Z,q),X}function I7($,J){let Z=$.props||C0;return $.flags&32768?$.type.render(Z,$.ref,J):$.type(Z,J)}function O0($,J,Z,q,Q,Y,X){let K=$.flags|=16384;if((K&481)!==0)L3($,J,Z,q,Q,Y,X);else if((K&4)!==0)V3($,J,Z,q,Q,Y,X);else if(K&8)P3($,J,Z,q,Q,Y,X);else if(K&16)S7($,J,Q);else if(K&8192)D3($,Z,J,q,Q,Y,X);else if(K&1024)_3($,Z,J,Q,Y,X)}function _3($,J,Z,q,Q,Y){O0($.children,$.ref,J,!1,null,Q,Y);let X=Q4();S7(X,Z,q),$.dom=X.dom}function D3($,J,Z,q,Q,Y,X){let{children:K,childFlags:G}=$;if(G&12&&K.length===0)G=$.childFlags=2,K=$.children=Q4();if(G===2)O0(K,Z,J,q,Q,Y,X);else e1(K,Z,J,q,Q,Y,X)}function S7($,J,Z){let q=$.dom=document.createTextNode($.children);if(!y0(J))t5(J,q,Z)}function L3($,J,Z,q,Q,Y,X){let{flags:K,props:G,className:B,childFlags:w}=$,T=$.dom=Eq($.type,q=q||(K&32)>0),M=$.children;if(!h(B)&&B!=="")if(q)T.setAttribute("class",B);else T.className=B;if(w===16)c2(T,M);else if(w!==1){let H=q&&$.type!=="foreignObject";if(w===2){if(M.flags&16384)$.children=M=P0(M);O0(M,T,Z,H,null,Y,X)}else if(w===8||w===4)e1(M,T,Z,H,null,Y,X)}if(!y0(J))t5(J,T,Q);if(!y0(G))j3($,K,G,T,q,X);X4($.ref,T,Y)}function e1($,J,Z,q,Q,Y,X){for(let K=0;K<$.length;++K){let G=$[K];if(G.flags&16384)$[K]=G=P0(G);O0(G,J,Z,q,Q,Y,X)}}function V3($,J,Z,q,Q,Y,X){let K=R3($,$.type,$.props||C0,Z,q,Y),G=X;if(o(K.componentDidAppear))G=new t1;O0(K.$LI,J,K.$CX,q,Q,Y,G),N3($.ref,K,Y,X)}function P3($,J,Z,q,Q,Y,X){let K=$.ref,G=X;if(!h(K)&&o(K.onComponentDidAppear))G=new t1;O0($.children=S8(I7($,Z)),J,Z,q,Q,Y,G),A3($,Y,X)}function I3($){return()=>{$.componentDidMount()}}function S3($,J,Z){$.componentDidAppear.push(()=>{J.componentDidAppear(Z)})}function C3($,J,Z,q){$.componentDidAppear.push(()=>{J.onComponentDidAppear(Z,q)})}function N3($,J,Z,q){if(X4($,J,Z),o(J.componentDidMount))Z.push(I3(J));if(o(J.componentDidAppear))S3(q,J,J.$LI.dom)}function O3($,J){return()=>{$.onComponentDidMount(i0(J,!0),J.props||C0)}}function A3($,J,Z){let q=$.ref;if(!h(q)){if(P8(q.onComponentWillMount,$.props||C0),o(q.onComponentDidMount))J.push(O3(q,$));if(o(q.onComponentDidAppear))C3(Z,q,i0($,!0),$.props)}}function b3($,J,Z,q,Q,Y,X){if(F1($,X),(J.flags&$.flags&1521)!==0)O0(J,null,q,Q,null,Y,X),yq(Z,J.dom,$.dom);else O0(J,Z,q,Q,i0($,!0),Y,X),J4($,Z,X)}function j1($,J,Z,q,Q,Y,X,K){let G=J.flags|=16384;if($.flags!==G||$.type!==J.type||$.key!==J.key||G&2048)if($.flags&16384)b3($,J,Z,q,Q,X,K);else O0(J,Z,q,Q,Y,X,K);else if(G&481)y3($,J,q,Q,X,K);else if(G&4)x3($,J,Z,q,Q,Y,X,K);else if(G&8)m3($,J,Z,q,Q,Y,X,K);else if(G&16)p3($,J);else if(G&8192)v3($,J,Z,q,Q,X,K);else E3($,J,q,X,K)}function f3($,J,Z){if($!==J)if($!=="")Z.firstChild.nodeValue=J;else c2(Z,J)}function k3($,J){if($.textContent!==J)$.textContent=J}function v3($,J,Z,q,Q,Y,X){let K=$.children,G=J.children,B=$.childFlags,w=J.childFlags,T=null;if(w&12&&G.length===0)w=J.childFlags=2,G=J.children=Q4();let M=(w&2)!==0;if(B&12){let H=K.length;if(B&8&&w&8||M||!M&&G.length>H)T=i0(K[H-1],!1).nextSibling}O8(B,w,K,G,Z,q,Q,T,$,Y,X)}function E3($,J,Z,q,Q){let Y=$.ref,X=J.ref,K=J.children;if(O8($.childFlags,J.childFlags,$.children,K,Y,Z,!1,null,$,q,Q),J.dom=$.dom,Y!==X&&!l2(K)){let G=K.dom;U7(Y,G),X7(X,G)}}function y3($,J,Z,q,Q,Y){let X=J.dom=$.dom,K=$.props,G=J.props,B=J.flags,w=!1,T=!1,M;if(q=q||(B&32)>0,K!==G){let j=K||C0;if(M=G||C0,M!==C0){if(w=(B&448)>0,w)T=V7(M);for(let _ in M){let P=j[_],L=M[_];if(P!==L)_8(_,P,L,X,q,T,$,Y)}}if(j!==C0){for(let _ in j)if(h(M[_])&&!h(j[_]))_8(_,j[_],null,X,q,T,$,Y)}}let{children:H,className:W}=J;if($.className!==W)if(h(W))X.removeAttribute("class");else if(q)X.setAttribute("class",W);else X.className=W;if(B&4096)k3(X,H);else O8($.childFlags,J.childFlags,$.children,H,X,Z,q&&J.type!=="foreignObject",null,$,Q,Y);if(w)L7(B,J,X,M,!1,T);let z=J.ref,F=$.ref;if(F!==z)n5(F),X4(z,X,Q)}function g3($,J,Z,q,Q,Y,X){F1($,X),e1(J,Z,q,Q,i0($,!0),Y,X),J4($,Z,X)}function h3($,J,Z,q,Q,Y,X,K,G,B,w){let T=$.length|0,M=J.length|0;if(T===0){if(M>0)e1(J,Z,q,Q,Y,X,K)}else if(M===0)a5(Z,G,$,K);else if(B===8&&w===8)r3($,J,Z,q,Q,T,M,Y,G,X,K);else d3($,J,Z,q,Q,T,M,Y,X,K)}function O8($,J,Z,q,Q,Y,X,K,G,B,w){switch($){case 2:switch(J){case 2:j1(Z,q,Q,Y,X,K,B,w);break;case 1:Z1(Z,Q,w);break;case 16:F1(Z,w),c2(Q,q);break;default:g3(Z,q,Q,Y,X,B,w);break}break;case 1:switch(J){case 2:O0(q,Q,Y,X,K,B,w);break;case 1:break;case 16:c2(Q,q);break;default:e1(q,Q,Y,X,K,B,w);break}break;case 16:switch(J){case 16:f3(Z,q,Q);break;case 2:s5(Q,Z,w),O0(q,Q,Y,X,K,B,w);break;case 1:s5(Q,Z,w);break;default:s5(Q,Z,w),e1(q,Q,Y,X,K,B,w);break}break;default:switch(J){case 16:a2(Z,w),c2(Q,q);break;case 2:a5(Q,G,Z,w),O0(q,Q,Y,X,K,B,w);break;case 1:a5(Q,G,Z,w);break;default:h3(Z,q,Q,Y,X,K,B,w,G,J,$);break}break}}function u3($,J,Z,q,Q){Q.push(()=>{$.componentDidUpdate(J,Z,q)})}function C7($,J,Z,q,Q,Y,X,K,G,B){let{state:w,props:T}=$,M=Boolean($.$N),H=o($.shouldComponentUpdate);if(M)J=B7($,Z,J!==w?{...w,...J}:J);if(X||!H||H&&$.shouldComponentUpdate(Z,J,Q)){if(!M&&o($.componentWillUpdate))$.componentWillUpdate(Z,J,Q);$.props=Z,$.state=J,$.context=Q;let W=null,z=P7($,Z,Q);if(M&&o($.getSnapshotBeforeUpdate))W=$.getSnapshotBeforeUpdate(T,w);if(j1($.$LI,z,q,$.$CX,Y,K,G,B),$.$LI=z,o($.componentDidUpdate))u3($,T,w,W,G)}else $.props=Z,$.state=J,$.context=Q}function x3($,J,Z,q,Q,Y,X,K){let G=J.children=$.children;if(y0(G))return;G.$L=X;let B=J.props||C0,w=J.ref,T=$.ref,M=G.state;if(!G.$N){if(o(G.componentWillReceiveProps)){if(G.$BR=!0,G.componentWillReceiveProps(B,q),G.$UN)return;G.$BR=!1}if(!y0(G.$PS))M={...M,...G.$PS},G.$PS=null}if(C7(G,M,B,Z,q,Q,!1,Y,X,K),T!==w)n5(T),X4(w,G,X)}function m3($,J,Z,q,Q,Y,X,K){let G=!0,B=J.props||C0,w=J.ref,T=$.props,M=!h(w),H=$.children;if(M&&o(w.onComponentShouldUpdate))G=w.onComponentShouldUpdate(T,B);if(G){if(M&&o(w.onComponentWillUpdate))w.onComponentWillUpdate(T,B);let W=S8(I7(J,q));if(j1(H,W,Z,q,Q,Y,X,K),J.children=W,M&&o(w.onComponentDidUpdate))w.onComponentDidUpdate(T,B)}else J.children=H}function p3($,J){let Z=J.children,q=J.dom=$.dom;if(Z!==$.children)q.nodeValue=Z}function d3($,J,Z,q,Q,Y,X,K,G,B){let w=Y>X?X:Y,T=0,M,H;for(;T<w;++T){if(M=J[T],H=$[T],M.flags&16384)M=J[T]=P0(M);j1(H,M,Z,q,Q,K,G,B),$[T]=M}if(Y<X)for(T=w;T<X;++T){if(M=J[T],M.flags&16384)M=J[T]=P0(M);O0(M,Z,q,Q,K,G,B)}else if(Y>X)for(T=w;T<Y;++T)Z1($[T],Z,B)}function r3($,J,Z,q,Q,Y,X,K,G,B,w){let T=Y-1,M=X-1,H=0,W=$[H],z=J[H],F,j;$:{while(W.key===z.key){if(z.flags&16384)J[H]=z=P0(z);if(j1(W,z,Z,q,Q,K,B,w),$[H]=z,++H,H>T||H>M)break $;W=$[H],z=J[H]}W=$[T],z=J[M];while(W.key===z.key){if(z.flags&16384)J[M]=z=P0(z);if(j1(W,z,Z,q,Q,K,B,w),$[T]=z,T--,M--,H>T||H>M)break $;W=$[T],z=J[M]}}if(H>T){if(H<=M){F=M+1,j=F<X?i0(J[F],!0):K;while(H<=M){if(z=J[H],z.flags&16384)J[H]=z=P0(z);++H,O0(z,Z,q,Q,j,B,w)}}}else if(H>M)while(H<=T)Z1($[H++],Z,w);else c3($,J,q,Y,X,T,M,H,Z,Q,K,G,B,w)}function c3($,J,Z,q,Q,Y,X,K,G,B,w,T,M,H){let W,z,F=0,j=0,_=K,P=K,L=Y-K+1,D=X-K+1,C=new Int32Array(D+1),S=L===q,V=!1,I=0,g=0;if(Q<4||(L|D)<32){for(j=_;j<=Y;++j)if(W=$[j],g<D){for(K=P;K<=X;K++)if(z=J[K],W.key===z.key){if(C[K-P]=j+1,S){S=!1;while(_<j)Z1($[_++],G,H)}if(I>K)V=!0;else I=K;if(z.flags&16384)J[K]=z=P0(z);j1(W,z,G,Z,B,w,M,H),++g;break}if(!S&&K>X)Z1(W,G,H)}else if(!S)Z1(W,G,H)}else{let E={};for(j=P;j<=X;++j)E[J[j].key]=j;for(j=_;j<=Y;++j)if(W=$[j],g<D){if(K=E[W.key],K!==void 0){if(S){S=!1;while(j>_)Z1($[_++],G,H)}if(C[K-P]=j+1,I>K)V=!0;else I=K;if(z=J[K],z.flags&16384)J[K]=z=P0(z);j1(W,z,G,Z,B,w,M,H),++g}else if(!S)Z1(W,G,H)}else if(!S)Z1(W,G,H)}if(S)a5(G,T,$,H),e1(J,G,Z,B,w,M,H);else if(V){let E=s3(C);K=E.length-1;for(j=D-1;j>=0;j--)if(C[j]===0){if(I=j+P,z=J[I],z.flags&16384)J[I]=z=P0(z);F=I+1,O0(z,G,Z,B,F<Q?i0(J[F],!0):w,M,H)}else if(K<0||j!==E[K])I=j+P,z=J[I],F=I+1,G7(T,z,G,F<Q?i0(J[F],!0):w,H);else K--;if(H.componentWillMove.length>0)hq(H.componentWillMove)}else if(g!==D){for(j=D-1;j>=0;j--)if(C[j]===0){if(I=j+P,z=J[I],z.flags&16384)J[I]=z=P0(z);F=I+1,O0(z,G,Z,B,F<Q?i0(J[F],!0):w,M,H)}}}var W1,c5,Q7=0;function s3($){let J=0,Z=0,q=0,Q=0,Y=0,X=0,K=0,G=$.length;if(G>Q7)Q7=G,W1=new Int32Array(G),c5=new Int32Array(G);for(;Z<G;++Z)if(J=$[Z],J!==0){if(q=W1[Q],$[q]<J){c5[Z]=q,W1[++Q]=Z;continue}Y=0,X=Q;while(Y<X)if(K=Y+X>>1,$[W1[K]]<J)Y=K+1;else X=K;if(J<$[W1[Y]]){if(Y>0)c5[Z]=W1[Y-1];W1[Y]=Z}}Y=Q+1;let B=new Int32Array(Y);X=W1[Y-1];while(Y-- >0)B[Y]=X,X=c5[X],W1[Y]=0;return B}var o3=typeof document!=="undefined";if(o3){if(window.Node)Node.prototype.$EV=null,Node.prototype.$V=null}function l3($,J,Z,q){let Q=[],Y=new t1,X=J.$V;if(n2.v=!0,h(X)){if(!h($)){if(($.flags&16384)!==0)$=P0($);O0($,J,q,!1,null,Q,Y),J.$V=$,X=$}}else if(h($))Z1(X,J,Y),J.$V=null;else{if($.flags&16384)$=P0($);j1(X,$,J,q,!1,null,Q,Y),X=J.$V=$}if(K7(Q),e5(Y.componentDidAppear),n2.v=!1,o(Z))Z()}function N7($,J,Z=null,q=C0){l3($,J,Z,q)}var o5=[],i3=Promise.resolve().then.bind(Promise.resolve()),D8=!1;function Y7($,J,Z,q){let Q=$.$PS;if(o(J))J=J(Q?{...$.state,...Q}:$.state,$.props,$.context);if(h(Q))$.$PS=J;else for(let Y in J)Q[Y]=J[Y];if(!$.$BR){if(!n2.v){if(o5.length===0){if(O7($,q),o(Z))Z.call($);return}}if(!o5.includes($))o5.push($);if(q)$.$F=!0;if(!D8)D8=!0,i3(a3);if(o(Z)){let Y=$.$QU;if(!Y)Y=$.$QU=[];Y.push(Z)}}else if(o(Z))$.$L.push(Z.bind($))}function n3($){let J=$.$QU;for(let Z=0;Z<J.length;++Z)J[Z].call($);$.$QU=null}function a3(){let $;D8=!1;while($=o5.shift())if(!$.$UN){let J=$.$F;if($.$F=!1,O7($,J),$.$QU)n3($)}}function O7($,J){if(J||!$.$BR){let Z=$.$PS;$.$PS=null;let q=[],Q=new t1;n2.v=!0,C7($,{...$.state,...Z},$.props,i0($.$LI,!0).parentNode,$.context,$.$SVG,J,null,q,Q),K7(q),e5(Q.componentDidAppear),n2.v=!1}else $.state=$.$PS,$.$PS=null}class N{constructor($,J){this.state=null,this.props=void 0,this.context=void 0,this.displayName=void 0,this.$BR=!1,this.$BS=!0,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$QU=null,this.$N=!1,this.$SSR=void 0,this.$L=null,this.$SVG=!1,this.$F=!1,this.props=$||C0,this.context=J||C0}forceUpdate($){if(this.$UN)return;Y7(this,{},$,!0)}setState($,J){if(this.$UN)return;if(!this.$BS)Y7(this,$,J,!1)}render($,J,Z){return null}}N.defaultProps=null;function A7($){return $===void 0||$===null}function t3($){return typeof $==="string"}function b7($){return $===void 0}function U($,J,...Z){let q,Q=null,Y=null,X=null,K,G,B=Z.length;if(B===1)q=Z[0];else if(B>1){q=[];for(let w=0;w<B;w++)q.push(Z[w])}if(t3($)){if(K=z7($),!A7(J)){G={};for(let w in J)if(w==="className"||w==="class")X=J[w];else if(w==="key")Y=J.key;else if(w==="children"&&b7(q))q=J.children;else if(w==="ref")Q=J.ref;else{if(w==="contenteditable")K|=4096;G[w]=J[w]}}}else{if(K=2,!b7(q)){if(!J)J={};J.children=q}if(!A7(J)){G={};for(let w in J)if(w==="key")Y=J.key;else if(w==="ref")Q=J.ref;else switch(w){case"onComponentDidAppear":case"onComponentDidMount":case"onComponentDidUpdate":case"onComponentShouldUpdate":case"onComponentWillDisappear":case"onComponentWillMount":case"onComponentWillUnmount":case"onComponentWillUpdate":if(!Q)Q={};Q[w]=J[w];break;default:G[w]=J[w];break}}return M7(K,$,G,Y,Q)}if(K&8192)return q4(B===1?[q]:q,0,Y);return I8(K,$,X,q,0,G,Y,Q)}function f7($){var J,Z,q="";if(typeof $=="string"||typeof $=="number")q+=$;else if(typeof $=="object")if(Array.isArray($)){var Q=$.length;for(J=0;J<Q;J++)$[J]&&(Z=f7($[J]))&&(q&&(q+=" "),q+=Z)}else for(Z in $)$[Z]&&(q&&(q+=" "),q+=Z);return q}function J5(){for(var $,J,Z=0,q="",Q=arguments.length;Z<Q;Z++)($=arguments[Z])&&(J=f7($))&&(q&&(q+=" "),q+=J);return q}var e3=($,J)=>{let Z=new Array($.length+J.length);for(let q=0;q<$.length;q++)Z[q]=$[q];for(let q=0;q<J.length;q++)Z[$.length+q]=J[q];return Z},$Q=($,J)=>({classGroupId:$,validator:J}),g7=($=new Map,J=null,Z)=>({nextPart:$,validators:J,classGroupId:Z});var k7=[];var JQ=($)=>{let J=qQ($),{conflictingClassGroups:Z,conflictingClassGroupModifiers:q}=$;return{getClassGroupId:(X)=>{if(X.startsWith("[")&&X.endsWith("]"))return ZQ(X);let K=X.split("-"),G=K[0]===""&&K.length>1?1:0;return h7(K,G,J)},getConflictingClassGroupIds:(X,K)=>{if(K){let G=q[X],B=Z[X];if(G){if(B)return e3(B,G);return G}return B||k7}return Z[X]||k7}}},h7=($,J,Z)=>{if($.length-J===0)return Z.classGroupId;let Q=$[J],Y=Z.nextPart.get(Q);if(Y){let B=h7($,J+1,Y);if(B)return B}let X=Z.validators;if(X===null)return;let K=J===0?$.join("-"):$.slice(J).join("-"),G=X.length;for(let B=0;B<G;B++){let w=X[B];if(w.validator(K))return w.classGroupId}return},ZQ=($)=>$.slice(1,-1).indexOf(":")===-1?void 0:(()=>{let J=$.slice(1,-1),Z=J.indexOf(":"),q=J.slice(0,Z);return q?"arbitrary.."+q:void 0})(),qQ=($)=>{let{theme:J,classGroups:Z}=$;return QQ(Z,J)},QQ=($,J)=>{let Z=g7();for(let q in $){let Q=$[q];f8(Q,Z,q,J)}return Z},f8=($,J,Z,q)=>{let Q=$.length;for(let Y=0;Y<Q;Y++){let X=$[Y];YQ(X,J,Z,q)}},YQ=($,J,Z,q)=>{if(typeof $==="string"){XQ($,J,Z);return}if(typeof $==="function"){UQ($,J,Z,q);return}KQ($,J,Z,q)},XQ=($,J,Z)=>{let q=$===""?J:u7(J,$);q.classGroupId=Z},UQ=($,J,Z,q)=>{if(GQ($)){f8($(q),J,Z,q);return}if(J.validators===null)J.validators=[];J.validators.push($Q(Z,$))},KQ=($,J,Z,q)=>{let Q=Object.entries($),Y=Q.length;for(let X=0;X<Y;X++){let[K,G]=Q[X];f8(G,u7(J,K),Z,q)}},u7=($,J)=>{let Z=$,q=J.split("-"),Q=q.length;for(let Y=0;Y<Q;Y++){let X=q[Y],K=Z.nextPart.get(X);if(!K)K=g7(),Z.nextPart.set(X,K);Z=K}return Z},GQ=($)=>("isThemeGetter"in $)&&$.isThemeGetter===!0,BQ=($)=>{if($<1)return{get:()=>{return},set:()=>{}};let J=0,Z=Object.create(null),q=Object.create(null),Q=(Y,X)=>{if(Z[Y]=X,J++,J>$)J=0,q=Z,Z=Object.create(null)};return{get(Y){let X=Z[Y];if(X!==void 0)return X;if((X=q[Y])!==void 0)return Q(Y,X),X},set(Y,X){if(Y in Z)Z[Y]=X;else Q(Y,X)}}};var wQ=[],v7=($,J,Z,q,Q)=>({modifiers:$,hasImportantModifier:J,baseClassName:Z,maybePostfixModifierPosition:q,isExternal:Q}),TQ=($)=>{let{prefix:J,experimentalParseClassName:Z}=$,q=(Q)=>{let Y=[],X=0,K=0,G=0,B,w=Q.length;for(let z=0;z<w;z++){let F=Q[z];if(X===0&&K===0){if(F===":"){Y.push(Q.slice(G,z)),G=z+1;continue}if(F==="/"){B=z;continue}}if(F==="[")X++;else if(F==="]")X--;else if(F==="(")K++;else if(F===")")K--}let T=Y.length===0?Q:Q.slice(G),M=T,H=!1;if(T.endsWith("!"))M=T.slice(0,-1),H=!0;else if(T.startsWith("!"))M=T.slice(1),H=!0;let W=B&&B>G?B-G:void 0;return v7(Y,H,M,W)};if(J){let Q=J+":",Y=q;q=(X)=>X.startsWith(Q)?Y(X.slice(Q.length)):v7(wQ,!1,X,void 0,!0)}if(Z){let Q=q;q=(Y)=>Z({className:Y,parseClassName:Q})}return q},MQ=($)=>{let J=new Map;return $.orderSensitiveModifiers.forEach((Z,q)=>{J.set(Z,1e6+q)}),(Z)=>{let q=[],Q=[];for(let Y=0;Y<Z.length;Y++){let X=Z[Y],K=X[0]==="[",G=J.has(X);if(K||G){if(Q.length>0)Q.sort(),q.push(...Q),Q=[];q.push(X)}else Q.push(X)}if(Q.length>0)Q.sort(),q.push(...Q);return q}},HQ=($)=>({cache:BQ($.cacheSize),parseClassName:TQ($),sortModifiers:MQ($),...JQ($)}),zQ=/\s+/,WQ=($,J)=>{let{parseClassName:Z,getClassGroupId:q,getConflictingClassGroupIds:Q,sortModifiers:Y}=J,X=[],K=$.trim().split(zQ),G="";for(let B=K.length-1;B>=0;B-=1){let w=K[B],{isExternal:T,modifiers:M,hasImportantModifier:H,baseClassName:W,maybePostfixModifierPosition:z}=Z(w);if(T){G=w+(G.length>0?" "+G:G);continue}let F=!!z,j=q(F?W.substring(0,z):W);if(!j){if(!F){G=w+(G.length>0?" "+G:G);continue}if(j=q(W),!j){G=w+(G.length>0?" "+G:G);continue}F=!1}let _=M.length===0?"":M.length===1?M[0]:Y(M).join(":"),P=H?_+"!":_,L=P+j;if(X.indexOf(L)>-1)continue;X.push(L);let D=Q(j,F);for(let C=0;C<D.length;++C){let S=D[C];X.push(P+S)}G=w+(G.length>0?" "+G:G)}return G},FQ=(...$)=>{let J=0,Z,q,Q="";while(J<$.length)if(Z=$[J++]){if(q=x7(Z))Q&&(Q+=" "),Q+=q}return Q},x7=($)=>{if(typeof $==="string")return $;let J,Z="";for(let q=0;q<$.length;q++)if($[q]){if(J=x7($[q]))Z&&(Z+=" "),Z+=J}return Z},jQ=($,...J)=>{let Z,q,Q,Y,X=(G)=>{let B=J.reduce((w,T)=>T(w),$());return Z=HQ(B),q=Z.cache.get,Q=Z.cache.set,Y=K,K(G)},K=(G)=>{let B=q(G);if(B)return B;let w=WQ(G,Z);return Q(G,w),w};return Y=X,(...G)=>Y(FQ(...G))},RQ=[],I0=($)=>{let J=(Z)=>Z[$]||RQ;return J.isThemeGetter=!0,J},m7=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,p7=/^\((?:(\w[\w-]*):)?(.+)\)$/i,_Q=/^\d+\/\d+$/,DQ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,LQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,VQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,PQ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IQ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,H2=($)=>_Q.test($),c=($)=>!!$&&!Number.isNaN(Number($)),A1=($)=>!!$&&Number.isInteger(Number($)),A8=($)=>$.endsWith("%")&&c($.slice(0,-1)),R1=($)=>DQ.test($),SQ=()=>!0,CQ=($)=>LQ.test($)&&!VQ.test($),d7=()=>!1,NQ=($)=>PQ.test($),OQ=($)=>IQ.test($),AQ=($)=>!O($)&&!A($),bQ=($)=>z2($,s7,d7),O=($)=>m7.test($),$2=($)=>z2($,o7,CQ),b8=($)=>z2($,yQ,c),E7=($)=>z2($,r7,d7),fQ=($)=>z2($,c7,OQ),U4=($)=>z2($,l7,NQ),A=($)=>p7.test($),Z5=($)=>W2($,o7),kQ=($)=>W2($,gQ),y7=($)=>W2($,r7),vQ=($)=>W2($,s7),EQ=($)=>W2($,c7),K4=($)=>W2($,l7,!0),z2=($,J,Z)=>{let q=m7.exec($);if(q){if(q[1])return J(q[1]);return Z(q[2])}return!1},W2=($,J,Z=!1)=>{let q=p7.exec($);if(q){if(q[1])return J(q[1]);return Z}return!1},r7=($)=>$==="position"||$==="percentage",c7=($)=>$==="image"||$==="url",s7=($)=>$==="length"||$==="size"||$==="bg-size",o7=($)=>$==="length",yQ=($)=>$==="number",gQ=($)=>$==="family-name",l7=($)=>$==="shadow";var hQ=()=>{let $=I0("color"),J=I0("font"),Z=I0("text"),q=I0("font-weight"),Q=I0("tracking"),Y=I0("leading"),X=I0("breakpoint"),K=I0("container"),G=I0("spacing"),B=I0("radius"),w=I0("shadow"),T=I0("inset-shadow"),M=I0("text-shadow"),H=I0("drop-shadow"),W=I0("blur"),z=I0("perspective"),F=I0("aspect"),j=I0("ease"),_=I0("animate"),P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...L(),A,O],C=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto","contain","none"],V=()=>[A,O,G],I=()=>[H2,"full","auto",...V()],g=()=>[A1,"none","subgrid",A,O],E=()=>["auto",{span:["full",A1,A,O]},A1,A,O],K0=()=>[A1,"auto",A,O],f0=()=>["auto","min","max","fr",A,O],Q0=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],t=()=>["start","end","center","stretch","center-safe","end-safe"],Z0=()=>["auto",...V()],R0=()=>[H2,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...V()],b=()=>[$,A,O],_0=()=>[...L(),y7,E7,{position:[A,O]}],i1=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H1=()=>["auto","cover","contain",vQ,bQ,{size:[A,O]}],z1=()=>[A8,Z5,$2],M0=()=>["","none","full",B,A,O],V0=()=>["",c,Z5,$2],l0=()=>["solid","dashed","dotted","double"],t6=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],S0=()=>[c,A8,y7,E7],e6=()=>["","none",W,A,O],p5=()=>["none",c,A,O],d5=()=>["none",c,A,O],F8=()=>[c,A,O],r5=()=>[H2,"full",...V()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[R1],breakpoint:[R1],color:[SQ],container:[R1],"drop-shadow":[R1],ease:["in","out","in-out"],font:[AQ],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[R1],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[R1],shadow:[R1],spacing:["px",c],text:[R1],"text-shadow":[R1],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",H2,O,A,F]}],container:["container"],columns:[{columns:[c,O,A,K]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[A1,"auto",A,O]}],basis:[{basis:[H2,"full","auto",K,...V()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[c,H2,"auto","initial","none",O]}],grow:[{grow:["",c,A,O]}],shrink:[{shrink:["",c,A,O]}],order:[{order:[A1,"first","last","none",A,O]}],"grid-cols":[{"grid-cols":g()}],"col-start-end":[{col:E()}],"col-start":[{"col-start":K0()}],"col-end":[{"col-end":K0()}],"grid-rows":[{"grid-rows":g()}],"row-start-end":[{row:E()}],"row-start":[{"row-start":K0()}],"row-end":[{"row-end":K0()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":f0()}],"auto-rows":[{"auto-rows":f0()}],gap:[{gap:V()}],"gap-x":[{"gap-x":V()}],"gap-y":[{"gap-y":V()}],"justify-content":[{justify:[...Q0(),"normal"]}],"justify-items":[{"justify-items":[...t(),"normal"]}],"justify-self":[{"justify-self":["auto",...t()]}],"align-content":[{content:["normal",...Q0()]}],"align-items":[{items:[...t(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...t(),{baseline:["","last"]}]}],"place-content":[{"place-content":Q0()}],"place-items":[{"place-items":[...t(),"baseline"]}],"place-self":[{"place-self":["auto",...t()]}],p:[{p:V()}],px:[{px:V()}],py:[{py:V()}],ps:[{ps:V()}],pe:[{pe:V()}],pt:[{pt:V()}],pr:[{pr:V()}],pb:[{pb:V()}],pl:[{pl:V()}],m:[{m:Z0()}],mx:[{mx:Z0()}],my:[{my:Z0()}],ms:[{ms:Z0()}],me:[{me:Z0()}],mt:[{mt:Z0()}],mr:[{mr:Z0()}],mb:[{mb:Z0()}],ml:[{ml:Z0()}],"space-x":[{"space-x":V()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":V()}],"space-y-reverse":["space-y-reverse"],size:[{size:R0()}],w:[{w:[K,"screen",...R0()]}],"min-w":[{"min-w":[K,"screen","none",...R0()]}],"max-w":[{"max-w":[K,"screen","none","prose",{screen:[X]},...R0()]}],h:[{h:["screen","lh",...R0()]}],"min-h":[{"min-h":["screen","lh","none",...R0()]}],"max-h":[{"max-h":["screen","lh",...R0()]}],"font-size":[{text:["base",Z,Z5,$2]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[q,A,b8]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",A8,O]}],"font-family":[{font:[kQ,O,J]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[Q,A,O]}],"line-clamp":[{"line-clamp":[c,"none",A,b8]}],leading:[{leading:[Y,...V()]}],"list-image":[{"list-image":["none",A,O]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",A,O]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:b()}],"text-color":[{text:b()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...l0(),"wavy"]}],"text-decoration-thickness":[{decoration:[c,"from-font","auto",A,$2]}],"text-decoration-color":[{decoration:b()}],"underline-offset":[{"underline-offset":[c,"auto",A,O]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",A,O]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",A,O]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_0()}],"bg-repeat":[{bg:i1()}],"bg-size":[{bg:H1()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},A1,A,O],radial:["",A,O],conic:[A1,A,O]},EQ,fQ]}],"bg-color":[{bg:b()}],"gradient-from-pos":[{from:z1()}],"gradient-via-pos":[{via:z1()}],"gradient-to-pos":[{to:z1()}],"gradient-from":[{from:b()}],"gradient-via":[{via:b()}],"gradient-to":[{to:b()}],rounded:[{rounded:M0()}],"rounded-s":[{"rounded-s":M0()}],"rounded-e":[{"rounded-e":M0()}],"rounded-t":[{"rounded-t":M0()}],"rounded-r":[{"rounded-r":M0()}],"rounded-b":[{"rounded-b":M0()}],"rounded-l":[{"rounded-l":M0()}],"rounded-ss":[{"rounded-ss":M0()}],"rounded-se":[{"rounded-se":M0()}],"rounded-ee":[{"rounded-ee":M0()}],"rounded-es":[{"rounded-es":M0()}],"rounded-tl":[{"rounded-tl":M0()}],"rounded-tr":[{"rounded-tr":M0()}],"rounded-br":[{"rounded-br":M0()}],"rounded-bl":[{"rounded-bl":M0()}],"border-w":[{border:V0()}],"border-w-x":[{"border-x":V0()}],"border-w-y":[{"border-y":V0()}],"border-w-s":[{"border-s":V0()}],"border-w-e":[{"border-e":V0()}],"border-w-t":[{"border-t":V0()}],"border-w-r":[{"border-r":V0()}],"border-w-b":[{"border-b":V0()}],"border-w-l":[{"border-l":V0()}],"divide-x":[{"divide-x":V0()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":V0()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...l0(),"hidden","none"]}],"divide-style":[{divide:[...l0(),"hidden","none"]}],"border-color":[{border:b()}],"border-color-x":[{"border-x":b()}],"border-color-y":[{"border-y":b()}],"border-color-s":[{"border-s":b()}],"border-color-e":[{"border-e":b()}],"border-color-t":[{"border-t":b()}],"border-color-r":[{"border-r":b()}],"border-color-b":[{"border-b":b()}],"border-color-l":[{"border-l":b()}],"divide-color":[{divide:b()}],"outline-style":[{outline:[...l0(),"none","hidden"]}],"outline-offset":[{"outline-offset":[c,A,O]}],"outline-w":[{outline:["",c,Z5,$2]}],"outline-color":[{outline:b()}],shadow:[{shadow:["","none",w,K4,U4]}],"shadow-color":[{shadow:b()}],"inset-shadow":[{"inset-shadow":["none",T,K4,U4]}],"inset-shadow-color":[{"inset-shadow":b()}],"ring-w":[{ring:V0()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:b()}],"ring-offset-w":[{"ring-offset":[c,$2]}],"ring-offset-color":[{"ring-offset":b()}],"inset-ring-w":[{"inset-ring":V0()}],"inset-ring-color":[{"inset-ring":b()}],"text-shadow":[{"text-shadow":["none",M,K4,U4]}],"text-shadow-color":[{"text-shadow":b()}],opacity:[{opacity:[c,A,O]}],"mix-blend":[{"mix-blend":[...t6(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":t6()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[c]}],"mask-image-linear-from-pos":[{"mask-linear-from":S0()}],"mask-image-linear-to-pos":[{"mask-linear-to":S0()}],"mask-image-linear-from-color":[{"mask-linear-from":b()}],"mask-image-linear-to-color":[{"mask-linear-to":b()}],"mask-image-t-from-pos":[{"mask-t-from":S0()}],"mask-image-t-to-pos":[{"mask-t-to":S0()}],"mask-image-t-from-color":[{"mask-t-from":b()}],"mask-image-t-to-color":[{"mask-t-to":b()}],"mask-image-r-from-pos":[{"mask-r-from":S0()}],"mask-image-r-to-pos":[{"mask-r-to":S0()}],"mask-image-r-from-color":[{"mask-r-from":b()}],"mask-image-r-to-color":[{"mask-r-to":b()}],"mask-image-b-from-pos":[{"mask-b-from":S0()}],"mask-image-b-to-pos":[{"mask-b-to":S0()}],"mask-image-b-from-color":[{"mask-b-from":b()}],"mask-image-b-to-color":[{"mask-b-to":b()}],"mask-image-l-from-pos":[{"mask-l-from":S0()}],"mask-image-l-to-pos":[{"mask-l-to":S0()}],"mask-image-l-from-color":[{"mask-l-from":b()}],"mask-image-l-to-color":[{"mask-l-to":b()}],"mask-image-x-from-pos":[{"mask-x-from":S0()}],"mask-image-x-to-pos":[{"mask-x-to":S0()}],"mask-image-x-from-color":[{"mask-x-from":b()}],"mask-image-x-to-color":[{"mask-x-to":b()}],"mask-image-y-from-pos":[{"mask-y-from":S0()}],"mask-image-y-to-pos":[{"mask-y-to":S0()}],"mask-image-y-from-color":[{"mask-y-from":b()}],"mask-image-y-to-color":[{"mask-y-to":b()}],"mask-image-radial":[{"mask-radial":[A,O]}],"mask-image-radial-from-pos":[{"mask-radial-from":S0()}],"mask-image-radial-to-pos":[{"mask-radial-to":S0()}],"mask-image-radial-from-color":[{"mask-radial-from":b()}],"mask-image-radial-to-color":[{"mask-radial-to":b()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":L()}],"mask-image-conic-pos":[{"mask-conic":[c]}],"mask-image-conic-from-pos":[{"mask-conic-from":S0()}],"mask-image-conic-to-pos":[{"mask-conic-to":S0()}],"mask-image-conic-from-color":[{"mask-conic-from":b()}],"mask-image-conic-to-color":[{"mask-conic-to":b()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_0()}],"mask-repeat":[{mask:i1()}],"mask-size":[{mask:H1()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",A,O]}],filter:[{filter:["","none",A,O]}],blur:[{blur:e6()}],brightness:[{brightness:[c,A,O]}],contrast:[{contrast:[c,A,O]}],"drop-shadow":[{"drop-shadow":["","none",H,K4,U4]}],"drop-shadow-color":[{"drop-shadow":b()}],grayscale:[{grayscale:["",c,A,O]}],"hue-rotate":[{"hue-rotate":[c,A,O]}],invert:[{invert:["",c,A,O]}],saturate:[{saturate:[c,A,O]}],sepia:[{sepia:["",c,A,O]}],"backdrop-filter":[{"backdrop-filter":["","none",A,O]}],"backdrop-blur":[{"backdrop-blur":e6()}],"backdrop-brightness":[{"backdrop-brightness":[c,A,O]}],"backdrop-contrast":[{"backdrop-contrast":[c,A,O]}],"backdrop-grayscale":[{"backdrop-grayscale":["",c,A,O]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c,A,O]}],"backdrop-invert":[{"backdrop-invert":["",c,A,O]}],"backdrop-opacity":[{"backdrop-opacity":[c,A,O]}],"backdrop-saturate":[{"backdrop-saturate":[c,A,O]}],"backdrop-sepia":[{"backdrop-sepia":["",c,A,O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":V()}],"border-spacing-x":[{"border-spacing-x":V()}],"border-spacing-y":[{"border-spacing-y":V()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",A,O]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[c,"initial",A,O]}],ease:[{ease:["linear","initial",j,A,O]}],delay:[{delay:[c,A,O]}],animate:[{animate:["none",_,A,O]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[z,A,O]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:p5()}],"rotate-x":[{"rotate-x":p5()}],"rotate-y":[{"rotate-y":p5()}],"rotate-z":[{"rotate-z":p5()}],scale:[{scale:d5()}],"scale-x":[{"scale-x":d5()}],"scale-y":[{"scale-y":d5()}],"scale-z":[{"scale-z":d5()}],"scale-3d":["scale-3d"],skew:[{skew:F8()}],"skew-x":[{"skew-x":F8()}],"skew-y":[{"skew-y":F8()}],transform:[{transform:[A,O,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:r5()}],"translate-x":[{"translate-x":r5()}],"translate-y":[{"translate-y":r5()}],"translate-z":[{"translate-z":r5()}],"translate-none":["translate-none"],accent:[{accent:b()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:b()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",A,O]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",A,O]}],fill:[{fill:["none",...b()]}],"stroke-w":[{stroke:[c,Z5,$2,b8]}],stroke:[{stroke:["none",...b()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}};var i7=jQ(hQ);function R(...$){return i7(J5($))}var n7=($)=>typeof $==="boolean"?`${$}`:$===0?"0":$,a7=J5,n0=($,J)=>(Z)=>{var q;if((J===null||J===void 0?void 0:J.variants)==null)return a7($,Z===null||Z===void 0?void 0:Z.class,Z===null||Z===void 0?void 0:Z.className);let{variants:Q,defaultVariants:Y}=J,X=Object.keys(Q).map((B)=>{let w=Z===null||Z===void 0?void 0:Z[B],T=Y===null||Y===void 0?void 0:Y[B];if(w===null)return null;let M=n7(w)||n7(T);return Q[B][M]}),K=Z&&Object.entries(Z).reduce((B,w)=>{let[T,M]=w;if(M===void 0)return B;return B[T]=M,B},{}),G=J===null||J===void 0?void 0:(q=J.compoundVariants)===null||q===void 0?void 0:q.reduce((B,w)=>{let{class:T,className:M,...H}=w;return Object.entries(H).every((W)=>{let[z,F]=W;return Array.isArray(F)?F.includes({...Y,...K}[z]):{...Y,...K}[z]===F})?[...B,T,M]:B},[]);return a7($,X,G,Z===null||Z===void 0?void 0:Z.class,Z===null||Z===void 0?void 0:Z.className)};var G4=n0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium cursor-pointer transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*=size-])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-ring/50 focus-visible:ring-[3px]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20",outline:"border-2 border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md gap-1.5 px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs",lg:"h-10 rounded-md px-6",icon:"size-9","icon-sm":"size-8"}},defaultVariants:{variant:"default",size:"default"}});function f($){let{variant:J,size:Z,className:q,disabled:Q,type:Y="button",onClick:X,children:K}=$;return U("button",{type:Y,disabled:Q,onClick:X,className:R(G4({variant:J,size:Z,className:q}))},K)}var t7=n0("inline-flex items-center justify-center rounded-full border border-transparent px-2.5 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none transition-colors overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground",secondary:"bg-secondary text-secondary-foreground",destructive:"bg-destructive text-white",outline:"border-border text-foreground",ghost:"text-muted-foreground"}},defaultVariants:{variant:"default"}});function x({variant:$,className:J,children:Z}){return U("span",{className:R(t7({variant:$}),J)},Z)}function y({className:$,children:J,onClick:Z}){return U("div",{"data-slot":"card",className:R("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",Z&&"cursor-pointer",$),onClick:Z},J)}function m({className:$,children:J}){return U("div",{"data-slot":"card-header",className:R("grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6",$)},J)}function d({className:$,children:J}){return U("div",{"data-slot":"card-title",className:R("leading-none font-semibold",$)},J)}function n({className:$,children:J}){return U("div",{"data-slot":"card-description",className:R("text-muted-foreground text-sm",$)},J)}function p({className:$,children:J}){return U("div",{"data-slot":"card-content",className:R("px-6",$)},J)}function k8({className:$,children:J}){return U("div",{"data-slot":"card-footer",className:R("flex items-center px-6",$)},J)}function q0($){let{className:J,type:Z="text",...q}=$;return U("input",{"data-slot":"input",type:Z,...q,className:R("placeholder:text-muted-foreground border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-sm shadow-xs transition-[color,box-shadow] outline-none","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50",J)})}function _1($){let{className:J,rows:Z=3,...q}=$;return U("textarea",{"data-slot":"textarea",rows:Z,...q,className:R("border-input placeholder:text-muted-foreground flex min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-sm shadow-xs transition-[color,box-shadow] outline-none","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:cursor-not-allowed disabled:opacity-50","resize-none",J)})}function Y0({className:$,htmlFor:J,children:Z}){return U("label",{"data-slot":"label",for:J,className:R("flex items-center gap-2 text-sm leading-none font-medium select-none","peer-disabled:cursor-not-allowed peer-disabled:opacity-50",$)},Z)}function a0({className:$,checked:J=!1,disabled:Z=!1,onChange:q}){return U("button",{"data-slot":"switch",type:"button",role:"switch","aria-checked":J,disabled:Z,onClick:()=>q?.(!J),className:R("peer inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none cursor-pointer","focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:cursor-not-allowed disabled:opacity-50",J?"bg-primary":"bg-muted-foreground/40",$)},U("span",{"data-slot":"switch-thumb",className:R("pointer-events-none block size-4 rounded-full bg-background ring-0 transition-transform",J?"translate-x-4":"translate-x-0")}))}function b1({className:$,children:J}){return U("span",{"data-slot":"avatar",className:R("relative flex size-8 shrink-0 overflow-hidden rounded-full",$)},J)}class D1 extends N{constructor($){super($);this.state={failed:!1}}componentDidUpdate($){if($.src!==this.props.src)this.setState({failed:!1})}render(){if(this.state.failed||!this.props.src)return null;return U("img",{"data-slot":"avatar-image",src:this.props.src,alt:this.props.alt||"",onError:($)=>{this.setState({failed:!0}),this.props.onError?.($)},className:R("aspect-square size-full object-cover",this.props.className)})}}function f1({className:$,children:J}){return U("span",{"data-slot":"avatar-fallback",className:R("bg-muted flex size-full items-center justify-center rounded-full text-xs font-medium",$)},J)}function v8({className:$,children:J}){return U("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto"},U("table",{"data-slot":"table",className:R("w-full caption-bottom text-sm",$)},J))}function E8({className:$,children:J}){return U("thead",{"data-slot":"table-header",className:R("[&_tr]:border-b",$)},J)}function y8({className:$,children:J}){return U("tbody",{"data-slot":"table-body",className:R("[&_tr:last-child]:border-0",$)},J)}function B4({className:$,children:J}){return U("tr",{"data-slot":"table-row",className:R("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",$)},J)}function F2({className:$,children:J}){return U("th",{"data-slot":"table-head",className:R("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",$)},J)}function j2({className:$,children:J}){return U("td",{"data-slot":"table-cell",className:R("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",$)},J)}function k0({className:$,orientation:J="horizontal"}){return U("div",{"data-slot":"separator",role:"separator",className:R("shrink-0 bg-border",J==="horizontal"?"h-px w-full":"h-full w-px",$)})}var uQ={sm:"size-4 border-2",default:"size-6 border-3",lg:"size-8 border-4"};function K1({className:$,size:J="default"}){return U("div",{"data-slot":"spinner",role:"status","aria-label":"Loading",className:R("animate-spin rounded-full border-muted border-t-primary",uQ[J],$)})}function r({className:$}){return U("div",{"data-slot":"skeleton",className:R("bg-accent animate-pulse rounded-md",$)})}var e7=n0("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function W0({variant:$,className:J,children:Z}){return U("div",{"data-slot":"alert",role:"alert",className:R(e7({variant:$}),J)},Z)}function F0({className:$,children:J}){return U("div",{"data-slot":"alert-description",className:R("col-start-2 text-sm text-muted-foreground [&_p]:leading-relaxed",$)},J)}var $$=n0("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 outline-none focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:focus-visible:ring-destructive/20",{variants:{variant:{default:"bg-transparent hover:bg-muted hover:text-muted-foreground data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground data-[state=on]:bg-accent data-[state=on]:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});var k1=null,g8=new Set;function q5($){k1=$,g8.forEach((J)=>J())}function xQ($){return g8.add($),()=>{g8.delete($)}}var mQ=0;class J$ extends N{id=`nmi-${++mQ}`;unsub=null;ref=null;constructor($){super($);this.state={open:!1}}handleOutside=($)=>{if(k1===this.id&&this.ref&&!this.ref.contains($.target))q5(null)};handleKey=($)=>{if($.key==="Escape"&&k1)q5(null)};componentDidMount(){this.unsub=xQ(()=>{let $=k1===this.id;if(this.state.open!==$)this.setState({open:$})}),document.addEventListener("mousedown",this.handleOutside),document.addEventListener("keydown",this.handleKey)}componentWillUnmount(){if(this.unsub?.(),document.removeEventListener("mousedown",this.handleOutside),document.removeEventListener("keydown",this.handleKey),k1===this.id)q5(null)}handleClick=()=>{q5(k1===this.id?null:this.id)};handleMouseEnter=()=>{if(k1&&k1!==this.id)q5(this.id)};render(){let{className:$,children:J}=this.props,{open:Z}=this.state,q=Array.isArray(J)?J:[J],Q=null,Y=null,X=[];for(let K of q){if(!K)continue;if(K.type===h8||K.props&&K.props["data-slot"]==="navigation-menu-trigger")Q=K;else if(K.type===Z$||K.props&&K.props["data-slot"]==="navigation-menu-content")Y=K;else X.push(K)}return U("li",{"data-slot":"navigation-menu-item",ref:(K)=>{this.ref=K},className:R("relative",$),onmouseenter:this.handleMouseEnter},Q?U(h8,{...Q.props||{},onClick:this.handleClick,"data-state":Z?"open":"closed"},Q.children!=null?Q.children:Q.props&&Q.props.children):null,Z&&Y?Y:null,...X)}}function h8($){let{className:J,onClick:Z,children:q,...Q}=$;return U("button",{"data-slot":"navigation-menu-trigger",type:"button",onClick:Z,className:R("group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors","hover:bg-accent hover:text-accent-foreground","focus-visible:outline-none","data-[state=open]:bg-accent/50",J),...Q},q,U("svg",{className:R("relative top-px ml-1 size-3 transition-transform duration-200","group-data-[state=open]:rotate-180"),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M6 9l6 6 6-6"})))}function Z$({className:$,children:J}){return U("div",{"data-slot":"navigation-menu-content",className:R("absolute left-0 top-full w-full md:w-auto","mt-1.5 min-w-[400px] md:min-w-[500px] lg:min-w-[600px] rounded-md border bg-popover p-4 text-popover-foreground shadow-lg","animate-in fade-in-0 zoom-in-95",$)},J)}var R2=null,x8=new Set;function u8($){R2=$,x8.forEach((J)=>J())}function pQ($){return x8.add($),()=>{x8.delete($)}}var dQ=0;class q$ extends N{id=`mbm-${++dQ}`;unsub=null;constructor($){super($);this.state={open:!1}}componentDidMount(){this.unsub=pQ(()=>{let $=R2===this.id;if(this.state.open!==$)this.setState({open:$})})}componentWillUnmount(){if(this.unsub?.(),R2===this.id)u8(null)}handleClick=()=>{u8(R2===this.id?null:this.id)};handleMouseEnter=()=>{if(R2&&R2!==this.id)u8(this.id)};render(){let{children:$}=this.props,{open:J}=this.state,Z=Array.isArray($)?$:[$],q=null,Q=null,Y=[];for(let X of Z){if(!X)continue;if(X.type===m8||X.props&&X.props["data-slot"]==="menubar-trigger")q=X;else if(X.type===Q$||X.props&&X.props["data-slot"]==="menubar-content")Q=X;else Y.push(X)}return U("div",{"data-slot":"menubar-menu",className:"relative",onmouseenter:this.handleMouseEnter},q?U(m8,{...q.props||{},onClick:this.handleClick,"data-state":J?"open":"closed"},q.children!=null?q.children:q.props&&q.props.children):null,J&&Q?Q:null,...Y)}}function m8($){let{className:J,onClick:Z,children:q,...Q}=$;return U("button",{"data-slot":"menubar-trigger",type:"button",onClick:Z,className:R("flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none","hover:bg-accent hover:text-accent-foreground","focus-visible:outline-none","data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",J),...Q},q)}function Q$({className:$,children:J}){return U("div",{"data-slot":"menubar-content",role:"menu",className:R("absolute left-0 top-full z-50 mt-1 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","animate-in fade-in-0 zoom-in-95",$)},J)}var xT=n0("bg-background fixed z-50 flex flex-col gap-4 shadow-lg transition-transform duration-300 ease-in-out border",{variants:{side:{top:"inset-x-0 top-0 border-b",bottom:"inset-x-0 bottom-0 border-t",left:"inset-y-0 left-0 w-3/4 border-r sm:max-w-sm",right:"inset-y-0 right-0 w-3/4 border-l sm:max-w-sm"}},defaultVariants:{side:"right"}});class w4 extends N{raf=null;timer=null;constructor($){super($);this.state={mounted:$.open,visible:!1}}componentDidMount(){if(this.props.open)this.raf=requestAnimationFrame(()=>{this.raf=requestAnimationFrame(()=>{this.setState({visible:!0})})})}componentDidUpdate($){if(!$.open&&this.props.open)this.clearTimers(),this.setState({mounted:!0,visible:!1},()=>{this.raf=requestAnimationFrame(()=>{this.raf=requestAnimationFrame(()=>{this.setState({visible:!0})})})});else if($.open&&!this.props.open)this.setState({visible:!1}),this.timer=setTimeout(()=>this.setState({mounted:!1}),300)}componentWillUnmount(){this.clearTimers()}clearTimers(){if(this.raf)cancelAnimationFrame(this.raf),this.raf=null;if(this.timer)clearTimeout(this.timer),this.timer=null}render(){if(!this.state.mounted)return null;let{visible:$}=this.state,{onOpenChange:J,children:Z}=this.props;return U(rQ,{visible:$,onClose:()=>J?.(!1)},Z)}}function rQ({visible:$,onClose:J,children:Z}){return U("div",{"data-slot":"drawer-portal",className:"fixed inset-0 z-50"},U("div",{"data-slot":"drawer-overlay",className:"fixed inset-0 bg-black/50",style:{opacity:$?1:0,transition:"opacity 300ms cubic-bezier(0.4,0,0.2,1)"},onClick:J}),U("div",{"data-slot":"drawer-content",className:"bg-background fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border-t",style:{transform:$?"translateY(0)":"translateY(100%)",transition:"transform 300ms cubic-bezier(0.32,0.72,0,1)"}},U("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),Z))}function p8({className:$,children:J}){return U("div",{"data-slot":"drawer-content-inner",className:R("px-4",$)},J)}function d8({className:$,children:J}){return U("div",{"data-slot":"drawer-header",className:R("grid gap-1.5 p-4 text-center",$)},J)}function r8({className:$,children:J}){return U("h2",{"data-slot":"drawer-title",className:R("text-lg font-semibold leading-none tracking-tight",$)},J)}class _2 extends N{timer=null;constructor($){super($);this.state={visible:!1}}componentWillUnmount(){if(this.timer)clearTimeout(this.timer)}show=()=>{let $=this.props.delayMs??200;this.timer=setTimeout(()=>this.setState({visible:!0}),$)};hide=()=>{if(this.timer)clearTimeout(this.timer);this.timer=null,this.setState({visible:!1})};render(){let{content:$,side:J="top",className:Z,children:q}=this.props,{visible:Q}=this.state,Y={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"};return U("div",{"data-slot":"tooltip",className:"relative inline-flex",onMouseEnter:this.show,onMouseLeave:this.hide,onFocus:this.show,onBlur:this.hide},q,Q?U("div",{"data-slot":"tooltip-content",role:"tooltip",className:R("absolute z-50 w-fit rounded-md bg-popover border border-border px-3 py-1.5 text-xs text-popover-foreground shadow-md pointer-events-none whitespace-nowrap animate-in fade-in-0 zoom-in-95",Y[J],Z)},$):null)}}var Q5=[],T4=[],cQ=0;function Y$(){T4.forEach(($)=>$([...Q5]))}function X0($){let J=`toast-${++cQ}`,Z={id:J,duration:4000,variant:"default",...$};return Q5=[...Q5,Z],Y$(),setTimeout(()=>{c8(J)},Z.duration),J}function c8($){Q5=Q5.filter((J)=>J.id!==$),Y$()}function sQ($){return T4.push($),()=>{T4=T4.filter((J)=>J!==$)}}var oQ=n0("group pointer-events-auto relative flex w-full items-center justify-between gap-4 overflow-hidden rounded-md border p-4 shadow-lg transition-all",{variants:{variant:{default:"bg-background text-foreground border-border",destructive:"bg-destructive text-white border-destructive group"}},defaultVariants:{variant:"default"}});function lQ({data:$,onDismiss:J}){return U("div",{"data-slot":"toast",role:"alert",className:R(oQ({variant:$.variant}))},U("div",{className:"grid gap-1"},$.title?U("div",{"data-slot":"toast-title",className:"text-sm font-semibold"},$.title):null,$.description?U("div",{"data-slot":"toast-description",className:"text-sm opacity-90"},$.description):null),U("button",{"data-slot":"toast-close",type:"button",onClick:()=>J($.id),className:R("absolute top-2 right-2 rounded-md p-1 opacity-0 transition-opacity group-hover:opacity-100","outline-none focus-visible:opacity-100 focus-visible:ring-ring/50 focus-visible:ring-[3px]","hover:text-foreground"),"aria-label":"Dismiss"},U("svg",{className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))))}class D2 extends N{unsub=null;constructor($){super($);this.state={toasts:[]}}componentDidMount(){this.unsub=sQ(($)=>this.setState({toasts:$}))}componentWillUnmount(){this.unsub?.()}render(){let{toasts:$}=this.state;if($.length===0)return null;let J=3,Z=$.slice(-J),q=$.length-Z.length;return U("div",{"data-slot":"toaster",className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2 w-full max-w-sm pointer-events-none"},q>0?U("div",{className:"text-center text-xs text-muted-foreground py-1"},`+${q} more`):null,...Z.map((Q)=>U(lQ,{key:Q.id,data:Q,onDismiss:c8})))}}function iQ(){if(typeof window==="undefined")return"dark";let $=localStorage.getItem("theme");if($==="light"||$==="dark")return $;return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function X$($){let J=document.documentElement;if($==="dark")J.classList.add("dark");else J.classList.remove("dark");localStorage.setItem("theme",$)}class L2 extends N{constructor($){super($);this.state={theme:iQ()}}componentDidMount(){X$(this.state.theme)}toggle=()=>{let $=this.state.theme==="dark"?"light":"dark";this.setState({theme:$}),X$($)};render(){let{className:$}=this.props,J=this.state.theme==="dark";return U("button",{type:"button",onClick:this.toggle,"aria-label":J?"Switch to light mode":"Switch to dark mode",className:R("inline-flex items-center justify-center size-9 rounded-md border border-input bg-background text-foreground shadow-xs cursor-pointer transition-colors hover:bg-accent hover:text-accent-foreground outline-none focus-visible:ring-ring/50 focus-visible:ring-[3px]",$)},J?U("svg",{className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("circle",{cx:"12",cy:"12",r:"4"}),U("path",{d:"M12 2v2"}),U("path",{d:"M12 20v2"}),U("path",{d:"m4.93 4.93 1.41 1.41"}),U("path",{d:"m17.66 17.66 1.41 1.41"}),U("path",{d:"M2 12h2"}),U("path",{d:"M20 12h2"}),U("path",{d:"m6.34 17.66-1.41 1.41"}),U("path",{d:"m19.07 4.93-1.41 1.41"})):U("svg",{className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})))}}var nQ=1000,aQ=30000,tQ=1e4;class s8{ws=null;url;accessToken="";handlers=new Map;reconnectAttempts=0;reconnectTimer=null;pingTimer=null;connected=!1;constructor($){let J=window.location.protocol==="https:"?"wss:":"ws:",Z=$||window.location.host;this.url=`${J}//${Z}/ws`}setAccessToken($){this.accessToken=$}on($,J){let Z=this.handlers.get($)||[];Z.push(J),this.handlers.set($,Z)}off($,J){let Z=this.handlers.get($)||[];this.handlers.set($,Z.filter((q)=>q!==J))}connect(){if(this.ws)this.ws.close();let $=this.accessToken?`${this.url}?accessToken=${this.accessToken}`:this.url;this.ws=new WebSocket($),this.ws.onopen=()=>{this.connected=!0,this.reconnectAttempts=0,this.startPing(),console.log("[WS] Connected")},this.ws.onclose=(J)=>{this.connected=!1,this.stopPing(),console.log(`[WS] Disconnected (code=${J.code})`),this.scheduleReconnect()},this.ws.onerror=(J)=>{console.error("[WS] Error:",J)},this.ws.onmessage=(J)=>{try{let Z=JSON.parse(J.data);if(Z.type==="PONG")return;this.dispatch(Z)}catch(Z){console.error("[WS] Parse error:",Z)}}}disconnect(){if(this.stopPing(),this.reconnectTimer)clearTimeout(this.reconnectTimer),this.reconnectTimer=null;if(this.ws)this.ws.onclose=null,this.ws.close(),this.ws=null;this.connected=!1}send($){if(this.ws&&this.connected)this.ws.send($)}sendChat($){this.send(JSON.stringify({type:"CHAT",body:$}))}isConnected(){return this.connected}dispatch($){let J=this.handlers.get($.type);if(J)for(let q of J)q($);let Z=this.handlers.get("*");if(Z)for(let q of Z)q($)}startPing(){this.stopPing(),this.pingTimer=setInterval(()=>{this.send(JSON.stringify({type:"PING"}))},tQ)}stopPing(){if(this.pingTimer)clearInterval(this.pingTimer),this.pingTimer=null}scheduleReconnect(){if(this.reconnectTimer)return;let $=Math.min(nQ*Math.pow(2,this.reconnectAttempts),aQ);this.reconnectAttempts++,console.log(`[WS] Reconnecting in ${$}ms (attempt ${this.reconnectAttempts})`),this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.connect()},$)}}async function M4($){let J=await fetch(`/api${$}`);if(!J.ok)throw new Error(`GET ${$} failed: ${J.status}`);return J.json()}async function eQ($,J){let Z=await fetch(`/api${$}`,{method:"POST",headers:{"Content-Type":"application/json"},body:J?JSON.stringify(J):void 0});if(!Z.ok)throw new Error(`POST ${$} failed: ${Z.status}`);return Z.json()}async function $Y($,J){let Z=await fetch(`/api${$}?accessToken=${J}`);if(!Z.ok)throw new Error(`GET ${$} failed: ${Z.status}`);return Z.json()}async function p0($,J){let Z=await fetch(`/api${$}`,{headers:{Authorization:`Bearer ${J}`}});if(!Z.ok)throw new Error(`GET ${$} failed: ${Z.status}`);return Z.json()}async function k($,J,Z){let q=await fetch(`/api${$}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${J}`},body:Z?JSON.stringify(Z):void 0});if(!q.ok)throw new Error(`POST ${$} failed: ${q.status}`);return q.json()}var v={getStatus:()=>M4("/status"),getConfig:()=>M4("/config"),getEmoji:()=>M4("/emoji"),getChatHistory:($)=>$Y("/chat",$),registerChatUser:($)=>eQ("/chat/register",{displayName:$}),getVideoVariants:()=>M4("/video/variants"),admin:{getConfig:($)=>p0("/admin/serverconfig",$),getStatus:($)=>p0("/admin/status",$),getLogs:($)=>p0("/admin/logs",$),getViewers:($)=>p0("/admin/viewers",$),getHardware:($)=>p0("/admin/hardwareinfo",$),getChatMessages:($)=>p0("/admin/chat/messages",$),getWebhooks:($)=>p0("/admin/webhooks",$),getAccessTokens:($)=>p0("/admin/accesstokens",$),getFederationFollowers:($)=>p0("/admin/followers",$),getFederationActions:($)=>p0("/admin/federation/actions",$),getConnectedClients:($)=>p0("/admin/chat/clients",$),getLogEntries:($)=>p0("/admin/logs",$),getWarnings:($)=>p0("/admin/logs/warnings",$),sendSystemMessage:($,J)=>k("/admin/chat/send",$,{body:J}),updateChatDisabled:($,J)=>k("/admin/config/chat/disable",$,{value:J}),updateChatJoinMessages:($,J)=>k("/admin/config/chat/joinmessagesenabled",$,{value:J}),updateChatEstablishedMode:($,J)=>k("/admin/config/chat/establishedusermode",$,{value:J}),updateChatSpamProtection:($,J)=>k("/admin/config/chat/spamprotectionenabled",$,{value:J}),updateChatSlurFilter:($,J)=>k("/admin/config/chat/slurfilterenabled",$,{value:J}),updateForbiddenUsernames:($,J)=>k("/admin/config/chat/forbiddenusernames",$,{value:J}),updateSuggestedUsernames:($,J)=>k("/admin/config/chat/suggestedusernames",$,{value:J}),updateHideViewerCount:($,J)=>k("/admin/config/hideviewercount",$,{value:J}),setStreamKeys:($,J)=>k("/admin/config/streamkeys",$,{value:J}),setServerName:($,J)=>k("/admin/config/name",$,{value:J}),setServerSummary:($,J)=>k("/admin/config/serversummary",$,{value:J}),setServerURL:($,J)=>k("/admin/config/serverurl",$,{value:J}),setStreamTitle:($,J)=>k("/admin/config/streamtitle",$,{value:J}),setTags:($,J)=>k("/admin/config/tags",$,J.map((Z)=>({value:Z}))),setLogo:($,J)=>k("/admin/config/logo",$,{value:J}),setOfflineMessage:($,J)=>k("/admin/config/offlinemessage",$,{value:J}),setWelcomeMessage:($,J)=>k("/admin/config/welcomemessage",$,{value:J}),setNSFW:($,J)=>k("/admin/config/nsfw",$,{value:J}),setExtraPageContent:($,J)=>k("/admin/config/pagecontent",$,{value:J}),setSocialHandles:($,J)=>k("/admin/config/socialhandles",$,{value:J}),setCustomStyles:($,J)=>k("/admin/config/customstyles",$,{value:J}),setCustomJavascript:($,J)=>k("/admin/config/customjavascript",$,{value:J}),setStreamLatencyLevel:($,J)=>k("/admin/config/streamlatencylevel",$,{value:J}),setStreamOutputVariants:($,J)=>k("/admin/config/streamoutputvariants",$,{value:J}),setVideoCodec:($,J)=>k("/admin/config/videocodec",$,{value:J}),setFfmpegPath:($,J)=>k("/admin/config/ffmpegpath",$,{value:J}),setRTMPPort:($,J)=>k("/admin/config/rtmpserverport",$,{value:J}),setWebServerPort:($,J)=>k("/admin/config/webserverport",$,{value:J}),setVideoServingEndpoint:($,J)=>k("/admin/config/videoservingendpoint",$,{value:J}),setS3Config:($,J)=>k("/admin/config/s3",$,{value:J}),setFederationEnabled:($,J)=>k("/admin/config/federation/enable",$,{value:J}),setFederationPrivate:($,J)=>k("/admin/config/federation/private",$,{value:J}),setFederationShowEngagement:($,J)=>k("/admin/config/federation/showengagement",$,{value:J}),setFederationUsername:($,J)=>k("/admin/config/federation/username",$,{value:J}),setFederationGoLiveMessage:($,J)=>k("/admin/config/federation/livemessage",$,{value:J}),setFederationBlockDomains:($,J)=>k("/admin/config/federation/blockdomains",$,J.map((Z)=>({value:Z}))),sendFederatedMessage:($,J)=>k("/admin/federation/send",$,{value:J}),setDiscordConfig:($,J)=>k("/admin/config/notifications/discord",$,{value:J}),setBrowserPushConfig:($,J)=>k("/admin/config/notifications/browser",$,{value:J}),setExternalActions:($,J)=>k("/admin/config/externalactions",$,{value:J}),createWebhook:($,J)=>k("/admin/webhooks/create",$,J),deleteWebhook:($,J)=>k("/admin/webhooks/delete",$,{id:J}),createAccessToken:($,J)=>k("/admin/accesstokens/create",$,J),deleteAccessToken:($,J)=>k("/admin/accesstokens/delete",$,{token:J}),setDirectoryEnabled:($,J)=>k("/admin/config/directoryenabled",$,{value:J}),setAdminPassword:($,J)=>k("/admin/config/adminpass",$,{value:J}),setDisableSearchIndexing:($,J)=>k("/admin/config/disablesearchindexing",$,{value:J}),setSocketHostOverride:($,J)=>k("/admin/config/sockethostoverride",$,{value:J}),updateConfig:($,J)=>k("/admin/config",$,J),setStreamKey:($,J)=>k("/admin/config/key",$,{value:J}),updateVideoConfig:($,J)=>k("/admin/config/video",$,J)}};function K$($){try{return new Date($).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}}function G$($){if($===1)return"1 viewer";return`${$} viewers`}function d0($){try{let J=new Date($),q=new Date().getTime()-J.getTime(),Q=Math.floor(q/60000);if(Q<1)return"just now";if(Q<60)return`${Q}m ago`;let Y=Math.floor(Q/60);if(Y<24)return`${Y}h ago`;return`${Math.floor(Y/24)}d ago`}catch{return""}}function Y5($){try{return localStorage.getItem($)}catch{return null}}function X5($,J){try{localStorage.setItem($,J)}catch{}}function H4($){try{localStorage.removeItem($)}catch{}}var t0={accessToken:"oni-access-token",displayName:"oni-display-name",displayColor:"oni-display-color",userId:"oni-user-id",visitCount:"oni-visit-count",notifyModalShown:"oni-notify-modal-shown"};var z4=new Set,o8=!1;function A0(){if(o8)return;o8=!0,queueMicrotask(()=>{o8=!1;for(let $ of z4)$()})}var{configHydration:B$,statusHydration:JY}=window,u={loading:!B$,config:B$||null,status:JY||null,messages:[],currentUser:null,accessToken:Y5(t0.accessToken),isMobile:window.innerWidth<=768,chatVisible:!0,error:null},D0=null,U5=null,w$=Y5(t0.userId),T$=Y5(t0.displayName),M$=Y5(t0.displayColor);if(w$&&T$)u.currentUser={id:w$,displayName:T$,displayColor:M$?parseInt(M$,10):0};function H$(){let $=u.config?.socketHostOverride;if(D0=new s8($||void 0),u.accessToken)D0.setAccessToken(u.accessToken);D0.on("CHAT",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),D0.on("NAME_CHANGE",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),D0.on("USER_JOINED",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),D0.on("USER_PARTED",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),D0.on("SYSTEM",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),D0.on("FEDIVERSE_ENGAGEMENT_FOLLOW",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),D0.on("FEDIVERSE_ENGAGEMENT_LIKE",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),D0.on("FEDIVERSE_ENGAGEMENT_REPOST",(J)=>{let Z=J;u.messages=[...u.messages,Z],A0()}),D0.on("CONNECTED_USER_INFO",(J)=>{let Z=J;if(Z.user)u.currentUser={id:Z.user.id,displayName:Z.user.displayName,displayColor:Z.user.displayColor,isModerator:Z.user.isModerator},A0()}),D0.on("VISIBILITY-UPDATE",(J)=>{let Z=J;if(Z.ids&&Z.ids.length>0){let q=new Set(Z.ids);if(Z.visible===!1)u.messages=u.messages.filter((Q)=>!q.has(Q.id));A0()}}),D0.on("ERROR_NEEDS_REGISTRATION",()=>{u.currentUser=null,u.accessToken=null,H4(t0.accessToken),H4(t0.userId),H4(t0.displayName),A0()}),D0.connect()}function ZY(){if(U5)return;U5=setInterval(async()=>{try{let $=await v.getStatus();u.status=$,A0()}catch($){console.error("[Store] Status poll error:",$)}},5000)}var i={getState(){return u},subscribe($){return z4.add($),()=>z4.delete($)},async init(){try{if(!u.config){let[$,J]=await Promise.all([v.getConfig(),v.getStatus()]);u.config=$,u.status=J}if(u.accessToken)try{let $=await v.getChatHistory(u.accessToken);if(Array.isArray($))u.messages=$}catch{}u.loading=!1,A0(),H$(),ZY()}catch($){u.error=$ instanceof Error?$.message:"Failed to load",u.loading=!1,A0()}},async registerUser($){try{let J=await v.registerChatUser($);if(u.accessToken=J.accessToken,u.currentUser={id:J.id,displayName:J.displayName,displayColor:J.displayColor},X5(t0.accessToken,J.accessToken),X5(t0.userId,J.id),X5(t0.displayName,J.displayName),X5(t0.displayColor,String(J.displayColor)),D0)D0.disconnect();H$();try{let Z=await v.getChatHistory(J.accessToken);if(Array.isArray(Z))u.messages=Z}catch{}A0()}catch(J){throw console.error("[Store] Registration error:",J),J}},sendChat($){if(D0)D0.sendChat($)},toggleChat(){u.chatVisible=!u.chatVisible,A0()},setMobile($){if(u.isMobile!==$)u.isMobile=$,A0()},cleanup(){if(D0)D0.disconnect(),D0=null;if(U5)clearInterval(U5),U5=null;z4.clear()}};function qY($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function W4($,...J){if(!qY($))throw new Error("Uint8Array expected");if(J.length>0&&!J.includes($.length))throw new Error("Uint8Array expected of length "+J+", got length="+$.length)}function l8($,J=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(J&&$.finished)throw new Error("Hash#digest() has already been called")}function z$($,J){W4($);let Z=J.outputLen;if($.length<Z)throw new Error("digestInto() expects output buffer of length at least "+Z)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function F4($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function q1($,J){return $<<32-J|$>>>J}var F$=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",QY=Array.from({length:256},($,J)=>J.toString(16).padStart(2,"0"));function i8($){if(W4($),F$)return $.toHex();let J="";for(let Z=0;Z<$.length;Z++)J+=QY[$[Z]];return J}var L1={_0:48,_9:57,A:65,F:70,a:97,f:102};function W$($){if($>=L1._0&&$<=L1._9)return $-L1._0;if($>=L1.A&&$<=L1.F)return $-(L1.A-10);if($>=L1.a&&$<=L1.f)return $-(L1.a-10);return}function j$($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(F$)return Uint8Array.fromHex($);let J=$.length,Z=J/2;if(J%2)throw new Error("hex string expected, got unpadded hex of length "+J);let q=new Uint8Array(Z);for(let Q=0,Y=0;Q<Z;Q++,Y+=2){let X=W$($.charCodeAt(Y)),K=W$($.charCodeAt(Y+1));if(X===void 0||K===void 0){let G=$[Y]+$[Y+1];throw new Error('hex string expected, got non-hex character "'+G+'" at index '+Y)}q[Q]=X*16+K}return q}function YY($){if(typeof $!=="string")throw new Error("utf8ToBytes expected string, got "+typeof $);return new Uint8Array(new TextEncoder().encode($))}function n8($){if(typeof $==="string")$=YY($);return W4($),$}class a8{clone(){return this._cloneInto()}}function R$($){let J=(q)=>$().update(n8(q)).digest(),Z=$();return J.outputLen=Z.outputLen,J.blockLen=Z.blockLen,J.create=()=>$(),J}function XY($,J,Z,q){if(typeof $.setBigUint64==="function")return $.setBigUint64(J,Z,q);let Q=BigInt(32),Y=BigInt(4294967295),X=Number(Z>>Q&Y),K=Number(Z&Y),G=q?4:0,B=q?0:4;$.setUint32(J+G,X,q),$.setUint32(J+B,K,q)}function _$($,J,Z){return $&J^~$&Z}function D$($,J,Z){return $&J^$&Z^J&Z}class t8 extends a8{constructor($,J,Z,q){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=J,this.padOffset=Z,this.isLE=q,this.buffer=new Uint8Array($),this.view=F4(this.buffer)}update($){l8(this);let{view:J,buffer:Z,blockLen:q}=this;$=n8($);let Q=$.length;for(let Y=0;Y<Q;){let X=Math.min(q-this.pos,Q-Y);if(X===q){let K=F4($);for(;q<=Q-Y;Y+=q)this.process(K,Y);continue}if(Z.set($.subarray(Y,Y+X),this.pos),this.pos+=X,Y+=X,this.pos===q)this.process(J,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){l8(this),z$($,this),this.finished=!0;let{buffer:J,view:Z,blockLen:q,isLE:Q}=this,{pos:Y}=this;if(J[Y++]=128,this.buffer.subarray(Y).fill(0),this.padOffset>q-Y)this.process(Z,0),Y=0;for(let w=Y;w<q;w++)J[w]=0;XY(Z,q-8,BigInt(this.length*8),Q),this.process(Z,0);let X=F4($),K=this.outputLen;if(K%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let G=K/4,B=this.get();if(G>B.length)throw new Error("_sha2: outputLen bigger than state");for(let w=0;w<G;w++)X.setUint32(4*w,B[w],Q)}digest(){let{buffer:$,outputLen:J}=this;this.digestInto($);let Z=$.slice(0,J);return this.destroy(),Z}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:J,buffer:Z,length:q,finished:Q,destroyed:Y,pos:X}=this;if($.length=q,$.pos=X,$.finished=Q,$.destroyed=Y,q%J)$.buffer.set(Z);return $}}var UY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),v1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),E1=new Uint32Array(64);class L$ extends t8{constructor($=32){super(64,$,8,!1);this.A=v1[0]|0,this.B=v1[1]|0,this.C=v1[2]|0,this.D=v1[3]|0,this.E=v1[4]|0,this.F=v1[5]|0,this.G=v1[6]|0,this.H=v1[7]|0}get(){let{A:$,B:J,C:Z,D:q,E:Q,F:Y,G:X,H:K}=this;return[$,J,Z,q,Q,Y,X,K]}set($,J,Z,q,Q,Y,X,K){this.A=$|0,this.B=J|0,this.C=Z|0,this.D=q|0,this.E=Q|0,this.F=Y|0,this.G=X|0,this.H=K|0}process($,J){for(let w=0;w<16;w++,J+=4)E1[w]=$.getUint32(J,!1);for(let w=16;w<64;w++){let T=E1[w-15],M=E1[w-2],H=q1(T,7)^q1(T,18)^T>>>3,W=q1(M,17)^q1(M,19)^M>>>10;E1[w]=W+E1[w-7]+H+E1[w-16]|0}let{A:Z,B:q,C:Q,D:Y,E:X,F:K,G,H:B}=this;for(let w=0;w<64;w++){let T=q1(X,6)^q1(X,11)^q1(X,25),M=B+T+_$(X,K,G)+UY[w]+E1[w]|0,W=(q1(Z,2)^q1(Z,13)^q1(Z,22))+D$(Z,q,Q)|0;B=G,G=K,K=X,X=Y+M|0,Y=Q,Q=q,q=Z,Z=M+W|0}Z=Z+this.A|0,q=q+this.B|0,Q=Q+this.C|0,Y=Y+this.D|0,X=X+this.E|0,K=K+this.F|0,G=G+this.G|0,B=B+this.H|0,this.set(Z,q,Q,Y,X,K,G,B)}roundClean(){E1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}var V$=R$(()=>new L$);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function J9($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function N$($,J){if(!Array.isArray(J))return!1;if(J.length===0)return!0;if($)return J.every((Z)=>typeof Z==="string");else return J.every((Z)=>Number.isSafeInteger(Z))}function O$($){if(typeof $!=="function")throw new Error("function expected");return!0}function V2($,J){if(typeof J!=="string")throw new Error(`${$}: string expected`);return!0}function G5($){if(!Number.isSafeInteger($))throw new Error(`invalid integer: ${$}`)}function R4($){if(!Array.isArray($))throw new Error("array expected")}function _4($,J){if(!N$(!0,J))throw new Error(`${$}: array of strings expected`)}function Z9($,J){if(!N$(!1,J))throw new Error(`${$}: array of numbers expected`)}function r0(...$){let J=(Y)=>Y,Z=(Y,X)=>(K)=>Y(X(K)),q=$.map((Y)=>Y.encode).reduceRight(Z,J),Q=$.map((Y)=>Y.decode).reduce(Z,J);return{encode:q,decode:Q}}function c0($){let J=typeof $==="string"?$.split(""):$,Z=J.length;_4("alphabet",J);let q=new Map(J.map((Q,Y)=>[Q,Y]));return{encode:(Q)=>{return R4(Q),Q.map((Y)=>{if(!Number.isSafeInteger(Y)||Y<0||Y>=Z)throw new Error(`alphabet.encode: digit index outside alphabet "${Y}". Allowed: ${$}`);return J[Y]})},decode:(Q)=>{return R4(Q),Q.map((Y)=>{V2("alphabet.decode",Y);let X=q.get(Y);if(X===void 0)throw new Error(`Unknown letter: "${Y}". Allowed: ${$}`);return X})}}}function s0($=""){return V2("join",$),{encode:(J)=>{return _4("join.decode",J),J.join($)},decode:(J)=>{return V2("join.decode",J),J.split($)}}}function L4($,J="="){return G5($),V2("padding",J),{encode(Z){_4("padding.encode",Z);while(Z.length*$%8)Z.push(J);return Z},decode(Z){_4("padding.decode",Z);let q=Z.length;if(q*$%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;q>0&&Z[q-1]===J;q--)if((q-1)*$%8===0)throw new Error("padding: invalid, string has too much padding");return Z.slice(0,q)}}}function A$($){return O$($),{encode:(J)=>J,decode:(J)=>$(J)}}function P$($,J,Z){if(J<2)throw new Error(`convertRadix: invalid from=${J}, base cannot be less than 2`);if(Z<2)throw new Error(`convertRadix: invalid to=${Z}, base cannot be less than 2`);if(R4($),!$.length)return[];let q=0,Q=[],Y=Array.from($,(K)=>{if(G5(K),K<0||K>=J)throw new Error(`invalid integer: ${K}`);return K}),X=Y.length;while(!0){let K=0,G=!0;for(let B=q;B<X;B++){let w=Y[B],T=J*K,M=T+w;if(!Number.isSafeInteger(M)||T/J!==K||M-w!==T)throw new Error("convertRadix: carry overflow");let H=M/Z;K=M%Z;let W=Math.floor(H);if(Y[B]=W,!Number.isSafeInteger(W)||W*Z+K!==M)throw new Error("convertRadix: carry overflow");if(!G)continue;else if(!W)q=B;else G=!1}if(Q.push(K),G)break}for(let K=0;K<$.length-1&&$[K]===0;K++)Q.push(0);return Q.reverse()}var b$=($,J)=>J===0?$:b$(J,$%J),D4=($,J)=>$+(J-b$($,J)),j4=(()=>{let $=[];for(let J=0;J<40;J++)$.push(2**J);return $})();function e8($,J,Z,q){if(R4($),J<=0||J>32)throw new Error(`convertRadix2: wrong from=${J}`);if(Z<=0||Z>32)throw new Error(`convertRadix2: wrong to=${Z}`);if(D4(J,Z)>32)throw new Error(`convertRadix2: carry overflow from=${J} to=${Z} carryBits=${D4(J,Z)}`);let Q=0,Y=0,X=j4[J],K=j4[Z]-1,G=[];for(let B of $){if(G5(B),B>=X)throw new Error(`convertRadix2: invalid data word=${B} from=${J}`);if(Q=Q<<J|B,Y+J>32)throw new Error(`convertRadix2: carry overflow pos=${Y} from=${J}`);Y+=J;for(;Y>=Z;Y-=Z)G.push((Q>>Y-Z&K)>>>0);let w=j4[Y];if(w===void 0)throw new Error("invalid carry");Q&=w-1}if(Q=Q<<Z-Y&K,!q&&Y>=J)throw new Error("Excess padding");if(!q&&Q>0)throw new Error(`Non-zero padding: ${Q}`);if(q&&Y>0)G.push(Q>>>0);return G}function KY($){G5($);let J=256;return{encode:(Z)=>{if(!J9(Z))throw new Error("radix.encode input should be Uint8Array");return P$(Array.from(Z),J,$)},decode:(Z)=>{return Z9("radix.decode",Z),Uint8Array.from(P$(Z,$,J))}}}function e0($,J=!1){if(G5($),$<=0||$>32)throw new Error("radix2: bits should be in (0..32]");if(D4(8,$)>32||D4($,8)>32)throw new Error("radix2: carry overflow");return{encode:(Z)=>{if(!J9(Z))throw new Error("radix2.encode input should be Uint8Array");return e8(Array.from(Z),8,$,!J)},decode:(Z)=>{return Z9("radix2.decode",Z),Uint8Array.from(e8(Z,$,8,J))}}}function I$($){return O$($),function(...J){try{return $.apply(null,J)}catch(Z){}}}var OF=r0(e0(4),c0("0123456789ABCDEF"),s0("")),AF=r0(e0(5),c0("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),L4(5),s0("")),bF=r0(e0(5),c0("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s0("")),fF=r0(e0(5),c0("0123456789ABCDEFGHIJKLMNOPQRSTUV"),L4(5),s0("")),kF=r0(e0(5),c0("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s0("")),vF=r0(e0(5),c0("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),s0(""),A$(($)=>$.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),EF=r0(e0(6),c0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),L4(6),s0("")),yF=r0(e0(6),c0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s0("")),gF=r0(e0(6),c0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),L4(6),s0("")),hF=r0(e0(6),c0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s0("")),q9=($)=>r0(KY(58),c0($),s0("")),uF=q9("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),xF=q9("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),mF=q9("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");var $9=r0(c0("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),s0("")),S$=[996825010,642813549,513874426,1027748829,705979059];function K5($){let J=$>>25,Z=($&33554431)<<5;for(let q=0;q<S$.length;q++)if((J>>q&1)===1)Z^=S$[q];return Z}function C$($,J,Z=1){let q=$.length,Q=1;for(let Y=0;Y<q;Y++){let X=$.charCodeAt(Y);if(X<33||X>126)throw new Error(`Invalid prefix (${$})`);Q=K5(Q)^X>>5}Q=K5(Q);for(let Y=0;Y<q;Y++)Q=K5(Q)^$.charCodeAt(Y)&31;for(let Y of J)Q=K5(Q)^Y;for(let Y=0;Y<6;Y++)Q=K5(Q);return Q^=Z,$9.encode(e8([Q%j4[30]],30,5,!1))}function f$($){let J=$==="bech32"?1:734539939,Z=e0(5),q=Z.decode,Q=Z.encode,Y=I$(q);function X(T,M,H=90){if(V2("bech32.encode prefix",T),J9(M))M=Array.from(M);Z9("bech32.encode",M);let W=T.length;if(W===0)throw new TypeError(`Invalid prefix length ${W}`);let z=W+7+M.length;if(H!==!1&&z>H)throw new TypeError(`Length ${z} exceeds limit ${H}`);let F=T.toLowerCase(),j=C$(F,M,J);return`${F}1${$9.encode(M)}${j}`}function K(T,M=90){V2("bech32.decode input",T);let H=T.length;if(H<8||M!==!1&&H>M)throw new TypeError(`invalid string length: ${H} (${T}). Expected (8..${M})`);let W=T.toLowerCase();if(T!==W&&T!==T.toUpperCase())throw new Error("String must be lowercase or uppercase");let z=W.lastIndexOf("1");if(z===0||z===-1)throw new Error('Letter "1" must be present between prefix and data only');let F=W.slice(0,z),j=W.slice(z+1);if(j.length<6)throw new Error("Data must be at least 6 characters long");let _=$9.decode(j).slice(0,-6),P=C$(F,_,J);if(!j.endsWith(P))throw new Error(`Invalid checksum in ${T}: expected "${P}"`);return{prefix:F,words:_}}let G=I$(K);function B(T){let{prefix:M,words:H}=K(T,!1);return{prefix:M,words:H,bytes:q(H)}}function w(T,M){return X(T,Q(M))}return{encode:X,decode:K,encodeFromBytes:w,decodeToBytes:B,decodeUnsafe:G,fromWords:q,fromWordsUnsafe:Y,toWords:Q}}var Q9=f$("bech32"),pF=f$("bech32m");var dF=r0(e0(4),c0("0123456789abcdef"),s0(""),A$(($)=>{if(typeof $!=="string"||$.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof $} with length ${$.length}`);return $.toLowerCase()}));var GY=5000;function k$($){return new TextEncoder().encode($)}function B5(){return Math.floor(Date.now()/1000)}function BY($,J){let Z=j$(J),q=Q9.toWords(Z);return Q9.encode($,q,GY)}function P2($){return BY("npub",$)}function V4($,J=8){if($.length<=J*2)return $;return`${$.slice(0,J)}...${$.slice(-J)}`}function wY($){return JSON.stringify([0,$.pubkey,$.created_at,$.kind,$.tags,$.content])}function Y9($){let J=wY($),Z=V$(k$(J));return i8(Z)}function P4($,J,Z=[],q=""){return{pubkey:q,created_at:B5(),kind:$,tags:Z,content:J}}var g0={Metadata:0,Text:1,RecommendRelay:2,Contacts:3,EncryptedDM:4,EventDeletion:5,Repost:6,Reaction:7,ChannelCreation:40,ChannelMetadata:41,ChannelMessage:42,ChannelHideMessage:43,ChannelMuteUser:44,Comment:1111,ClientAuth:22242,RelayList:10002,LiveEvent:30311};function I4(){return typeof window!=="undefined"&&!!window.nostr}async function v$(){if(!I4())throw new Error("No NIP-07 extension found. Install Alby or nos2x.");return window.nostr.getPublicKey()}async function S4($){if(!I4())throw new Error("No NIP-07 extension found.");let J=Y9($),Z={...$,id:J};return window.nostr.signEvent(Z)}function E$(){if(typeof navigator==="undefined")return!1;return/android/i.test(navigator.userAgent)}function TY($){return`${window.location.origin+window.location.pathname}?nip55_action=${$}&event=`}function y$(){let $=TY("get_public_key");window.location.href=`nostrsigner:?compressionType=none&returnType=signature&type=get_public_key&callbackUrl=${$}`}function g$(){if(typeof window==="undefined")return null;let $=new URLSearchParams(window.location.search),J=$.get("nip55_action"),Z=$.get("event");if(!J||!Z)return null;return{action:J,result:Z}}function h$(){if(typeof window==="undefined")return;let $=new URL(window.location.href);$.searchParams.delete("nip55_action"),$.searchParams.delete("event");let J=$.pathname+($.search||"");window.history.replaceState({},"",J)}var MY=0;function HY(){return`sub_${++MY}_${Date.now().toString(36)}`}class Q1{url;ws=null;subscriptions=new Map;pendingPublish=new Map;pendingMessages=[];reconnectTimer=null;reconnectDelay=1000;maxReconnectDelay=60000;reconnectAttempts=0;maxReconnectAttempts=5;_status="disconnected";statusListeners=new Set;_authSigner=null;_authenticated=!1;_authInProgress=!1;constructor($){this.url=$.replace(/\/$/,"")}setAuthSigner($){this._authSigner=$}get hasAuthSigner(){return this._authSigner!==null}get authenticated(){return this._authenticated}get status(){return this._status}setStatus($){this._status=$;for(let J of this.statusListeners)J($)}onStatusChange($){return this.statusListeners.add($),()=>this.statusListeners.delete($)}connect(){if(this.ws&&(this.ws.readyState===WebSocket.OPEN||this.ws.readyState===WebSocket.CONNECTING))return Promise.resolve();return new Promise(($)=>{this.setStatus("connecting");try{this.ws=new WebSocket(this.url)}catch(Z){this.setStatus("error"),$();return}let J=!1;this.ws.onopen=()=>{this.setStatus("connected"),this.reconnectDelay=1000,this.reconnectAttempts=0;for(let Z of this.pendingMessages)this.ws.send(Z);this.pendingMessages=[];for(let[Z,q]of this.subscriptions){let Q=JSON.stringify(["REQ",Z,...q.filters]);this.ws.send(Q)}if(!J)J=!0,$()},this.ws.onmessage=(Z)=>{this.handleMessage(Z.data)},this.ws.onerror=()=>{this.setStatus("error")},this.ws.onclose=()=>{if(this.setStatus("disconnected"),this.ws=null,!J)J=!0,$();this.scheduleReconnect()}})}disconnect(){if(this.reconnectTimer)clearTimeout(this.reconnectTimer),this.reconnectTimer=null;for(let[$,J]of this.pendingPublish)clearTimeout(J.timer),J.resolve({accepted:!1,message:"disconnected"});if(this.pendingPublish.clear(),this.subscriptions.clear(),this.pendingMessages=[],this.ws)this.ws.onclose=null,this.ws.close(),this.ws=null;this.setStatus("disconnected")}scheduleReconnect(){if(this.reconnectTimer)return;if(this.reconnectAttempts++,this.reconnectAttempts>this.maxReconnectAttempts){console.warn(`[Relay ${this.url}] Max reconnect attempts (${this.maxReconnectAttempts}) reached, giving up`),this.setStatus("error");return}this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.connect().catch(()=>{})},this.reconnectDelay),this.reconnectDelay=Math.min(this.reconnectDelay*2,this.maxReconnectDelay)}handleMessage($){let J;try{J=JSON.parse($)}catch{return}if(!Array.isArray(J)||J.length<2)return;switch(J[0]){case"EVENT":{let q=J[1],Q=J[2],Y=this.subscriptions.get(q);if(Y)Y.onEvent(Q);break}case"EOSE":{let q=J[1],Q=this.subscriptions.get(q);if(Q?.onEose)Q.onEose();break}case"OK":{let q=J[1],Q=this.pendingPublish.get(q);if(Q)clearTimeout(Q.timer),this.pendingPublish.delete(q),Q.resolve({accepted:!!J[2],message:J[3]||""});break}case"NOTICE":{console.warn(`[Relay ${this.url}] NOTICE:`,J[1]);break}case"CLOSED":{let q=J[1],Q=J[2]||"",Y=this.subscriptions.get(q);if(Y?.onClosed)Y.onClosed(Q);this.subscriptions.delete(q);break}case"AUTH":{let q=J[1];this.handleAuthChallenge(q);break}}}_authFailed=!1;async handleAuthChallenge($){if(!this._authSigner)return;if(this._authInProgress)return;if(this._authFailed)return;this._authInProgress=!0;try{let J=P4(g0.ClientAuth,"",[["relay",this.url],["challenge",$]]),Z=await this._authSigner(J);this.send(JSON.stringify(["AUTH",Z])),this._authenticated=!0}catch(J){this._authFailed=!0,console.warn(`[Relay ${this.url}] AUTH declined by signer`)}finally{this._authInProgress=!1}}send($){if(this.ws&&this.ws.readyState===WebSocket.OPEN)this.ws.send($);else this.pendingMessages.push($)}subscribe($,J,Z,q){let Q=HY();return this.subscriptions.set(Q,{id:Q,filters:$,onEvent:J,onEose:Z,onClosed:q}),this.send(JSON.stringify(["REQ",Q,...$])),Q}unsubscribe($){if(this.subscriptions.has($))this.send(JSON.stringify(["CLOSE",$])),this.subscriptions.delete($)}publish($){return new Promise((J)=>{let Z=setTimeout(()=>{this.pendingPublish.delete($.id),J({accepted:!1,message:"timeout"})},1e4);this.pendingPublish.set($.id,{resolve:J,timer:Z}),this.send(JSON.stringify(["EVENT",$]))})}get activeSubscriptions(){return this.subscriptions.size}}class X9{relays=new Map;seenEvents=new Set;maxSeen=50000;_authSigner=null;setAuthSigner($){this._authSigner=$;for(let J of this.relays.values())if(J.hasAuthSigner)J.setAuthSigner($)}clearSeenEvents(){this.seenEvents.clear()}addRelay($){let J=$.replace(/\/$/,"");if(this.relays.has(J))return this.relays.get(J);let Z=new Q1(J);return this.relays.set(J,Z),Z}addRelayWithAuth($){let J=this.addRelay($);if(this._authSigner)J.setAuthSigner(this._authSigner);return J}removeRelay($){let J=$.replace(/\/$/,""),Z=this.relays.get(J);if(Z)Z.disconnect(),this.relays.delete(J)}getRelay($){return this.relays.get($.replace(/\/$/,""))}get allRelays(){return Array.from(this.relays.values())}async connectAll(){let $=this.allRelays.map((J)=>J.connect().catch((Z)=>{console.warn(`Failed to connect to ${J.url}:`,Z)}));await Promise.allSettled($)}disconnectAll(){for(let $ of this.relays.values())$.disconnect()}subscribe($,J,Z){let q=new Map,Q=`pool_${Date.now().toString(36)}`;for(let Y of this.relays.values()){let X=Y.subscribe($,(K)=>{if(this.seenEvents.has(K.id))return;this.trackSeen(K.id),J(K,Y)},()=>{if(Z)Z(Y)});q.set(Y,X)}return{id:Q,unsubscribe:()=>{for(let[Y,X]of q)Y.unsubscribe(X);q.clear()}}}subscribeToUrls($,J,Z,q){let Q=new Map,Y=`pool_targeted_${Date.now().toString(36)}`;for(let X of $){let K=X.replace(/\/$/,""),G=this.relays.get(K);if(!G)continue;let B=G.subscribe(J,(w)=>{if(this.seenEvents.has(w.id))return;this.trackSeen(w.id),Z(w,G)},()=>{if(q)q(G)});Q.set(G,B)}return{id:Y,unsubscribe:()=>{for(let[X,K]of Q)X.unsubscribe(K);Q.clear()}}}async publish($){let J=new Map,Z=this.allRelays.map(async(q)=>{try{let Q=await q.publish($);J.set(q.url,Q)}catch(Q){J.set(q.url,{accepted:!1,message:String(Q)})}});return await Promise.allSettled(Z),J}trackSeen($){if(this.seenEvents.add($),this.seenEvents.size>this.maxSeen){let J=Math.floor(this.maxSeen*0.4),Z=this.seenEvents.values();for(let q=0;q<J;q++){let Q=Z.next().value;if(Q)this.seenEvents.delete(Q)}}}getStatus(){let $=new Map;for(let[J,Z]of this.relays)$.set(J,Z.status);return $}}var U9=null,Y1={statuses:new Map,isConnecting:!1},K9=new Set;function w5(){for(let $ of K9)$()}function G9(){return Y1}function u$($){return K9.add($),()=>K9.delete($)}function $1(){if(!U9)U9=new X9;return U9}async function x$(){let $=$1();Y1={...Y1,isConnecting:!0},w5(),await $.connectAll(),Y1={...Y1,isConnecting:!1,statuses:$.getStatus()},w5()}function B9($){let J=$1(),Z=J.addRelay($);Z.onStatusChange(()=>{Y1={...Y1,statuses:J.getStatus()},w5()}),Z.connect().catch(()=>{}),Y1={...Y1,statuses:J.getStatus()},w5()}function m$($){let J=$1();J.removeRelay($),Y1={...Y1,statuses:J.getStatus()},w5()}var p$="oni_relay_profiles",C4=[{id:"outbox",name:"Outbox",relays:[],builtin:!0},{id:"inbox",name:"Inbox",relays:[],builtin:!0},{id:"indexers",name:"Indexers",relays:[],builtin:!0}],G0={profiles:[...C4],activeProfileId:"outbox"},w9=new Set;function J2(){for(let $ of w9)$()}function I2(){if(typeof localStorage!=="undefined")localStorage.setItem(p$,JSON.stringify(G0))}function d$(){if(typeof localStorage==="undefined")return;try{let $=localStorage.getItem(p$);if($){let J=JSON.parse($),Z=new Set(C4.map((Q)=>Q.id)),q=[];for(let Q of C4){let Y=J.profiles.find((X)=>X.id===Q.id);q.push(Y?{...Y,builtin:!0}:{...Q})}for(let Q of J.profiles)if(!Z.has(Q.id))q.push({...Q,builtin:!1});G0={profiles:q,activeProfileId:J.activeProfileId||"outbox"}}}catch{}J2()}function S2(){return G0}function r$($){return w9.add($),()=>w9.delete($)}function zY(){return G0.profiles.find(($)=>$.id===G0.activeProfileId)||G0.profiles[0]}function c$($){G0={...G0,activeProfileId:$},I2(),J2(),T9()}function C2($,J){let Z=J.trim();if(!Z.startsWith("wss://")&&!Z.startsWith("ws://"))Z="wss://"+Z;if(Z=Z.replace(/\/+$/,""),G0={...G0,profiles:G0.profiles.map((q)=>q.id===$&&!q.relays.includes(Z)?{...q,relays:[...q.relays,Z]}:q)},I2(),J2(),$===G0.activeProfileId)B9(Z)}function N4($,J){if(G0={...G0,profiles:G0.profiles.map((Z)=>Z.id===$?{...Z,relays:Z.relays.filter((q)=>q!==J)}:Z)},I2(),J2(),$===G0.activeProfileId)m$(J)}function s$($){let J="custom_"+Date.now()+"_"+Math.random().toString(36).slice(2,8);return G0={...G0,profiles:[...G0.profiles,{id:J,name:$,relays:[],builtin:!1}]},I2(),J2(),J}function o$($){let J=G0.profiles.find((Z)=>Z.id===$);if(!J||J.builtin)return;G0={...G0,profiles:G0.profiles.filter((Z)=>Z.id!==$),activeProfileId:G0.activeProfileId===$?"outbox":G0.activeProfileId},I2(),J2()}function T9(){let $=$1(),J=zY(),Z=new Set($.allRelays.map((Q)=>Q.url)),q=new Set(J.relays);for(let Q of Z)if(!q.has(Q))$.removeRelay(Q);for(let Q of q)if(!Z.has(Q))B9(Q)}function l$(){G0={profiles:[...C4],activeProfileId:"outbox"},I2(),J2()}var o0={pubkey:null,isLoading:!1,error:null},M9=new Set;function Z2(){for(let $ of M9)$()}function L0(){return o0}function y1($){return M9.add($),()=>M9.delete($)}async function N2(){if(I4()){o0={...o0,isLoading:!0,error:null},Z2();try{let $=await v$();if(o0={pubkey:$,isLoading:!1,error:null},typeof localStorage!=="undefined")localStorage.setItem("oni_pubkey",$)}catch($){o0={...o0,isLoading:!1,error:String($)}}Z2();return}if(E$()){o0={...o0,isLoading:!0,error:null},Z2(),y$();return}o0={...o0,error:"No Nostr signer found. Install a NIP-07 extension (desktop) or Amber (Android)."},Z2()}function H9(){$1().clearSeenEvents(),l$()}function O4(){if(H9(),o0={pubkey:null,isLoading:!1,error:null},typeof localStorage!=="undefined")localStorage.removeItem("oni_pubkey");Z2()}function A4(){if(typeof localStorage==="undefined")return;let $=g$();if($&&$.action==="get_public_key"&&$.result){let Z=$.result;localStorage.setItem("oni_pubkey",Z),o0={pubkey:Z,isLoading:!1,error:null},h$(),Z2();return}let J=localStorage.getItem("oni_pubkey");if(J)o0={pubkey:J,isLoading:!1,error:null},Z2()}var V1={urls:[],source:"none",isLoading:!1,error:null},F9=new Set,T5=null,z9=!1;function b4(){if(z9)return;z9=!0,queueMicrotask(()=>{z9=!1;for(let $ of F9)$()})}function i$(){return V1}function M5(){return V1.urls}function n$($){return F9.add($),()=>F9.delete($)}var WY=["wss://relay.damus.io","wss://relay.nostr.band","wss://nos.lol","wss://relay.snort.social","wss://purplepag.es","wss://relay.primal.net"],W9=["wss://relay.nostr.watch","wss://history.nostr.watch"];function f4($=10){if(V1.urls.length>0&&!V1.isLoading)return Promise.resolve();if(T5)return T5;return T5=FY($).finally(()=>{T5=null}),T5}async function FY($){V1={...V1,isLoading:!0,error:null},b4();try{let J=await jY($);if(J.length>0){console.log("[indexers] Discovered",J.length,"relays via rstate"),V1={urls:J,source:"rstate",isLoading:!1,error:null},b4();return}}catch(J){console.warn("[indexers] rstate unavailable:",J)}console.log("[indexers] Using fallback indexers"),V1={urls:WY.slice(0,$),source:"fallback",isLoading:!1,error:null},b4(),RY($)}async function jY($){let J=new AbortController,Z=setTimeout(()=>J.abort(),5000);try{let q=new URLSearchParams({limit:String($*3),offset:"0",sortBy:"lastSeen",sortOrder:"desc",format:"detailed"}),Q=await fetch(`/relays?${q}`,{signal:J.signal});if(!Q.ok)throw new Error(`rstate ${Q.status}`);let K=((await Q.json()).relays||[]).filter((w)=>{if(!w.relayUrl||!w.relayUrl.startsWith("wss://"))return!1;if(w.network?.value&&w.network.value!=="clearnet")return!1;return!0}).map((w)=>({url:w.relayUrl.replace(/\/+$/,""),rtt:w.rtt?.open?.value??9999,lastSeen:w.lastSeenAt??0})).sort((w,T)=>{if(w.rtt!==T.rtt)return w.rtt-T.rtt;return T.lastSeen-w.lastSeen}),G=new Set,B=[];for(let w of K){if(G.has(w.url))continue;if(G.add(w.url),B.push(w.url),B.length>=$)break}return B}finally{clearTimeout(Z)}}function RY($){let J=new Map,Z=0,q=setTimeout(()=>Q(),8000);function Q(){if(clearTimeout(q),J.size===0)return;let Y=Array.from(J.entries()).sort((X,K)=>X[1].rtt-K[1].rtt).map(([X])=>X).slice(0,$);if(Y.length>0)console.log("[indexers] Upgraded to",Y.length,"relays via NIP-66"),V1={urls:Y,source:"nip66",isLoading:!1,error:null},b4()}for(let Y of W9){let X=new Q1(Y);X.connect().then(()=>{let K=X.subscribe([{kinds:[30166],limit:$*3}],(G)=>{let B=G.tags.find((W)=>W[0]==="d");if(!B||!B[1])return;let w=B[1].replace(/\/+$/,"");if(!w.startsWith("wss://"))return;let T=9999,M=G.tags.find((W)=>W[0]==="rtt"&&W[1]==="open");if(M&&M[2])T=parseInt(M[2],10)||9999;let H=J.get(w);if(!H||T<H.rtt)J.set(w,{rtt:T})},()=>{if(X.unsubscribe(K),X.disconnect(),Z++,Z>=W9.length)Q()})}).catch(()=>{if(Z++,Z>=W9.length)Q()})}}var a={phase:"idle",profile:null,profileEvent:null,relayList:[],relayListEvent:null,contactsEvent:null,followingCount:0,indexersQueried:0,indexersResponded:0,outboxConnected:0,inboxConnected:0,error:null},_9=new Set,j9=!1;function G1(){if(j9)return;j9=!0,queueMicrotask(()=>{j9=!1;for(let $ of _9)$()})}function g1(){return a}function k4($){return _9.add($),()=>_9.delete($)}var D9=[],R9=null,H5=null;async function t$($){if(R9===$&&a.phase==="ready")return;if(R9===$&&H5)return H5;return R9=$,H5=_Y($).finally(()=>{H5=null}),H5}async function _Y($){if(a={phase:"discovering_indexers",profile:null,profileEvent:null,relayList:[],relayListEvent:null,contactsEvent:null,followingCount:0,indexersQueried:0,indexersResponded:0,outboxConnected:0,inboxConnected:0,error:null},G1(),i$().urls.length===0)await f4(10);let Z=M5();if(Z.length===0){a={...a,phase:"error",error:"No indexer relays found"},G1();return}if(a$(Z),n$(()=>{let q=M5();if(q.length>0)a$(q)}),a={...a,phase:"querying_indexers",indexersQueried:Z.length},G1(),await DY($,Z),a.relayList.length>0)a={...a,phase:"connecting_relays"},G1(),await LY(a.relayList);a={...a,phase:"ready"},G1(),VY()}function DY($,J){return new Promise((Z)=>{let q=0,Q=J.length,Y=setTimeout(()=>X(),8000);function X(){clearTimeout(Y),Z()}function K(){if(q++,a={...a,indexersResponded:q},G1(),q>=Q)X()}for(let G of J){let B=new Q1(G);D9.push(B),B.connect().then(()=>{if(B.status!=="connected"){K();return}let w=B.subscribe([{kinds:[g0.Metadata],authors:[$],limit:1},{kinds:[g0.RelayList],authors:[$],limit:1},{kinds:[g0.Contacts],authors:[$],limit:1}],(T)=>{if(T.kind===g0.Metadata){if(!a.profileEvent||T.created_at>a.profileEvent.created_at)a={...a,profileEvent:T,profile:PY(T)},G1()}else if(T.kind===g0.RelayList){if(!a.relayListEvent||T.created_at>a.relayListEvent.created_at)a={...a,relayListEvent:T,relayList:IY(T)},G1()}else if(T.kind===g0.Contacts){if(!a.contactsEvent||T.created_at>a.contactsEvent.created_at){let M=T.tags.filter((H)=>H[0]==="p"&&H[1]).length;a={...a,contactsEvent:T,followingCount:M},G1()}}},()=>{B.unsubscribe(w),K()})}).catch(()=>{K()})}})}async function LY($){let J=$1(),Z=S2(),q=$.filter((B)=>B.write).map((B)=>B.url),Q=$.filter((B)=>B.read).map((B)=>B.url),Y=Z.profiles.find((B)=>B.id==="outbox"),X=Z.profiles.find((B)=>B.id==="inbox");for(let B of q)if(Y&&!Y.relays.includes(B))C2("outbox",B);for(let B of Q)if(X&&!X.relays.includes(B))C2("inbox",B);let K=new Set([...q,...Q]),G=[];for(let B of K)if(!J.getRelay(B)){let T=J.addRelayWithAuth(B);G.push(T.connect().then(()=>{if(q.includes(B))a={...a,outboxConnected:a.outboxConnected+1};if(Q.includes(B))a={...a,inboxConnected:a.inboxConnected+1};G1()}).catch((M)=>{console.warn(`[bootstrap] Failed to connect to ${B}:`,M)}))}await Promise.allSettled(G)}function a$($){let Z=S2().profiles.find((q)=>q.id==="indexers");if(!Z)return;for(let q of Z.relays)if(!$.includes(q))N4("indexers",q);for(let q of $)if(!Z.relays.includes(q))C2("indexers",q)}function VY(){for(let $ of D9)if(!$1().getRelay($.url))$.disconnect();D9=[]}function PY($){let J={};try{J=JSON.parse($.content)}catch{}return{name:J.name||"",displayName:J.display_name||J.displayName||"",picture:J.picture||"",banner:J.banner||"",about:J.about||"",nip05:J.nip05||"",lud16:J.lud16||""}}function IY($){let J=[];for(let Z of $.tags){if(Z[0]!=="r"||!Z[1])continue;let q=Z[1].replace(/\/+$/,""),Q=Z[2];J.push({url:q,read:!Q||Q==="read",write:!Q||Q==="write"})}return J}var z5=new Map,v4=new Set,L9=new Set;function e$(){for(let $ of L9)$()}function $J($){return L9.add($),()=>L9.delete($)}function JJ($){let J=z5.get($);if(J)return J;return{pubkey:$,name:"",displayName:"",picture:"",banner:"",about:"",nip05:"",lud16:"",fetched:!1}}function ZJ($){let J=JJ($);if(J.displayName)return J.displayName;if(J.name)return J.name;try{let Z=P2($);return Z.slice(0,12)+"..."+Z.slice(-4)}catch{return V4($,8)}}function qJ($){return JJ($).picture}function V9($){if(z5.has($)&&z5.get($).fetched)return;if(v4.has($))return;v4.add($);let J=M5();if(J.length===0){v4.delete($);return}let Z=J.slice(0,3),q=null,Q=0;function Y(){if(v4.delete($),q){let K=SY($,q);z5.set($,K),e$()}else z5.set($,{pubkey:$,name:"",displayName:"",picture:"",banner:"",about:"",nip05:"",lud16:"",fetched:!0}),e$()}let X=setTimeout(()=>Y(),6000);for(let K of Z){let G=new Q1(K);G.connect().then(()=>{if(G.status!=="connected"){if(Q++,Q>=Z.length)clearTimeout(X),Y();return}let B=G.subscribe([{kinds:[g0.Metadata],authors:[$],limit:1}],(w)=>{if(!q||w.created_at>q.created_at)q=w},()=>{if(G.unsubscribe(B),G.disconnect(),Q++,Q>=Z.length)clearTimeout(X),Y()})}).catch(()=>{if(Q++,Q>=Z.length)clearTimeout(X),Y()})}}function SY($,J){let Z={};try{Z=JSON.parse(J.content)}catch{}return{pubkey:$,name:Z.name||"",displayName:Z.display_name||Z.displayName||"",picture:Z.picture||"",banner:Z.banner||"",about:Z.about||"",nip05:Z.nip05||"",lud16:Z.lud16||"",fetched:!0}}class P9 extends N{unsub=null;unsubAuth=null;unsubBootstrap=null;unsubProfiles=null;menuRef=null;state={config:i.getState().config,status:i.getState().status,chatVisible:i.getState().chatVisible,nostrPubkey:L0().pubkey,nostrLoading:L0().isLoading,userMenuOpen:!1,profileVersion:0};handleOutsideClick=($)=>{if(this.state.userMenuOpen&&this.menuRef&&!this.menuRef.contains($.target))this.setState({userMenuOpen:!1})};componentDidMount(){this.unsub=i.subscribe(()=>{let J=i.getState();this.setState({config:J.config,status:J.status,chatVisible:J.chatVisible})}),this.unsubAuth=y1(()=>{let J=L0();if(this.setState({nostrPubkey:J.pubkey,nostrLoading:J.isLoading}),J.pubkey)V9(J.pubkey)}),this.unsubBootstrap=k4(()=>{this.setState({profileVersion:this.state.profileVersion+1})}),this.unsubProfiles=$J(()=>{this.setState({profileVersion:this.state.profileVersion+1})});let $=L0();if($.pubkey)V9($.pubkey);document.addEventListener("mousedown",this.handleOutsideClick)}componentWillUnmount(){this.unsub?.(),this.unsubAuth?.(),this.unsubBootstrap?.(),this.unsubProfiles?.(),document.removeEventListener("mousedown",this.handleOutsideClick)}handleLogin=()=>{N2()};handleLogout=()=>{O4(),this.setState({userMenuOpen:!1})};render(){let{config:$,status:J,chatVisible:Z,nostrPubkey:q,nostrLoading:Q,userMenuOpen:Y}=this.state,X=$?.name||"",K=J?.online||!1,G=J?.viewerCount||0,B=q?ZJ(q):"",w=q?qJ(q):"";return U("header",{class:"sticky top-0 z-50 border-b border-border/30 bg-background/80 backdrop-blur-xl backdrop-saturate-150"},U("div",{class:"mx-auto flex h-14 items-center justify-between px-4 sm:px-6"},U("div",{class:"flex items-center gap-4"},U("a",{href:"/",class:"flex items-center gap-2.5 shrink-0"},U("span",{class:"text-xl"},"\uD83D\uDD25"),U("span",{class:"text-lg font-bold tracking-tight"},X||"oni")),K&&U(x,{variant:"default",className:"gap-1.5 bg-success text-success-foreground"},U("span",{class:"size-1.5 rounded-full bg-current live-dot"}),"Live"),K&&G>0&&U("span",{class:"hidden sm:inline text-sm text-muted-foreground tabular-nums"},G.toLocaleString()," watching"),U("nav",{class:"hidden sm:flex items-center gap-0.5"},U("a",{href:"https://mycelium.social",target:"_blank",rel:"noopener",class:"inline-flex h-9 items-center justify-center rounded-md px-3 py-2 text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground"},"Mycelium"))),U("div",{class:"flex items-center gap-1.5"},!$?.chatDisabled&&U(f,{variant:"ghost",size:"sm",onClick:()=>i.toggleChat(),className:R("gap-1.5 h-8",Z&&"bg-accent text-accent-foreground")},U("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),U("span",{class:"hidden sm:inline text-sm"},"Chat")),U(L2,{className:"hidden sm:inline-flex size-8"}),q?U("div",{ref:(T)=>{this.menuRef=T},class:"relative"},U("button",{onClick:()=>this.setState({userMenuOpen:!Y}),class:"flex items-center gap-2 rounded-full border border-border px-1 py-1 pr-3 hover:bg-accent/50 transition-colors cursor-pointer"},U(b1,{className:"size-7"},U(D1,{src:w,alt:B}),U(f1,{className:"text-[10px]"},B.charAt(0).toUpperCase())),U("span",{class:"text-sm font-medium max-w-[120px] truncate hidden sm:block"},B),U("span",{class:"text-xs opacity-40"},"")),Y&&U("div",{class:"absolute right-0 top-full mt-2 w-72 bg-popover border border-border rounded-xl shadow-xl overflow-hidden z-50"},U("div",{class:"relative"},U("div",{class:"h-20 bg-gradient-to-br from-primary/30 via-primary/10 to-muted/50"}),U("div",{class:"absolute -bottom-5 left-4"},U(b1,{className:"size-10 ring-2 ring-popover"},U(D1,{src:w,alt:B}),U(f1,{className:"text-xs font-bold"},B.charAt(0).toUpperCase())))),U("div",{class:"pt-7 pb-3 px-4"},U("p",{class:"text-sm font-semibold truncate"},B),U("p",{class:"font-mono text-[10px] text-muted-foreground truncate"},(()=>{try{return P2(q).slice(0,24)+"..."}catch{return q.slice(0,24)+"..."}})())),U("div",{class:"border-t border-border"}),U("div",{class:"py-1"},U("a",{href:"/admin",onClick:()=>this.setState({userMenuOpen:!1}),class:"flex items-center gap-2.5 px-4 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-accent transition-colors"},U("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 010 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 010-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28z"}),U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})),"Admin Dashboard")),U("div",{class:"border-t border-border"}),U("div",{class:"py-1"},U("button",{onClick:this.handleLogout,class:"flex items-center gap-2.5 px-4 py-2 w-full text-sm text-destructive/70 hover:text-destructive hover:bg-destructive/5 transition-colors cursor-pointer"},U("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})),"Sign Out")))):U(f,{size:"sm",onClick:this.handleLogin,disabled:Q},Q?"Connecting...":"Sign In"))))}}class I9 extends N{videoRef=null;hlsInstance=null;state={isLoading:!0,hasError:!1};componentDidMount(){if(this.props.online)this.initPlayer()}componentDidUpdate($){if(this.props.online&&!$.online)this.setState({isLoading:!0,hasError:!1}),this.initPlayer();else if(!this.props.online&&$.online)this.destroyPlayer()}componentWillUnmount(){this.destroyPlayer()}async initPlayer(){let $=this.videoRef;if(!$)return;let J=this.props.source;if($.addEventListener("playing",()=>{this.setState({isLoading:!1})},{once:!0}),$.canPlayType("application/vnd.apple.mpegurl")){$.src=J,$.addEventListener("loadedmetadata",()=>{$.play().catch(()=>{})});return}try{let Z=(await import("../chunk-eyp45axx.js")).default;if(Z.isSupported())this.hlsInstance=new Z({enableWorker:!0,lowLatencyMode:!0,backBufferLength:90}),this.hlsInstance.loadSource(J),this.hlsInstance.attachMedia($),this.hlsInstance.on(Z.Events.MANIFEST_PARSED,()=>{$.play().catch(()=>{})}),this.hlsInstance.on(Z.Events.ERROR,(q,Q)=>{if(Q.fatal)switch(Q.type){case Z.ErrorTypes.NETWORK_ERROR:this.hlsInstance?.startLoad();break;case Z.ErrorTypes.MEDIA_ERROR:this.hlsInstance?.recoverMediaError();break;default:this.setState({hasError:!0,isLoading:!1}),this.destroyPlayer();break}})}catch{$.src=J}}destroyPlayer(){if(this.hlsInstance)this.hlsInstance.destroy(),this.hlsInstance=null;if(this.videoRef)this.videoRef.removeAttribute("src"),this.videoRef.load()}render(){let{online:$,title:J}=this.props,{isLoading:Z,hasError:q}=this.state;if(!$)return null;return U("div",{class:"relative w-full bg-black aspect-video group"},U("video",{ref:(Q)=>{this.videoRef=Q},class:"w-full h-full object-contain",controls:!0,playsInline:!0,title:J}),Z&&!q&&U("div",{class:"absolute inset-0 flex items-center justify-center bg-black/95 pointer-events-none"},U("div",{class:"absolute inset-0 bg-gradient-to-b from-primary/[0.04] via-transparent to-transparent"}),U("div",{class:"relative flex flex-col items-center gap-5"},U("div",{class:"relative"},U(K1,{size:"lg"}),U("div",{class:"absolute -inset-4 rounded-full blur-2xl bg-primary/10"})),U("div",{class:"text-center"},U("p",{class:"text-sm font-semibold text-foreground/90"},"Connecting to stream"),U("p",{class:"text-xs text-muted-foreground/50 mt-1"},"Please wait...")))),q&&U("div",{class:"absolute inset-0 flex items-center justify-center bg-black/95"},U("div",{class:"absolute inset-0 bg-gradient-to-b from-destructive/[0.03] via-transparent to-transparent"}),U("div",{class:"relative flex flex-col items-center gap-5 text-center px-6"},U("div",{class:"size-16 rounded-2xl bg-destructive/10 border border-destructive/20 flex items-center justify-center"},U("svg",{class:"size-7 text-destructive",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))),U("div",null,U("p",{class:"text-base font-bold text-foreground"},"Stream unavailable"),U("p",{class:"text-sm text-muted-foreground/60 mt-1"},"The stream may have ended or encountered an error")),U(f,{size:"sm",className:"px-6 font-semibold",onClick:()=>{this.setState({isLoading:!0,hasError:!1}),this.initPlayer()}},"Try Again"))))}}class S9 extends N{render(){let{name:$,customText:J,lastDisconnectTime:Z,logo:q}=this.props;return U("div",{class:"flex flex-col items-center justify-center w-full aspect-video bg-muted/30"},U("div",{class:"flex flex-col items-center px-6 py-16 text-center max-w-lg animate-in"},U(b1,{className:"size-20 mb-6"},U(D1,{src:q,alt:$}),U(f1,{className:"text-3xl bg-card text-muted-foreground/30"},U("svg",{class:"size-10 text-muted-foreground/20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z"})))),U("h2",{class:"text-2xl font-bold tracking-tight mb-2"},$),U(x,{variant:"secondary",className:"mb-4"},U("span",{class:"size-1.5 rounded-full bg-muted-foreground/40 mr-1.5"}),"Offline"),U("p",{class:"text-sm text-muted-foreground leading-relaxed mb-5 max-w-sm"},J||"This stream is currently offline. Check back later!"),Z&&U(x,{variant:"outline",className:"gap-1.5"},U("svg",{class:"size-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})),"Last live ",d0(Z))))}}class C9 extends N{unsub=null;state={status:i.getState().status,config:i.getState().config};componentDidMount(){this.unsub=i.subscribe(()=>{let $=i.getState();this.setState({status:$.status,config:$.config})})}componentWillUnmount(){this.unsub?.()}render(){let{status:$,config:J}=this.state;if(!$?.online)return null;let Z=$.streamTitle||J?.name||"",q=J?.tags||[];return U("div",{class:"px-5 py-3.5 border-b border-border/50 bg-card"},U("div",{class:"flex items-start justify-between gap-4"},U("div",{class:"min-w-0 flex-1"},Z&&U("h2",{class:"text-[15px] font-semibold text-foreground tracking-tight truncate"},Z),q.length>0&&U("div",{class:"flex flex-wrap gap-1.5 mt-2.5"},q.slice(0,6).map((Q)=>U(x,{key:Q,variant:"secondary",className:"text-[11px]"},Q)))),U("div",{class:"flex items-center gap-3 shrink-0"},U(x,{variant:"outline",className:"tabular-nums gap-1.5"},U("svg",{class:"size-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})),G$($.viewerCount)),$.lastConnectTime&&U(x,{variant:"outline",className:"tabular-nums gap-1.5"},U("svg",{class:"size-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})),d0($.lastConnectTime)))))}}var N9=["#c084fc","#f472b6","#fb923c","#facc15","#4ade80","#22d3ee","#60a5fa","#a78bfa","#f87171","#34d399","#e879f9","#38bdf8","#fbbf24","#a3e635","#fb7185","#2dd4bf","#818cf8","#f97316","#14b8a6","#d946ef"];function E4($){return N9[$%N9.length]||N9[0]}class O9 extends N{render(){let{message:$,isModerator:J}=this.props,{type:Z,timestamp:q}=$,Q=K$(q);if(Z==="SYSTEM")return U("div",{class:"px-3 py-1.5 flex items-center gap-1.5"},U("svg",{class:"w-3 h-3 text-primary/60 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})),U("span",{class:"text-[11px] text-muted-foreground italic"},$.body));if(Z==="USER_JOINED"||Z==="USER_PARTED"){let B=Z==="USER_JOINED";return U("div",{class:"px-3 py-0.5 flex items-center gap-1"},U("span",{class:R("text-[10px]",B?"text-success/50":"text-muted-foreground/40")},B?"":""),U("span",{class:"text-[10px] text-muted-foreground/60"},U("span",{style:{color:E4($.user?.displayColor||0)},class:"opacity-60"},$.user?.displayName)," ",B?"joined":"left"))}if(Z==="NAME_CHANGE")return U("div",{class:"px-3 py-0.5 text-[10px] text-muted-foreground/60"},U("span",{style:{color:E4($.user?.displayColor||0)},class:"opacity-60"},$.oldName),"  ",U("span",{style:{color:E4($.user?.displayColor||0)},class:"opacity-80"},$.user?.displayName));if(Z==="FEDIVERSE_ENGAGEMENT_FOLLOW"||Z==="FEDIVERSE_ENGAGEMENT_LIKE"||Z==="FEDIVERSE_ENGAGEMENT_REPOST"){let B=Z==="FEDIVERSE_ENGAGEMENT_FOLLOW"?"followed":Z==="FEDIVERSE_ENGAGEMENT_LIKE"?"liked":"shared";return U("div",{class:"px-3 py-1.5 flex items-center gap-1.5 bg-primary/5 mx-2 my-1 rounded-md"},U("svg",{class:"w-3 h-3 text-primary shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},U("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})),U("span",{class:"text-[11px] text-primary/80"},$.user?.displayName," ",B," on the fediverse"))}let Y=E4($.user?.displayColor||0),X=$.user?.isModerator,K=$.user?.isBot,G=$.user?.authenticated;return U("div",{class:"group px-4 py-2 hover:bg-accent/50 transition-colors duration-150 animate-msg-in"},U("div",{class:"flex items-baseline gap-1.5 flex-wrap"},U("span",{class:"text-[12px] font-bold leading-tight",style:{color:Y}},X&&U(_2,{content:"Moderator",side:"top"},U(x,{className:"mr-1 align-middle text-[8px] py-0 px-1.5 uppercase tracking-wider"},"Mod")),K&&U(_2,{content:"Bot",side:"top"},U(x,{variant:"secondary",className:"mr-1 align-middle text-[8px] py-0 px-1.5 uppercase tracking-wider"},"Bot")),G&&U(_2,{content:"Verified",side:"top"},U("span",{class:"inline-flex items-center justify-center size-3.5 text-success mr-0.5 align-middle"},U("svg",{class:"size-2.5",fill:"currentColor",viewBox:"0 0 20 20"},U("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})))),$.user?.displayName),U("span",{class:"text-[10px] text-muted-foreground/40 leading-tight tabular-nums"},Q)),U("p",{class:"text-[13px] text-foreground/90 leading-relaxed break-words mt-0.5"},$.body))}}class A9 extends N{state={value:""};handleSubmit=($)=>{$.preventDefault();let J=this.state.value.trim();if(!J)return;this.props.onSend(J),this.setState({value:""})};handleInput=($)=>{this.setState({value:$.target.value})};handleKeyDown=($)=>{if($.key==="Enter"&&!$.shiftKey)$.preventDefault(),this.handleSubmit($)};render(){let $=this.state.value.trim().length>0;return U("form",{class:"flex items-center gap-2 p-3 border-t border-border/50 bg-card",onSubmit:this.handleSubmit},U(q0,{className:"flex-1 h-9 text-sm",placeholder:"Send a message...",value:this.state.value,onInput:this.handleInput,onKeyDown:this.handleKeyDown}),U(f,{type:"submit",size:"icon-sm",disabled:!$},U("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))))}}class b9 extends N{state={name:"",loading:!1,error:null};handleSubmit=async($)=>{$.preventDefault();let J=this.state.name.trim();if(!J)return;this.setState({loading:!0,error:null});try{await i.registerUser(J)}catch(Z){this.setState({error:Z instanceof Error?Z.message:"Registration failed",loading:!1})}};handleInput=($)=>{this.setState({name:$.target.value})};render(){let{name:$,loading:J,error:Z}=this.state;return U("div",{class:"p-3 border-t border-border/50 bg-card"},U("form",{onSubmit:this.handleSubmit},U(Y0,{className:"text-muted-foreground mb-2"},"Pick a name to join the chat"),U("div",{class:"flex items-center gap-2"},U(q0,{className:"flex-1 h-9 text-sm",placeholder:"Your name...",value:$,onInput:this.handleInput,disabled:J}),U(f,{type:"submit",size:"sm",disabled:!$.trim()||J,className:"h-9 px-5"},J?U(K1,{size:"sm"}):"Join")),Z&&U("p",{class:"text-xs text-destructive mt-2"},Z)))}}class y4 extends N{unsub=null;messagesEndRef=null;scrollContainerRef=null;shouldAutoScroll=!0;state={messages:i.getState().messages,currentUser:i.getState().currentUser,chatDisabled:i.getState().config?.chatDisabled||!1,showScrollBtn:!1};componentDidMount(){this.unsub=i.subscribe(()=>{let $=i.getState();this.setState({messages:$.messages,currentUser:$.currentUser,chatDisabled:$.config?.chatDisabled||!1})})}componentDidUpdate($,J){if(J.messages.length!==this.state.messages.length&&this.shouldAutoScroll)this.scrollToBottom()}componentWillUnmount(){this.unsub?.()}scrollToBottom(){if(this.messagesEndRef)this.messagesEndRef.scrollIntoView({behavior:"smooth"})}handleScroll=($)=>{let J=$.target,Z=J.scrollHeight-J.scrollTop-J.clientHeight<50;this.shouldAutoScroll=Z,this.setState({showScrollBtn:!Z})};handleSend=($)=>{i.sendChat($)};render(){let{messages:$,currentUser:J,chatDisabled:Z,showScrollBtn:q}=this.state;if(Z)return null;return U("div",{class:"flex flex-col h-full"},U("div",{class:"flex items-center justify-between px-4 py-3 border-b border-border/50 bg-card"},U("div",{class:"flex items-center gap-2.5"},U("svg",{class:"size-4 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),U("h2",{class:"text-[13px] font-semibold text-foreground"},"Chat")),$.length>0&&U(x,{variant:"secondary",className:"text-[10px] tabular-nums"},$.length)),U("div",{ref:(Q)=>{this.scrollContainerRef=Q},class:"flex-1 overflow-y-auto overflow-x-hidden scroll-smooth",onScroll:this.handleScroll},$.length===0&&U("div",{class:"flex flex-col items-center justify-center h-full px-6 text-center"},U("svg",{class:"size-10 text-muted-foreground/20 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),U("p",{class:"text-sm font-medium text-muted-foreground/50"},"No messages yet"),U("p",{class:"text-xs text-muted-foreground/30 mt-1"},"Be the first to say something")),$.map((Q)=>U(O9,{key:Q.id,message:Q,isModerator:J?.isModerator})),U("div",{ref:(Q)=>{this.messagesEndRef=Q}})),q&&U("div",{class:"relative"},U("div",{class:"absolute bottom-3 left-1/2 -translate-x-1/2 z-10"},U(f,{size:"sm",onClick:()=>{this.shouldAutoScroll=!0,this.scrollToBottom()},className:"rounded-full shadow-lg px-4"},"New messages "))),J?U(A9,{onSend:this.handleSend}):U(b9,null))}}class f9 extends N{unsub=null;state={config:i.getState().config};componentDidMount(){this.unsub=i.subscribe(()=>{this.setState({config:i.getState().config})})}componentWillUnmount(){this.unsub?.()}render(){let{config:$}=this.state,J=!!$?.summary,Z=$?.tags&&$.tags.length>0,q=$?.socialHandles&&$.socialHandles.length>0,Q=!!$?.extraPageContent;return U("footer",{id:"footer",class:"border-t border-border/30 mt-auto"},U("div",{class:"mx-auto max-w-7xl px-4 sm:px-6 py-6"},(J||q||Z||Q)&&U("div",{class:"mb-6 max-w-2xl"},J&&U("p",{class:"text-sm text-muted-foreground leading-relaxed mb-4"},$.summary),q&&U("div",{class:"flex flex-wrap gap-2 mb-4"},$.socialHandles.map((Y)=>U("a",{key:Y.platform,href:Y.url,target:"_blank",rel:"noopener noreferrer",class:"no-underline"},U(f,{variant:"outline",size:"sm",className:"gap-2"},U("svg",{class:"size-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})),Y.platform)))),Z&&U("div",{class:"flex flex-wrap gap-1.5 mb-4"},$.tags.map((Y)=>U(x,{key:Y,variant:"outline",className:"text-xs"},"#",Y))),Q&&U("div",{class:"text-sm text-muted-foreground mb-4 [&_a]:text-foreground [&_a]:underline",innerHTML:$.extraPageContent})),U("div",{class:"flex flex-col items-center gap-4 sm:flex-row sm:justify-between text-sm text-muted-foreground"},U("div",{class:"flex items-center gap-2"},U("span",{class:"text-xl"},"\uD83D\uDD25"),U("span",{class:"font-medium text-foreground/80"},"oni"),U("span",{class:"text-border"},""),U("span",{class:"text-xs"},"Part of"," ",U("a",{href:"https://mycelium.social",target:"_blank",rel:"noopener noreferrer",class:"hover:text-foreground transition-colors"},"mycelium.social"))),U("div",{class:"flex items-center gap-4"},U("a",{href:"/admin",class:"text-xs hover:text-foreground transition-colors"},"Admin"),U("a",{href:"https://github.com/TekkadanPlays/oni",target:"_blank",rel:"noopener noreferrer",class:"text-xs hover:text-foreground transition-colors"},"GitHub")))))}}function OY($,J){let Z=J.identifier||`oni-${B5()}`,q=[["d",Z]];if(J.title)q.push(["title",J.title]);if(J.summary)q.push(["summary",J.summary]);if(J.image)q.push(["image",J.image]);if(J.streamingUrl)q.push(["streaming",J.streamingUrl]);if(J.recordingUrl)q.push(["recording",J.recordingUrl]);if(J.starts)q.push(["starts",J.starts.toString()]);if(J.ends)q.push(["ends",J.ends.toString()]);if(J.status)q.push(["status",J.status]);if(J.currentParticipants!==void 0)q.push(["current_participants",J.currentParticipants.toString()]);if(J.totalParticipants!==void 0)q.push(["total_participants",J.totalParticipants.toString()]);if(J.tags)for(let Q of J.tags)q.push(["t",Q]);if(J.participants)for(let Q of J.participants){let Y=["p",Q.pubkey];if(Q.relay)Y.push(Q.relay);if(Y.push(Q.role),Q.proof)Y.push(Q.proof);q.push(Y)}if(J.relays&&J.relays.length>0)q.push(["relays",...J.relays]);return q.push(["a",`${g0.LiveEvent}:${$}:${Z}`]),P4(g0.LiveEvent,"",q,$)}async function k9($,J){try{let Z=OY($,J);return await S4(Z)}catch(Z){return console.error("[nip53] Error creating live event:",Z),null}}async function g4($,J){if(!$||J.length===0)return{published:!1,results:new Map};let Z=[];try{let q=J.map(async(K)=>{let G=new Q1(K);return Z.push(G),await G.connect(),G});await Promise.allSettled(q);let Q=new Map,Y=Z.filter((K)=>K.status==="connected").map(async(K)=>{try{let G=await K.publish($);Q.set(K.url,G)}catch(G){Q.set(K.url,{accepted:!1,message:String(G)})}});return await Promise.allSettled(Y),{published:Array.from(Q.values()).some((K)=>K.accepted),results:Q}}finally{for(let q of Z)q.disconnect()}}async function v9($,J,Z){let q=J.tags.find((K)=>K[0]==="d"),Q=q?q[1]:`oni-${B5()}`,Y={identifier:Q,status:"live"};for(let K of J.tags)switch(K[0]){case"title":Y.title=K[1];break;case"summary":Y.summary=K[1];break;case"image":Y.image=K[1];break;case"streaming":Y.streamingUrl=K[1];break;case"recording":Y.recordingUrl=K[1];break;case"starts":Y.starts=parseInt(K[1],10);break;case"ends":Y.ends=parseInt(K[1],10);break;case"status":Y.status=K[1];break;case"current_participants":Y.currentParticipants=parseInt(K[1],10);break}let X={...Y,...Z,identifier:Q};return k9($,X)}var w0={currentEvent:null,isPublishing:!1,lastPublished:null,error:null,enabled:!1},E9=new Set,O2=null;function A2(){for(let $ of E9)$()}function b2(){return w0}function QJ($){return E9.add($),()=>E9.delete($)}function YJ($){if(w0={...w0,enabled:$},typeof localStorage!=="undefined")localStorage.setItem("oni_live_events_enabled",$?"1":"0");A2()}function XJ(){if(typeof localStorage==="undefined")return;let $=localStorage.getItem("oni_live_events_enabled");if($!==null)w0={...w0,enabled:$==="1"},A2()}function y9(){let J=g1().relayList.filter((Z)=>Z.write).map((Z)=>Z.url);if(J.length>0)return J;return["wss://relay.damus.io","wss://nos.lol","wss://relay.nostr.band"]}async function UJ($,J){let Z=L0();if(!Z.pubkey||!w0.enabled)return;w0={...w0,isPublishing:!0,error:null},A2();try{let q=y9(),Q=await k9(Z.pubkey,{identifier:`oni-${Date.now()}`,title:$||"Live Stream",status:"live",streamingUrl:`${window.location.origin}/hls/stream.m3u8`,starts:Math.floor(Date.now()/1000),currentParticipants:J,participants:[{pubkey:Z.pubkey,role:"Host"}],relays:q});if(Q){let{published:Y}=await g4(Q,q);if(Y){if(console.log("[liveevents] Published live event:",Q.id),w0={...w0,currentEvent:Q,isPublishing:!1,lastPublished:new Date().toISOString()},O2)clearInterval(O2);O2=setInterval(()=>{AY($,J)},60000)}else w0={...w0,isPublishing:!1,error:"Failed to publish to any relay"}}else w0={...w0,isPublishing:!1,error:"Failed to create event (signer rejected?)"}}catch(q){w0={...w0,isPublishing:!1,error:String(q)}}A2()}async function KJ(){let $=L0();if(!$.pubkey||!w0.currentEvent)return;if(O2)clearInterval(O2),O2=null;try{let J=y9(),Z=await v9($.pubkey,w0.currentEvent,{status:"ended",ends:Math.floor(Date.now()/1000)});if(Z)await g4(Z,J),console.log("[liveevents] Published stream ended event")}catch(J){console.error("[liveevents] Error ending live event:",J)}w0={...w0,currentEvent:null},A2()}async function AY($,J){let Z=L0();if(!Z.pubkey||!w0.currentEvent)return;try{let q=y9(),Q=await v9(Z.pubkey,w0.currentEvent,{title:$||"Live Stream",currentParticipants:J,status:"live"});if(Q)w0={...w0,currentEvent:Q,lastPublished:new Date().toISOString()},await g4(Q,q),A2()}catch(q){console.error("[liveevents] Error updating live event:",q)}}class g9 extends N{unsub=null;unsubAuth=null;lastPubkey=null;wasOnline=!1;state={loading:!0,error:null,online:!1,chatVisible:!0,chatDisabled:!1,isMobile:window.innerWidth<=768,name:"",streamTitle:"",offlineMessage:"",lastDisconnectTime:"",logo:""};updateAuthSigner(){let $=L0(),J=$1();if($.pubkey)J.setAuthSigner((Z)=>S4(Z));else J.setAuthSigner(null)}onAuthChange(){let $=L0();if(this.updateAuthSigner(),$.pubkey&&this.lastPubkey&&$.pubkey!==this.lastPubkey)H9();if(this.lastPubkey=$.pubkey,$.pubkey)t$($.pubkey).catch((J)=>console.warn("[oni] Bootstrap error:",J))}componentDidMount(){this.unsub=i.subscribe(()=>{let $=i.getState(),J=$.status?.online||!1,Z=this.wasOnline;if(this.setState({loading:$.loading,error:$.error,online:J,chatVisible:$.chatVisible,chatDisabled:$.config?.chatDisabled||!1,isMobile:$.isMobile,name:$.config?.name||"",streamTitle:$.status?.streamTitle||"",offlineMessage:$.config?.offlineMessage||"",lastDisconnectTime:$.status?.lastDisconnectTime||"",logo:$.config?.logo||""}),J&&!Z)this.wasOnline=!0,UJ($.status?.streamTitle||$.config?.name||"Live Stream",$.status?.viewerCount||0);else if(!J&&Z)this.wasOnline=!1,KJ()}),this.unsubAuth=y1(()=>this.onAuthChange()),d$(),T9(),XJ(),f4(10).catch(($)=>console.warn("[oni] Indexer discovery error:",$)),A4(),this.updateAuthSigner(),x$().then(()=>{this.onAuthChange()}).catch(($)=>console.warn("[oni] Relay connect error:",$)),window.addEventListener("resize",this.handleResize),i.init()}componentWillUnmount(){this.unsub?.(),this.unsubAuth?.(),window.removeEventListener("resize",this.handleResize),i.cleanup()}handleResize=()=>{i.setMobile(window.innerWidth<=768)};render(){let{loading:$,error:J,online:Z,chatVisible:q,chatDisabled:Q,isMobile:Y,name:X,streamTitle:K,offlineMessage:G,lastDisconnectTime:B,logo:w}=this.state;if(J)return U("div",{class:"flex items-center justify-center min-h-screen bg-background"},U(y,{className:"max-w-sm w-full mx-4 text-center"},U(p,{className:"pt-6"},U("div",{class:"size-12 rounded-lg bg-destructive/10 flex items-center justify-center mx-auto mb-4"},U("svg",{class:"size-5 text-destructive",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}))),U("h2",{class:"text-lg font-semibold mb-2"},"Unable to connect"),U("p",{class:"text-sm text-muted-foreground mb-6"},J),U(f,{onClick:()=>window.location.reload()},"Try Again"))));if($)return U("div",{class:"flex items-center justify-center min-h-screen bg-background"},U("div",{class:"text-center"},U(K1,{size:"lg",className:"mx-auto mb-4"}),U("p",{class:"text-sm text-muted-foreground"},"Loading stream...")));return U("div",{class:"flex flex-col h-screen bg-background"},U(P9,null),U("div",{class:"flex flex-1 min-h-0"},U("div",{class:"flex flex-col flex-1 overflow-y-auto"},Z?U(I9,{source:"/hls/stream.m3u8",online:Z,title:K||X}):U(S9,{name:X,customText:G,lastDisconnectTime:B,logo:w?"/logo":void 0}),Z&&U(C9,null),U("div",{class:"flex-1"}),U(f9,null)),q&&!Q&&!Y&&U("div",{class:"w-[340px] shrink-0 border-l border-border bg-card"},U(y4,null))),U(w4,{open:Y&&!Q&&q,onOpenChange:(M)=>{if(!M)i.toggleChat()}},U(d8,null,U(r8,null,"Chat")),U(p8,{className:"h-[70vh]"},U(y4,null))),U(D2,null))}}var bY=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),U("polyline",{points:"9 22 9 12 15 12 15 22"})),fY=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("circle",{cx:"12",cy:"12",r:"3"}),U("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})),kY=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polygon",{points:"23 7 16 12 23 17 23 7"}),U("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),vY=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})),EY=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),U("circle",{cx:"9",cy:"7",r:"4"}),U("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),U("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})),yY=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),U("polyline",{points:"14 2 14 8 20 8"}),U("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),U("line",{x1:"16",y1:"17",x2:"8",y2:"17"})),gY=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})),hY=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})),uY=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("circle",{cx:"12",cy:"12",r:"2"}),U("path",{d:"M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"})),xY=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),U("polyline",{points:"12 19 5 12 12 5"})),mY=[{heading:"",items:[{id:"overview",label:"Dashboard",icon:bY},{id:"viewers",label:"Viewers",icon:EY}]},{heading:"Configuration",items:[{id:"general",label:"General",icon:fY},{id:"video",label:"Video",icon:kY},{id:"chat",label:"Chat",icon:vY}]},{heading:"Nostr",items:[{id:"nostr",label:"Identity",icon:hY},{id:"relays",label:"Relays",icon:uY}]},{heading:"Advanced",items:[{id:"logs",label:"Logs",icon:yY},{id:"tokens",label:"Access Tokens",icon:gY}]}];class h9 extends N{unsub=null;state={online:!1,name:"",streamTitle:"",viewerCount:0,sidebarOpen:!1};componentDidMount(){this.unsub=i.subscribe(()=>{let $=i.getState();this.setState({online:$.status?.online||!1,name:$.config?.name||"",streamTitle:$.status?.streamTitle||"",viewerCount:$.status?.viewerCount||0})})}componentWillUnmount(){this.unsub?.()}render(){let{activeTab:$,onTabChange:J,children:Z}=this.props,{online:q,name:Q,viewerCount:Y}=this.state;return U("div",{class:"min-h-screen bg-background"},U("header",{class:"sticky top-0 z-50 border-b border-border/30 bg-background/80 backdrop-blur-xl backdrop-saturate-150"},U("div",{class:"flex h-14 items-center justify-between px-4 sm:px-6"},U("div",{class:"flex items-center gap-4"},U("a",{href:"/",class:"flex items-center gap-2.5 shrink-0"},U("span",{class:"text-xl"},"\uD83D\uDD25"),U("span",{class:"text-lg font-bold tracking-tight"},Q||"oni")),U("nav",{class:"hidden md:flex items-center gap-0.5"},U("a",{href:"/",class:"inline-flex h-9 items-center justify-center rounded-md px-3 py-2 text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground"},"Stream"),U("a",{href:"https://mycelium.social",target:"_blank",rel:"noopener",class:"inline-flex h-9 items-center justify-center rounded-md px-3 py-2 text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground"},"Mycelium"))),U("div",{class:"flex items-center gap-2"},q&&Y>0&&U(x,{variant:"outline",className:"tabular-nums gap-1.5"},U("svg",{class:"size-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},U("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),U("circle",{cx:"12",cy:"12",r:"3"})),Y),U(x,{variant:q?"default":"secondary",className:R("gap-1.5",q&&"bg-success text-success-foreground")},U("span",{class:R("size-1.5 rounded-full",q?"bg-current live-dot":"bg-muted-foreground/50")}),q?"Live":"Offline"),U(L2,{className:"hidden sm:inline-flex size-8"})))),U("div",{class:"flex"},U("aside",{class:"hidden md:block w-52 shrink-0 border-r border-border"},U("div",{class:"sticky top-[57px] py-4 px-3 space-y-4 h-[calc(100vh-57px)] overflow-y-auto"},mY.map((X)=>U("div",{key:X.heading},X.heading&&U("p",{class:"px-3 mb-1.5 text-[11px] font-semibold tracking-wider uppercase text-muted-foreground/50"},X.heading),X.items.map((K)=>{let G=K.icon,B=$===K.id;return U("button",{key:K.id,class:R("w-full flex items-center gap-2.5 px-3 py-2 rounded-md text-sm transition-colors cursor-pointer",B?"bg-accent text-foreground font-medium":"text-muted-foreground hover:text-foreground hover:bg-accent/80"),onClick:()=>J(K.id)},U("span",{class:R("text-sm",B?"text-foreground":"text-muted-foreground/60")},U(G,null)),K.label)}))),U(k0,null),U("button",{class:"w-full flex items-center gap-2.5 px-3 py-2 rounded-md text-sm text-muted-foreground hover:text-foreground hover:bg-accent/80 transition-colors cursor-pointer",onClick:()=>{window.location.href="/"}},U(xY,null),"Back to stream"))),U("main",{class:"flex-1 min-w-0"},U("div",{class:"mx-auto max-w-5xl px-5 sm:px-6 lg:px-8 py-6"},Z))),U(D2,null))}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function F5($){return $+0.5|0}var h1=($,J,Z)=>Math.max(Math.min($,Z),J);function W5($){return h1(F5($*2.55),0,255)}function u1($){return h1(F5($*255),0,255)}function P1($){return h1(F5($/2.55)/100,0,1)}function GJ($){return h1(F5($*100),0,100)}var J1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},x9=[..."0123456789ABCDEF"],pY=($)=>x9[$&15],dY=($)=>x9[($&240)>>4]+x9[$&15],h4=($)=>($&240)>>4===($&15),rY=($)=>h4($.r)&&h4($.g)&&h4($.b)&&h4($.a);function cY($){var J=$.length,Z;if($[0]==="#"){if(J===4||J===5)Z={r:255&J1[$[1]]*17,g:255&J1[$[2]]*17,b:255&J1[$[3]]*17,a:J===5?J1[$[4]]*17:255};else if(J===7||J===9)Z={r:J1[$[1]]<<4|J1[$[2]],g:J1[$[3]]<<4|J1[$[4]],b:J1[$[5]]<<4|J1[$[6]],a:J===9?J1[$[7]]<<4|J1[$[8]]:255}}return Z}var sY=($,J)=>$<255?J($):"";function oY($){var J=rY($)?pY:dY;return $?"#"+J($.r)+J($.g)+J($.b)+sY($.a,J):void 0}var lY=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function MJ($,J,Z){let q=J*Math.min(Z,1-Z),Q=(Y,X=(Y+$/30)%12)=>Z-q*Math.max(Math.min(X-3,9-X,1),-1);return[Q(0),Q(8),Q(4)]}function iY($,J,Z){let q=(Q,Y=(Q+$/60)%6)=>Z-Z*J*Math.max(Math.min(Y,4-Y,1),0);return[q(5),q(3),q(1)]}function nY($,J,Z){let q=MJ($,1,0.5),Q;if(J+Z>1)Q=1/(J+Z),J*=Q,Z*=Q;for(Q=0;Q<3;Q++)q[Q]*=1-J-Z,q[Q]+=J;return q}function aY($,J,Z,q,Q){if($===Q)return(J-Z)/q+(J<Z?6:0);if(J===Q)return(Z-$)/q+2;return($-J)/q+4}function m9($){let Z=$.r/255,q=$.g/255,Q=$.b/255,Y=Math.max(Z,q,Q),X=Math.min(Z,q,Q),K=(Y+X)/2,G,B,w;if(Y!==X)w=Y-X,B=K>0.5?w/(2-Y-X):w/(Y+X),G=aY(Z,q,Q,w,Y),G=G*60+0.5;return[G|0,B||0,K]}function p9($,J,Z,q){return(Array.isArray(J)?$(J[0],J[1],J[2]):$(J,Z,q)).map(u1)}function d9($,J,Z){return p9(MJ,$,J,Z)}function tY($,J,Z){return p9(nY,$,J,Z)}function eY($,J,Z){return p9(iY,$,J,Z)}function HJ($){return($%360+360)%360}function $X($){let J=lY.exec($),Z=255,q;if(!J)return;if(J[5]!==q)Z=J[6]?W5(+J[5]):u1(+J[5]);let Q=HJ(+J[2]),Y=+J[3]/100,X=+J[4]/100;if(J[1]==="hwb")q=tY(Q,Y,X);else if(J[1]==="hsv")q=eY(Q,Y,X);else q=d9(Q,Y,X);return{r:q[0],g:q[1],b:q[2],a:Z}}function JX($,J){var Z=m9($);Z[0]=HJ(Z[0]+J),Z=d9(Z),$.r=Z[0],$.g=Z[1],$.b=Z[2]}function ZX($){if(!$)return;let J=m9($),Z=J[0],q=GJ(J[1]),Q=GJ(J[2]);return $.a<255?`hsla(${Z}, ${q}%, ${Q}%, ${P1($.a)})`:`hsl(${Z}, ${q}%, ${Q}%)`}var BJ={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},wJ={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function qX(){let $={},J=Object.keys(wJ),Z=Object.keys(BJ),q,Q,Y,X,K;for(q=0;q<J.length;q++){X=K=J[q];for(Q=0;Q<Z.length;Q++)Y=Z[Q],K=K.replace(Y,BJ[Y]);Y=parseInt(wJ[X],16),$[K]=[Y>>16&255,Y>>8&255,Y&255]}return $}var u4;function QX($){if(!u4)u4=qX(),u4.transparent=[0,0,0,0];let J=u4[$.toLowerCase()];return J&&{r:J[0],g:J[1],b:J[2],a:J.length===4?J[3]:255}}var YX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function XX($){let J=YX.exec($),Z=255,q,Q,Y;if(!J)return;if(J[7]!==q){let X=+J[7];Z=J[8]?W5(X):h1(X*255,0,255)}return q=+J[1],Q=+J[3],Y=+J[5],q=255&(J[2]?W5(q):h1(q,0,255)),Q=255&(J[4]?W5(Q):h1(Q,0,255)),Y=255&(J[6]?W5(Y):h1(Y,0,255)),{r:q,g:Q,b:Y,a:Z}}function UX($){return $&&($.a<255?`rgba(${$.r}, ${$.g}, ${$.b}, ${P1($.a)})`:`rgb(${$.r}, ${$.g}, ${$.b})`)}var u9=($)=>$<=0.0031308?$*12.92:Math.pow($,0.4166666666666667)*1.055-0.055,f2=($)=>$<=0.04045?$/12.92:Math.pow(($+0.055)/1.055,2.4);function KX($,J,Z){let q=f2(P1($.r)),Q=f2(P1($.g)),Y=f2(P1($.b));return{r:u1(u9(q+Z*(f2(P1(J.r))-q))),g:u1(u9(Q+Z*(f2(P1(J.g))-Q))),b:u1(u9(Y+Z*(f2(P1(J.b))-Y))),a:$.a+Z*(J.a-$.a)}}function x4($,J,Z){if($){let q=m9($);q[J]=Math.max(0,Math.min(q[J]+q[J]*Z,J===0?360:1)),q=d9(q),$.r=q[0],$.g=q[1],$.b=q[2]}}function zJ($,J){return $?Object.assign(J||{},$):$}function TJ($){var J={r:0,g:0,b:0,a:255};if(Array.isArray($)){if($.length>=3){if(J={r:$[0],g:$[1],b:$[2],a:255},$.length>3)J.a=u1($[3])}}else J=zJ($,{r:0,g:0,b:0,a:1}),J.a=u1(J.a);return J}function GX($){if($.charAt(0)==="r")return XX($);return $X($)}class k2{constructor($){if($ instanceof k2)return $;let J=typeof $,Z;if(J==="object")Z=TJ($);else if(J==="string")Z=cY($)||QX($)||GX($);this._rgb=Z,this._valid=!!Z}get valid(){return this._valid}get rgb(){var $=zJ(this._rgb);if($)$.a=P1($.a);return $}set rgb($){this._rgb=TJ($)}rgbString(){return this._valid?UX(this._rgb):void 0}hexString(){return this._valid?oY(this._rgb):void 0}hslString(){return this._valid?ZX(this._rgb):void 0}mix($,J){if($){let Z=this.rgb,q=$.rgb,Q,Y=J===Q?0.5:J,X=2*Y-1,K=Z.a-q.a,G=((X*K===-1?X:(X+K)/(1+X*K))+1)/2;Q=1-G,Z.r=255&G*Z.r+Q*q.r+0.5,Z.g=255&G*Z.g+Q*q.g+0.5,Z.b=255&G*Z.b+Q*q.b+0.5,Z.a=Y*Z.a+(1-Y)*q.a,this.rgb=Z}return this}interpolate($,J){if($)this._rgb=KX(this._rgb,$._rgb,J);return this}clone(){return new k2(this.rgb)}alpha($){return this._rgb.a=u1($),this}clearer($){let J=this._rgb;return J.a*=1-$,this}greyscale(){let $=this._rgb,J=F5($.r*0.3+$.g*0.59+$.b*0.11);return $.r=$.g=$.b=J,this}opaquer($){let J=this._rgb;return J.a*=1+$,this}negate(){let $=this._rgb;return $.r=255-$.r,$.g=255-$.g,$.b=255-$.b,this}lighten($){return x4(this._rgb,2,$),this}darken($){return x4(this._rgb,2,-$),this}saturate($){return x4(this._rgb,1,$),this}desaturate($){return x4(this._rgb,1,-$),this}rotate($){return JX(this._rgb,$),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function w1(){}var SJ=(()=>{let $=0;return()=>$++})();function $0($){return $===null||$===void 0}function T0($){if(Array.isArray&&Array.isArray($))return!0;let J=Object.prototype.toString.call($);if(J.slice(0,7)==="[object"&&J.slice(-6)==="Array]")return!0;return!1}function l($){return $!==null&&Object.prototype.toString.call($)==="[object Object]"}function H0($){return(typeof $==="number"||$ instanceof Number)&&isFinite(+$)}function h0($,J){return H0($)?$:J}function s($,J){return typeof $==="undefined"?J:$}var CJ=($,J)=>typeof $==="string"&&$.endsWith("%")?parseFloat($)/100:+$/J,s9=($,J)=>typeof $==="string"&&$.endsWith("%")?parseFloat($)/100*J:+$;function U0($,J,Z){if($&&typeof $.call==="function")return $.apply(Z,J)}function J0($,J,Z,q){let Q,Y,X;if(T0($))if(Y=$.length,q)for(Q=Y-1;Q>=0;Q--)J.call(Z,$[Q],Q);else for(Q=0;Q<Y;Q++)J.call(Z,$[Q],Q);else if(l($)){X=Object.keys($),Y=X.length;for(Q=0;Q<Y;Q++)J.call(Z,$[X[Q]],X[Q])}}function _5($,J){let Z,q,Q,Y;if(!$||!J||$.length!==J.length)return!1;for(Z=0,q=$.length;Z<q;++Z)if(Q=$[Z],Y=J[Z],Q.datasetIndex!==Y.datasetIndex||Q.index!==Y.index)return!1;return!0}function r4($){if(T0($))return $.map(r4);if(l($)){let J=Object.create(null),Z=Object.keys($),q=Z.length,Q=0;for(;Q<q;++Q)J[Z[Q]]=r4($[Z[Q]]);return J}return $}function NJ($){return["__proto__","prototype","constructor"].indexOf($)===-1}function BX($,J,Z,q){if(!NJ($))return;let Q=J[$],Y=Z[$];if(l(Q)&&l(Y))E2(Q,Y,q);else J[$]=r4(Y)}function E2($,J,Z){let q=T0(J)?J:[J],Q=q.length;if(!l($))return $;Z=Z||{};let Y=Z.merger||BX,X;for(let K=0;K<Q;++K){if(X=q[K],!l(X))continue;let G=Object.keys(X);for(let B=0,w=G.length;B<w;++B)Y(G[B],$,X,Z)}return $}function g2($,J){return E2($,J,{merger:wX})}function wX($,J,Z){if(!NJ($))return;let q=J[$],Q=Z[$];if(l(q)&&l(Q))g2(q,Q);else if(!Object.prototype.hasOwnProperty.call(J,$))J[$]=r4(Q)}var WJ={"":($)=>$,x:($)=>$.x,y:($)=>$.y};function TX($){let J=$.split("."),Z=[],q="";for(let Q of J)if(q+=Q,q.endsWith("\\"))q=q.slice(0,-1)+".";else Z.push(q),q="";return Z}function MX($){let J=TX($);return(Z)=>{for(let q of J){if(q==="")break;Z=Z&&Z[q]}return Z}}function h2($,J){return(WJ[J]||(WJ[J]=MX(J)))($)}function l4($){return $.charAt(0).toUpperCase()+$.slice(1)}var D5=($)=>typeof $!=="undefined",I1=($)=>typeof $==="function",o9=($,J)=>{if($.size!==J.size)return!1;for(let Z of $)if(!J.has(Z))return!1;return!0};function OJ($){return $.type==="mouseup"||$.type==="click"||$.type==="contextmenu"}var e=Math.PI,B0=2*e,HX=B0+e,c4=Number.POSITIVE_INFINITY,zX=e/180,j0=e/2,q2=e/4,FJ=e*2/3,S1=Math.log10,Y2=Math.sign;function u2($,J,Z){return Math.abs($-J)<Z}function l9($){let J=Math.round($);$=u2($,J,$/1000)?J:$;let Z=Math.pow(10,Math.floor(S1($))),q=$/Z;return(q<=1?1:q<=2?2:q<=5?5:10)*Z}function AJ($){let J=[],Z=Math.sqrt($),q;for(q=1;q<Z;q++)if($%q===0)J.push(q),J.push($/q);if(Z===(Z|0))J.push(Z);return J.sort((Q,Y)=>Q-Y).pop(),J}function WX($){return typeof $==="symbol"||typeof $==="object"&&$!==null&&!((Symbol.toPrimitive in $)||("toString"in $)||("valueOf"in $))}function x2($){return!WX($)&&!isNaN(parseFloat($))&&isFinite($)}function bJ($,J){let Z=Math.round($);return Z-J<=$&&Z+J>=$}function i9($,J,Z){let q,Q,Y;for(q=0,Q=$.length;q<Q;q++)if(Y=$[q][Z],!isNaN(Y))J.min=Math.min(J.min,Y),J.max=Math.max(J.max,Y)}function X1($){return $*(e/180)}function i4($){return $*(180/e)}function n9($){if(!H0($))return;let J=1,Z=0;while(Math.round($*J)/J!==$)J*=10,Z++;return Z}function a9($,J){let Z=J.x-$.x,q=J.y-$.y,Q=Math.sqrt(Z*Z+q*q),Y=Math.atan2(q,Z);if(Y<-0.5*e)Y+=B0;return{angle:Y,distance:Q}}function s4($,J){return Math.sqrt(Math.pow(J.x-$.x,2)+Math.pow(J.y-$.y,2))}function FX($,J){return($-J+HX)%B0-e}function b0($){return($%B0+B0)%B0}function m2($,J,Z,q){let Q=b0($),Y=b0(J),X=b0(Z),K=b0(Y-Q),G=b0(X-Q),B=b0(Q-Y),w=b0(Q-X);return Q===Y||Q===X||q&&Y===X||K>G&&B<w}function v0($,J,Z){return Math.max(J,Math.min(Z,$))}function fJ($){return v0($,-32768,32767)}function d1($,J,Z,q=0.000001){return $>=Math.min(J,Z)-q&&$<=Math.max(J,Z)+q}function n4($,J,Z){Z=Z||((X)=>$[X]<J);let q=$.length-1,Q=0,Y;while(q-Q>1)if(Y=Q+q>>1,Z(Y))Q=Y;else q=Y;return{lo:Q,hi:q}}var m1=($,J,Z,q)=>n4($,Z,q?(Q)=>{let Y=$[Q][J];return Y<Z||Y===Z&&$[Q+1][J]===Z}:(Q)=>$[Q][J]<Z),kJ=($,J,Z)=>n4($,Z,(q)=>$[q][J]>=Z);function vJ($,J,Z){let q=0,Q=$.length;while(q<Q&&$[q]<J)q++;while(Q>q&&$[Q-1]>Z)Q--;return q>0||Q<$.length?$.slice(q,Q):$}var EJ=["push","pop","shift","splice","unshift"];function yJ($,J){if($._chartjs){$._chartjs.listeners.push(J);return}Object.defineProperty($,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[J]}}),EJ.forEach((Z)=>{let q="_onData"+l4(Z),Q=$[Z];Object.defineProperty($,Z,{configurable:!0,enumerable:!1,value(...Y){let X=Q.apply(this,Y);return $._chartjs.listeners.forEach((K)=>{if(typeof K[q]==="function")K[q](...Y)}),X}})})}function t9($,J){let Z=$._chartjs;if(!Z)return;let q=Z.listeners,Q=q.indexOf(J);if(Q!==-1)q.splice(Q,1);if(q.length>0)return;EJ.forEach((Y)=>{delete $[Y]}),delete $._chartjs}function gJ($){let J=new Set($);if(J.size===$.length)return $;return Array.from(J)}var e9=function(){if(typeof window==="undefined")return function($){return $()};return window.requestAnimationFrame}();function $6($,J){let Z=[],q=!1;return function(...Q){if(Z=Q,!q)q=!0,e9.call(window,()=>{q=!1,$.apply(J,Z)})}}function hJ($,J){let Z;return function(...q){if(J)clearTimeout(Z),Z=setTimeout($,J,q);else $.apply(this,q);return J}}var J6=($)=>$==="start"?"left":$==="end"?"right":"center",u0=($,J,Z)=>$==="start"?J:$==="end"?Z:(J+Z)/2,uJ=($,J,Z,q)=>{return $===(q?"left":"right")?Z:$==="center"?(J+Z)/2:J};function xJ($,J,Z){let q=J.length,Q=0,Y=q;if($._sorted){let{iScale:X,vScale:K,_parsed:G}=$,B=$.dataset?$.dataset.options?$.dataset.options.spanGaps:null:null,w=X.axis,{min:T,max:M,minDefined:H,maxDefined:W}=X.getUserBounds();if(H){if(Q=Math.min(m1(G,w,T).lo,Z?q:m1(J,w,X.getPixelForValue(T)).lo),B){let z=G.slice(0,Q+1).reverse().findIndex((F)=>!$0(F[K.axis]));Q-=Math.max(0,z)}Q=v0(Q,0,q-1)}if(W){let z=Math.max(m1(G,X.axis,M,!0).hi+1,Z?0:m1(J,w,X.getPixelForValue(M),!0).hi+1);if(B){let F=G.slice(z-1).findIndex((j)=>!$0(j[K.axis]));z+=Math.max(0,F)}Y=v0(z,Q,q)-Q}else Y=q-Q}return{start:Q,count:Y}}function mJ($){let{xScale:J,yScale:Z,_scaleRanges:q}=$,Q={xmin:J.min,xmax:J.max,ymin:Z.min,ymax:Z.max};if(!q)return $._scaleRanges=Q,!0;let Y=q.xmin!==J.min||q.xmax!==J.max||q.ymin!==Z.min||q.ymax!==Z.max;return Object.assign(q,Q),Y}var m4=($)=>$===0||$===1,jJ=($,J,Z)=>-(Math.pow(2,10*($-=1))*Math.sin(($-J)*B0/Z)),RJ=($,J,Z)=>Math.pow(2,-10*$)*Math.sin(($-J)*B0/Z)+1,v2={linear:($)=>$,easeInQuad:($)=>$*$,easeOutQuad:($)=>-$*($-2),easeInOutQuad:($)=>($/=0.5)<1?0.5*$*$:-0.5*(--$*($-2)-1),easeInCubic:($)=>$*$*$,easeOutCubic:($)=>($-=1)*$*$+1,easeInOutCubic:($)=>($/=0.5)<1?0.5*$*$*$:0.5*(($-=2)*$*$+2),easeInQuart:($)=>$*$*$*$,easeOutQuart:($)=>-(($-=1)*$*$*$-1),easeInOutQuart:($)=>($/=0.5)<1?0.5*$*$*$*$:-0.5*(($-=2)*$*$*$-2),easeInQuint:($)=>$*$*$*$*$,easeOutQuint:($)=>($-=1)*$*$*$*$+1,easeInOutQuint:($)=>($/=0.5)<1?0.5*$*$*$*$*$:0.5*(($-=2)*$*$*$*$+2),easeInSine:($)=>-Math.cos($*j0)+1,easeOutSine:($)=>Math.sin($*j0),easeInOutSine:($)=>-0.5*(Math.cos(e*$)-1),easeInExpo:($)=>$===0?0:Math.pow(2,10*($-1)),easeOutExpo:($)=>$===1?1:-Math.pow(2,-10*$)+1,easeInOutExpo:($)=>m4($)?$:$<0.5?0.5*Math.pow(2,10*($*2-1)):0.5*(-Math.pow(2,-10*($*2-1))+2),easeInCirc:($)=>$>=1?$:-(Math.sqrt(1-$*$)-1),easeOutCirc:($)=>Math.sqrt(1-($-=1)*$),easeInOutCirc:($)=>($/=0.5)<1?-0.5*(Math.sqrt(1-$*$)-1):0.5*(Math.sqrt(1-($-=2)*$)+1),easeInElastic:($)=>m4($)?$:jJ($,0.075,0.3),easeOutElastic:($)=>m4($)?$:RJ($,0.075,0.3),easeInOutElastic($){return m4($)?$:$<0.5?0.5*jJ($*2,0.1125,0.45):0.5+0.5*RJ($*2-1,0.1125,0.45)},easeInBack($){return $*$*(2.70158*$-1.70158)},easeOutBack($){return($-=1)*$*(2.70158*$+1.70158)+1},easeInOutBack($){let J=1.70158;if(($/=0.5)<1)return 0.5*($*$*(((J*=1.525)+1)*$-J));return 0.5*(($-=2)*$*(((J*=1.525)+1)*$+J)+2)},easeInBounce:($)=>1-v2.easeOutBounce(1-$),easeOutBounce($){if($<0.36363636363636365)return 7.5625*$*$;if($<0.7272727272727273)return 7.5625*($-=0.5454545454545454)*$+0.75;if($<0.9090909090909091)return 7.5625*($-=0.8181818181818182)*$+0.9375;return 7.5625*($-=0.9545454545454546)*$+0.984375},easeInOutBounce:($)=>$<0.5?v2.easeInBounce($*2)*0.5:v2.easeOutBounce($*2-1)*0.5+0.5};function Z6($){if($&&typeof $==="object"){let J=$.toString();return J==="[object CanvasPattern]"||J==="[object CanvasGradient]"}return!1}function q6($){return Z6($)?$:new k2($)}function r9($){return Z6($)?$:new k2($).saturate(0.5).darken(0.1).hexString()}var jX=["x","y","borderWidth","radius","tension"],RX=["color","borderColor","backgroundColor"];function _X($){$.set("animation",{delay:void 0,duration:1000,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),$.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:(J)=>J!=="onProgress"&&J!=="onComplete"&&J!=="fn"}),$.set("animations",{colors:{type:"color",properties:RX},numbers:{type:"number",properties:jX}}),$.describe("animations",{_fallback:"animation"}),$.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:(J)=>J|0}}}})}function DX($){$.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var _J=new Map;function LX($,J){J=J||{};let Z=$+JSON.stringify(J),q=_J.get(Z);if(!q)q=new Intl.NumberFormat($,J),_J.set(Z,q);return q}function L5($,J,Z){return LX(J,Z).format($)}var pJ={values($){return T0($)?$:""+$},numeric($,J,Z){if($===0)return"0";let q=this.chart.options.locale,Q,Y=$;if(Z.length>1){let B=Math.max(Math.abs(Z[0].value),Math.abs(Z[Z.length-1].value));if(B<0.0001||B>1000000000000000)Q="scientific";Y=VX($,Z)}let X=S1(Math.abs(Y)),K=isNaN(X)?1:Math.max(Math.min(-1*Math.floor(X),20),0),G={notation:Q,minimumFractionDigits:K,maximumFractionDigits:K};return Object.assign(G,this.options.ticks.format),L5($,q,G)},logarithmic($,J,Z){if($===0)return"0";let q=Z[J].significand||$/Math.pow(10,Math.floor(S1($)));if([1,2,3,5,10,15].includes(q)||J>0.8*Z.length)return pJ.numeric.call(this,$,J,Z);return""}};function VX($,J){let Z=J.length>3?J[2].value-J[1].value:J[1].value-J[0].value;if(Math.abs(Z)>=1&&$!==Math.floor($))Z=$-Math.floor($);return Z}var V5={formatters:pJ};function PX($){$.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(J,Z)=>Z.lineWidth,tickColor:(J,Z)=>Z.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:V5.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),$.route("scale.ticks","color","","color"),$.route("scale.grid","color","","borderColor"),$.route("scale.border","color","","borderColor"),$.route("scale.title","color","","color"),$.describe("scale",{_fallback:!1,_scriptable:(J)=>!J.startsWith("before")&&!J.startsWith("after")&&J!=="callback"&&J!=="parser",_indexable:(J)=>J!=="borderDash"&&J!=="tickBorderDash"&&J!=="dash"}),$.describe("scales",{_fallback:"scale"}),$.describe("scale.ticks",{_scriptable:(J)=>J!=="backdropPadding"&&J!=="callback",_indexable:(J)=>J!=="backdropPadding"})}var r1=Object.create(null),a4=Object.create(null);function j5($,J){if(!J)return $;let Z=J.split(".");for(let q=0,Q=Z.length;q<Q;++q){let Y=Z[q];$=$[Y]||($[Y]=Object.create(null))}return $}function c9($,J,Z){if(typeof J==="string")return E2(j5($,J),Z);return E2(j5($,""),J)}class dJ{constructor($,J){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=(Z)=>Z.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(Z,q)=>r9(q.backgroundColor),this.hoverBorderColor=(Z,q)=>r9(q.borderColor),this.hoverColor=(Z,q)=>r9(q.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe($),this.apply(J)}set($,J){return c9(this,$,J)}get($){return j5(this,$)}describe($,J){return c9(a4,$,J)}override($,J){return c9(r1,$,J)}route($,J,Z,q){let Q=j5(this,$),Y=j5(this,Z),X="_"+J;Object.defineProperties(Q,{[X]:{value:Q[J],writable:!0},[J]:{enumerable:!0,get(){let K=this[X],G=Y[q];if(l(K))return Object.assign({},G,K);return s(K,G)},set(K){this[X]=K}}})}apply($){$.forEach((J)=>J(this))}}var z0=new dJ({_scriptable:($)=>!$.startsWith("on"),_indexable:($)=>$!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_X,DX,PX]);function IX($){if(!$||$0($.size)||$0($.family))return null;return($.style?$.style+" ":"")+($.weight?$.weight+" ":"")+$.size+"px "+$.family}function R5($,J,Z,q,Q){let Y=J[Q];if(!Y)Y=J[Q]=$.measureText(Q).width,Z.push(Q);if(Y>q)q=Y;return q}function rJ($,J,Z,q){q=q||{};let Q=q.data=q.data||{},Y=q.garbageCollect=q.garbageCollect||[];if(q.font!==J)Q=q.data={},Y=q.garbageCollect=[],q.font=J;$.save(),$.font=J;let X=0,K=Z.length,G,B,w,T,M;for(G=0;G<K;G++)if(T=Z[G],T!==void 0&&T!==null&&!T0(T))X=R5($,Q,Y,X,T);else if(T0(T)){for(B=0,w=T.length;B<w;B++)if(M=T[B],M!==void 0&&M!==null&&!T0(M))X=R5($,Q,Y,X,M)}$.restore();let H=Y.length/2;if(H>Z.length){for(G=0;G<H;G++)delete Q[Y[G]];Y.splice(0,H)}return X}function c1($,J,Z){let q=$.currentDevicePixelRatio,Q=Z!==0?Math.max(Z/2,0.5):0;return Math.round((J-Q)*q)/q+Q}function Q6($,J){if(!J&&!$)return;J=J||$.getContext("2d"),J.save(),J.resetTransform(),J.clearRect(0,0,$.width,$.height),J.restore()}function t4($,J,Z,q){Y6($,J,Z,q,null)}function Y6($,J,Z,q,Q){let Y,X,K,G,B,w,T,M,H=J.pointStyle,W=J.rotation,z=J.radius,F=(W||0)*zX;if(H&&typeof H==="object"){if(Y=H.toString(),Y==="[object HTMLImageElement]"||Y==="[object HTMLCanvasElement]"){$.save(),$.translate(Z,q),$.rotate(F),$.drawImage(H,-H.width/2,-H.height/2,H.width,H.height),$.restore();return}}if(isNaN(z)||z<=0)return;switch($.beginPath(),H){default:if(Q)$.ellipse(Z,q,Q/2,z,0,0,B0);else $.arc(Z,q,z,0,B0);$.closePath();break;case"triangle":w=Q?Q/2:z,$.moveTo(Z+Math.sin(F)*w,q-Math.cos(F)*z),F+=FJ,$.lineTo(Z+Math.sin(F)*w,q-Math.cos(F)*z),F+=FJ,$.lineTo(Z+Math.sin(F)*w,q-Math.cos(F)*z),$.closePath();break;case"rectRounded":B=z*0.516,G=z-B,X=Math.cos(F+q2)*G,T=Math.cos(F+q2)*(Q?Q/2-B:G),K=Math.sin(F+q2)*G,M=Math.sin(F+q2)*(Q?Q/2-B:G),$.arc(Z-T,q-K,B,F-e,F-j0),$.arc(Z+M,q-X,B,F-j0,F),$.arc(Z+T,q+K,B,F,F+j0),$.arc(Z-M,q+X,B,F+j0,F+e),$.closePath();break;case"rect":if(!W){G=Math.SQRT1_2*z,w=Q?Q/2:G,$.rect(Z-w,q-G,2*w,2*G);break}F+=q2;case"rectRot":T=Math.cos(F)*(Q?Q/2:z),X=Math.cos(F)*z,K=Math.sin(F)*z,M=Math.sin(F)*(Q?Q/2:z),$.moveTo(Z-T,q-K),$.lineTo(Z+M,q-X),$.lineTo(Z+T,q+K),$.lineTo(Z-M,q+X),$.closePath();break;case"crossRot":F+=q2;case"cross":T=Math.cos(F)*(Q?Q/2:z),X=Math.cos(F)*z,K=Math.sin(F)*z,M=Math.sin(F)*(Q?Q/2:z),$.moveTo(Z-T,q-K),$.lineTo(Z+T,q+K),$.moveTo(Z+M,q-X),$.lineTo(Z-M,q+X);break;case"star":T=Math.cos(F)*(Q?Q/2:z),X=Math.cos(F)*z,K=Math.sin(F)*z,M=Math.sin(F)*(Q?Q/2:z),$.moveTo(Z-T,q-K),$.lineTo(Z+T,q+K),$.moveTo(Z+M,q-X),$.lineTo(Z-M,q+X),F+=q2,T=Math.cos(F)*(Q?Q/2:z),X=Math.cos(F)*z,K=Math.sin(F)*z,M=Math.sin(F)*(Q?Q/2:z),$.moveTo(Z-T,q-K),$.lineTo(Z+T,q+K),$.moveTo(Z+M,q-X),$.lineTo(Z-M,q+X);break;case"line":X=Q?Q/2:Math.cos(F)*z,K=Math.sin(F)*z,$.moveTo(Z-X,q-K),$.lineTo(Z+X,q+K);break;case"dash":$.moveTo(Z,q),$.lineTo(Z+Math.cos(F)*(Q?Q/2:z),q+Math.sin(F)*z);break;case!1:$.closePath();break}if($.fill(),J.borderWidth>0)$.stroke()}function B1($,J,Z){return Z=Z||0.5,!J||$&&$.x>J.left-Z&&$.x<J.right+Z&&$.y>J.top-Z&&$.y<J.bottom+Z}function P5($,J){$.save(),$.beginPath(),$.rect(J.left,J.top,J.right-J.left,J.bottom-J.top),$.clip()}function I5($){$.restore()}function cJ($,J,Z,q,Q){if(!J)return $.lineTo(Z.x,Z.y);if(Q==="middle"){let Y=(J.x+Z.x)/2;$.lineTo(Y,J.y),$.lineTo(Y,Z.y)}else if(Q==="after"!==!!q)$.lineTo(J.x,Z.y);else $.lineTo(Z.x,J.y);$.lineTo(Z.x,Z.y)}function sJ($,J,Z,q){if(!J)return $.lineTo(Z.x,Z.y);$.bezierCurveTo(q?J.cp1x:J.cp2x,q?J.cp1y:J.cp2y,q?Z.cp2x:Z.cp1x,q?Z.cp2y:Z.cp1y,Z.x,Z.y)}function SX($,J){if(J.translation)$.translate(J.translation[0],J.translation[1]);if(!$0(J.rotation))$.rotate(J.rotation);if(J.color)$.fillStyle=J.color;if(J.textAlign)$.textAlign=J.textAlign;if(J.textBaseline)$.textBaseline=J.textBaseline}function CX($,J,Z,q,Q){if(Q.strikethrough||Q.underline){let Y=$.measureText(q),X=J-Y.actualBoundingBoxLeft,K=J+Y.actualBoundingBoxRight,G=Z-Y.actualBoundingBoxAscent,B=Z+Y.actualBoundingBoxDescent,w=Q.strikethrough?(G+B)/2:B;$.strokeStyle=$.fillStyle,$.beginPath(),$.lineWidth=Q.decorationWidth||2,$.moveTo(X,w),$.lineTo(K,w),$.stroke()}}function NX($,J){let Z=$.fillStyle;$.fillStyle=J.color,$.fillRect(J.left,J.top,J.width,J.height),$.fillStyle=Z}function U2($,J,Z,q,Q,Y={}){let X=T0(J)?J:[J],K=Y.strokeWidth>0&&Y.strokeColor!=="",G,B;$.save(),$.font=Q.string,SX($,Y);for(G=0;G<X.length;++G){if(B=X[G],Y.backdrop)NX($,Y.backdrop);if(K){if(Y.strokeColor)$.strokeStyle=Y.strokeColor;if(!$0(Y.strokeWidth))$.lineWidth=Y.strokeWidth;$.strokeText(B,Z,q,Y.maxWidth)}$.fillText(B,Z,q,Y.maxWidth),CX($,Z,q,B,Y),q+=Number(Q.lineHeight)}$.restore()}function S5($,J){let{x:Z,y:q,w:Q,h:Y,radius:X}=J;$.arc(Z+X.topLeft,q+X.topLeft,X.topLeft,1.5*e,e,!0),$.lineTo(Z,q+Y-X.bottomLeft),$.arc(Z+X.bottomLeft,q+Y-X.bottomLeft,X.bottomLeft,e,j0,!0),$.lineTo(Z+Q-X.bottomRight,q+Y),$.arc(Z+Q-X.bottomRight,q+Y-X.bottomRight,X.bottomRight,j0,0,!0),$.lineTo(Z+Q,q+X.topRight),$.arc(Z+Q-X.topRight,q+X.topRight,X.topRight,0,-j0,!0),$.lineTo(Z+X.topLeft,q)}var OX=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,AX=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function bX($,J){let Z=(""+$).match(OX);if(!Z||Z[1]==="normal")return J*1.2;switch($=+Z[2],Z[3]){case"px":return $;case"%":$/=100;break}return J*$}var fX=($)=>+$||0;function e4($,J){let Z={},q=l(J),Q=q?Object.keys(J):J,Y=l($)?q?(X)=>s($[X],$[J[X]]):(X)=>$[X]:()=>$;for(let X of Q)Z[X]=fX(Y(X));return Z}function oJ($){return e4($,{top:"y",right:"x",bottom:"y",left:"x"})}function K2($){return e4($,["topLeft","topRight","bottomLeft","bottomRight"])}function E0($){let J=oJ($);return J.width=J.left+J.right,J.height=J.top+J.bottom,J}function N0($,J){$=$||{},J=J||z0.font;let Z=s($.size,J.size);if(typeof Z==="string")Z=parseInt(Z,10);let q=s($.style,J.style);if(q&&!(""+q).match(AX))console.warn('Invalid font style specified: "'+q+'"'),q=void 0;let Q={family:s($.family,J.family),lineHeight:bX(s($.lineHeight,J.lineHeight),Z),size:Z,style:q,weight:s($.weight,J.weight),string:""};return Q.string=IX(Q),Q}function C5($,J,Z,q){let Q=!0,Y,X,K;for(Y=0,X=$.length;Y<X;++Y){if(K=$[Y],K===void 0)continue;if(J!==void 0&&typeof K==="function")K=K(J),Q=!1;if(Z!==void 0&&T0(K))K=K[Z%K.length],Q=!1;if(K!==void 0){if(q&&!Q)q.cacheable=!1;return K}}}function lJ($,J,Z){let{min:q,max:Q}=$,Y=s9(J,(Q-q)/2),X=(K,G)=>Z&&K===0?0:K+G;return{min:X(q,-Math.abs(Y)),max:X(Q,Y)}}function C1($,J){return Object.assign(Object.create($),J)}function $8($,J=[""],Z,q,Q=()=>$[0]){let Y=Z||$;if(typeof q==="undefined")q=aJ("_fallback",$);let X={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:$,_rootScopes:Y,_fallback:q,_getTarget:Q,override:(K)=>$8([K,...$],J,Y,q)};return new Proxy(X,{deleteProperty(K,G){return delete K[G],delete K._keys,delete $[0][G],!0},get(K,G){return iJ(K,G,()=>xX(G,J,$,K))},getOwnPropertyDescriptor(K,G){return Reflect.getOwnPropertyDescriptor(K._scopes[0],G)},getPrototypeOf(){return Reflect.getPrototypeOf($[0])},has(K,G){return LJ(K).includes(G)},ownKeys(K){return LJ(K)},set(K,G,B){let w=K._storage||(K._storage=Q());return K[G]=w[G]=B,delete K._keys,!0}})}function X2($,J,Z,q){let Q={_cacheable:!1,_proxy:$,_context:J,_subProxy:Z,_stack:new Set,_descriptors:X6($,q),setContext:(Y)=>X2($,Y,Z,q),override:(Y)=>X2($.override(Y),J,Z,q)};return new Proxy(Q,{deleteProperty(Y,X){return delete Y[X],delete $[X],!0},get(Y,X,K){return iJ(Y,X,()=>vX(Y,X,K))},getOwnPropertyDescriptor(Y,X){return Y._descriptors.allKeys?Reflect.has($,X)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor($,X)},getPrototypeOf(){return Reflect.getPrototypeOf($)},has(Y,X){return Reflect.has($,X)},ownKeys(){return Reflect.ownKeys($)},set(Y,X,K){return $[X]=K,delete Y[X],!0}})}function X6($,J={scriptable:!0,indexable:!0}){let{_scriptable:Z=J.scriptable,_indexable:q=J.indexable,_allKeys:Q=J.allKeys}=$;return{allKeys:Q,scriptable:Z,indexable:q,isScriptable:I1(Z)?Z:()=>Z,isIndexable:I1(q)?q:()=>q}}var kX=($,J)=>$?$+l4(J):J,U6=($,J)=>l(J)&&$!=="adapters"&&(Object.getPrototypeOf(J)===null||J.constructor===Object);function iJ($,J,Z){if(Object.prototype.hasOwnProperty.call($,J)||J==="constructor")return $[J];let q=Z();return $[J]=q,q}function vX($,J,Z){let{_proxy:q,_context:Q,_subProxy:Y,_descriptors:X}=$,K=q[J];if(I1(K)&&X.isScriptable(J))K=EX(J,K,$,Z);if(T0(K)&&K.length)K=yX(J,K,$,X.isIndexable);if(U6(J,K))K=X2(K,Q,Y&&Y[J],X);return K}function EX($,J,Z,q){let{_proxy:Q,_context:Y,_subProxy:X,_stack:K}=Z;if(K.has($))throw new Error("Recursion detected: "+Array.from(K).join("->")+"->"+$);K.add($);let G=J(Y,X||q);if(K.delete($),U6($,G))G=K6(Q._scopes,Q,$,G);return G}function yX($,J,Z,q){let{_proxy:Q,_context:Y,_subProxy:X,_descriptors:K}=Z;if(typeof Y.index!=="undefined"&&q($))return J[Y.index%J.length];else if(l(J[0])){let G=J,B=Q._scopes.filter((w)=>w!==G);J=[];for(let w of G){let T=K6(B,Q,$,w);J.push(X2(T,Y,X&&X[$],K))}}return J}function nJ($,J,Z){return I1($)?$(J,Z):$}var gX=($,J)=>$===!0?J:typeof $==="string"?h2(J,$):void 0;function hX($,J,Z,q,Q){for(let Y of J){let X=gX(Z,Y);if(X){$.add(X);let K=nJ(X._fallback,Z,Q);if(typeof K!=="undefined"&&K!==Z&&K!==q)return K}else if(X===!1&&typeof q!=="undefined"&&Z!==q)return null}return!1}function K6($,J,Z,q){let Q=J._rootScopes,Y=nJ(J._fallback,Z,q),X=[...$,...Q],K=new Set;K.add(q);let G=DJ(K,X,Z,Y||Z,q);if(G===null)return!1;if(typeof Y!=="undefined"&&Y!==Z){if(G=DJ(K,X,Y,G,q),G===null)return!1}return $8(Array.from(K),[""],Q,Y,()=>uX(J,Z,q))}function DJ($,J,Z,q,Q){while(Z)Z=hX($,J,Z,q,Q);return Z}function uX($,J,Z){let q=$._getTarget();if(!(J in q))q[J]={};let Q=q[J];if(T0(Q)&&l(Z))return Z;return Q||{}}function xX($,J,Z,q){let Q;for(let Y of J)if(Q=aJ(kX(Y,$),Z),typeof Q!=="undefined")return U6($,Q)?K6(Z,q,$,Q):Q}function aJ($,J){for(let Z of J){if(!Z)continue;let q=Z[$];if(typeof q!=="undefined")return q}}function LJ($){let J=$._keys;if(!J)J=$._keys=mX($._scopes);return J}function mX($){let J=new Set;for(let Z of $)for(let q of Object.keys(Z).filter((Q)=>!Q.startsWith("_")))J.add(q);return Array.from(J)}var pX=Number.EPSILON||0.00000000000001,y2=($,J)=>J<$.length&&!$[J].skip&&$[J],tJ=($)=>$==="x"?"y":"x";function dX($,J,Z,q){let Q=$.skip?J:$,Y=J,X=Z.skip?J:Z,K=s4(Y,Q),G=s4(X,Y),B=K/(K+G),w=G/(K+G);B=isNaN(B)?0:B,w=isNaN(w)?0:w;let T=q*B,M=q*w;return{previous:{x:Y.x-T*(X.x-Q.x),y:Y.y-T*(X.y-Q.y)},next:{x:Y.x+M*(X.x-Q.x),y:Y.y+M*(X.y-Q.y)}}}function rX($,J,Z){let q=$.length,Q,Y,X,K,G,B=y2($,0);for(let w=0;w<q-1;++w){if(G=B,B=y2($,w+1),!G||!B)continue;if(u2(J[w],0,pX)){Z[w]=Z[w+1]=0;continue}if(Q=Z[w]/J[w],Y=Z[w+1]/J[w],K=Math.pow(Q,2)+Math.pow(Y,2),K<=9)continue;X=3/Math.sqrt(K),Z[w]=Q*X*J[w],Z[w+1]=Y*X*J[w]}}function cX($,J,Z="x"){let q=tJ(Z),Q=$.length,Y,X,K,G=y2($,0);for(let B=0;B<Q;++B){if(X=K,K=G,G=y2($,B+1),!K)continue;let w=K[Z],T=K[q];if(X)Y=(w-X[Z])/3,K[`cp1${Z}`]=w-Y,K[`cp1${q}`]=T-Y*J[B];if(G)Y=(G[Z]-w)/3,K[`cp2${Z}`]=w+Y,K[`cp2${q}`]=T+Y*J[B]}}function sX($,J="x"){let Z=tJ(J),q=$.length,Q=Array(q).fill(0),Y=Array(q),X,K,G,B=y2($,0);for(X=0;X<q;++X){if(K=G,G=B,B=y2($,X+1),!G)continue;if(B){let w=B[J]-G[J];Q[X]=w!==0?(B[Z]-G[Z])/w:0}Y[X]=!K?Q[X]:!B?Q[X-1]:Y2(Q[X-1])!==Y2(Q[X])?0:(Q[X-1]+Q[X])/2}rX($,Q,Y),cX($,Y,J)}function p4($,J,Z){return Math.max(Math.min($,Z),J)}function oX($,J){let Z,q,Q,Y,X,K=B1($[0],J);for(Z=0,q=$.length;Z<q;++Z){if(X=Y,Y=K,K=Z<q-1&&B1($[Z+1],J),!Y)continue;if(Q=$[Z],X)Q.cp1x=p4(Q.cp1x,J.left,J.right),Q.cp1y=p4(Q.cp1y,J.top,J.bottom);if(K)Q.cp2x=p4(Q.cp2x,J.left,J.right),Q.cp2y=p4(Q.cp2y,J.top,J.bottom)}}function eJ($,J,Z,q,Q){let Y,X,K,G;if(J.spanGaps)$=$.filter((B)=>!B.skip);if(J.cubicInterpolationMode==="monotone")sX($,Q);else{let B=q?$[$.length-1]:$[0];for(Y=0,X=$.length;Y<X;++Y)K=$[Y],G=dX(B,K,$[Math.min(Y+1,X-(q?0:1))%X],J.tension),K.cp1x=G.previous.x,K.cp1y=G.previous.y,K.cp2x=G.next.x,K.cp2y=G.next.y,B=K}if(J.capBezierPoints)oX($,Z)}function J8(){return typeof window!=="undefined"&&typeof document!=="undefined"}function Z8($){let J=$.parentNode;if(J&&J.toString()==="[object ShadowRoot]")J=J.host;return J}function o4($,J,Z){let q;if(typeof $==="string"){if(q=parseInt($,10),$.indexOf("%")!==-1)q=q/100*J.parentNode[Z]}else q=$;return q}var q8=($)=>$.ownerDocument.defaultView.getComputedStyle($,null);function lX($,J){return q8($).getPropertyValue(J)}var iX=["top","right","bottom","left"];function Q2($,J,Z){let q={};Z=Z?"-"+Z:"";for(let Q=0;Q<4;Q++){let Y=iX[Q];q[Y]=parseFloat($[J+"-"+Y+Z])||0}return q.width=q.left+q.right,q.height=q.top+q.bottom,q}var nX=($,J,Z)=>($>0||J>0)&&(!Z||!Z.shadowRoot);function aX($,J){let Z=$.touches,q=Z&&Z.length?Z[0]:$,{offsetX:Q,offsetY:Y}=q,X=!1,K,G;if(nX(Q,Y,$.target))K=Q,G=Y;else{let B=J.getBoundingClientRect();K=q.clientX-B.left,G=q.clientY-B.top,X=!0}return{x:K,y:G,box:X}}function s1($,J){if("native"in $)return $;let{canvas:Z,currentDevicePixelRatio:q}=J,Q=q8(Z),Y=Q.boxSizing==="border-box",X=Q2(Q,"padding"),K=Q2(Q,"border","width"),{x:G,y:B,box:w}=aX($,Z),T=X.left+(w&&K.left),M=X.top+(w&&K.top),{width:H,height:W}=J;if(Y)H-=X.width+K.width,W-=X.height+K.height;return{x:Math.round((G-T)/H*Z.width/q),y:Math.round((B-M)/W*Z.height/q)}}function tX($,J,Z){let q,Q;if(J===void 0||Z===void 0){let Y=$&&Z8($);if(!Y)J=$.clientWidth,Z=$.clientHeight;else{let X=Y.getBoundingClientRect(),K=q8(Y),G=Q2(K,"border","width"),B=Q2(K,"padding");J=X.width-B.width-G.width,Z=X.height-B.height-G.height,q=o4(K.maxWidth,Y,"clientWidth"),Q=o4(K.maxHeight,Y,"clientHeight")}}return{width:J,height:Z,maxWidth:q||c4,maxHeight:Q||c4}}var p1=($)=>Math.round($*10)/10;function $Z($,J,Z,q){let Q=q8($),Y=Q2(Q,"margin"),X=o4(Q.maxWidth,$,"clientWidth")||c4,K=o4(Q.maxHeight,$,"clientHeight")||c4,G=tX($,J,Z),{width:B,height:w}=G;if(Q.boxSizing==="content-box"){let M=Q2(Q,"border","width"),H=Q2(Q,"padding");B-=H.width+M.width,w-=H.height+M.height}if(B=Math.max(0,B-Y.width),w=Math.max(0,q?B/q:w-Y.height),B=p1(Math.min(B,X,G.maxWidth)),w=p1(Math.min(w,K,G.maxHeight)),B&&!w)w=p1(B/2);if((J!==void 0||Z!==void 0)&&q&&G.height&&w>G.height)w=G.height,B=p1(Math.floor(w*q));return{width:B,height:w}}function G6($,J,Z){let q=J||1,Q=p1($.height*q),Y=p1($.width*q);$.height=p1($.height),$.width=p1($.width);let X=$.canvas;if(X.style&&(Z||!X.style.height&&!X.style.width))X.style.height=`${$.height}px`,X.style.width=`${$.width}px`;if($.currentDevicePixelRatio!==q||X.height!==Q||X.width!==Y)return $.currentDevicePixelRatio=q,X.height=Q,X.width=Y,$.ctx.setTransform(q,0,0,q,0,0),!0;return!1}var JZ=function(){let $=!1;try{let J={get passive(){return $=!0,!1}};if(J8())window.addEventListener("test",null,J),window.removeEventListener("test",null,J)}catch(J){}return $}();function B6($,J){let Z=lX($,J),q=Z&&Z.match(/^(\d+)(\.\d+)?px$/);return q?+q[1]:void 0}function x1($,J,Z,q){return{x:$.x+Z*(J.x-$.x),y:$.y+Z*(J.y-$.y)}}function ZZ($,J,Z,q){return{x:$.x+Z*(J.x-$.x),y:q==="middle"?Z<0.5?$.y:J.y:q==="after"?Z<1?$.y:J.y:Z>0?J.y:$.y}}function qZ($,J,Z,q){let Q={x:$.cp2x,y:$.cp2y},Y={x:J.cp1x,y:J.cp1y},X=x1($,Q,Z),K=x1(Q,Y,Z),G=x1(Y,J,Z),B=x1(X,K,Z),w=x1(K,G,Z);return x1(B,w,Z)}var eX=function($,J){return{x(Z){return $+$+J-Z},setWidth(Z){J=Z},textAlign(Z){if(Z==="center")return Z;return Z==="right"?"left":"right"},xPlus(Z,q){return Z-q},leftForLtr(Z,q){return Z-q}}},$U=function(){return{x($){return $},setWidth($){},textAlign($){return $},xPlus($,J){return $+J},leftForLtr($,J){return $}}};function G2($,J,Z){return $?eX(J,Z):$U()}function w6($,J){let Z,q;if(J==="ltr"||J==="rtl")Z=$.canvas.style,q=[Z.getPropertyValue("direction"),Z.getPropertyPriority("direction")],Z.setProperty("direction",J,"important"),$.prevTextDirection=q}function T6($,J){if(J!==void 0)delete $.prevTextDirection,$.canvas.style.setProperty("direction",J[0],J[1])}function QZ($){if($==="angle")return{between:m2,compare:FX,normalize:b0};return{between:d1,compare:(J,Z)=>J-Z,normalize:(J)=>J}}function VJ({start:$,end:J,count:Z,loop:q,style:Q}){return{start:$%Z,end:J%Z,loop:q&&(J-$+1)%Z===0,style:Q}}function JU($,J,Z){let{property:q,start:Q,end:Y}=Z,{between:X,normalize:K}=QZ(q),G=J.length,{start:B,end:w,loop:T}=$,M,H;if(T){B+=G,w+=G;for(M=0,H=G;M<H;++M){if(!X(K(J[B%G][q]),Q,Y))break;B--,w--}B%=G,w%=G}if(w<B)w+=G;return{start:B,end:w,loop:T,style:$.style}}function M6($,J,Z){if(!Z)return[$];let{property:q,start:Q,end:Y}=Z,X=J.length,{compare:K,between:G,normalize:B}=QZ(q),{start:w,end:T,loop:M,style:H}=JU($,J,Z),W=[],z=!1,F=null,j,_,P,L=()=>G(Q,P,j)&&K(Q,P)!==0,D=()=>K(Y,j)===0||G(Y,P,j),C=()=>z||L(),S=()=>!z||D();for(let V=w,I=w;V<=T;++V){if(_=J[V%X],_.skip)continue;if(j=B(_[q]),j===P)continue;if(z=G(j,Q,Y),F===null&&C())F=K(j,Q)===0?V:I;if(F!==null&&S())W.push(VJ({start:F,end:V,loop:M,count:X,style:H})),F=null;I=V,P=j}if(F!==null)W.push(VJ({start:F,end:T,loop:M,count:X,style:H}));return W}function H6($,J){let Z=[],q=$.segments;for(let Q=0;Q<q.length;Q++){let Y=M6(q[Q],$.points,J);if(Y.length)Z.push(...Y)}return Z}function ZU($,J,Z,q){let Q=0,Y=J-1;if(Z&&!q)while(Q<J&&!$[Q].skip)Q++;while(Q<J&&$[Q].skip)Q++;if(Q%=J,Z)Y+=Q;while(Y>Q&&$[Y%J].skip)Y--;return Y%=J,{start:Q,end:Y}}function qU($,J,Z,q){let Q=$.length,Y=[],X=J,K=$[J],G;for(G=J+1;G<=Z;++G){let B=$[G%Q];if(B.skip||B.stop){if(!K.skip)q=!1,Y.push({start:J%Q,end:(G-1)%Q,loop:q}),J=X=B.stop?G:null}else if(X=G,K.skip)J=G;K=B}if(X!==null)Y.push({start:J%Q,end:X%Q,loop:q});return Y}function YZ($,J){let Z=$.points,q=$.options.spanGaps,Q=Z.length;if(!Q)return[];let Y=!!$._loop,{start:X,end:K}=ZU(Z,Q,Y,q);if(q===!0)return PJ($,[{start:X,end:K,loop:Y}],Z,J);let G=K<X?K+Q:K,B=!!$._fullLoop&&X===0&&K===Q-1;return PJ($,qU(Z,X,G,B),Z,J)}function PJ($,J,Z,q){if(!q||!q.setContext||!Z)return J;return QU($,J,Z,q)}function QU($,J,Z,q){let Q=$._chart.getContext(),Y=IJ($.options),{_datasetIndex:X,options:{spanGaps:K}}=$,G=Z.length,B=[],w=Y,T=J[0].start,M=T;function H(W,z,F,j){let _=K?-1:1;if(W===z)return;W+=G;while(Z[W%G].skip)W-=_;while(Z[z%G].skip)z+=_;if(W%G!==z%G)B.push({start:W%G,end:z%G,loop:F,style:j}),w=j,T=z%G}for(let W of J){T=K?T:W.start;let z=Z[T%G],F;for(M=T+1;M<=W.end;M++){let j=Z[M%G];if(F=IJ(q.setContext(C1(Q,{type:"segment",p0:z,p1:j,p0DataIndex:(M-1)%G,p1DataIndex:M%G,datasetIndex:X}))),YU(F,w))H(T,M-1,W.loop,w);z=j,w=F}if(T<M-1)H(T,M-1,W.loop,w)}return B}function IJ($){return{backgroundColor:$.backgroundColor,borderCapStyle:$.borderCapStyle,borderDash:$.borderDash,borderDashOffset:$.borderDashOffset,borderJoinStyle:$.borderJoinStyle,borderWidth:$.borderWidth,borderColor:$.borderColor}}function YU($,J){if(!J)return!1;let Z=[],q=function(Q,Y){if(!Z6(Y))return Y;if(!Z.includes(Y))Z.push(Y);return Z.indexOf(Y)};return JSON.stringify($,q)!==JSON.stringify(J,q)}function d4($,J,Z){return $.options.clip?$[Z]:J[Z]}function XU($,J){let{xScale:Z,yScale:q}=$;if(Z&&q)return{left:d4(Z,J,"left"),right:d4(Z,J,"right"),top:d4(q,J,"top"),bottom:d4(q,J,"bottom")};return J}function z6($,J){let Z=J._clip;if(Z.disabled)return!1;let q=XU(J,$.chartArea);return{left:Z.left===!1?0:q.left-(Z.left===!0?0:Z.left),right:Z.right===!1?$.width:q.right+(Z.right===!0?0:Z.right),top:Z.top===!1?0:q.top-(Z.top===!0?0:Z.top),bottom:Z.bottom===!1?$.height:q.bottom+(Z.bottom===!0?0:Z.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class eZ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify($,J,Z,q){let Q=J.listeners[q],Y=J.duration;Q.forEach((X)=>X({chart:$,initial:J.initial,numSteps:Y,currentStep:Math.min(Z-J.start,Y)}))}_refresh(){if(this._request)return;this._running=!0,this._request=e9.call(window,()=>{if(this._update(),this._request=null,this._running)this._refresh()})}_update($=Date.now()){let J=0;if(this._charts.forEach((Z,q)=>{if(!Z.running||!Z.items.length)return;let Q=Z.items,Y=Q.length-1,X=!1,K;for(;Y>=0;--Y)if(K=Q[Y],K._active){if(K._total>Z.duration)Z.duration=K._total;K.tick($),X=!0}else Q[Y]=Q[Q.length-1],Q.pop();if(X)q.draw(),this._notify(q,Z,$,"progress");if(!Q.length)Z.running=!1,this._notify(q,Z,$,"complete"),Z.initial=!1;J+=Q.length}),this._lastDate=$,J===0)this._running=!1}_getAnims($){let J=this._charts,Z=J.get($);if(!Z)Z={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},J.set($,Z);return Z}listen($,J,Z){this._getAnims($).listeners[J].push(Z)}add($,J){if(!J||!J.length)return;this._getAnims($).items.push(...J)}has($){return this._getAnims($).items.length>0}start($){let J=this._charts.get($);if(!J)return;J.running=!0,J.start=Date.now(),J.duration=J.items.reduce((Z,q)=>Math.max(Z,q._duration),0),this._refresh()}running($){if(!this._running)return!1;let J=this._charts.get($);if(!J||!J.running||!J.items.length)return!1;return!0}stop($){let J=this._charts.get($);if(!J||!J.items.length)return;let Z=J.items,q=Z.length-1;for(;q>=0;--q)Z[q].cancel();J.items=[],this._notify($,J,Date.now(),"complete")}remove($){return this._charts.delete($)}}var N1=new eZ,XZ="transparent",UU={boolean($,J,Z){return Z>0.5?J:$},color($,J,Z){let q=q6($||XZ),Q=q.valid&&q6(J||XZ);return Q&&Q.valid?Q.mix(q,Z).hexString():J},number($,J,Z){return $+(J-$)*Z}};class $q{constructor($,J,Z,q){let Q=J[Z];q=C5([$.to,q,Q,$.from]);let Y=C5([$.from,Q,q]);this._active=!0,this._fn=$.fn||UU[$.type||typeof Y],this._easing=v2[$.easing]||v2.linear,this._start=Math.floor(Date.now()+($.delay||0)),this._duration=this._total=Math.floor($.duration),this._loop=!!$.loop,this._target=J,this._prop=Z,this._from=Y,this._to=q,this._promises=void 0}active(){return this._active}update($,J,Z){if(this._active){this._notify(!1);let q=this._target[this._prop],Q=Z-this._start,Y=this._duration-Q;this._start=Z,this._duration=Math.floor(Math.max(Y,$.duration)),this._total+=Q,this._loop=!!$.loop,this._to=C5([$.to,J,q,$.from]),this._from=C5([$.from,q,J])}}cancel(){if(this._active)this.tick(Date.now()),this._active=!1,this._notify(!1)}tick($){let J=$-this._start,Z=this._duration,q=this._prop,Q=this._from,Y=this._loop,X=this._to,K;if(this._active=Q!==X&&(Y||J<Z),!this._active){this._target[q]=X,this._notify(!0);return}if(J<0){this._target[q]=Q;return}K=J/Z%2,K=Y&&K>1?2-K:K,K=this._easing(Math.min(1,Math.max(0,K))),this._target[q]=this._fn(Q,X,K)}wait(){let $=this._promises||(this._promises=[]);return new Promise((J,Z)=>{$.push({res:J,rej:Z})})}_notify($){let J=$?"res":"rej",Z=this._promises||[];for(let q=0;q<Z.length;q++)Z[q][J]()}}class f6{constructor($,J){this._chart=$,this._properties=new Map,this.configure(J)}configure($){if(!l($))return;let J=Object.keys(z0.animation),Z=this._properties;Object.getOwnPropertyNames($).forEach((q)=>{let Q=$[q];if(!l(Q))return;let Y={};for(let X of J)Y[X]=Q[X];(T0(Q.properties)&&Q.properties||[q]).forEach((X)=>{if(X===q||!Z.has(X))Z.set(X,Y)})})}_animateOptions($,J){let Z=J.options,q=GU($,Z);if(!q)return[];let Q=this._createAnimations(q,Z);if(Z.$shared)KU($.options.$animations,Z).then(()=>{$.options=Z},()=>{});return Q}_createAnimations($,J){let Z=this._properties,q=[],Q=$.$animations||($.$animations={}),Y=Object.keys(J),X=Date.now(),K;for(K=Y.length-1;K>=0;--K){let G=Y[K];if(G.charAt(0)==="$")continue;if(G==="options"){q.push(...this._animateOptions($,J));continue}let B=J[G],w=Q[G],T=Z.get(G);if(w)if(T&&w.active()){w.update(T,B,X);continue}else w.cancel();if(!T||!T.duration){$[G]=B;continue}Q[G]=w=new $q(T,$,G,B),q.push(w)}return q}update($,J){if(this._properties.size===0){Object.assign($,J);return}let Z=this._createAnimations($,J);if(Z.length)return N1.add(this._chart,Z),!0}}function KU($,J){let Z=[],q=Object.keys(J);for(let Q=0;Q<q.length;Q++){let Y=$[q[Q]];if(Y&&Y.active())Z.push(Y.wait())}return Promise.all(Z)}function GU($,J){if(!J)return;let Z=$.options;if(!Z){$.options=J;return}if(Z.$shared)$.options=Z=Object.assign({},Z,{$shared:!1,$animations:{}});return Z}function UZ($,J){let Z=$&&$.options||{},q=Z.reverse,Q=Z.min===void 0?J:0,Y=Z.max===void 0?J:0;return{start:q?Y:Q,end:q?Q:Y}}function BU($,J,Z){if(Z===!1)return!1;let q=UZ($,Z),Q=UZ(J,Z);return{top:Q.end,right:q.end,bottom:Q.start,left:q.start}}function wU($){let J,Z,q,Q;if(l($))J=$.top,Z=$.right,q=$.bottom,Q=$.left;else J=Z=q=Q=$;return{top:J,right:Z,bottom:q,left:Q,disabled:$===!1}}function Jq($,J){let Z=[],q=$._getSortedDatasetMetas(J),Q,Y;for(Q=0,Y=q.length;Q<Y;++Q)Z.push(q[Q].index);return Z}function KZ($,J,Z,q={}){let Q=$.keys,Y=q.mode==="single",X,K,G,B;if(J===null)return;let w=!1;for(X=0,K=Q.length;X<K;++X){if(G=+Q[X],G===Z){if(w=!0,q.all)continue;break}if(B=$.values[G],H0(B)&&(Y||J===0||Y2(J)===Y2(B)))J+=B}if(!w&&!q.all)return 0;return J}function TU($,J){let{iScale:Z,vScale:q}=J,Q=Z.axis==="x"?"x":"y",Y=q.axis==="x"?"x":"y",X=Object.keys($),K=new Array(X.length),G,B,w;for(G=0,B=X.length;G<B;++G)w=X[G],K[G]={[Q]:w,[Y]:$[w]};return K}function W6($,J){let Z=$&&$.options.stacked;return Z||Z===void 0&&J.stack!==void 0}function MU($,J,Z){return`${$.id}.${J.id}.${Z.stack||Z.type}`}function HU($){let{min:J,max:Z,minDefined:q,maxDefined:Q}=$.getUserBounds();return{min:q?J:Number.NEGATIVE_INFINITY,max:Q?Z:Number.POSITIVE_INFINITY}}function zU($,J,Z){let q=$[J]||($[J]={});return q[Z]||(q[Z]={})}function GZ($,J,Z,q){for(let Q of J.getMatchingVisibleMetas(q).reverse()){let Y=$[Q.index];if(Z&&Y>0||!Z&&Y<0)return Q.index}return null}function BZ($,J){let{chart:Z,_cachedMeta:q}=$,Q=Z._stacks||(Z._stacks={}),{iScale:Y,vScale:X,index:K}=q,G=Y.axis,B=X.axis,w=MU(Y,X,q),T=J.length,M;for(let H=0;H<T;++H){let W=J[H],{[G]:z,[B]:F}=W,j=W._stacks||(W._stacks={});M=j[B]=zU(Q,w,z),M[K]=F,M._top=GZ(M,X,!0,q.type),M._bottom=GZ(M,X,!1,q.type);let _=M._visualValues||(M._visualValues={});_[K]=F}}function F6($,J){let Z=$.scales;return Object.keys(Z).filter((q)=>Z[q].axis===J).shift()}function WU($,J){return C1($,{active:!1,dataset:void 0,datasetIndex:J,index:J,mode:"default",type:"dataset"})}function FU($,J,Z){return C1($,{active:!1,dataIndex:J,parsed:void 0,raw:void 0,element:Z,index:J,mode:"default",type:"data"})}function N5($,J){let Z=$.controller.index,q=$.vScale&&$.vScale.axis;if(!q)return;J=J||$._parsed;for(let Q of J){let Y=Q._stacks;if(!Y||Y[q]===void 0||Y[q][Z]===void 0)return;if(delete Y[q][Z],Y[q]._visualValues!==void 0&&Y[q]._visualValues[Z]!==void 0)delete Y[q]._visualValues[Z]}}var j6=($)=>$==="reset"||$==="none",wZ=($,J)=>J?$:Object.assign({},$),jU=($,J,Z)=>$&&!J.hidden&&J._stacked&&{keys:Jq(Z,!0),values:null};class M8{static defaults={};static datasetElementType=null;static dataElementType=null;constructor($,J){this.chart=$,this._ctx=$.ctx,this.index=J,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let $=this._cachedMeta;if(this.configure(),this.linkScales(),$._stacked=W6($.vScale,$),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler"))console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex($){if(this.index!==$)N5(this._cachedMeta);this.index=$}linkScales(){let $=this.chart,J=this._cachedMeta,Z=this.getDataset(),q=(w,T,M,H)=>w==="x"?T:w==="r"?H:M,Q=J.xAxisID=s(Z.xAxisID,F6($,"x")),Y=J.yAxisID=s(Z.yAxisID,F6($,"y")),X=J.rAxisID=s(Z.rAxisID,F6($,"r")),K=J.indexAxis,G=J.iAxisID=q(K,Q,Y,X),B=J.vAxisID=q(K,Y,Q,X);J.xScale=this.getScaleForId(Q),J.yScale=this.getScaleForId(Y),J.rScale=this.getScaleForId(X),J.iScale=this.getScaleForId(G),J.vScale=this.getScaleForId(B)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId($){return this.chart.scales[$]}_getOtherScale($){let J=this._cachedMeta;return $===J.iScale?J.vScale:J.iScale}reset(){this._update("reset")}_destroy(){let $=this._cachedMeta;if(this._data)t9(this._data,this);if($._stacked)N5($)}_dataCheck(){let $=this.getDataset(),J=$.data||($.data=[]),Z=this._data;if(l(J)){let q=this._cachedMeta;this._data=TU(J,q)}else if(Z!==J){if(Z){t9(Z,this);let q=this._cachedMeta;N5(q),q._parsed=[]}if(J&&Object.isExtensible(J))yJ(J,this);this._syncList=[],this._data=J}}addElements(){let $=this._cachedMeta;if(this._dataCheck(),this.datasetElementType)$.dataset=new this.datasetElementType}buildOrUpdateElements($){let J=this._cachedMeta,Z=this.getDataset(),q=!1;this._dataCheck();let Q=J._stacked;if(J._stacked=W6(J.vScale,J),J.stack!==Z.stack)q=!0,N5(J),J.stack=Z.stack;if(this._resyncElements($),q||Q!==J._stacked)BZ(this,J._parsed),J._stacked=W6(J.vScale,J)}configure(){let $=this.chart.config,J=$.datasetScopeKeys(this._type),Z=$.getOptionScopes(this.getDataset(),J,!0);this.options=$.createResolver(Z,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse($,J){let{_cachedMeta:Z,_data:q}=this,{iScale:Q,_stacked:Y}=Z,X=Q.axis,K=$===0&&J===q.length?!0:Z._sorted,G=$>0&&Z._parsed[$-1],B,w,T;if(this._parsing===!1)Z._parsed=q,Z._sorted=!0,T=q;else{if(T0(q[$]))T=this.parseArrayData(Z,q,$,J);else if(l(q[$]))T=this.parseObjectData(Z,q,$,J);else T=this.parsePrimitiveData(Z,q,$,J);let M=()=>w[X]===null||G&&w[X]<G[X];for(B=0;B<J;++B)if(Z._parsed[B+$]=w=T[B],K){if(M())K=!1;G=w}Z._sorted=K}if(Y)BZ(this,T)}parsePrimitiveData($,J,Z,q){let{iScale:Q,vScale:Y}=$,X=Q.axis,K=Y.axis,G=Q.getLabels(),B=Q===Y,w=new Array(q),T,M,H;for(T=0,M=q;T<M;++T)H=T+Z,w[T]={[X]:B||Q.parse(G[H],H),[K]:Y.parse(J[H],H)};return w}parseArrayData($,J,Z,q){let{xScale:Q,yScale:Y}=$,X=new Array(q),K,G,B,w;for(K=0,G=q;K<G;++K)B=K+Z,w=J[B],X[K]={x:Q.parse(w[0],B),y:Y.parse(w[1],B)};return X}parseObjectData($,J,Z,q){let{xScale:Q,yScale:Y}=$,{xAxisKey:X="x",yAxisKey:K="y"}=this._parsing,G=new Array(q),B,w,T,M;for(B=0,w=q;B<w;++B)T=B+Z,M=J[T],G[B]={x:Q.parse(h2(M,X),T),y:Y.parse(h2(M,K),T)};return G}getParsed($){return this._cachedMeta._parsed[$]}getDataElement($){return this._cachedMeta.data[$]}applyStack($,J,Z){let q=this.chart,Q=this._cachedMeta,Y=J[$.axis],X={keys:Jq(q,!0),values:J._stacks[$.axis]._visualValues};return KZ(X,Y,Q.index,{mode:Z})}updateRangeFromParsed($,J,Z,q){let Q=Z[J.axis],Y=Q===null?NaN:Q,X=q&&Z._stacks[J.axis];if(q&&X)q.values=X,Y=KZ(q,Q,this._cachedMeta.index);$.min=Math.min($.min,Y),$.max=Math.max($.max,Y)}getMinMax($,J){let Z=this._cachedMeta,q=Z._parsed,Q=Z._sorted&&$===Z.iScale,Y=q.length,X=this._getOtherScale($),K=jU(J,Z,this.chart),G={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:B,max:w}=HU(X),T,M;function H(){M=q[T];let W=M[X.axis];return!H0(M[$.axis])||B>W||w<W}for(T=0;T<Y;++T){if(H())continue;if(this.updateRangeFromParsed(G,$,M,K),Q)break}if(Q)for(T=Y-1;T>=0;--T){if(H())continue;this.updateRangeFromParsed(G,$,M,K);break}return G}getAllParsedValues($){let J=this._cachedMeta._parsed,Z=[],q,Q,Y;for(q=0,Q=J.length;q<Q;++q)if(Y=J[q][$.axis],H0(Y))Z.push(Y);return Z}getMaxOverflow(){return!1}getLabelAndValue($){let J=this._cachedMeta,Z=J.iScale,q=J.vScale,Q=this.getParsed($);return{label:Z?""+Z.getLabelForValue(Q[Z.axis]):"",value:q?""+q.getLabelForValue(Q[q.axis]):""}}_update($){let J=this._cachedMeta;this.update($||"default"),J._clip=wU(s(this.options.clip,BU(J.xScale,J.yScale,this.getMaxOverflow())))}update($){}draw(){let $=this._ctx,J=this.chart,Z=this._cachedMeta,q=Z.data||[],Q=J.chartArea,Y=[],X=this._drawStart||0,K=this._drawCount||q.length-X,G=this.options.drawActiveElementsOnTop,B;if(Z.dataset)Z.dataset.draw($,Q,X,K);for(B=X;B<X+K;++B){let w=q[B];if(w.hidden)continue;if(w.active&&G)Y.push(w);else w.draw($,Q)}for(B=0;B<Y.length;++B)Y[B].draw($,Q)}getStyle($,J){let Z=J?"active":"default";return $===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(Z):this.resolveDataElementOptions($||0,Z)}getContext($,J,Z){let q=this.getDataset(),Q;if($>=0&&$<this._cachedMeta.data.length){let Y=this._cachedMeta.data[$];Q=Y.$context||(Y.$context=FU(this.getContext(),$,Y)),Q.parsed=this.getParsed($),Q.raw=q.data[$],Q.index=Q.dataIndex=$}else Q=this.$context||(this.$context=WU(this.chart.getContext(),this.index)),Q.dataset=q,Q.index=Q.datasetIndex=this.index;return Q.active=!!J,Q.mode=Z,Q}resolveDatasetElementOptions($){return this._resolveElementOptions(this.datasetElementType.id,$)}resolveDataElementOptions($,J){return this._resolveElementOptions(this.dataElementType.id,J,$)}_resolveElementOptions($,J="default",Z){let q=J==="active",Q=this._cachedDataOpts,Y=$+"-"+J,X=Q[Y],K=this.enableOptionSharing&&D5(Z);if(X)return wZ(X,K);let G=this.chart.config,B=G.datasetElementScopeKeys(this._type,$),w=q?[`${$}Hover`,"hover",$,""]:[$,""],T=G.getOptionScopes(this.getDataset(),B),M=Object.keys(z0.elements[$]),H=()=>this.getContext(Z,q,J),W=G.resolveNamedOptions(T,M,H,w);if(W.$shared)W.$shared=K,Q[Y]=Object.freeze(wZ(W,K));return W}_resolveAnimations($,J,Z){let q=this.chart,Q=this._cachedDataOpts,Y=`animation-${J}`,X=Q[Y];if(X)return X;let K;if(q.options.animation!==!1){let B=this.chart.config,w=B.datasetAnimationScopeKeys(this._type,J),T=B.getOptionScopes(this.getDataset(),w);K=B.createResolver(T,this.getContext($,Z,J))}let G=new f6(q,K&&K.animations);if(K&&K._cacheable)Q[Y]=Object.freeze(G);return G}getSharedOptions($){if(!$.$shared)return;return this._sharedOptions||(this._sharedOptions=Object.assign({},$))}includeOptions($,J){return!J||j6($)||this.chart._animationsDisabled}_getSharedOptions($,J){let Z=this.resolveDataElementOptions($,J),q=this._sharedOptions,Q=this.getSharedOptions(Z),Y=this.includeOptions(J,Q)||Q!==q;return this.updateSharedOptions(Q,J,Z),{sharedOptions:Q,includeOptions:Y}}updateElement($,J,Z,q){if(j6(q))Object.assign($,Z);else this._resolveAnimations(J,q).update($,Z)}updateSharedOptions($,J,Z){if($&&!j6(J))this._resolveAnimations(void 0,J).update($,Z)}_setStyle($,J,Z,q){$.active=q;let Q=this.getStyle(J,q);this._resolveAnimations(J,Z,q).update($,{options:!q&&this.getSharedOptions(Q)||Q})}removeHoverStyle($,J,Z){this._setStyle($,Z,"active",!1)}setHoverStyle($,J,Z){this._setStyle($,Z,"active",!0)}_removeDatasetHoverStyle(){let $=this._cachedMeta.dataset;if($)this._setStyle($,void 0,"active",!1)}_setDatasetHoverStyle(){let $=this._cachedMeta.dataset;if($)this._setStyle($,void 0,"active",!0)}_resyncElements($){let J=this._data,Z=this._cachedMeta.data;for(let[X,K,G]of this._syncList)this[X](K,G);this._syncList=[];let q=Z.length,Q=J.length,Y=Math.min(Q,q);if(Y)this.parse(0,Y);if(Q>q)this._insertElements(q,Q-q,$);else if(Q<q)this._removeElements(Q,q-Q)}_insertElements($,J,Z=!0){let q=this._cachedMeta,Q=q.data,Y=$+J,X,K=(G)=>{G.length+=J;for(X=G.length-1;X>=Y;X--)G[X]=G[X-J]};K(Q);for(X=$;X<Y;++X)Q[X]=new this.dataElementType;if(this._parsing)K(q._parsed);if(this.parse($,J),Z)this.updateElements(Q,$,J,"reset")}updateElements($,J,Z,q){}_removeElements($,J){let Z=this._cachedMeta;if(this._parsing){let q=Z._parsed.splice($,J);if(Z._stacked)N5(Z,q)}Z.data.splice($,J)}_sync($){if(this._parsing)this._syncList.push($);else{let[J,Z,q]=$;this[J](Z,q)}this.chart._dataChanges.push([this.index,...$])}_onDataPush(){let $=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-$,$])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice($,J){if(J)this._sync(["_removeElements",$,J]);let Z=arguments.length-2;if(Z)this._sync(["_insertElements",$,Z])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function RU($,J,Z){let q=1,Q=1,Y=0,X=0;if(J<B0){let K=$,G=K+J,B=Math.cos(K),w=Math.sin(K),T=Math.cos(G),M=Math.sin(G),H=(P,L,D)=>m2(P,K,G,!0)?1:Math.max(L,L*Z,D,D*Z),W=(P,L,D)=>m2(P,K,G,!0)?-1:Math.min(L,L*Z,D,D*Z),z=H(0,B,T),F=H(j0,w,M),j=W(e,B,T),_=W(e+j0,w,M);q=(z-j)/2,Q=(F-_)/2,Y=-(z+j)/2,X=-(F+_)/2}return{ratioX:q,ratioY:Q,offsetX:Y,offsetY:X}}class k6 extends M8{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:($)=>$!=="spacing",_indexable:($)=>$!=="spacing"&&!$.startsWith("borderDash")&&!$.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels($){let J=$.data,{labels:{pointStyle:Z,textAlign:q,color:Q,useBorderRadius:Y,borderRadius:X}}=$.legend.options;if(J.labels.length&&J.datasets.length)return J.labels.map((K,G)=>{let w=$.getDatasetMeta(0).controller.getStyle(G);return{text:K,fillStyle:w.backgroundColor,fontColor:Q,hidden:!$.getDataVisibility(G),lineDash:w.borderDash,lineDashOffset:w.borderDashOffset,lineJoin:w.borderJoinStyle,lineWidth:w.borderWidth,strokeStyle:w.borderColor,textAlign:q,pointStyle:Z,borderRadius:Y&&(X||w.borderRadius),index:G}});return[]}},onClick($,J,Z){Z.chart.toggleDataVisibility(J.index),Z.chart.update()}}}};constructor($,J){super($,J);this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse($,J){let Z=this.getDataset().data,q=this._cachedMeta;if(this._parsing===!1)q._parsed=Z;else{let Q=(K)=>+Z[K];if(l(Z[$])){let{key:K="value"}=this._parsing;Q=(G)=>+h2(Z[G],K)}let Y,X;for(Y=$,X=$+J;Y<X;++Y)q._parsed[Y]=Q(Y)}}_getRotation(){return X1(this.options.rotation-90)}_getCircumference(){return X1(this.options.circumference)}_getRotationExtents(){let $=B0,J=-B0;for(let Z=0;Z<this.chart.data.datasets.length;++Z)if(this.chart.isDatasetVisible(Z)&&this.chart.getDatasetMeta(Z).type===this._type){let q=this.chart.getDatasetMeta(Z).controller,Q=q._getRotation(),Y=q._getCircumference();$=Math.min($,Q),J=Math.max(J,Q+Y)}return{rotation:$,circumference:J-$}}update($){let J=this.chart,{chartArea:Z}=J,q=this._cachedMeta,Q=q.data,Y=this.getMaxBorderWidth()+this.getMaxOffset(Q)+this.options.spacing,X=Math.max((Math.min(Z.width,Z.height)-Y)/2,0),K=Math.min(CJ(this.options.cutout,X),1),G=this._getRingWeight(this.index),{circumference:B,rotation:w}=this._getRotationExtents(),{ratioX:T,ratioY:M,offsetX:H,offsetY:W}=RU(w,B,K),z=(Z.width-Y)/T,F=(Z.height-Y)/M,j=Math.max(Math.min(z,F)/2,0),_=s9(this.options.radius,j),P=Math.max(_*K,0),L=(_-P)/this._getVisibleDatasetWeightTotal();this.offsetX=H*_,this.offsetY=W*_,q.total=this.calculateTotal(),this.outerRadius=_-L*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-L*G,0),this.updateElements(Q,0,Q.length,$)}_circumference($,J){let Z=this.options,q=this._cachedMeta,Q=this._getCircumference();if(J&&Z.animation.animateRotate||!this.chart.getDataVisibility($)||q._parsed[$]===null||q.data[$].hidden)return 0;return this.calculateCircumference(q._parsed[$]*Q/B0)}updateElements($,J,Z,q){let Q=q==="reset",Y=this.chart,X=Y.chartArea,G=Y.options.animation,B=(X.left+X.right)/2,w=(X.top+X.bottom)/2,T=Q&&G.animateScale,M=T?0:this.innerRadius,H=T?0:this.outerRadius,{sharedOptions:W,includeOptions:z}=this._getSharedOptions(J,q),F=this._getRotation(),j;for(j=0;j<J;++j)F+=this._circumference(j,Q);for(j=J;j<J+Z;++j){let _=this._circumference(j,Q),P=$[j],L={x:B+this.offsetX,y:w+this.offsetY,startAngle:F,endAngle:F+_,circumference:_,outerRadius:H,innerRadius:M};if(z)L.options=W||this.resolveDataElementOptions(j,P.active?"active":q);F+=_,this.updateElement(P,j,L,q)}}calculateTotal(){let $=this._cachedMeta,J=$.data,Z=0,q;for(q=0;q<J.length;q++){let Q=$._parsed[q];if(Q!==null&&!isNaN(Q)&&this.chart.getDataVisibility(q)&&!J[q].hidden)Z+=Math.abs(Q)}return Z}calculateCircumference($){let J=this._cachedMeta.total;if(J>0&&!isNaN($))return B0*(Math.abs($)/J);return 0}getLabelAndValue($){let J=this._cachedMeta,Z=this.chart,q=Z.data.labels||[],Q=L5(J._parsed[$],Z.options.locale);return{label:q[$]||"",value:Q}}getMaxBorderWidth($){let J=0,Z=this.chart,q,Q,Y,X,K;if(!$){for(q=0,Q=Z.data.datasets.length;q<Q;++q)if(Z.isDatasetVisible(q)){Y=Z.getDatasetMeta(q),$=Y.data,X=Y.controller;break}}if(!$)return 0;for(q=0,Q=$.length;q<Q;++q)if(K=X.resolveDataElementOptions(q),K.borderAlign!=="inner")J=Math.max(J,K.borderWidth||0,K.hoverBorderWidth||0);return J}getMaxOffset($){let J=0;for(let Z=0,q=$.length;Z<q;++Z){let Q=this.resolveDataElementOptions(Z);J=Math.max(J,Q.offset||0,Q.hoverOffset||0)}return J}_getRingWeightOffset($){let J=0;for(let Z=0;Z<$;++Z)if(this.chart.isDatasetVisible(Z))J+=this._getRingWeight(Z);return J}_getRingWeight($){return Math.max(s(this.chart.data.datasets[$].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class v6 extends M8{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update($){let J=this._cachedMeta,{dataset:Z,data:q=[],_dataset:Q}=J,Y=this.chart._animationsDisabled,{start:X,count:K}=xJ(J,q,Y);if(this._drawStart=X,this._drawCount=K,mJ(J))X=0,K=q.length;Z._chart=this.chart,Z._datasetIndex=this.index,Z._decimated=!!Q._decimated,Z.points=q;let G=this.resolveDatasetElementOptions($);if(!this.options.showLine)G.borderWidth=0;G.segment=this.options.segment,this.updateElement(Z,void 0,{animated:!Y,options:G},$),this.updateElements(q,X,K,$)}updateElements($,J,Z,q){let Q=q==="reset",{iScale:Y,vScale:X,_stacked:K,_dataset:G}=this._cachedMeta,{sharedOptions:B,includeOptions:w}=this._getSharedOptions(J,q),T=Y.axis,M=X.axis,{spanGaps:H,segment:W}=this.options,z=x2(H)?H:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||Q||q==="none",j=J+Z,_=$.length,P=J>0&&this.getParsed(J-1);for(let L=0;L<_;++L){let D=$[L],C=F?D:{};if(L<J||L>=j){C.skip=!0;continue}let S=this.getParsed(L),V=$0(S[M]),I=C[T]=Y.getPixelForValue(S[T],L),g=C[M]=Q||V?X.getBasePixel():X.getPixelForValue(K?this.applyStack(X,S,K):S[M],L);if(C.skip=isNaN(I)||isNaN(g)||V,C.stop=L>0&&Math.abs(S[T]-P[T])>z,W)C.parsed=S,C.raw=G.data[L];if(w)C.options=B||this.resolveDataElementOptions(L,D.active?"active":q);if(!F)this.updateElement(D,L,C,q);P=S}}getMaxOverflow(){let $=this._cachedMeta,J=$.dataset,Z=J.options&&J.options.borderWidth||0,q=$.data||[];if(!q.length)return Z;let Q=q[0].size(this.resolveDataElementOptions(0)),Y=q[q.length-1].size(this.resolveDataElementOptions(q.length-1));return Math.max(Z,Q,Y)/2}draw(){let $=this._cachedMeta;$.dataset.updateControlPoints(this.chart.chartArea,$.iScale.axis),super.draw()}}function B2(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class E6{static override($){Object.assign(E6.prototype,$)}options;constructor($){this.options=$||{}}init(){}formats(){return B2()}parse(){return B2()}format(){return B2()}add(){return B2()}diff(){return B2()}startOf(){return B2()}endOf(){return B2()}}var _U={_date:E6};function DU($,J,Z,q){let{controller:Q,data:Y,_sorted:X}=$,K=Q._cachedMeta.iScale,G=$.dataset?$.dataset.options?$.dataset.options.spanGaps:null:null;if(K&&J===K.axis&&J!=="r"&&X&&Y.length){let B=K._reversePixels?kJ:m1;if(!q){let w=B(Y,J,Z);if(G){let{vScale:T}=Q._cachedMeta,{_parsed:M}=$,H=M.slice(0,w.lo+1).reverse().findIndex((z)=>!$0(z[T.axis]));w.lo-=Math.max(0,H);let W=M.slice(w.hi).findIndex((z)=>!$0(z[T.axis]));w.hi+=Math.max(0,W)}return w}else if(Q._sharedOptions){let w=Y[0],T=typeof w.getRange==="function"&&w.getRange(J);if(T){let M=B(Y,J,Z-T),H=B(Y,J,Z+T);return{lo:M.lo,hi:H.hi}}}}return{lo:0,hi:Y.length-1}}function u5($,J,Z,q,Q){let Y=$.getSortedVisibleDatasetMetas(),X=Z[J];for(let K=0,G=Y.length;K<G;++K){let{index:B,data:w}=Y[K],{lo:T,hi:M}=DU(Y[K],J,X,Q);for(let H=T;H<=M;++H){let W=w[H];if(!W.skip)q(W,B,H)}}}function LU($){let J=$.indexOf("x")!==-1,Z=$.indexOf("y")!==-1;return function(q,Q){let Y=J?Math.abs(q.x-Q.x):0,X=Z?Math.abs(q.y-Q.y):0;return Math.sqrt(Math.pow(Y,2)+Math.pow(X,2))}}function R6($,J,Z,q,Q){let Y=[];if(!Q&&!$.isPointInArea(J))return Y;return u5($,Z,J,function(K,G,B){if(!Q&&!B1(K,$.chartArea,0))return;if(K.inRange(J.x,J.y,q))Y.push({element:K,datasetIndex:G,index:B})},!0),Y}function VU($,J,Z,q){let Q=[];function Y(X,K,G){let{startAngle:B,endAngle:w}=X.getProps(["startAngle","endAngle"],q),{angle:T}=a9(X,{x:J.x,y:J.y});if(m2(T,B,w))Q.push({element:X,datasetIndex:K,index:G})}return u5($,Z,J,Y),Q}function PU($,J,Z,q,Q,Y){let X=[],K=LU(Z),G=Number.POSITIVE_INFINITY;function B(w,T,M){let H=w.inRange(J.x,J.y,Q);if(q&&!H)return;let W=w.getCenterPoint(Q);if(!(!!Y||$.isPointInArea(W))&&!H)return;let F=K(J,W);if(F<G)X=[{element:w,datasetIndex:T,index:M}],G=F;else if(F===G)X.push({element:w,datasetIndex:T,index:M})}return u5($,Z,J,B),X}function _6($,J,Z,q,Q,Y){if(!Y&&!$.isPointInArea(J))return[];return Z==="r"&&!q?VU($,J,Z,Q):PU($,J,Z,q,Q,Y)}function TZ($,J,Z,q,Q){let Y=[],X=Z==="x"?"inXRange":"inYRange",K=!1;if(u5($,Z,J,(G,B,w)=>{if(G[X]&&G[X](J[Z],Q))Y.push({element:G,datasetIndex:B,index:w}),K=K||G.inRange(J.x,J.y,Q)}),q&&!K)return[];return Y}var IU={evaluateInteractionItems:u5,modes:{index($,J,Z,q){let Q=s1(J,$),Y=Z.axis||"x",X=Z.includeInvisible||!1,K=Z.intersect?R6($,Q,Y,q,X):_6($,Q,Y,!1,q,X),G=[];if(!K.length)return[];return $.getSortedVisibleDatasetMetas().forEach((B)=>{let w=K[0].index,T=B.data[w];if(T&&!T.skip)G.push({element:T,datasetIndex:B.index,index:w})}),G},dataset($,J,Z,q){let Q=s1(J,$),Y=Z.axis||"xy",X=Z.includeInvisible||!1,K=Z.intersect?R6($,Q,Y,q,X):_6($,Q,Y,!1,q,X);if(K.length>0){let G=K[0].datasetIndex,B=$.getDatasetMeta(G).data;K=[];for(let w=0;w<B.length;++w)K.push({element:B[w],datasetIndex:G,index:w})}return K},point($,J,Z,q){let Q=s1(J,$),Y=Z.axis||"xy",X=Z.includeInvisible||!1;return R6($,Q,Y,q,X)},nearest($,J,Z,q){let Q=s1(J,$),Y=Z.axis||"xy",X=Z.includeInvisible||!1;return _6($,Q,Y,Z.intersect,q,X)},x($,J,Z,q){let Q=s1(J,$);return TZ($,Q,"x",Z.intersect,q)},y($,J,Z,q){let Q=s1(J,$);return TZ($,Q,"y",Z.intersect,q)}}},Zq=["left","top","right","bottom"];function O5($,J){return $.filter((Z)=>Z.pos===J)}function MZ($,J){return $.filter((Z)=>Zq.indexOf(Z.pos)===-1&&Z.box.axis===J)}function A5($,J){return $.sort((Z,q)=>{let Q=J?q:Z,Y=J?Z:q;return Q.weight===Y.weight?Q.index-Y.index:Q.weight-Y.weight})}function SU($){let J=[],Z,q,Q,Y,X,K;for(Z=0,q=($||[]).length;Z<q;++Z)Q=$[Z],{position:Y,options:{stack:X,stackWeight:K=1}}=Q,J.push({index:Z,box:Q,pos:Y,horizontal:Q.isHorizontal(),weight:Q.weight,stack:X&&Y+X,stackWeight:K});return J}function CU($){let J={};for(let Z of $){let{stack:q,pos:Q,stackWeight:Y}=Z;if(!q||!Zq.includes(Q))continue;let X=J[q]||(J[q]={count:0,placed:0,weight:0,size:0});X.count++,X.weight+=Y}return J}function NU($,J){let Z=CU($),{vBoxMaxWidth:q,hBoxMaxHeight:Q}=J,Y,X,K;for(Y=0,X=$.length;Y<X;++Y){K=$[Y];let{fullSize:G}=K.box,B=Z[K.stack],w=B&&K.stackWeight/B.weight;if(K.horizontal)K.width=w?w*q:G&&J.availableWidth,K.height=Q;else K.width=q,K.height=w?w*Q:G&&J.availableHeight}return Z}function OU($){let J=SU($),Z=A5(J.filter((B)=>B.box.fullSize),!0),q=A5(O5(J,"left"),!0),Q=A5(O5(J,"right")),Y=A5(O5(J,"top"),!0),X=A5(O5(J,"bottom")),K=MZ(J,"x"),G=MZ(J,"y");return{fullSize:Z,leftAndTop:q.concat(Y),rightAndBottom:Q.concat(G).concat(X).concat(K),chartArea:O5(J,"chartArea"),vertical:q.concat(Q).concat(G),horizontal:Y.concat(X).concat(K)}}function HZ($,J,Z,q){return Math.max($[Z],J[Z])+Math.max($[q],J[q])}function qq($,J){$.top=Math.max($.top,J.top),$.left=Math.max($.left,J.left),$.bottom=Math.max($.bottom,J.bottom),$.right=Math.max($.right,J.right)}function AU($,J,Z,q){let{pos:Q,box:Y}=Z,X=$.maxPadding;if(!l(Q)){if(Z.size)$[Q]-=Z.size;let T=q[Z.stack]||{size:0,count:1};T.size=Math.max(T.size,Z.horizontal?Y.height:Y.width),Z.size=T.size/T.count,$[Q]+=Z.size}if(Y.getPadding)qq(X,Y.getPadding());let K=Math.max(0,J.outerWidth-HZ(X,$,"left","right")),G=Math.max(0,J.outerHeight-HZ(X,$,"top","bottom")),B=K!==$.w,w=G!==$.h;return $.w=K,$.h=G,Z.horizontal?{same:B,other:w}:{same:w,other:B}}function bU($){let J=$.maxPadding;function Z(q){let Q=Math.max(J[q]-$[q],0);return $[q]+=Q,Q}$.y+=Z("top"),$.x+=Z("left"),Z("right"),Z("bottom")}function fU($,J){let Z=J.maxPadding;function q(Q){let Y={left:0,top:0,right:0,bottom:0};return Q.forEach((X)=>{Y[X]=Math.max(J[X],Z[X])}),Y}return $?q(["left","right"]):q(["top","bottom"])}function k5($,J,Z,q){let Q=[],Y,X,K,G,B,w;for(Y=0,X=$.length,B=0;Y<X;++Y){K=$[Y],G=K.box,G.update(K.width||J.w,K.height||J.h,fU(K.horizontal,J));let{same:T,other:M}=AU(J,Z,K,q);if(B|=T&&Q.length,w=w||M,!G.fullSize)Q.push(K)}return B&&k5(Q,J,Z,q)||w}function Q8($,J,Z,q,Q){$.top=Z,$.left=J,$.right=J+q,$.bottom=Z+Q,$.width=q,$.height=Q}function zZ($,J,Z,q){let Q=Z.padding,{x:Y,y:X}=J;for(let K of $){let G=K.box,B=q[K.stack]||{count:1,placed:0,weight:1},w=K.stackWeight/B.weight||1;if(K.horizontal){let T=J.w*w,M=B.size||G.height;if(D5(B.start))X=B.start;if(G.fullSize)Q8(G,Q.left,X,Z.outerWidth-Q.right-Q.left,M);else Q8(G,J.left+B.placed,X,T,M);B.start=X,B.placed+=T,X=G.bottom}else{let T=J.h*w,M=B.size||G.width;if(D5(B.start))Y=B.start;if(G.fullSize)Q8(G,Y,Q.top,M,Z.outerHeight-Q.bottom-Q.top);else Q8(G,Y,J.top+B.placed,M,T);B.start=Y,B.placed+=T,Y=G.right}}J.x=Y,J.y=X}var o1={addBox($,J){if(!$.boxes)$.boxes=[];J.fullSize=J.fullSize||!1,J.position=J.position||"top",J.weight=J.weight||0,J._layers=J._layers||function(){return[{z:0,draw(Z){J.draw(Z)}}]},$.boxes.push(J)},removeBox($,J){let Z=$.boxes?$.boxes.indexOf(J):-1;if(Z!==-1)$.boxes.splice(Z,1)},configure($,J,Z){J.fullSize=Z.fullSize,J.position=Z.position,J.weight=Z.weight},update($,J,Z,q){if(!$)return;let Q=E0($.options.layout.padding),Y=Math.max(J-Q.width,0),X=Math.max(Z-Q.height,0),K=OU($.boxes),G=K.vertical,B=K.horizontal;J0($.boxes,(z)=>{if(typeof z.beforeLayout==="function")z.beforeLayout()});let w=G.reduce((z,F)=>F.box.options&&F.box.options.display===!1?z:z+1,0)||1,T=Object.freeze({outerWidth:J,outerHeight:Z,padding:Q,availableWidth:Y,availableHeight:X,vBoxMaxWidth:Y/2/w,hBoxMaxHeight:X/2}),M=Object.assign({},Q);qq(M,E0(q));let H=Object.assign({maxPadding:M,w:Y,h:X,x:Q.left,y:Q.top},Q),W=NU(G.concat(B),T);if(k5(K.fullSize,H,T,W),k5(G,H,T,W),k5(B,H,T,W))k5(G,H,T,W);bU(H),zZ(K.leftAndTop,H,T,W),H.x+=H.w,H.y+=H.h,zZ(K.rightAndBottom,H,T,W),$.chartArea={left:H.left,top:H.top,right:H.left+H.w,bottom:H.top+H.h,height:H.h,width:H.w},J0(K.chartArea,(z)=>{let F=z.box;Object.assign(F,$.chartArea),F.update(H.w,H.h,{left:0,top:0,right:0,bottom:0})})}};class y6{acquireContext($,J){}releaseContext($){return!1}addEventListener($,J,Z){}removeEventListener($,J,Z){}getDevicePixelRatio(){return 1}getMaximumSize($,J,Z,q){return J=Math.max(0,J||$.width),Z=Z||$.height,{width:J,height:Math.max(0,q?Math.floor(J/q):Z)}}isAttached($){return!0}updateConfig($){}}class Qq extends y6{acquireContext($){return $&&$.getContext&&$.getContext("2d")||null}updateConfig($){$.options.animation=!1}}var G8="$chartjs",kU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},WZ=($)=>$===null||$==="";function vU($,J){let Z=$.style,q=$.getAttribute("height"),Q=$.getAttribute("width");if($[G8]={initial:{height:q,width:Q,style:{display:Z.display,height:Z.height,width:Z.width}}},Z.display=Z.display||"block",Z.boxSizing=Z.boxSizing||"border-box",WZ(Q)){let Y=B6($,"width");if(Y!==void 0)$.width=Y}if(WZ(q))if($.style.height==="")$.height=$.width/(J||2);else{let Y=B6($,"height");if(Y!==void 0)$.height=Y}return $}var Yq=JZ?{passive:!0}:!1;function EU($,J,Z){if($)$.addEventListener(J,Z,Yq)}function yU($,J,Z){if($&&$.canvas)$.canvas.removeEventListener(J,Z,Yq)}function gU($,J){let Z=kU[$.type]||$.type,{x:q,y:Q}=s1($,J);return{type:Z,chart:J,native:$,x:q!==void 0?q:null,y:Q!==void 0?Q:null}}function w8($,J){for(let Z of $)if(Z===J||Z.contains(J))return!0}function hU($,J,Z){let q=$.canvas,Q=new MutationObserver((Y)=>{let X=!1;for(let K of Y)X=X||w8(K.addedNodes,q),X=X&&!w8(K.removedNodes,q);if(X)Z()});return Q.observe(document,{childList:!0,subtree:!0}),Q}function uU($,J,Z){let q=$.canvas,Q=new MutationObserver((Y)=>{let X=!1;for(let K of Y)X=X||w8(K.removedNodes,q),X=X&&!w8(K.addedNodes,q);if(X)Z()});return Q.observe(document,{childList:!0,subtree:!0}),Q}var y5=new Map,FZ=0;function Xq(){let $=window.devicePixelRatio;if($===FZ)return;FZ=$,y5.forEach((J,Z)=>{if(Z.currentDevicePixelRatio!==$)J()})}function xU($,J){if(!y5.size)window.addEventListener("resize",Xq);y5.set($,J)}function mU($){if(y5.delete($),!y5.size)window.removeEventListener("resize",Xq)}function pU($,J,Z){let q=$.canvas,Q=q&&Z8(q);if(!Q)return;let Y=$6((K,G)=>{let B=Q.clientWidth;if(Z(K,G),B<Q.clientWidth)Z()},window),X=new ResizeObserver((K)=>{let G=K[0],B=G.contentRect.width,w=G.contentRect.height;if(B===0&&w===0)return;Y(B,w)});return X.observe(Q),xU($,Y),X}function D6($,J,Z){if(Z)Z.disconnect();if(J==="resize")mU($)}function dU($,J,Z){let q=$.canvas,Q=$6((Y)=>{if($.ctx!==null)Z(gU(Y,$))},$);return EU(q,J,Q),Q}class Uq extends y6{acquireContext($,J){let Z=$&&$.getContext&&$.getContext("2d");if(Z&&Z.canvas===$)return vU($,J),Z;return null}releaseContext($){let J=$.canvas;if(!J[G8])return!1;let Z=J[G8].initial;["height","width"].forEach((Q)=>{let Y=Z[Q];if($0(Y))J.removeAttribute(Q);else J.setAttribute(Q,Y)});let q=Z.style||{};return Object.keys(q).forEach((Q)=>{J.style[Q]=q[Q]}),J.width=J.width,delete J[G8],!0}addEventListener($,J,Z){this.removeEventListener($,J);let q=$.$proxies||($.$proxies={}),Y={attach:hU,detach:uU,resize:pU}[J]||dU;q[J]=Y($,J,Z)}removeEventListener($,J){let Z=$.$proxies||($.$proxies={}),q=Z[J];if(!q)return;({attach:D6,detach:D6,resize:D6}[J]||yU)($,J,q),Z[J]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize($,J,Z,q){return $Z($,J,Z,q)}isAttached($){let J=$&&Z8($);return!!(J&&J.isConnected)}}function rU($){if(!J8()||typeof OffscreenCanvas!=="undefined"&&$ instanceof OffscreenCanvas)return Qq;return Uq}class l1{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition($){let{x:J,y:Z}=this.getProps(["x","y"],$);return{x:J,y:Z}}hasValue(){return x2(this.x)&&x2(this.y)}getProps($,J){let Z=this.$animations;if(!J||!Z)return this;let q={};return $.forEach((Q)=>{q[Q]=Z[Q]&&Z[Q].active()?Z[Q]._to:this[Q]}),q}}function cU($,J){let Z=$.options.ticks,q=sU($),Q=Math.min(Z.maxTicksLimit||q,q),Y=Z.major.enabled?lU(J):[],X=Y.length,K=Y[0],G=Y[X-1],B=[];if(X>Q)return iU(J,B,Y,X/Q),B;let w=oU(Y,J,Q);if(X>0){let T,M,H=X>1?Math.round((G-K)/(X-1)):null;Y8(J,B,w,$0(H)?0:K-H,K);for(T=0,M=X-1;T<M;T++)Y8(J,B,w,Y[T],Y[T+1]);return Y8(J,B,w,G,$0(H)?J.length:G+H),B}return Y8(J,B,w),B}function sU($){let J=$.options.offset,Z=$._tickSize(),q=$._length/Z+(J?0:1),Q=$._maxLength/Z;return Math.floor(Math.min(q,Q))}function oU($,J,Z){let q=nU($),Q=J.length/Z;if(!q)return Math.max(Q,1);let Y=AJ(q);for(let X=0,K=Y.length-1;X<K;X++){let G=Y[X];if(G>Q)return G}return Math.max(Q,1)}function lU($){let J=[],Z,q;for(Z=0,q=$.length;Z<q;Z++)if($[Z].major)J.push(Z);return J}function iU($,J,Z,q){let Q=0,Y=Z[0],X;q=Math.ceil(q);for(X=0;X<$.length;X++)if(X===Y)J.push($[X]),Q++,Y=Z[Q*q]}function Y8($,J,Z,q,Q){let Y=s(q,0),X=Math.min(s(Q,$.length),$.length),K=0,G,B,w;if(Z=Math.ceil(Z),Q)G=Q-q,Z=G/Math.floor(G/Z);w=Y;while(w<0)K++,w=Math.round(Y+K*Z);for(B=Math.max(Y,0);B<X;B++)if(B===w)J.push($[B]),K++,w=Math.round(Y+K*Z)}function nU($){let J=$.length,Z,q;if(J<2)return!1;for(q=$[0],Z=1;Z<J;++Z)if($[Z]-$[Z-1]!==q)return!1;return q}var aU=($)=>$==="left"?"right":$==="right"?"left":$,jZ=($,J,Z)=>J==="top"||J==="left"?$[J]+Z:$[J]-Z,RZ=($,J)=>Math.min(J||$,$);function _Z($,J){let Z=[],q=$.length/J,Q=$.length,Y=0;for(;Y<Q;Y+=q)Z.push($[Math.floor(Y)]);return Z}function tU($,J,Z){let q=$.ticks.length,Q=Math.min(J,q-1),Y=$._startPixel,X=$._endPixel,K=0.000001,G=$.getPixelForTick(Q),B;if(Z){if(q===1)B=Math.max(G-Y,X-G);else if(J===0)B=($.getPixelForTick(1)-G)/2;else B=(G-$.getPixelForTick(Q-1))/2;if(G+=Q<J?B:-B,G<Y-0.000001||G>X+0.000001)return}return G}function eU($,J){J0($,(Z)=>{let q=Z.gc,Q=q.length/2,Y;if(Q>J){for(Y=0;Y<Q;++Y)delete Z.data[q[Y]];q.splice(0,Q)}})}function b5($){return $.drawTicks?$.tickLength:0}function DZ($,J){if(!$.display)return 0;let Z=N0($.font,J),q=E0($.padding);return(T0($.text)?$.text.length:1)*Z.lineHeight+q.height}function $K($,J){return C1($,{scale:J,type:"scale"})}function JK($,J,Z){return C1($,{tick:Z,index:J,type:"tick"})}function ZK($,J,Z){let q=J6($);if(Z&&J!=="right"||!Z&&J==="right")q=aU(q);return q}function qK($,J,Z,q){let{top:Q,left:Y,bottom:X,right:K,chart:G}=$,{chartArea:B,scales:w}=G,T=0,M,H,W,z=X-Q,F=K-Y;if($.isHorizontal()){if(H=u0(q,Y,K),l(Z)){let j=Object.keys(Z)[0],_=Z[j];W=w[j].getPixelForValue(_)+z-J}else if(Z==="center")W=(B.bottom+B.top)/2+z-J;else W=jZ($,Z,J);M=K-Y}else{if(l(Z)){let j=Object.keys(Z)[0],_=Z[j];H=w[j].getPixelForValue(_)-F+J}else if(Z==="center")H=(B.left+B.right)/2-F+J;else H=jZ($,Z,J);W=u0(q,X,Q),T=Z==="left"?-j0:j0}return{titleX:H,titleY:W,maxWidth:M,rotation:T}}class T2 extends l1{constructor($){super();this.id=$.id,this.type=$.type,this.options=void 0,this.ctx=$.ctx,this.chart=$.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init($){this.options=$.setContext(this.getContext()),this.axis=$.axis,this._userMin=this.parse($.min),this._userMax=this.parse($.max),this._suggestedMin=this.parse($.suggestedMin),this._suggestedMax=this.parse($.suggestedMax)}parse($,J){return $}getUserBounds(){let{_userMin:$,_userMax:J,_suggestedMin:Z,_suggestedMax:q}=this;return $=h0($,Number.POSITIVE_INFINITY),J=h0(J,Number.NEGATIVE_INFINITY),Z=h0(Z,Number.POSITIVE_INFINITY),q=h0(q,Number.NEGATIVE_INFINITY),{min:h0($,Z),max:h0(J,q),minDefined:H0($),maxDefined:H0(J)}}getMinMax($){let{min:J,max:Z,minDefined:q,maxDefined:Q}=this.getUserBounds(),Y;if(q&&Q)return{min:J,max:Z};let X=this.getMatchingVisibleMetas();for(let K=0,G=X.length;K<G;++K){if(Y=X[K].controller.getMinMax(this,$),!q)J=Math.min(J,Y.min);if(!Q)Z=Math.max(Z,Y.max)}return J=Q&&J>Z?Z:J,Z=q&&J>Z?J:Z,{min:h0(J,h0(Z,J)),max:h0(Z,h0(J,Z))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let $=this.chart.data;return this.options.labels||(this.isHorizontal()?$.xLabels:$.yLabels)||$.labels||[]}getLabelItems($=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems($))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){U0(this.options.beforeUpdate,[this])}update($,J,Z){let{beginAtZero:q,grace:Q,ticks:Y}=this.options,X=Y.sampleSize;if(this.beforeUpdate(),this.maxWidth=$,this.maxHeight=J,this._margins=Z=Object.assign({left:0,right:0,top:0,bottom:0},Z),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+Z.left+Z.right:this.height+Z.top+Z.bottom,!this._dataLimitsCached)this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=lJ(this,Q,q),this._dataLimitsCached=!0;this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let K=X<this.ticks.length;if(this._convertTicksToLabels(K?_Z(this.ticks,X):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),Y.display&&(Y.autoSkip||Y.source==="auto"))this.ticks=cU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip();if(K)this._convertTicksToLabels(this.ticks);this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let $=this.options.reverse,J,Z;if(this.isHorizontal())J=this.left,Z=this.right;else J=this.top,Z=this.bottom,$=!$;this._startPixel=J,this._endPixel=Z,this._reversePixels=$,this._length=Z-J,this._alignToPixels=this.options.alignToPixels}afterUpdate(){U0(this.options.afterUpdate,[this])}beforeSetDimensions(){U0(this.options.beforeSetDimensions,[this])}setDimensions(){if(this.isHorizontal())this.width=this.maxWidth,this.left=0,this.right=this.width;else this.height=this.maxHeight,this.top=0,this.bottom=this.height;this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){U0(this.options.afterSetDimensions,[this])}_callHooks($){this.chart.notifyPlugins($,this.getContext()),U0(this.options[$],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){U0(this.options.beforeTickToLabelConversion,[this])}generateTickLabels($){let J=this.options.ticks,Z,q,Q;for(Z=0,q=$.length;Z<q;Z++)Q=$[Z],Q.label=U0(J.callback,[Q.value,Z,$],this)}afterTickToLabelConversion(){U0(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){U0(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let $=this.options,J=$.ticks,Z=RZ(this.ticks.length,$.ticks.maxTicksLimit),q=J.minRotation||0,Q=J.maxRotation,Y=q,X,K,G;if(!this._isVisible()||!J.display||q>=Q||Z<=1||!this.isHorizontal()){this.labelRotation=q;return}let B=this._getLabelSizes(),w=B.widest.width,T=B.highest.height,M=v0(this.chart.width-w,0,this.maxWidth);if(X=$.offset?this.maxWidth/Z:M/(Z-1),w+6>X)X=M/(Z-($.offset?0.5:1)),K=this.maxHeight-b5($.grid)-J.padding-DZ($.title,this.chart.options.font),G=Math.sqrt(w*w+T*T),Y=i4(Math.min(Math.asin(v0((B.highest.height+6)/X,-1,1)),Math.asin(v0(K/G,-1,1))-Math.asin(v0(T/G,-1,1)))),Y=Math.max(q,Math.min(Q,Y));this.labelRotation=Y}afterCalculateLabelRotation(){U0(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){U0(this.options.beforeFit,[this])}fit(){let $={width:0,height:0},{chart:J,options:{ticks:Z,title:q,grid:Q}}=this,Y=this._isVisible(),X=this.isHorizontal();if(Y){let K=DZ(q,J.options.font);if(X)$.width=this.maxWidth,$.height=b5(Q)+K;else $.height=this.maxHeight,$.width=b5(Q)+K;if(Z.display&&this.ticks.length){let{first:G,last:B,widest:w,highest:T}=this._getLabelSizes(),M=Z.padding*2,H=X1(this.labelRotation),W=Math.cos(H),z=Math.sin(H);if(X){let F=Z.mirror?0:z*w.width+W*T.height;$.height=Math.min(this.maxHeight,$.height+F+M)}else{let F=Z.mirror?0:W*w.width+z*T.height;$.width=Math.min(this.maxWidth,$.width+F+M)}this._calculatePadding(G,B,z,W)}}if(this._handleMargins(),X)this.width=this._length=J.width-this._margins.left-this._margins.right,this.height=$.height;else this.width=$.width,this.height=this._length=J.height-this._margins.top-this._margins.bottom}_calculatePadding($,J,Z,q){let{ticks:{align:Q,padding:Y},position:X}=this.options,K=this.labelRotation!==0,G=X!=="top"&&this.axis==="x";if(this.isHorizontal()){let B=this.getPixelForTick(0)-this.left,w=this.right-this.getPixelForTick(this.ticks.length-1),T=0,M=0;if(K)if(G)T=q*$.width,M=Z*J.height;else T=Z*$.height,M=q*J.width;else if(Q==="start")M=J.width;else if(Q==="end")T=$.width;else if(Q!=="inner")T=$.width/2,M=J.width/2;this.paddingLeft=Math.max((T-B+Y)*this.width/(this.width-B),0),this.paddingRight=Math.max((M-w+Y)*this.width/(this.width-w),0)}else{let B=J.height/2,w=$.height/2;if(Q==="start")B=0,w=$.height;else if(Q==="end")B=J.height,w=0;this.paddingTop=B+Y,this.paddingBottom=w+Y}}_handleMargins(){if(this._margins)this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom)}afterFit(){U0(this.options.afterFit,[this])}isHorizontal(){let{axis:$,position:J}=this.options;return J==="top"||J==="bottom"||$==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels($){this.beforeTickToLabelConversion(),this.generateTickLabels($);let J,Z;for(J=0,Z=$.length;J<Z;J++)if($0($[J].label))$.splice(J,1),Z--,J--;this.afterTickToLabelConversion()}_getLabelSizes(){let $=this._labelSizes;if(!$){let J=this.options.ticks.sampleSize,Z=this.ticks;if(J<Z.length)Z=_Z(Z,J);this._labelSizes=$=this._computeLabelSizes(Z,Z.length,this.options.ticks.maxTicksLimit)}return $}_computeLabelSizes($,J,Z){let{ctx:q,_longestTextCache:Q}=this,Y=[],X=[],K=Math.floor(J/RZ(J,Z)),G=0,B=0,w,T,M,H,W,z,F,j,_,P,L;for(w=0;w<J;w+=K){if(H=$[w].label,W=this._resolveTickFontOptions(w),q.font=z=W.string,F=Q[z]=Q[z]||{data:{},gc:[]},j=W.lineHeight,_=P=0,!$0(H)&&!T0(H))_=R5(q,F.data,F.gc,_,H),P=j;else if(T0(H)){for(T=0,M=H.length;T<M;++T)if(L=H[T],!$0(L)&&!T0(L))_=R5(q,F.data,F.gc,_,L),P+=j}Y.push(_),X.push(P),G=Math.max(_,G),B=Math.max(P,B)}eU(Q,J);let D=Y.indexOf(G),C=X.indexOf(B),S=(V)=>({width:Y[V]||0,height:X[V]||0});return{first:S(0),last:S(J-1),widest:S(D),highest:S(C),widths:Y,heights:X}}getLabelForValue($){return $}getPixelForValue($,J){return NaN}getValueForPixel($){}getPixelForTick($){let J=this.ticks;if($<0||$>J.length-1)return null;return this.getPixelForValue(J[$].value)}getPixelForDecimal($){if(this._reversePixels)$=1-$;let J=this._startPixel+$*this._length;return fJ(this._alignToPixels?c1(this.chart,J,0):J)}getDecimalForPixel($){let J=($-this._startPixel)/this._length;return this._reversePixels?1-J:J}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:$,max:J}=this;return $<0&&J<0?J:$>0&&J>0?$:0}getContext($){let J=this.ticks||[];if($>=0&&$<J.length){let Z=J[$];return Z.$context||(Z.$context=JK(this.getContext(),$,Z))}return this.$context||(this.$context=$K(this.chart.getContext(),this))}_tickSize(){let $=this.options.ticks,J=X1(this.labelRotation),Z=Math.abs(Math.cos(J)),q=Math.abs(Math.sin(J)),Q=this._getLabelSizes(),Y=$.autoSkipPadding||0,X=Q?Q.widest.width+Y:0,K=Q?Q.highest.height+Y:0;return this.isHorizontal()?K*Z>X*q?X/Z:K/q:K*q<X*Z?K/Z:X/q}_isVisible(){let $=this.options.display;if($!=="auto")return!!$;return this.getMatchingVisibleMetas().length>0}_computeGridLineItems($){let J=this.axis,Z=this.chart,q=this.options,{grid:Q,position:Y,border:X}=q,K=Q.offset,G=this.isHorizontal(),w=this.ticks.length+(K?1:0),T=b5(Q),M=[],H=X.setContext(this.getContext()),W=H.display?H.width:0,z=W/2,F=function(t){return c1(Z,t,W)},j,_,P,L,D,C,S,V,I,g,E,K0;if(Y==="top")j=F(this.bottom),C=this.bottom-T,V=j-z,g=F($.top)+z,K0=$.bottom;else if(Y==="bottom")j=F(this.top),g=$.top,K0=F($.bottom)-z,C=j+z,V=this.top+T;else if(Y==="left")j=F(this.right),D=this.right-T,S=j-z,I=F($.left)+z,E=$.right;else if(Y==="right")j=F(this.left),I=$.left,E=F($.right)-z,D=j+z,S=this.left+T;else if(J==="x"){if(Y==="center")j=F(($.top+$.bottom)/2+0.5);else if(l(Y)){let t=Object.keys(Y)[0],Z0=Y[t];j=F(this.chart.scales[t].getPixelForValue(Z0))}g=$.top,K0=$.bottom,C=j+z,V=C+T}else if(J==="y"){if(Y==="center")j=F(($.left+$.right)/2);else if(l(Y)){let t=Object.keys(Y)[0],Z0=Y[t];j=F(this.chart.scales[t].getPixelForValue(Z0))}D=j-z,S=D-T,I=$.left,E=$.right}let f0=s(q.ticks.maxTicksLimit,w),Q0=Math.max(1,Math.ceil(w/f0));for(_=0;_<w;_+=Q0){let t=this.getContext(_),Z0=Q.setContext(t),R0=X.setContext(t),b=Z0.lineWidth,_0=Z0.color,i1=R0.dash||[],H1=R0.dashOffset,z1=Z0.tickWidth,M0=Z0.tickColor,V0=Z0.tickBorderDash||[],l0=Z0.tickBorderDashOffset;if(P=tU(this,_,K),P===void 0)continue;if(L=c1(Z,P,b),G)D=S=I=E=L;else C=V=g=K0=L;M.push({tx1:D,ty1:C,tx2:S,ty2:V,x1:I,y1:g,x2:E,y2:K0,width:b,color:_0,borderDash:i1,borderDashOffset:H1,tickWidth:z1,tickColor:M0,tickBorderDash:V0,tickBorderDashOffset:l0})}return this._ticksLength=w,this._borderValue=j,M}_computeLabelItems($){let J=this.axis,Z=this.options,{position:q,ticks:Q}=Z,Y=this.isHorizontal(),X=this.ticks,{align:K,crossAlign:G,padding:B,mirror:w}=Q,T=b5(Z.grid),M=T+B,H=w?-B:M,W=-X1(this.labelRotation),z=[],F,j,_,P,L,D,C,S,V,I,g,E,K0="middle";if(q==="top")D=this.bottom-H,C=this._getXAxisLabelAlignment();else if(q==="bottom")D=this.top+H,C=this._getXAxisLabelAlignment();else if(q==="left"){let Q0=this._getYAxisLabelAlignment(T);C=Q0.textAlign,L=Q0.x}else if(q==="right"){let Q0=this._getYAxisLabelAlignment(T);C=Q0.textAlign,L=Q0.x}else if(J==="x"){if(q==="center")D=($.top+$.bottom)/2+M;else if(l(q)){let Q0=Object.keys(q)[0],t=q[Q0];D=this.chart.scales[Q0].getPixelForValue(t)+M}C=this._getXAxisLabelAlignment()}else if(J==="y"){if(q==="center")L=($.left+$.right)/2-M;else if(l(q)){let Q0=Object.keys(q)[0],t=q[Q0];L=this.chart.scales[Q0].getPixelForValue(t)}C=this._getYAxisLabelAlignment(T).textAlign}if(J==="y"){if(K==="start")K0="top";else if(K==="end")K0="bottom"}let f0=this._getLabelSizes();for(F=0,j=X.length;F<j;++F){_=X[F],P=_.label;let Q0=Q.setContext(this.getContext(F));S=this.getPixelForTick(F)+Q.labelOffset,V=this._resolveTickFontOptions(F),I=V.lineHeight,g=T0(P)?P.length:1;let t=g/2,Z0=Q0.color,R0=Q0.textStrokeColor,b=Q0.textStrokeWidth,_0=C;if(Y){if(L=S,C==="inner")if(F===j-1)_0=!this.options.reverse?"right":"left";else if(F===0)_0=!this.options.reverse?"left":"right";else _0="center";if(q==="top")if(G==="near"||W!==0)E=-g*I+I/2;else if(G==="center")E=-f0.highest.height/2-t*I+I;else E=-f0.highest.height+I/2;else if(G==="near"||W!==0)E=I/2;else if(G==="center")E=f0.highest.height/2-t*I;else E=f0.highest.height-g*I;if(w)E*=-1;if(W!==0&&!Q0.showLabelBackdrop)L+=I/2*Math.sin(W)}else D=S,E=(1-g)*I/2;let i1;if(Q0.showLabelBackdrop){let H1=E0(Q0.backdropPadding),z1=f0.heights[F],M0=f0.widths[F],V0=E-H1.top,l0=0-H1.left;switch(K0){case"middle":V0-=z1/2;break;case"bottom":V0-=z1;break}switch(C){case"center":l0-=M0/2;break;case"right":l0-=M0;break;case"inner":if(F===j-1)l0-=M0;else if(F>0)l0-=M0/2;break}i1={left:l0,top:V0,width:M0+H1.width,height:z1+H1.height,color:Q0.backdropColor}}z.push({label:P,font:V,textOffset:E,options:{rotation:W,color:Z0,strokeColor:R0,strokeWidth:b,textAlign:_0,textBaseline:K0,translation:[L,D],backdrop:i1}})}return z}_getXAxisLabelAlignment(){let{position:$,ticks:J}=this.options;if(-X1(this.labelRotation))return $==="top"?"left":"right";let q="center";if(J.align==="start")q="left";else if(J.align==="end")q="right";else if(J.align==="inner")q="inner";return q}_getYAxisLabelAlignment($){let{position:J,ticks:{crossAlign:Z,mirror:q,padding:Q}}=this.options,Y=this._getLabelSizes(),X=$+Q,K=Y.widest.width,G,B;if(J==="left")if(q)if(B=this.right+Q,Z==="near")G="left";else if(Z==="center")G="center",B+=K/2;else G="right",B+=K;else if(B=this.right-X,Z==="near")G="right";else if(Z==="center")G="center",B-=K/2;else G="left",B=this.left;else if(J==="right")if(q)if(B=this.left+Q,Z==="near")G="right";else if(Z==="center")G="center",B-=K/2;else G="left",B-=K;else if(B=this.left+X,Z==="near")G="left";else if(Z==="center")G="center",B+=K/2;else G="right",B=this.right;else G="right";return{textAlign:G,x:B}}_computeLabelArea(){if(this.options.ticks.mirror)return;let $=this.chart,J=this.options.position;if(J==="left"||J==="right")return{top:0,left:this.left,bottom:$.height,right:this.right};if(J==="top"||J==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:$.width}}drawBackground(){let{ctx:$,options:{backgroundColor:J},left:Z,top:q,width:Q,height:Y}=this;if(J)$.save(),$.fillStyle=J,$.fillRect(Z,q,Q,Y),$.restore()}getLineWidthForValue($){let J=this.options.grid;if(!this._isVisible()||!J.display)return 0;let q=this.ticks.findIndex((Q)=>Q.value===$);if(q>=0)return J.setContext(this.getContext(q)).lineWidth;return 0}drawGrid($){let J=this.options.grid,Z=this.ctx,q=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems($)),Q,Y,X=(K,G,B)=>{if(!B.width||!B.color)return;Z.save(),Z.lineWidth=B.width,Z.strokeStyle=B.color,Z.setLineDash(B.borderDash||[]),Z.lineDashOffset=B.borderDashOffset,Z.beginPath(),Z.moveTo(K.x,K.y),Z.lineTo(G.x,G.y),Z.stroke(),Z.restore()};if(J.display)for(Q=0,Y=q.length;Q<Y;++Q){let K=q[Q];if(J.drawOnChartArea)X({x:K.x1,y:K.y1},{x:K.x2,y:K.y2},K);if(J.drawTicks)X({x:K.tx1,y:K.ty1},{x:K.tx2,y:K.ty2},{color:K.tickColor,width:K.tickWidth,borderDash:K.tickBorderDash,borderDashOffset:K.tickBorderDashOffset})}}drawBorder(){let{chart:$,ctx:J,options:{border:Z,grid:q}}=this,Q=Z.setContext(this.getContext()),Y=Z.display?Q.width:0;if(!Y)return;let X=q.setContext(this.getContext(0)).lineWidth,K=this._borderValue,G,B,w,T;if(this.isHorizontal())G=c1($,this.left,Y)-Y/2,B=c1($,this.right,X)+X/2,w=T=K;else w=c1($,this.top,Y)-Y/2,T=c1($,this.bottom,X)+X/2,G=B=K;J.save(),J.lineWidth=Q.width,J.strokeStyle=Q.color,J.beginPath(),J.moveTo(G,w),J.lineTo(B,T),J.stroke(),J.restore()}drawLabels($){if(!this.options.ticks.display)return;let Z=this.ctx,q=this._computeLabelArea();if(q)P5(Z,q);let Q=this.getLabelItems($);for(let Y of Q){let{options:X,font:K,label:G,textOffset:B}=Y;U2(Z,G,0,B,K,X)}if(q)I5(Z)}drawTitle(){let{ctx:$,options:{position:J,title:Z,reverse:q}}=this;if(!Z.display)return;let Q=N0(Z.font),Y=E0(Z.padding),X=Z.align,K=Q.lineHeight/2;if(J==="bottom"||J==="center"||l(J)){if(K+=Y.bottom,T0(Z.text))K+=Q.lineHeight*(Z.text.length-1)}else K+=Y.top;let{titleX:G,titleY:B,maxWidth:w,rotation:T}=qK(this,K,J,X);U2($,Z.text,0,0,Q,{color:Z.color,maxWidth:w,rotation:T,textAlign:ZK(X,J,q),textBaseline:"middle",translation:[G,B]})}draw($){if(!this._isVisible())return;this.drawBackground(),this.drawGrid($),this.drawBorder(),this.drawTitle(),this.drawLabels($)}_layers(){let $=this.options,J=$.ticks&&$.ticks.z||0,Z=s($.grid&&$.grid.z,-1),q=s($.border&&$.border.z,0);if(!this._isVisible()||this.draw!==T2.prototype.draw)return[{z:J,draw:(Q)=>{this.draw(Q)}}];return[{z:Z,draw:(Q)=>{this.drawBackground(),this.drawGrid(Q),this.drawTitle()}},{z:q,draw:()=>{this.drawBorder()}},{z:J,draw:(Q)=>{this.drawLabels(Q)}}]}getMatchingVisibleMetas($){let J=this.chart.getSortedVisibleDatasetMetas(),Z=this.axis+"AxisID",q=[],Q,Y;for(Q=0,Y=J.length;Q<Y;++Q){let X=J[Q];if(X[Z]===this.id&&(!$||X.type===$))q.push(X)}return q}_resolveTickFontOptions($){let J=this.options.ticks.setContext(this.getContext($));return N0(J.font)}_maxDigits(){let $=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/$}}class v5{constructor($,J,Z){this.type=$,this.scope=J,this.override=Z,this.items=Object.create(null)}isForType($){return Object.prototype.isPrototypeOf.call(this.type.prototype,$.prototype)}register($){let J=Object.getPrototypeOf($),Z;if(XK(J))Z=this.register(J);let q=this.items,Q=$.id,Y=this.scope+"."+Q;if(!Q)throw new Error("class does not have id: "+$);if(Q in q)return Y;if(q[Q]=$,QK($,Y,Z),this.override)z0.override($.id,$.overrides);return Y}get($){return this.items[$]}unregister($){let J=this.items,Z=$.id,q=this.scope;if(Z in J)delete J[Z];if(q&&Z in z0[q]){if(delete z0[q][Z],this.override)delete r1[Z]}}}function QK($,J,Z){let q=E2(Object.create(null),[Z?z0.get(Z):{},z0.get(J),$.defaults]);if(z0.set(J,q),$.defaultRoutes)YK(J,$.defaultRoutes);if($.descriptors)z0.describe(J,$.descriptors)}function YK($,J){Object.keys(J).forEach((Z)=>{let q=Z.split("."),Q=q.pop(),Y=[$].concat(q).join("."),X=J[Z].split("."),K=X.pop(),G=X.join(".");z0.route(Y,Q,G,K)})}function XK($){return"id"in $&&"defaults"in $}class Kq{constructor(){this.controllers=new v5(M8,"datasets",!0),this.elements=new v5(l1,"elements"),this.plugins=new v5(Object,"plugins"),this.scales=new v5(T2,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...$){this._each("register",$)}remove(...$){this._each("unregister",$)}addControllers(...$){this._each("register",$,this.controllers)}addElements(...$){this._each("register",$,this.elements)}addPlugins(...$){this._each("register",$,this.plugins)}addScales(...$){this._each("register",$,this.scales)}getController($){return this._get($,this.controllers,"controller")}getElement($){return this._get($,this.elements,"element")}getPlugin($){return this._get($,this.plugins,"plugin")}getScale($){return this._get($,this.scales,"scale")}removeControllers(...$){this._each("unregister",$,this.controllers)}removeElements(...$){this._each("unregister",$,this.elements)}removePlugins(...$){this._each("unregister",$,this.plugins)}removeScales(...$){this._each("unregister",$,this.scales)}_each($,J,Z){[...J].forEach((q)=>{let Q=Z||this._getRegistryForType(q);if(Z||Q.isForType(q)||Q===this.plugins&&q.id)this._exec($,Q,q);else J0(q,(Y)=>{let X=Z||this._getRegistryForType(Y);this._exec($,X,Y)})})}_exec($,J,Z){let q=l4($);U0(Z["before"+q],[],Z),J[$](Z),U0(Z["after"+q],[],Z)}_getRegistryForType($){for(let J=0;J<this._typedRegistries.length;J++){let Z=this._typedRegistries[J];if(Z.isForType($))return Z}return this.plugins}_get($,J,Z){let q=J.get($);if(q===void 0)throw new Error('"'+$+'" is not a registered '+Z+".");return q}}var M1=new Kq;class Gq{constructor(){this._init=void 0}notify($,J,Z,q){if(J==="beforeInit")this._init=this._createDescriptors($,!0),this._notify(this._init,$,"install");if(this._init===void 0)return;let Q=q?this._descriptors($).filter(q):this._descriptors($),Y=this._notify(Q,$,J,Z);if(J==="afterDestroy")this._notify(Q,$,"stop"),this._notify(this._init,$,"uninstall"),this._init=void 0;return Y}_notify($,J,Z,q){q=q||{};for(let Q of $){let Y=Q.plugin,X=Y[Z],K=[J,q,Q.options];if(U0(X,K,Y)===!1&&q.cancelable)return!1}return!0}invalidate(){if(!$0(this._cache))this._oldCache=this._cache,this._cache=void 0}_descriptors($){if(this._cache)return this._cache;let J=this._cache=this._createDescriptors($);return this._notifyStateChanges($),J}_createDescriptors($,J){let Z=$&&$.config,q=s(Z.options&&Z.options.plugins,{}),Q=UK(Z);return q===!1&&!J?[]:GK($,Q,q,J)}_notifyStateChanges($){let J=this._oldCache||[],Z=this._cache,q=(Q,Y)=>Q.filter((X)=>!Y.some((K)=>X.plugin.id===K.plugin.id));this._notify(q(J,Z),$,"stop"),this._notify(q(Z,J),$,"start")}}function UK($){let J={},Z=[],q=Object.keys(M1.plugins.items);for(let Y=0;Y<q.length;Y++)Z.push(M1.getPlugin(q[Y]));let Q=$.plugins||[];for(let Y=0;Y<Q.length;Y++){let X=Q[Y];if(Z.indexOf(X)===-1)Z.push(X),J[X.id]=!0}return{plugins:Z,localIds:J}}function KK($,J){if(!J&&$===!1)return null;if($===!0)return{};return $}function GK($,{plugins:J,localIds:Z},q,Q){let Y=[],X=$.getContext();for(let K of J){let G=K.id,B=KK(q[G],Q);if(B===null)continue;Y.push({plugin:K,options:BK($.config,{plugin:K,local:Z[G]},B,X)})}return Y}function BK($,{plugin:J,local:Z},q,Q){let Y=$.pluginScopeKeys(J),X=$.getOptionScopes(q,Y);if(Z&&J.defaults)X.push(J.defaults);return $.createResolver(X,Q,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function P6($,J){let Z=z0.datasets[$]||{};return((J.datasets||{})[$]||{}).indexAxis||J.indexAxis||Z.indexAxis||"x"}function wK($,J){let Z=$;if($==="_index_")Z=J;else if($==="_value_")Z=J==="x"?"y":"x";return Z}function TK($,J){return $===J?"_index_":"_value_"}function LZ($){if($==="x"||$==="y"||$==="r")return $}function MK($){if($==="top"||$==="bottom")return"x";if($==="left"||$==="right")return"y"}function I6($,...J){if(LZ($))return $;for(let Z of J){let q=Z.axis||MK(Z.position)||$.length>1&&LZ($[0].toLowerCase());if(q)return q}throw new Error(`Cannot determine type of '${$}' axis. Please provide 'axis' or 'position' option.`)}function VZ($,J,Z){if(Z[J+"AxisID"]===$)return{axis:J}}function HK($,J){if(J.data&&J.data.datasets){let Z=J.data.datasets.filter((q)=>q.xAxisID===$||q.yAxisID===$);if(Z.length)return VZ($,"x",Z[0])||VZ($,"y",Z[0])}return{}}function zK($,J){let Z=r1[$.type]||{scales:{}},q=J.scales||{},Q=P6($.type,J),Y=Object.create(null);return Object.keys(q).forEach((X)=>{let K=q[X];if(!l(K))return console.error(`Invalid scale configuration for scale: ${X}`);if(K._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${X}`);let G=I6(X,K,HK(X,$),z0.scales[K.type]),B=TK(G,Q),w=Z.scales||{};Y[X]=g2(Object.create(null),[{axis:G},K,w[G],w[B]])}),$.data.datasets.forEach((X)=>{let K=X.type||$.type,G=X.indexAxis||P6(K,J),w=(r1[K]||{}).scales||{};Object.keys(w).forEach((T)=>{let M=wK(T,G),H=X[M+"AxisID"]||M;Y[H]=Y[H]||Object.create(null),g2(Y[H],[{axis:M},q[H],w[T]])})}),Object.keys(Y).forEach((X)=>{let K=Y[X];g2(K,[z0.scales[K.type],z0.scale])}),Y}function Bq($){let J=$.options||($.options={});J.plugins=s(J.plugins,{}),J.scales=zK($,J)}function wq($){return $=$||{},$.datasets=$.datasets||[],$.labels=$.labels||[],$}function WK($){return $=$||{},$.data=wq($.data),Bq($),$}var PZ=new Map,Tq=new Set;function X8($,J){let Z=PZ.get($);if(!Z)Z=J(),PZ.set($,Z),Tq.add(Z);return Z}var f5=($,J,Z)=>{let q=h2(J,Z);if(q!==void 0)$.add(q)};class Mq{constructor($){this._config=WK($),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type($){this._config.type=$}get data(){return this._config.data}set data($){this._config.data=wq($)}get options(){return this._config.options}set options($){this._config.options=$}get plugins(){return this._config.plugins}update(){let $=this._config;this.clearCache(),Bq($)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys($){return X8($,()=>[[`datasets.${$}`,""]])}datasetAnimationScopeKeys($,J){return X8(`${$}.transition.${J}`,()=>[[`datasets.${$}.transitions.${J}`,`transitions.${J}`],[`datasets.${$}`,""]])}datasetElementScopeKeys($,J){return X8(`${$}-${J}`,()=>[[`datasets.${$}.elements.${J}`,`datasets.${$}`,`elements.${J}`,""]])}pluginScopeKeys($){let J=$.id,Z=this.type;return X8(`${Z}-plugin-${J}`,()=>[[`plugins.${J}`,...$.additionalOptionScopes||[]]])}_cachedScopes($,J){let Z=this._scopeCache,q=Z.get($);if(!q||J)q=new Map,Z.set($,q);return q}getOptionScopes($,J,Z){let{options:q,type:Q}=this,Y=this._cachedScopes($,Z),X=Y.get(J);if(X)return X;let K=new Set;J.forEach((B)=>{if($)K.add($),B.forEach((w)=>f5(K,$,w));B.forEach((w)=>f5(K,q,w)),B.forEach((w)=>f5(K,r1[Q]||{},w)),B.forEach((w)=>f5(K,z0,w)),B.forEach((w)=>f5(K,a4,w))});let G=Array.from(K);if(G.length===0)G.push(Object.create(null));if(Tq.has(J))Y.set(J,G);return G}chartOptionScopes(){let{options:$,type:J}=this;return[$,r1[J]||{},z0.datasets[J]||{},{type:J},z0,a4]}resolveNamedOptions($,J,Z,q=[""]){let Q={$shared:!0},{resolver:Y,subPrefixes:X}=IZ(this._resolverCache,$,q),K=Y;if(jK(Y,J)){Q.$shared=!1,Z=I1(Z)?Z():Z;let G=this.createResolver($,Z,X);K=X2(Y,Z,G)}for(let G of J)Q[G]=K[G];return Q}createResolver($,J,Z=[""],q){let{resolver:Q}=IZ(this._resolverCache,$,Z);return l(J)?X2(Q,J,void 0,q):Q}}function IZ($,J,Z){let q=$.get(J);if(!q)q=new Map,$.set(J,q);let Q=Z.join(),Y=q.get(Q);if(!Y)Y={resolver:$8(J,Z),subPrefixes:Z.filter((K)=>!K.toLowerCase().includes("hover"))},q.set(Q,Y);return Y}var FK=($)=>l($)&&Object.getOwnPropertyNames($).some((J)=>I1($[J]));function jK($,J){let{isScriptable:Z,isIndexable:q}=X6($);for(let Q of J){let Y=Z(Q),X=q(Q),K=(X||Y)&&$[Q];if(Y&&(I1(K)||FK(K))||X&&T0(K))return!0}return!1}var RK="4.5.1",_K=["top","bottom","left","right","chartArea"];function SZ($,J){return $==="top"||$==="bottom"||_K.indexOf($)===-1&&J==="x"}function CZ($,J){return function(Z,q){return Z[$]===q[$]?Z[J]-q[J]:Z[$]-q[$]}}function NZ($){let J=$.chart,Z=J.options.animation;J.notifyPlugins("afterRender"),U0(Z&&Z.onComplete,[$],J)}function DK($){let J=$.chart,Z=J.options.animation;U0(Z&&Z.onProgress,[$],J)}function Hq($){if(J8()&&typeof $==="string")$=document.getElementById($);else if($&&$.length)$=$[0];if($&&$.canvas)$=$.canvas;return $}var B8={},OZ=($)=>{let J=Hq($);return Object.values(B8).filter((Z)=>Z.canvas===J).pop()};function LK($,J,Z){let q=Object.keys($);for(let Q of q){let Y=+Q;if(Y>=J){let X=$[Q];if(delete $[Q],Z>0||Y>J)$[Y+Z]=X}}}function VK($,J,Z,q){if(!Z||$.type==="mouseout")return null;if(q)return J;return $}class M2{static defaults=z0;static instances=B8;static overrides=r1;static registry=M1;static version=RK;static getChart=OZ;static register(...$){M1.add(...$),AZ()}static unregister(...$){M1.remove(...$),AZ()}constructor($,J){let Z=this.config=new Mq(J),q=Hq($),Q=OZ(q);if(Q)throw new Error("Canvas is already in use. Chart with ID '"+Q.id+"' must be destroyed before the canvas with ID '"+Q.canvas.id+"' can be reused.");let Y=Z.createResolver(Z.chartOptionScopes(),this.getContext());this.platform=new(Z.platform||rU(q)),this.platform.updateConfig(Z);let X=this.platform.acquireContext(q,Y.aspectRatio),K=X&&X.canvas,G=K&&K.height,B=K&&K.width;if(this.id=SJ(),this.ctx=X,this.canvas=K,this.width=B,this.height=G,this._options=Y,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Gq,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=hJ((w)=>this.update(w),Y.resizeDelay||0),this._dataChanges=[],B8[this.id]=this,!X||!K){console.error("Failed to create chart: can't acquire context from the given item");return}if(N1.listen(this,"complete",NZ),N1.listen(this,"progress",DK),this._initialize(),this.attached)this.update()}get aspectRatio(){let{options:{aspectRatio:$,maintainAspectRatio:J},width:Z,height:q,_aspectRatio:Q}=this;if(!$0($))return $;if(J&&Q)return Q;return q?Z/q:null}get data(){return this.config.data}set data($){this.config.data=$}get options(){return this._options}set options($){this.config.options=$}get registry(){return M1}_initialize(){if(this.notifyPlugins("beforeInit"),this.options.responsive)this.resize();else G6(this,this.options.devicePixelRatio);return this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Q6(this.canvas,this.ctx),this}stop(){return N1.stop(this),this}resize($,J){if(!N1.running(this))this._resize($,J);else this._resizeBeforeDraw={width:$,height:J}}_resize($,J){let Z=this.options,q=this.canvas,Q=Z.maintainAspectRatio&&this.aspectRatio,Y=this.platform.getMaximumSize(q,$,J,Q),X=Z.devicePixelRatio||this.platform.getDevicePixelRatio(),K=this.width?"resize":"attach";if(this.width=Y.width,this.height=Y.height,this._aspectRatio=this.aspectRatio,!G6(this,X,!0))return;if(this.notifyPlugins("resize",{size:Y}),U0(Z.onResize,[this,Y],this),this.attached){if(this._doResize(K))this.render()}}ensureScalesHaveIDs(){let J=this.options.scales||{};J0(J,(Z,q)=>{Z.id=q})}buildOrUpdateScales(){let $=this.options,J=$.scales,Z=this.scales,q=Object.keys(Z).reduce((Y,X)=>{return Y[X]=!1,Y},{}),Q=[];if(J)Q=Q.concat(Object.keys(J).map((Y)=>{let X=J[Y],K=I6(Y,X),G=K==="r",B=K==="x";return{options:X,dposition:G?"chartArea":B?"bottom":"left",dtype:G?"radialLinear":B?"category":"linear"}}));J0(Q,(Y)=>{let X=Y.options,K=X.id,G=I6(K,X),B=s(X.type,Y.dtype);if(X.position===void 0||SZ(X.position,G)!==SZ(Y.dposition))X.position=Y.dposition;q[K]=!0;let w=null;if(K in Z&&Z[K].type===B)w=Z[K];else w=new(M1.getScale(B))({id:K,type:B,ctx:this.ctx,chart:this}),Z[w.id]=w;w.init(X,$)}),J0(q,(Y,X)=>{if(!Y)delete Z[X]}),J0(Z,(Y)=>{o1.configure(this,Y,Y.options),o1.addBox(this,Y)})}_updateMetasets(){let $=this._metasets,J=this.data.datasets.length,Z=$.length;if($.sort((q,Q)=>q.index-Q.index),Z>J){for(let q=J;q<Z;++q)this._destroyDatasetMeta(q);$.splice(J,Z-J)}this._sortedMetasets=$.slice(0).sort(CZ("order","index"))}_removeUnreferencedMetasets(){let{_metasets:$,data:{datasets:J}}=this;if($.length>J.length)delete this._stacks;$.forEach((Z,q)=>{if(J.filter((Q)=>Q===Z._dataset).length===0)this._destroyDatasetMeta(q)})}buildOrUpdateControllers(){let $=[],J=this.data.datasets,Z,q;this._removeUnreferencedMetasets();for(Z=0,q=J.length;Z<q;Z++){let Q=J[Z],Y=this.getDatasetMeta(Z),X=Q.type||this.config.type;if(Y.type&&Y.type!==X)this._destroyDatasetMeta(Z),Y=this.getDatasetMeta(Z);if(Y.type=X,Y.indexAxis=Q.indexAxis||P6(X,this.options),Y.order=Q.order||0,Y.index=Z,Y.label=""+Q.label,Y.visible=this.isDatasetVisible(Z),Y.controller)Y.controller.updateIndex(Z),Y.controller.linkScales();else{let K=M1.getController(X),{datasetElementType:G,dataElementType:B}=z0.datasets[X];Object.assign(K,{dataElementType:M1.getElement(B),datasetElementType:G&&M1.getElement(G)}),Y.controller=new K(this,Z),$.push(Y.controller)}}return this._updateMetasets(),$}_resetElements(){J0(this.data.datasets,($,J)=>{this.getDatasetMeta(J).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update($){let J=this.config;J.update();let Z=this._options=J.createResolver(J.chartOptionScopes(),this.getContext()),q=this._animationsDisabled=!Z.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:$,cancelable:!0})===!1)return;let Q=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let Y=0;for(let G=0,B=this.data.datasets.length;G<B;G++){let{controller:w}=this.getDatasetMeta(G),T=!q&&Q.indexOf(w)===-1;w.buildOrUpdateElements(T),Y=Math.max(+w.getMaxOverflow(),Y)}if(Y=this._minPadding=Z.layout.autoPadding?Y:0,this._updateLayout(Y),!q)J0(Q,(G)=>{G.reset()});this._updateDatasets($),this.notifyPlugins("afterUpdate",{mode:$}),this._layers.sort(CZ("z","_idx"));let{_active:X,_lastEvent:K}=this;if(K)this._eventHandler(K,!0);else if(X.length)this._updateHoverStyles(X,X,!0);this.render()}_updateScales(){J0(this.scales,($)=>{o1.removeBox(this,$)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let $=this.options,J=new Set(Object.keys(this._listeners)),Z=new Set($.events);if(!o9(J,Z)||!!this._responsiveListeners!==$.responsive)this.unbindEvents(),this.bindEvents()}_updateHiddenIndices(){let{_hiddenIndices:$}=this,J=this._getUniformDataChanges()||[];for(let{method:Z,start:q,count:Q}of J){let Y=Z==="_removeElements"?-Q:Q;LK($,q,Y)}}_getUniformDataChanges(){let $=this._dataChanges;if(!$||!$.length)return;this._dataChanges=[];let J=this.data.datasets.length,Z=(Q)=>new Set($.filter((Y)=>Y[0]===Q).map((Y,X)=>X+","+Y.splice(1).join(","))),q=Z(0);for(let Q=1;Q<J;Q++)if(!o9(q,Z(Q)))return;return Array.from(q).map((Q)=>Q.split(",")).map((Q)=>({method:Q[1],start:+Q[2],count:+Q[3]}))}_updateLayout($){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;o1.update(this,this.width,this.height,$);let J=this.chartArea,Z=J.width<=0||J.height<=0;this._layers=[],J0(this.boxes,(q)=>{if(Z&&q.position==="chartArea")return;if(q.configure)q.configure();this._layers.push(...q._layers())},this),this._layers.forEach((q,Q)=>{q._idx=Q}),this.notifyPlugins("afterLayout")}_updateDatasets($){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:$,cancelable:!0})===!1)return;for(let J=0,Z=this.data.datasets.length;J<Z;++J)this.getDatasetMeta(J).controller.configure();for(let J=0,Z=this.data.datasets.length;J<Z;++J)this._updateDataset(J,I1($)?$({datasetIndex:J}):$);this.notifyPlugins("afterDatasetsUpdate",{mode:$})}_updateDataset($,J){let Z=this.getDatasetMeta($),q={meta:Z,index:$,mode:J,cancelable:!0};if(this.notifyPlugins("beforeDatasetUpdate",q)===!1)return;Z.controller._update(J),q.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",q)}render(){if(this.notifyPlugins("beforeRender",{cancelable:!0})===!1)return;if(N1.has(this)){if(this.attached&&!N1.running(this))N1.start(this)}else this.draw(),NZ({chart:this})}draw(){let $;if(this._resizeBeforeDraw){let{width:Z,height:q}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(Z,q)}if(this.clear(),this.width<=0||this.height<=0)return;if(this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let J=this._layers;for($=0;$<J.length&&J[$].z<=0;++$)J[$].draw(this.chartArea);this._drawDatasets();for(;$<J.length;++$)J[$].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas($){let J=this._sortedMetasets,Z=[],q,Q;for(q=0,Q=J.length;q<Q;++q){let Y=J[q];if(!$||Y.visible)Z.push(Y)}return Z}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let $=this.getSortedVisibleDatasetMetas();for(let J=$.length-1;J>=0;--J)this._drawDataset($[J]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset($){let J=this.ctx,Z={meta:$,index:$.index,cancelable:!0},q=z6(this,$);if(this.notifyPlugins("beforeDatasetDraw",Z)===!1)return;if(q)P5(J,q);if($.controller.draw(),q)I5(J);Z.cancelable=!1,this.notifyPlugins("afterDatasetDraw",Z)}isPointInArea($){return B1($,this.chartArea,this._minPadding)}getElementsAtEventForMode($,J,Z,q){let Q=IU.modes[J];if(typeof Q==="function")return Q(this,$,Z,q);return[]}getDatasetMeta($){let J=this.data.datasets[$],Z=this._metasets,q=Z.filter((Q)=>Q&&Q._dataset===J).pop();if(!q)q={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:J&&J.order||0,index:$,_dataset:J,_parsed:[],_sorted:!1},Z.push(q);return q}getContext(){return this.$context||(this.$context=C1(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible($){let J=this.data.datasets[$];if(!J)return!1;let Z=this.getDatasetMeta($);return typeof Z.hidden==="boolean"?!Z.hidden:!J.hidden}setDatasetVisibility($,J){let Z=this.getDatasetMeta($);Z.hidden=!J}toggleDataVisibility($){this._hiddenIndices[$]=!this._hiddenIndices[$]}getDataVisibility($){return!this._hiddenIndices[$]}_updateVisibility($,J,Z){let q=Z?"show":"hide",Q=this.getDatasetMeta($),Y=Q.controller._resolveAnimations(void 0,q);if(D5(J))Q.data[J].hidden=!Z,this.update();else this.setDatasetVisibility($,Z),Y.update(Q,{visible:Z}),this.update((X)=>X.datasetIndex===$?q:void 0)}hide($,J){this._updateVisibility($,J,!1)}show($,J){this._updateVisibility($,J,!0)}_destroyDatasetMeta($){let J=this._metasets[$];if(J&&J.controller)J.controller._destroy();delete this._metasets[$]}_stop(){let $,J;this.stop(),N1.remove(this);for($=0,J=this.data.datasets.length;$<J;++$)this._destroyDatasetMeta($)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:$,ctx:J}=this;if(this._stop(),this.config.clearCache(),$)this.unbindEvents(),Q6($,J),this.platform.releaseContext(J),this.canvas=null,this.ctx=null;delete B8[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...$){return this.canvas.toDataURL(...$)}bindEvents(){if(this.bindUserEvents(),this.options.responsive)this.bindResponsiveEvents();else this.attached=!0}bindUserEvents(){let $=this._listeners,J=this.platform,Z=(Q,Y)=>{J.addEventListener(this,Q,Y),$[Q]=Y},q=(Q,Y,X)=>{Q.offsetX=Y,Q.offsetY=X,this._eventHandler(Q)};J0(this.options.events,(Q)=>Z(Q,q))}bindResponsiveEvents(){if(!this._responsiveListeners)this._responsiveListeners={};let $=this._responsiveListeners,J=this.platform,Z=(K,G)=>{J.addEventListener(this,K,G),$[K]=G},q=(K,G)=>{if($[K])J.removeEventListener(this,K,G),delete $[K]},Q=(K,G)=>{if(this.canvas)this.resize(K,G)},Y,X=()=>{q("attach",X),this.attached=!0,this.resize(),Z("resize",Q),Z("detach",Y)};if(Y=()=>{this.attached=!1,q("resize",Q),this._stop(),this._resize(0,0),Z("attach",X)},J.isAttached(this.canvas))X();else Y()}unbindEvents(){J0(this._listeners,($,J)=>{this.platform.removeEventListener(this,J,$)}),this._listeners={},J0(this._responsiveListeners,($,J)=>{this.platform.removeEventListener(this,J,$)}),this._responsiveListeners=void 0}updateHoverStyle($,J,Z){let q=Z?"set":"remove",Q,Y,X,K;if(J==="dataset")Q=this.getDatasetMeta($[0].datasetIndex),Q.controller["_"+q+"DatasetHoverStyle"]();for(X=0,K=$.length;X<K;++X){Y=$[X];let G=Y&&this.getDatasetMeta(Y.datasetIndex).controller;if(G)G[q+"HoverStyle"](Y.element,Y.datasetIndex,Y.index)}}getActiveElements(){return this._active||[]}setActiveElements($){let J=this._active||[],Z=$.map(({datasetIndex:Q,index:Y})=>{let X=this.getDatasetMeta(Q);if(!X)throw new Error("No dataset found at index "+Q);return{datasetIndex:Q,element:X.data[Y],index:Y}});if(!_5(Z,J))this._active=Z,this._lastEvent=null,this._updateHoverStyles(Z,J)}notifyPlugins($,J,Z){return this._plugins.notify(this,$,J,Z)}isPluginEnabled($){return this._plugins._cache.filter((J)=>J.plugin.id===$).length===1}_updateHoverStyles($,J,Z){let q=this.options.hover,Q=(K,G)=>K.filter((B)=>!G.some((w)=>B.datasetIndex===w.datasetIndex&&B.index===w.index)),Y=Q(J,$),X=Z?$:Q($,J);if(Y.length)this.updateHoverStyle(Y,q.mode,!1);if(X.length&&q.mode)this.updateHoverStyle(X,q.mode,!0)}_eventHandler($,J){let Z={event:$,replay:J,cancelable:!0,inChartArea:this.isPointInArea($)},q=(Y)=>(Y.options.events||this.options.events).includes($.native.type);if(this.notifyPlugins("beforeEvent",Z,q)===!1)return;let Q=this._handleEvent($,J,Z.inChartArea);if(Z.cancelable=!1,this.notifyPlugins("afterEvent",Z,q),Q||Z.changed)this.render();return this}_handleEvent($,J,Z){let{_active:q=[],options:Q}=this,Y=J,X=this._getActiveElements($,q,Z,Y),K=OJ($),G=VK($,this._lastEvent,Z,K);if(Z){if(this._lastEvent=null,U0(Q.onHover,[$,X,this],this),K)U0(Q.onClick,[$,X,this],this)}let B=!_5(X,q);if(B||J)this._active=X,this._updateHoverStyles(X,q,J);return this._lastEvent=G,B}_getActiveElements($,J,Z,q){if($.type==="mouseout")return[];if(!Z)return J;let Q=this.options.hover;return this.getElementsAtEventForMode($,Q.mode,Q,q)}}function AZ(){return J0(M2.instances,($)=>$._plugins.invalidate())}function PK($,J,Z){let{startAngle:q,x:Q,y:Y,outerRadius:X,innerRadius:K,options:G}=J,{borderWidth:B,borderJoinStyle:w}=G,T=Math.min(B/X,b0(q-Z));if($.beginPath(),$.arc(Q,Y,X-B/2,q+T/2,Z-T/2),K>0){let M=Math.min(B/K,b0(q-Z));$.arc(Q,Y,K+B/2,Z-M/2,q+M/2,!0)}else{let M=Math.min(B/2,X*b0(q-Z));if(w==="round")$.arc(Q,Y,M,Z-e/2,q+e/2,!0);else if(w==="bevel"){let H=2*M*M,W=-H*Math.cos(Z+e/2)+Q,z=-H*Math.sin(Z+e/2)+Y,F=H*Math.cos(q+e/2)+Q,j=H*Math.sin(q+e/2)+Y;$.lineTo(W,z),$.lineTo(F,j)}}$.closePath(),$.moveTo(0,0),$.rect(0,0,$.canvas.width,$.canvas.height),$.clip("evenodd")}function IK($,J,Z){let{startAngle:q,pixelMargin:Q,x:Y,y:X,outerRadius:K,innerRadius:G}=J,B=Q/K;if($.beginPath(),$.arc(Y,X,K,q-B,Z+B),G>Q)B=Q/G,$.arc(Y,X,G,Z+B,q-B,!0);else $.arc(Y,X,Q,Z+j0,q-j0);$.closePath(),$.clip()}function SK($){return e4($,["outerStart","outerEnd","innerStart","innerEnd"])}function CK($,J,Z,q){let Q=SK($.options.borderRadius),Y=(Z-J)/2,X=Math.min(Y,q*J/2),K=(G)=>{let B=(Z-Math.min(Y,G))*q/2;return v0(G,0,Math.min(Y,B))};return{outerStart:K(Q.outerStart),outerEnd:K(Q.outerEnd),innerStart:v0(Q.innerStart,0,X),innerEnd:v0(Q.innerEnd,0,X)}}function p2($,J,Z,q){return{x:Z+$*Math.cos(J),y:q+$*Math.sin(J)}}function T8($,J,Z,q,Q,Y){let{x:X,y:K,startAngle:G,pixelMargin:B,innerRadius:w}=J,T=Math.max(J.outerRadius+q+Z-B,0),M=w>0?w+q+Z+B:0,H=0,W=Q-G;if(q){let t=w>0?w-q:0,Z0=T>0?T-q:0,R0=(t+Z0)/2,b=R0!==0?W*R0/(R0+q):W;H=(W-b)/2}let z=Math.max(0.001,W*T-Z/e)/T,F=(W-z)/2,j=G+F+H,_=Q-F-H,{outerStart:P,outerEnd:L,innerStart:D,innerEnd:C}=CK(J,M,T,_-j),S=T-P,V=T-L,I=j+P/S,g=_-L/V,E=M+D,K0=M+C,f0=j+D/E,Q0=_-C/K0;if($.beginPath(),Y){let t=(I+g)/2;if($.arc(X,K,T,I,t),$.arc(X,K,T,t,g),L>0){let _0=p2(V,g,X,K);$.arc(_0.x,_0.y,L,g,_+j0)}let Z0=p2(K0,_,X,K);if($.lineTo(Z0.x,Z0.y),C>0){let _0=p2(K0,Q0,X,K);$.arc(_0.x,_0.y,C,_+j0,Q0+Math.PI)}let R0=(_-C/M+(j+D/M))/2;if($.arc(X,K,M,_-C/M,R0,!0),$.arc(X,K,M,R0,j+D/M,!0),D>0){let _0=p2(E,f0,X,K);$.arc(_0.x,_0.y,D,f0+Math.PI,j-j0)}let b=p2(S,j,X,K);if($.lineTo(b.x,b.y),P>0){let _0=p2(S,I,X,K);$.arc(_0.x,_0.y,P,j-j0,I)}}else{$.moveTo(X,K);let t=Math.cos(I)*T+X,Z0=Math.sin(I)*T+K;$.lineTo(t,Z0);let R0=Math.cos(g)*T+X,b=Math.sin(g)*T+K;$.lineTo(R0,b)}$.closePath()}function NK($,J,Z,q,Q){let{fullCircles:Y,startAngle:X,circumference:K}=J,G=J.endAngle;if(Y){T8($,J,Z,q,G,Q);for(let B=0;B<Y;++B)$.fill();if(!isNaN(K))G=X+(K%B0||B0)}return T8($,J,Z,q,G,Q),$.fill(),G}function OK($,J,Z,q,Q){let{fullCircles:Y,startAngle:X,circumference:K,options:G}=J,{borderWidth:B,borderJoinStyle:w,borderDash:T,borderDashOffset:M,borderRadius:H}=G,W=G.borderAlign==="inner";if(!B)return;if($.setLineDash(T||[]),$.lineDashOffset=M,W)$.lineWidth=B*2,$.lineJoin=w||"round";else $.lineWidth=B,$.lineJoin=w||"bevel";let z=J.endAngle;if(Y){T8($,J,Z,q,z,Q);for(let F=0;F<Y;++F)$.stroke();if(!isNaN(K))z=X+(K%B0||B0)}if(W)IK($,J,z);if(G.selfJoin&&z-X>=e&&H===0&&w!=="miter")PK($,J,z);if(!Y)T8($,J,Z,q,z,Q),$.stroke()}class g6 extends l1{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:($)=>$!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor($){super();if(this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,$)Object.assign(this,$)}inRange($,J,Z){let q=this.getProps(["x","y"],Z),{angle:Q,distance:Y}=a9(q,{x:$,y:J}),{startAngle:X,endAngle:K,innerRadius:G,outerRadius:B,circumference:w}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],Z),T=(this.options.spacing+this.options.borderWidth)/2,M=s(w,K-X),H=m2(Q,X,K)&&X!==K,W=M>=B0||H,z=d1(Y,G+T,B+T);return W&&z}getCenterPoint($){let{x:J,y:Z,startAngle:q,endAngle:Q,innerRadius:Y,outerRadius:X}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],$),{offset:K,spacing:G}=this.options,B=(q+Q)/2,w=(Y+X+G+K)/2;return{x:J+Math.cos(B)*w,y:Z+Math.sin(B)*w}}tooltipPosition($){return this.getCenterPoint($)}draw($){let{options:J,circumference:Z}=this,q=(J.offset||0)/4,Q=(J.spacing||0)/2,Y=J.circular;if(this.pixelMargin=J.borderAlign==="inner"?0.33:0,this.fullCircles=Z>B0?Math.floor(Z/B0):0,Z===0||this.innerRadius<0||this.outerRadius<0)return;$.save();let X=(this.startAngle+this.endAngle)/2;$.translate(Math.cos(X)*q,Math.sin(X)*q);let K=1-Math.sin(Math.min(e,Z||0)),G=q*K;$.fillStyle=J.backgroundColor,$.strokeStyle=J.borderColor,NK($,this,G,Q,Y),OK($,this,G,Q,Y),$.restore()}}function zq($,J,Z=J){$.lineCap=s(Z.borderCapStyle,J.borderCapStyle),$.setLineDash(s(Z.borderDash,J.borderDash)),$.lineDashOffset=s(Z.borderDashOffset,J.borderDashOffset),$.lineJoin=s(Z.borderJoinStyle,J.borderJoinStyle),$.lineWidth=s(Z.borderWidth,J.borderWidth),$.strokeStyle=s(Z.borderColor,J.borderColor)}function AK($,J,Z){$.lineTo(Z.x,Z.y)}function bK($){if($.stepped)return cJ;if($.tension||$.cubicInterpolationMode==="monotone")return sJ;return AK}function Wq($,J,Z={}){let q=$.length,{start:Q=0,end:Y=q-1}=Z,{start:X,end:K}=J,G=Math.max(Q,X),B=Math.min(Y,K),w=Q<X&&Y<X||Q>K&&Y>K;return{count:q,start:G,loop:J.loop,ilen:B<G&&!w?q+B-G:B-G}}function fK($,J,Z,q){let{points:Q,options:Y}=J,{count:X,start:K,loop:G,ilen:B}=Wq(Q,Z,q),w=bK(Y),{move:T=!0,reverse:M}=q||{},H,W,z;for(H=0;H<=B;++H){if(W=Q[(K+(M?B-H:H))%X],W.skip)continue;else if(T)$.moveTo(W.x,W.y),T=!1;else w($,z,W,M,Y.stepped);z=W}if(G)W=Q[(K+(M?B:0))%X],w($,z,W,M,Y.stepped);return!!G}function kK($,J,Z,q){let Q=J.points,{count:Y,start:X,ilen:K}=Wq(Q,Z,q),{move:G=!0,reverse:B}=q||{},w=0,T=0,M,H,W,z,F,j,_=(L)=>(X+(B?K-L:L))%Y,P=()=>{if(z!==F)$.lineTo(w,F),$.lineTo(w,z),$.lineTo(w,j)};if(G)H=Q[_(0)],$.moveTo(H.x,H.y);for(M=0;M<=K;++M){if(H=Q[_(M)],H.skip)continue;let{x:L,y:D}=H,C=L|0;if(C===W){if(D<z)z=D;else if(D>F)F=D;w=(T*w+L)/++T}else P(),$.lineTo(L,D),W=C,T=0,z=F=D;j=D}P()}function S6($){let J=$.options,Z=J.borderDash&&J.borderDash.length;return!$._decimated&&!$._loop&&!J.tension&&J.cubicInterpolationMode!=="monotone"&&!J.stepped&&!Z?kK:fK}function vK($){if($.stepped)return ZZ;if($.tension||$.cubicInterpolationMode==="monotone")return qZ;return x1}function EK($,J,Z,q){let Q=J._path;if(!Q){if(Q=J._path=new Path2D,J.path(Q,Z,q))Q.closePath()}zq($,J.options),$.stroke(Q)}function yK($,J,Z,q){let{segments:Q,options:Y}=J,X=S6(J);for(let K of Q){if(zq($,Y,K.style),$.beginPath(),X($,J,K,{start:Z,end:Z+q-1}))$.closePath();$.stroke()}}var gK=typeof Path2D==="function";function hK($,J,Z,q){if(gK&&!J.options.segment)EK($,J,Z,q);else yK($,J,Z,q)}class d2 extends l1{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:($)=>$!=="borderDash"&&$!=="fill"};constructor($){super();if(this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,$)Object.assign(this,$)}updateControlPoints($,J){let Z=this.options;if((Z.tension||Z.cubicInterpolationMode==="monotone")&&!Z.stepped&&!this._pointsUpdated){let q=Z.spanGaps?this._loop:this._fullLoop;eJ(this._points,Z,$,q,J),this._pointsUpdated=!0}}set points($){this._points=$,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=YZ(this,this.options.segment))}first(){let $=this.segments,J=this.points;return $.length&&J[$[0].start]}last(){let $=this.segments,J=this.points,Z=$.length;return Z&&J[$[Z-1].end]}interpolate($,J){let Z=this.options,q=$[J],Q=this.points,Y=H6(this,{property:J,start:q,end:q});if(!Y.length)return;let X=[],K=vK(Z),G,B;for(G=0,B=Y.length;G<B;++G){let{start:w,end:T}=Y[G],M=Q[w],H=Q[T];if(M===H){X.push(M);continue}let W=Math.abs((q-M[J])/(H[J]-M[J])),z=K(M,H,W,Z.stepped);z[J]=$[J],X.push(z)}return X.length===1?X[0]:X}pathSegment($,J,Z){return S6(this)($,this,J,Z)}path($,J,Z){let q=this.segments,Q=S6(this),Y=this._loop;J=J||0,Z=Z||this.points.length-J;for(let X of q)Y&=Q($,this,X,{start:J,end:J+Z-1});return!!Y}draw($,J,Z,q){let Q=this.options||{};if((this.points||[]).length&&Q.borderWidth)$.save(),hK($,this,Z,q),$.restore();if(this.animated)this._pointsUpdated=!1,this._path=void 0}}function bZ($,J,Z,q){let Q=$.options,{[Z]:Y}=$.getProps([Z],q);return Math.abs(J-Y)<Q.radius+Q.hitRadius}class h6 extends l1{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor($){super();if(this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,$)Object.assign(this,$)}inRange($,J,Z){let q=this.options,{x:Q,y:Y}=this.getProps(["x","y"],Z);return Math.pow($-Q,2)+Math.pow(J-Y,2)<Math.pow(q.hitRadius+q.radius,2)}inXRange($,J){return bZ(this,$,"x",J)}inYRange($,J){return bZ(this,$,"y",J)}getCenterPoint($){let{x:J,y:Z}=this.getProps(["x","y"],$);return{x:J,y:Z}}size($){$=$||this.options||{};let J=$.radius||0;J=Math.max(J,J&&$.hoverRadius||0);let Z=J&&$.borderWidth||0;return(J+Z)*2}draw($,J){let Z=this.options;if(this.skip||Z.radius<0.1||!B1(this,J,this.size(Z)/2))return;$.strokeStyle=Z.borderColor,$.lineWidth=Z.borderWidth,$.fillStyle=Z.backgroundColor,t4($,Z,this.x,this.y)}getRange(){let $=this.options||{};return $.radius+$.hitRadius}}function uK($,J,Z){let{segments:q,points:Q}=$,Y=J.points,X=[];for(let K of q){let{start:G,end:B}=K;B=H8(G,B,Q);let w=C6(Z,Q[G],Q[B],K.loop);if(!J.segments){X.push({source:K,target:w,start:Q[G],end:Q[B]});continue}let T=H6(J,w);for(let M of T){let H=C6(Z,Y[M.start],Y[M.end],M.loop),W=M6(K,Q,H);for(let z of W)X.push({source:z,target:M,start:{[Z]:fZ(w,H,"start",Math.max)},end:{[Z]:fZ(w,H,"end",Math.min)}})}}return X}function C6($,J,Z,q){if(q)return;let Q=J[$],Y=Z[$];if($==="angle")Q=b0(Q),Y=b0(Y);return{property:$,start:Q,end:Y}}function xK($,J){let{x:Z=null,y:q=null}=$||{},Q=J.points,Y=[];return J.segments.forEach(({start:X,end:K})=>{K=H8(X,K,Q);let G=Q[X],B=Q[K];if(q!==null)Y.push({x:G.x,y:q}),Y.push({x:B.x,y:q});else if(Z!==null)Y.push({x:Z,y:G.y}),Y.push({x:Z,y:B.y})}),Y}function H8($,J,Z){for(;J>$;J--){let q=Z[J];if(!isNaN(q.x)&&!isNaN(q.y))break}return J}function fZ($,J,Z,q){if($&&J)return q($[Z],J[Z]);return $?$[Z]:J?J[Z]:0}function Fq($,J){let Z=[],q=!1;if(T0($))q=!0,Z=$;else Z=xK($,J);return Z.length?new d2({points:Z,options:{tension:0},_loop:q,_fullLoop:q}):null}function kZ($){return $&&$.fill!==!1}function mK($,J,Z){let Q=$[J].fill,Y=[J],X;if(!Z)return Q;while(Q!==!1&&Y.indexOf(Q)===-1){if(!H0(Q))return Q;if(X=$[Q],!X)return!1;if(X.visible)return Q;Y.push(Q),Q=X.fill}return!1}function pK($,J,Z){let q=sK($);if(l(q))return isNaN(q.value)?!1:q;let Q=parseFloat(q);if(H0(Q)&&Math.floor(Q)===Q)return dK(q[0],J,Q,Z);return["origin","start","end","stack","shape"].indexOf(q)>=0&&q}function dK($,J,Z,q){if($==="-"||$==="+")Z=J+Z;if(Z===J||Z<0||Z>=q)return!1;return Z}function rK($,J){let Z=null;if($==="start")Z=J.bottom;else if($==="end")Z=J.top;else if(l($))Z=J.getPixelForValue($.value);else if(J.getBasePixel)Z=J.getBasePixel();return Z}function cK($,J,Z){let q;if($==="start")q=Z;else if($==="end")q=J.options.reverse?J.min:J.max;else if(l($))q=$.value;else q=J.getBaseValue();return q}function sK($){let J=$.options,Z=J.fill,q=s(Z&&Z.target,Z);if(q===void 0)q=!!J.backgroundColor;if(q===!1||q===null)return!1;if(q===!0)return"origin";return q}function oK($){let{scale:J,index:Z,line:q}=$,Q=[],Y=q.segments,X=q.points,K=lK(J,Z);K.push(Fq({x:null,y:J.bottom},q));for(let G=0;G<Y.length;G++){let B=Y[G];for(let w=B.start;w<=B.end;w++)iK(Q,X[w],K)}return new d2({points:Q,options:{}})}function lK($,J){let Z=[],q=$.getMatchingVisibleMetas("line");for(let Q=0;Q<q.length;Q++){let Y=q[Q];if(Y.index===J)break;if(!Y.hidden)Z.unshift(Y.dataset)}return Z}function iK($,J,Z){let q=[];for(let Q=0;Q<Z.length;Q++){let Y=Z[Q],{first:X,last:K,point:G}=nK(Y,J,"x");if(!G||X&&K)continue;if(X)q.unshift(G);else if($.push(G),!K)break}$.push(...q)}function nK($,J,Z){let q=$.interpolate(J,Z);if(!q)return{};let Q=q[Z],Y=$.segments,X=$.points,K=!1,G=!1;for(let B=0;B<Y.length;B++){let w=Y[B],T=X[w.start][Z],M=X[w.end][Z];if(d1(Q,T,M)){K=Q===T,G=Q===M;break}}return{first:K,last:G,point:q}}class u6{constructor($){this.x=$.x,this.y=$.y,this.radius=$.radius}pathSegment($,J,Z){let{x:q,y:Q,radius:Y}=this;return J=J||{start:0,end:B0},$.arc(q,Q,Y,J.end,J.start,!0),!Z.bounds}interpolate($){let{x:J,y:Z,radius:q}=this,Q=$.angle;return{x:J+Math.cos(Q)*q,y:Z+Math.sin(Q)*q,angle:Q}}}function aK($){let{chart:J,fill:Z,line:q}=$;if(H0(Z))return tK(J,Z);if(Z==="stack")return oK($);if(Z==="shape")return!0;let Q=eK($);if(Q instanceof u6)return Q;return Fq(Q,q)}function tK($,J){let Z=$.getDatasetMeta(J);return Z&&$.isDatasetVisible(J)?Z.dataset:null}function eK($){if(($.scale||{}).getPointPositionForValue)return JG($);return $G($)}function $G($){let{scale:J={},fill:Z}=$,q=rK(Z,J);if(H0(q)){let Q=J.isHorizontal();return{x:Q?q:null,y:Q?null:q}}return null}function JG($){let{scale:J,fill:Z}=$,q=J.options,Q=J.getLabels().length,Y=q.reverse?J.max:J.min,X=cK(Z,J,Y),K=[];if(q.grid.circular){let G=J.getPointPositionForValue(0,Y);return new u6({x:G.x,y:G.y,radius:J.getDistanceFromCenterForValue(X)})}for(let G=0;G<Q;++G)K.push(J.getPointPositionForValue(G,X));return K}function L6($,J,Z){let q=aK(J),{chart:Q,index:Y,line:X,scale:K,axis:G}=J,B=X.options,w=B.fill,T=B.backgroundColor,{above:M=T,below:H=T}=w||{},W=Q.getDatasetMeta(Y),z=z6(Q,W);if(q&&X.points.length)P5($,Z),ZG($,{line:X,target:q,above:M,below:H,area:Z,scale:K,axis:G,clip:z}),I5($)}function ZG($,J){let{line:Z,target:q,above:Q,below:Y,area:X,scale:K,clip:G}=J,B=Z._loop?"angle":J.axis;$.save();let w=Y;if(Y!==Q){if(B==="x")vZ($,q,X.top),V6($,{line:Z,target:q,color:Q,scale:K,property:B,clip:G}),$.restore(),$.save(),vZ($,q,X.bottom);else if(B==="y")EZ($,q,X.left),V6($,{line:Z,target:q,color:Y,scale:K,property:B,clip:G}),$.restore(),$.save(),EZ($,q,X.right),w=Q}V6($,{line:Z,target:q,color:w,scale:K,property:B,clip:G}),$.restore()}function vZ($,J,Z){let{segments:q,points:Q}=J,Y=!0,X=!1;$.beginPath();for(let K of q){let{start:G,end:B}=K,w=Q[G],T=Q[H8(G,B,Q)];if(Y)$.moveTo(w.x,w.y),Y=!1;else $.lineTo(w.x,Z),$.lineTo(w.x,w.y);if(X=!!J.pathSegment($,K,{move:X}),X)$.closePath();else $.lineTo(T.x,Z)}$.lineTo(J.first().x,Z),$.closePath(),$.clip()}function EZ($,J,Z){let{segments:q,points:Q}=J,Y=!0,X=!1;$.beginPath();for(let K of q){let{start:G,end:B}=K,w=Q[G],T=Q[H8(G,B,Q)];if(Y)$.moveTo(w.x,w.y),Y=!1;else $.lineTo(Z,w.y),$.lineTo(w.x,w.y);if(X=!!J.pathSegment($,K,{move:X}),X)$.closePath();else $.lineTo(Z,T.y)}$.lineTo(Z,J.first().y),$.closePath(),$.clip()}function V6($,J){let{line:Z,target:q,property:Q,color:Y,scale:X,clip:K}=J,G=uK(Z,q,Q);for(let{source:B,target:w,start:T,end:M}of G){let{style:{backgroundColor:H=Y}={}}=B,W=q!==!0;$.save(),$.fillStyle=H,qG($,X,K,W&&C6(Q,T,M)),$.beginPath();let z=!!Z.pathSegment($,B),F;if(W){if(z)$.closePath();else yZ($,q,M,Q);let j=!!q.pathSegment($,w,{move:z,reverse:!0});if(F=z&&j,!F)yZ($,q,T,Q)}$.closePath(),$.fill(F?"evenodd":"nonzero"),$.restore()}}function qG($,J,Z,q){let Q=J.chart.chartArea,{property:Y,start:X,end:K}=q||{};if(Y==="x"||Y==="y"){let G,B,w,T;if(Y==="x")G=X,B=Q.top,w=K,T=Q.bottom;else G=Q.left,B=X,w=Q.right,T=K;if($.beginPath(),Z)G=Math.max(G,Z.left),w=Math.min(w,Z.right),B=Math.max(B,Z.top),T=Math.min(T,Z.bottom);$.rect(G,B,w-G,T-B),$.clip()}}function yZ($,J,Z,q){let Q=J.interpolate(Z,q);if(Q)$.lineTo(Q.x,Q.y)}var jq={id:"filler",afterDatasetsUpdate($,J,Z){let q=($.data.datasets||[]).length,Q=[],Y,X,K,G;for(X=0;X<q;++X){if(Y=$.getDatasetMeta(X),K=Y.dataset,G=null,K&&K.options&&K instanceof d2)G={visible:$.isDatasetVisible(X),index:X,fill:pK(K,X,q),chart:$,axis:Y.controller.options.indexAxis,scale:Y.vScale,line:K};Y.$filler=G,Q.push(G)}for(X=0;X<q;++X){if(G=Q[X],!G||G.fill===!1)continue;G.fill=mK(Q,X,Z.propagate)}},beforeDraw($,J,Z){let q=Z.drawTime==="beforeDraw",Q=$.getSortedVisibleDatasetMetas(),Y=$.chartArea;for(let X=Q.length-1;X>=0;--X){let K=Q[X].$filler;if(!K)continue;if(K.line.updateControlPoints(Y,K.axis),q&&K.fill)L6($.ctx,K,Y)}},beforeDatasetsDraw($,J,Z){if(Z.drawTime!=="beforeDatasetsDraw")return;let q=$.getSortedVisibleDatasetMetas();for(let Q=q.length-1;Q>=0;--Q){let Y=q[Q].$filler;if(kZ(Y))L6($.ctx,Y,$.chartArea)}},beforeDatasetDraw($,J,Z){let q=J.meta.$filler;if(!kZ(q)||Z.drawTime!=="beforeDatasetDraw")return;L6($.ctx,q,$.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},gZ=($,J)=>{let{boxHeight:Z=J,boxWidth:q=J}=$;if($.usePointStyle)Z=Math.min(Z,J),q=$.pointStyleWidth||Math.min(q,J);return{boxWidth:q,boxHeight:Z,itemHeight:Math.max(J,Z)}},QG=($,J)=>$!==null&&J!==null&&$.datasetIndex===J.datasetIndex&&$.index===J.index;class N6 extends l1{constructor($){super();this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=$.chart,this.options=$.options,this.ctx=$.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update($,J,Z){this.maxWidth=$,this.maxHeight=J,this._margins=Z,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){if(this.isHorizontal())this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width;else this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height}buildLabels(){let $=this.options.labels||{},J=U0($.generateLabels,[this.chart],this)||[];if($.filter)J=J.filter((Z)=>$.filter(Z,this.chart.data));if($.sort)J=J.sort((Z,q)=>$.sort(Z,q,this.chart.data));if(this.options.reverse)J.reverse();this.legendItems=J}fit(){let{options:$,ctx:J}=this;if(!$.display){this.width=this.height=0;return}let Z=$.labels,q=N0(Z.font),Q=q.size,Y=this._computeTitleHeight(),{boxWidth:X,itemHeight:K}=gZ(Z,Q),G,B;if(J.font=q.string,this.isHorizontal())G=this.maxWidth,B=this._fitRows(Y,Q,X,K)+10;else B=this.maxHeight,G=this._fitCols(Y,q,X,K)+10;this.width=Math.min(G,$.maxWidth||this.maxWidth),this.height=Math.min(B,$.maxHeight||this.maxHeight)}_fitRows($,J,Z,q){let{ctx:Q,maxWidth:Y,options:{labels:{padding:X}}}=this,K=this.legendHitBoxes=[],G=this.lineWidths=[0],B=q+X,w=$;Q.textAlign="left",Q.textBaseline="middle";let T=-1,M=-B;return this.legendItems.forEach((H,W)=>{let z=Z+J/2+Q.measureText(H.text).width;if(W===0||G[G.length-1]+z+2*X>Y)w+=B,G[G.length-(W>0?0:1)]=0,M+=B,T++;K[W]={left:0,top:M,row:T,width:z,height:q},G[G.length-1]+=z+X}),w}_fitCols($,J,Z,q){let{ctx:Q,maxHeight:Y,options:{labels:{padding:X}}}=this,K=this.legendHitBoxes=[],G=this.columnSizes=[],B=Y-$,w=X,T=0,M=0,H=0,W=0;return this.legendItems.forEach((z,F)=>{let{itemWidth:j,itemHeight:_}=YG(Z,J,Q,z,q);if(F>0&&M+_+2*X>B)w+=T+X,G.push({width:T,height:M}),H+=T+X,W++,T=M=0;K[F]={left:H,top:M,col:W,width:j,height:_},T=Math.max(T,j),M+=_+X}),w+=T,G.push({width:T,height:M}),w}adjustHitBoxes(){if(!this.options.display)return;let $=this._computeTitleHeight(),{legendHitBoxes:J,options:{align:Z,labels:{padding:q},rtl:Q}}=this,Y=G2(Q,this.left,this.width);if(this.isHorizontal()){let X=0,K=u0(Z,this.left+q,this.right-this.lineWidths[X]);for(let G of J){if(X!==G.row)X=G.row,K=u0(Z,this.left+q,this.right-this.lineWidths[X]);G.top+=this.top+$+q,G.left=Y.leftForLtr(Y.x(K),G.width),K+=G.width+q}}else{let X=0,K=u0(Z,this.top+$+q,this.bottom-this.columnSizes[X].height);for(let G of J){if(G.col!==X)X=G.col,K=u0(Z,this.top+$+q,this.bottom-this.columnSizes[X].height);G.top=K,G.left+=this.left+q,G.left=Y.leftForLtr(Y.x(G.left),G.width),K+=G.height+q}}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let $=this.ctx;P5($,this),this._draw(),I5($)}}_draw(){let{options:$,columnSizes:J,lineWidths:Z,ctx:q}=this,{align:Q,labels:Y}=$,X=z0.color,K=G2($.rtl,this.left,this.width),G=N0(Y.font),{padding:B}=Y,w=G.size,T=w/2,M;this.drawTitle(),q.textAlign=K.textAlign("left"),q.textBaseline="middle",q.lineWidth=0.5,q.font=G.string;let{boxWidth:H,boxHeight:W,itemHeight:z}=gZ(Y,w),F=function(D,C,S){if(isNaN(H)||H<=0||isNaN(W)||W<0)return;q.save();let V=s(S.lineWidth,1);if(q.fillStyle=s(S.fillStyle,X),q.lineCap=s(S.lineCap,"butt"),q.lineDashOffset=s(S.lineDashOffset,0),q.lineJoin=s(S.lineJoin,"miter"),q.lineWidth=V,q.strokeStyle=s(S.strokeStyle,X),q.setLineDash(s(S.lineDash,[])),Y.usePointStyle){let I={radius:W*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:V},g=K.xPlus(D,H/2),E=C+T;Y6(q,I,g,E,Y.pointStyleWidth&&H)}else{let I=C+Math.max((w-W)/2,0),g=K.leftForLtr(D,H),E=K2(S.borderRadius);if(q.beginPath(),Object.values(E).some((K0)=>K0!==0))S5(q,{x:g,y:I,w:H,h:W,radius:E});else q.rect(g,I,H,W);if(q.fill(),V!==0)q.stroke()}q.restore()},j=function(D,C,S){U2(q,S.text,D,C+z/2,G,{strikethrough:S.hidden,textAlign:K.textAlign(S.textAlign)})},_=this.isHorizontal(),P=this._computeTitleHeight();if(_)M={x:u0(Q,this.left+B,this.right-Z[0]),y:this.top+B+P,line:0};else M={x:this.left+B,y:u0(Q,this.top+P+B,this.bottom-J[0].height),line:0};w6(this.ctx,$.textDirection);let L=z+B;this.legendItems.forEach((D,C)=>{q.strokeStyle=D.fontColor,q.fillStyle=D.fontColor;let S=q.measureText(D.text).width,V=K.textAlign(D.textAlign||(D.textAlign=Y.textAlign)),I=H+T+S,g=M.x,E=M.y;if(K.setWidth(this.width),_){if(C>0&&g+I+B>this.right)E=M.y+=L,M.line++,g=M.x=u0(Q,this.left+B,this.right-Z[M.line])}else if(C>0&&E+L>this.bottom)g=M.x=g+J[M.line].width+B,M.line++,E=M.y=u0(Q,this.top+P+B,this.bottom-J[M.line].height);let K0=K.x(g);if(F(K0,E,D),g=uJ(V,g+H+T,_?g+I:this.right,$.rtl),j(K.x(g),E,D),_)M.x+=I+B;else if(typeof D.text!=="string"){let f0=G.lineHeight;M.y+=Rq(D,f0)+B}else M.y+=L}),T6(this.ctx,$.textDirection)}drawTitle(){let $=this.options,J=$.title,Z=N0(J.font),q=E0(J.padding);if(!J.display)return;let Q=G2($.rtl,this.left,this.width),Y=this.ctx,X=J.position,K=Z.size/2,G=q.top+K,B,w=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),B=this.top+G,w=u0($.align,w,this.right-T);else{let H=this.columnSizes.reduce((W,z)=>Math.max(W,z.height),0);B=G+u0($.align,this.top,this.bottom-H-$.labels.padding-this._computeTitleHeight())}let M=u0(X,w,w+T);Y.textAlign=Q.textAlign(J6(X)),Y.textBaseline="middle",Y.strokeStyle=J.color,Y.fillStyle=J.color,Y.font=Z.string,U2(Y,J.text,M,B,Z)}_computeTitleHeight(){let $=this.options.title,J=N0($.font),Z=E0($.padding);return $.display?J.lineHeight+Z.height:0}_getLegendItemAt($,J){let Z,q,Q;if(d1($,this.left,this.right)&&d1(J,this.top,this.bottom)){Q=this.legendHitBoxes;for(Z=0;Z<Q.length;++Z)if(q=Q[Z],d1($,q.left,q.left+q.width)&&d1(J,q.top,q.top+q.height))return this.legendItems[Z]}return null}handleEvent($){let J=this.options;if(!KG($.type,J))return;let Z=this._getLegendItemAt($.x,$.y);if($.type==="mousemove"||$.type==="mouseout"){let q=this._hoveredItem,Q=QG(q,Z);if(q&&!Q)U0(J.onLeave,[$,q,this],this);if(this._hoveredItem=Z,Z&&!Q)U0(J.onHover,[$,Z,this],this)}else if(Z)U0(J.onClick,[$,Z,this],this)}}function YG($,J,Z,q,Q){let Y=XG(q,$,J,Z),X=UG(Q,q,J.lineHeight);return{itemWidth:Y,itemHeight:X}}function XG($,J,Z,q){let Q=$.text;if(Q&&typeof Q!=="string")Q=Q.reduce((Y,X)=>Y.length>X.length?Y:X);return J+Z.size/2+q.measureText(Q).width}function UG($,J,Z){let q=$;if(typeof J.text!=="string")q=Rq(J,Z);return q}function Rq($,J){let Z=$.text?$.text.length:0;return J*Z}function KG($,J){if(($==="mousemove"||$==="mouseout")&&(J.onHover||J.onLeave))return!0;if(J.onClick&&($==="click"||$==="mouseup"))return!0;return!1}var _q={id:"legend",_element:N6,start($,J,Z){let q=$.legend=new N6({ctx:$.ctx,options:Z,chart:$});o1.configure($,q,Z),o1.addBox($,q)},stop($){o1.removeBox($,$.legend),delete $.legend},beforeUpdate($,J,Z){let q=$.legend;o1.configure($,q,Z),q.options=Z},afterUpdate($){let J=$.legend;J.buildLabels(),J.adjustHitBoxes()},afterEvent($,J){if(!J.replay)$.legend.handleEvent(J.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1000,onClick($,J,Z){let q=J.datasetIndex,Q=Z.chart;if(Q.isDatasetVisible(q))Q.hide(q),J.hidden=!0;else Q.show(q),J.hidden=!1},onHover:null,onLeave:null,labels:{color:($)=>$.chart.options.color,boxWidth:40,padding:10,generateLabels($){let J=$.data.datasets,{labels:{usePointStyle:Z,pointStyle:q,textAlign:Q,color:Y,useBorderRadius:X,borderRadius:K}}=$.legend.options;return $._getSortedDatasetMetas().map((G)=>{let B=G.controller.getStyle(Z?0:void 0),w=E0(B.borderWidth);return{text:J[G.index].label,fillStyle:B.backgroundColor,fontColor:Y,hidden:!G.visible,lineCap:B.borderCapStyle,lineDash:B.borderDash,lineDashOffset:B.borderDashOffset,lineJoin:B.borderJoinStyle,lineWidth:(w.width+w.height)/4,strokeStyle:B.borderColor,pointStyle:q||B.pointStyle,rotation:B.rotation,textAlign:Q||B.textAlign,borderRadius:X&&(K||B.borderRadius),datasetIndex:G.index}},this)}},title:{color:($)=>$.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:($)=>!$.startsWith("on"),labels:{_scriptable:($)=>!["generateLabels","filter","sort"].includes($)}}};var E5={average($){if(!$.length)return!1;let J,Z,q=new Set,Q=0,Y=0;for(J=0,Z=$.length;J<Z;++J){let K=$[J].element;if(K&&K.hasValue()){let G=K.tooltipPosition();q.add(G.x),Q+=G.y,++Y}}if(Y===0||q.size===0)return!1;return{x:[...q].reduce((K,G)=>K+G)/q.size,y:Q/Y}},nearest($,J){if(!$.length)return!1;let{x:Z,y:q}=J,Q=Number.POSITIVE_INFINITY,Y,X,K;for(Y=0,X=$.length;Y<X;++Y){let G=$[Y].element;if(G&&G.hasValue()){let B=G.getCenterPoint(),w=s4(J,B);if(w<Q)Q=w,K=G}}if(K){let G=K.tooltipPosition();Z=G.x,q=G.y}return{x:Z,y:q}}};function T1($,J){if(J)if(T0(J))Array.prototype.push.apply($,J);else $.push(J);return $}function O1($){if((typeof $==="string"||$ instanceof String)&&$.indexOf(`
`)>-1)return $.split(`
`);return $}function GG($,J){let{element:Z,datasetIndex:q,index:Q}=J,Y=$.getDatasetMeta(q).controller,{label:X,value:K}=Y.getLabelAndValue(Q);return{chart:$,label:X,parsed:Y.getParsed(Q),raw:$.data.datasets[q].data[Q],formattedValue:K,dataset:Y.getDataset(),dataIndex:Q,datasetIndex:q,element:Z}}function hZ($,J){let Z=$.chart.ctx,{body:q,footer:Q,title:Y}=$,{boxWidth:X,boxHeight:K}=J,G=N0(J.bodyFont),B=N0(J.titleFont),w=N0(J.footerFont),T=Y.length,M=Q.length,H=q.length,W=E0(J.padding),z=W.height,F=0,j=q.reduce((L,D)=>L+D.before.length+D.lines.length+D.after.length,0);if(j+=$.beforeBody.length+$.afterBody.length,T)z+=T*B.lineHeight+(T-1)*J.titleSpacing+J.titleMarginBottom;if(j){let L=J.displayColors?Math.max(K,G.lineHeight):G.lineHeight;z+=H*L+(j-H)*G.lineHeight+(j-1)*J.bodySpacing}if(M)z+=J.footerMarginTop+M*w.lineHeight+(M-1)*J.footerSpacing;let _=0,P=function(L){F=Math.max(F,Z.measureText(L).width+_)};return Z.save(),Z.font=B.string,J0($.title,P),Z.font=G.string,J0($.beforeBody.concat($.afterBody),P),_=J.displayColors?X+2+J.boxPadding:0,J0(q,(L)=>{J0(L.before,P),J0(L.lines,P),J0(L.after,P)}),_=0,Z.font=w.string,J0($.footer,P),Z.restore(),F+=W.width,{width:F,height:z}}function BG($,J){let{y:Z,height:q}=J;if(Z<q/2)return"top";else if(Z>$.height-q/2)return"bottom";return"center"}function wG($,J,Z,q){let{x:Q,width:Y}=q,X=Z.caretSize+Z.caretPadding;if($==="left"&&Q+Y+X>J.width)return!0;if($==="right"&&Q-Y-X<0)return!0}function TG($,J,Z,q){let{x:Q,width:Y}=Z,{width:X,chartArea:{left:K,right:G}}=$,B="center";if(q==="center")B=Q<=(K+G)/2?"left":"right";else if(Q<=Y/2)B="left";else if(Q>=X-Y/2)B="right";if(wG(B,$,J,Z))B="center";return B}function uZ($,J,Z){let q=Z.yAlign||J.yAlign||BG($,Z);return{xAlign:Z.xAlign||J.xAlign||TG($,J,Z,q),yAlign:q}}function MG($,J){let{x:Z,width:q}=$;if(J==="right")Z-=q;else if(J==="center")Z-=q/2;return Z}function HG($,J,Z){let{y:q,height:Q}=$;if(J==="top")q+=Z;else if(J==="bottom")q-=Q+Z;else q-=Q/2;return q}function xZ($,J,Z,q){let{caretSize:Q,caretPadding:Y,cornerRadius:X}=$,{xAlign:K,yAlign:G}=Z,B=Q+Y,{topLeft:w,topRight:T,bottomLeft:M,bottomRight:H}=K2(X),W=MG(J,K),z=HG(J,G,B);if(G==="center"){if(K==="left")W+=B;else if(K==="right")W-=B}else if(K==="left")W-=Math.max(w,M)+Q;else if(K==="right")W+=Math.max(T,H)+Q;return{x:v0(W,0,q.width-J.width),y:v0(z,0,q.height-J.height)}}function U8($,J,Z){let q=E0(Z.padding);return J==="center"?$.x+$.width/2:J==="right"?$.x+$.width-q.right:$.x+q.left}function mZ($){return T1([],O1($))}function zG($,J,Z){return C1($,{tooltip:J,tooltipItems:Z,type:"tooltip"})}function pZ($,J){let Z=J&&J.dataset&&J.dataset.tooltip&&J.dataset.tooltip.callbacks;return Z?$.override(Z):$}var Dq={beforeTitle:w1,title($){if($.length>0){let J=$[0],Z=J.chart.data.labels,q=Z?Z.length:0;if(this&&this.options&&this.options.mode==="dataset")return J.dataset.label||"";else if(J.label)return J.label;else if(q>0&&J.dataIndex<q)return Z[J.dataIndex]}return""},afterTitle:w1,beforeBody:w1,beforeLabel:w1,label($){if(this&&this.options&&this.options.mode==="dataset")return $.label+": "+$.formattedValue||$.formattedValue;let J=$.dataset.label||"";if(J)J+=": ";let Z=$.formattedValue;if(!$0(Z))J+=Z;return J},labelColor($){let Z=$.chart.getDatasetMeta($.datasetIndex).controller.getStyle($.dataIndex);return{borderColor:Z.borderColor,backgroundColor:Z.backgroundColor,borderWidth:Z.borderWidth,borderDash:Z.borderDash,borderDashOffset:Z.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle($){let Z=$.chart.getDatasetMeta($.datasetIndex).controller.getStyle($.dataIndex);return{pointStyle:Z.pointStyle,rotation:Z.rotation}},afterLabel:w1,afterBody:w1,beforeFooter:w1,footer:w1,afterFooter:w1};function x0($,J,Z,q){let Q=$[J].call(Z,q);if(typeof Q==="undefined")return Dq[J].call(Z,q);return Q}class O6 extends l1{static positioners=E5;constructor($){super();this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=$.chart,this.options=$.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize($){this.options=$,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let $=this._cachedAnimations;if($)return $;let J=this.chart,Z=this.options.setContext(this.getContext()),q=Z.enabled&&J.options.animation&&Z.animations,Q=new f6(this.chart,q);if(q._cacheable)this._cachedAnimations=Object.freeze(Q);return Q}getContext(){return this.$context||(this.$context=zG(this.chart.getContext(),this,this._tooltipItems))}getTitle($,J){let{callbacks:Z}=J,q=x0(Z,"beforeTitle",this,$),Q=x0(Z,"title",this,$),Y=x0(Z,"afterTitle",this,$),X=[];return X=T1(X,O1(q)),X=T1(X,O1(Q)),X=T1(X,O1(Y)),X}getBeforeBody($,J){return mZ(x0(J.callbacks,"beforeBody",this,$))}getBody($,J){let{callbacks:Z}=J,q=[];return J0($,(Q)=>{let Y={before:[],lines:[],after:[]},X=pZ(Z,Q);T1(Y.before,O1(x0(X,"beforeLabel",this,Q))),T1(Y.lines,x0(X,"label",this,Q)),T1(Y.after,O1(x0(X,"afterLabel",this,Q))),q.push(Y)}),q}getAfterBody($,J){return mZ(x0(J.callbacks,"afterBody",this,$))}getFooter($,J){let{callbacks:Z}=J,q=x0(Z,"beforeFooter",this,$),Q=x0(Z,"footer",this,$),Y=x0(Z,"afterFooter",this,$),X=[];return X=T1(X,O1(q)),X=T1(X,O1(Q)),X=T1(X,O1(Y)),X}_createItems($){let J=this._active,Z=this.chart.data,q=[],Q=[],Y=[],X=[],K,G;for(K=0,G=J.length;K<G;++K)X.push(GG(this.chart,J[K]));if($.filter)X=X.filter((B,w,T)=>$.filter(B,w,T,Z));if($.itemSort)X=X.sort((B,w)=>$.itemSort(B,w,Z));return J0(X,(B)=>{let w=pZ($.callbacks,B);q.push(x0(w,"labelColor",this,B)),Q.push(x0(w,"labelPointStyle",this,B)),Y.push(x0(w,"labelTextColor",this,B))}),this.labelColors=q,this.labelPointStyles=Q,this.labelTextColors=Y,this.dataPoints=X,X}update($,J){let Z=this.options.setContext(this.getContext()),q=this._active,Q,Y=[];if(!q.length){if(this.opacity!==0)Q={opacity:0}}else{let X=E5[Z.position].call(this,q,this._eventPosition);Y=this._createItems(Z),this.title=this.getTitle(Y,Z),this.beforeBody=this.getBeforeBody(Y,Z),this.body=this.getBody(Y,Z),this.afterBody=this.getAfterBody(Y,Z),this.footer=this.getFooter(Y,Z);let K=this._size=hZ(this,Z),G=Object.assign({},X,K),B=uZ(this.chart,Z,G),w=xZ(Z,G,B,this.chart);this.xAlign=B.xAlign,this.yAlign=B.yAlign,Q={opacity:1,x:w.x,y:w.y,width:K.width,height:K.height,caretX:X.x,caretY:X.y}}if(this._tooltipItems=Y,this.$context=void 0,Q)this._resolveAnimations().update(this,Q);if($&&Z.external)Z.external.call(this,{chart:this.chart,tooltip:this,replay:J})}drawCaret($,J,Z,q){let Q=this.getCaretPosition($,Z,q);J.lineTo(Q.x1,Q.y1),J.lineTo(Q.x2,Q.y2),J.lineTo(Q.x3,Q.y3)}getCaretPosition($,J,Z){let{xAlign:q,yAlign:Q}=this,{caretSize:Y,cornerRadius:X}=Z,{topLeft:K,topRight:G,bottomLeft:B,bottomRight:w}=K2(X),{x:T,y:M}=$,{width:H,height:W}=J,z,F,j,_,P,L;if(Q==="center"){if(P=M+W/2,q==="left")z=T,F=z-Y,_=P+Y,L=P-Y;else z=T+H,F=z+Y,_=P-Y,L=P+Y;j=z}else{if(q==="left")F=T+Math.max(K,B)+Y;else if(q==="right")F=T+H-Math.max(G,w)-Y;else F=this.caretX;if(Q==="top")_=M,P=_-Y,z=F-Y,j=F+Y;else _=M+W,P=_+Y,z=F+Y,j=F-Y;L=_}return{x1:z,x2:F,x3:j,y1:_,y2:P,y3:L}}drawTitle($,J,Z){let q=this.title,Q=q.length,Y,X,K;if(Q){let G=G2(Z.rtl,this.x,this.width);$.x=U8(this,Z.titleAlign,Z),J.textAlign=G.textAlign(Z.titleAlign),J.textBaseline="middle",Y=N0(Z.titleFont),X=Z.titleSpacing,J.fillStyle=Z.titleColor,J.font=Y.string;for(K=0;K<Q;++K)if(J.fillText(q[K],G.x($.x),$.y+Y.lineHeight/2),$.y+=Y.lineHeight+X,K+1===Q)$.y+=Z.titleMarginBottom-X}}_drawColorBox($,J,Z,q,Q){let Y=this.labelColors[Z],X=this.labelPointStyles[Z],{boxHeight:K,boxWidth:G}=Q,B=N0(Q.bodyFont),w=U8(this,"left",Q),T=q.x(w),M=K<B.lineHeight?(B.lineHeight-K)/2:0,H=J.y+M;if(Q.usePointStyle){let W={radius:Math.min(G,K)/2,pointStyle:X.pointStyle,rotation:X.rotation,borderWidth:1},z=q.leftForLtr(T,G)+G/2,F=H+K/2;$.strokeStyle=Q.multiKeyBackground,$.fillStyle=Q.multiKeyBackground,t4($,W,z,F),$.strokeStyle=Y.borderColor,$.fillStyle=Y.backgroundColor,t4($,W,z,F)}else{$.lineWidth=l(Y.borderWidth)?Math.max(...Object.values(Y.borderWidth)):Y.borderWidth||1,$.strokeStyle=Y.borderColor,$.setLineDash(Y.borderDash||[]),$.lineDashOffset=Y.borderDashOffset||0;let W=q.leftForLtr(T,G),z=q.leftForLtr(q.xPlus(T,1),G-2),F=K2(Y.borderRadius);if(Object.values(F).some((j)=>j!==0))$.beginPath(),$.fillStyle=Q.multiKeyBackground,S5($,{x:W,y:H,w:G,h:K,radius:F}),$.fill(),$.stroke(),$.fillStyle=Y.backgroundColor,$.beginPath(),S5($,{x:z,y:H+1,w:G-2,h:K-2,radius:F}),$.fill();else $.fillStyle=Q.multiKeyBackground,$.fillRect(W,H,G,K),$.strokeRect(W,H,G,K),$.fillStyle=Y.backgroundColor,$.fillRect(z,H+1,G-2,K-2)}$.fillStyle=this.labelTextColors[Z]}drawBody($,J,Z){let{body:q}=this,{bodySpacing:Q,bodyAlign:Y,displayColors:X,boxHeight:K,boxWidth:G,boxPadding:B}=Z,w=N0(Z.bodyFont),T=w.lineHeight,M=0,H=G2(Z.rtl,this.x,this.width),W=function(S){J.fillText(S,H.x($.x+M),$.y+T/2),$.y+=T+Q},z=H.textAlign(Y),F,j,_,P,L,D,C;J.textAlign=Y,J.textBaseline="middle",J.font=w.string,$.x=U8(this,z,Z),J.fillStyle=Z.bodyColor,J0(this.beforeBody,W),M=X&&z!=="right"?Y==="center"?G/2+B:G+2+B:0;for(P=0,D=q.length;P<D;++P){if(F=q[P],j=this.labelTextColors[P],J.fillStyle=j,J0(F.before,W),_=F.lines,X&&_.length)this._drawColorBox(J,$,P,H,Z),T=Math.max(w.lineHeight,K);for(L=0,C=_.length;L<C;++L)W(_[L]),T=w.lineHeight;J0(F.after,W)}M=0,T=w.lineHeight,J0(this.afterBody,W),$.y-=Q}drawFooter($,J,Z){let q=this.footer,Q=q.length,Y,X;if(Q){let K=G2(Z.rtl,this.x,this.width);$.x=U8(this,Z.footerAlign,Z),$.y+=Z.footerMarginTop,J.textAlign=K.textAlign(Z.footerAlign),J.textBaseline="middle",Y=N0(Z.footerFont),J.fillStyle=Z.footerColor,J.font=Y.string;for(X=0;X<Q;++X)J.fillText(q[X],K.x($.x),$.y+Y.lineHeight/2),$.y+=Y.lineHeight+Z.footerSpacing}}drawBackground($,J,Z,q){let{xAlign:Q,yAlign:Y}=this,{x:X,y:K}=$,{width:G,height:B}=Z,{topLeft:w,topRight:T,bottomLeft:M,bottomRight:H}=K2(q.cornerRadius);if(J.fillStyle=q.backgroundColor,J.strokeStyle=q.borderColor,J.lineWidth=q.borderWidth,J.beginPath(),J.moveTo(X+w,K),Y==="top")this.drawCaret($,J,Z,q);if(J.lineTo(X+G-T,K),J.quadraticCurveTo(X+G,K,X+G,K+T),Y==="center"&&Q==="right")this.drawCaret($,J,Z,q);if(J.lineTo(X+G,K+B-H),J.quadraticCurveTo(X+G,K+B,X+G-H,K+B),Y==="bottom")this.drawCaret($,J,Z,q);if(J.lineTo(X+M,K+B),J.quadraticCurveTo(X,K+B,X,K+B-M),Y==="center"&&Q==="left")this.drawCaret($,J,Z,q);if(J.lineTo(X,K+w),J.quadraticCurveTo(X,K,X+w,K),J.closePath(),J.fill(),q.borderWidth>0)J.stroke()}_updateAnimationTarget($){let J=this.chart,Z=this.$animations,q=Z&&Z.x,Q=Z&&Z.y;if(q||Q){let Y=E5[$.position].call(this,this._active,this._eventPosition);if(!Y)return;let X=this._size=hZ(this,$),K=Object.assign({},Y,this._size),G=uZ(J,$,K),B=xZ($,K,G,J);if(q._to!==B.x||Q._to!==B.y)this.xAlign=G.xAlign,this.yAlign=G.yAlign,this.width=X.width,this.height=X.height,this.caretX=Y.x,this.caretY=Y.y,this._resolveAnimations().update(this,B)}}_willRender(){return!!this.opacity}draw($){let J=this.options.setContext(this.getContext()),Z=this.opacity;if(!Z)return;this._updateAnimationTarget(J);let q={width:this.width,height:this.height},Q={x:this.x,y:this.y};Z=Math.abs(Z)<0.001?0:Z;let Y=E0(J.padding),X=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;if(J.enabled&&X)$.save(),$.globalAlpha=Z,this.drawBackground(Q,$,q,J),w6($,J.textDirection),Q.y+=Y.top,this.drawTitle(Q,$,J),this.drawBody(Q,$,J),this.drawFooter(Q,$,J),T6($,J.textDirection),$.restore()}getActiveElements(){return this._active||[]}setActiveElements($,J){let Z=this._active,q=$.map(({datasetIndex:X,index:K})=>{let G=this.chart.getDatasetMeta(X);if(!G)throw new Error("Cannot find a dataset at index "+X);return{datasetIndex:X,element:G.data[K],index:K}}),Q=!_5(Z,q),Y=this._positionChanged(q,J);if(Q||Y)this._active=q,this._eventPosition=J,this._ignoreReplayEvents=!0,this.update(!0)}handleEvent($,J,Z=!0){if(J&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let q=this.options,Q=this._active||[],Y=this._getActiveElements($,Q,J,Z),X=this._positionChanged(Y,$),K=J||!_5(Y,Q)||X;if(K){if(this._active=Y,q.enabled||q.external)this._eventPosition={x:$.x,y:$.y},this.update(!0,J)}return K}_getActiveElements($,J,Z,q){let Q=this.options;if($.type==="mouseout")return[];if(!q)return J.filter((X)=>this.chart.data.datasets[X.datasetIndex]&&this.chart.getDatasetMeta(X.datasetIndex).controller.getParsed(X.index)!==void 0);let Y=this.chart.getElementsAtEventForMode($,Q.mode,Q,Z);if(Q.reverse)Y.reverse();return Y}_positionChanged($,J){let{caretX:Z,caretY:q,options:Q}=this,Y=E5[Q.position].call(this,$,J);return Y!==!1&&(Z!==Y.x||q!==Y.y)}}var Lq={id:"tooltip",_element:O6,positioners:E5,afterInit($,J,Z){if(Z)$.tooltip=new O6({chart:$,options:Z})},beforeUpdate($,J,Z){if($.tooltip)$.tooltip.initialize(Z)},reset($,J,Z){if($.tooltip)$.tooltip.initialize(Z)},afterDraw($){let J=$.tooltip;if(J&&J._willRender()){let Z={tooltip:J};if($.notifyPlugins("beforeTooltipDraw",{...Z,cancelable:!0})===!1)return;J.draw($.ctx),$.notifyPlugins("afterTooltipDraw",Z)}},afterEvent($,J){if($.tooltip){let Z=J.replay;if($.tooltip.handleEvent(J.event,Z,J.inChartArea))J.changed=!0}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:($,J)=>J.bodyFont.size,boxWidth:($,J)=>J.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Dq},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:($)=>$!=="filter"&&$!=="itemSort"&&$!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};var WG=($,J,Z,q)=>{if(typeof J==="string")Z=$.push(J)-1,q.unshift({index:Z,label:J});else if(isNaN(J))Z=null;return Z};function FG($,J,Z,q){let Q=$.indexOf(J);if(Q===-1)return WG($,J,Z,q);let Y=$.lastIndexOf(J);return Q!==Y?Z:Q}var jG=($,J)=>$===null?null:v0(Math.round($),0,J);function dZ($){let J=this.getLabels();if($>=0&&$<J.length)return J[$];return $}class x6 extends T2{static id="category";static defaults={ticks:{callback:dZ}};constructor($){super($);this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init($){let J=this._addedLabels;if(J.length){let Z=this.getLabels();for(let{index:q,label:Q}of J)if(Z[q]===Q)Z.splice(q,1);this._addedLabels=[]}super.init($)}parse($,J){if($0($))return null;let Z=this.getLabels();return J=isFinite(J)&&Z[J]===$?J:FG(Z,$,s(J,$),this._addedLabels),jG(J,Z.length-1)}determineDataLimits(){let{minDefined:$,maxDefined:J}=this.getUserBounds(),{min:Z,max:q}=this.getMinMax(!0);if(this.options.bounds==="ticks"){if(!$)Z=0;if(!J)q=this.getLabels().length-1}this.min=Z,this.max=q}buildTicks(){let $=this.min,J=this.max,Z=this.options.offset,q=[],Q=this.getLabels();Q=$===0&&J===Q.length-1?Q:Q.slice($,J+1),this._valueRange=Math.max(Q.length-(Z?0:1),1),this._startValue=this.min-(Z?0.5:0);for(let Y=$;Y<=J;Y++)q.push({value:Y});return q}getLabelForValue($){return dZ.call(this,$)}configure(){if(super.configure(),!this.isHorizontal())this._reversePixels=!this._reversePixels}getPixelForValue($){if(typeof $!=="number")$=this.parse($);return $===null?NaN:this.getPixelForDecimal(($-this._startValue)/this._valueRange)}getPixelForTick($){let J=this.ticks;if($<0||$>J.length-1)return null;return this.getPixelForValue(J[$].value)}getValueForPixel($){return Math.round(this._startValue+this.getDecimalForPixel($)*this._valueRange)}getBasePixel(){return this.bottom}}function RG($,J){let Z=[],q=0.00000000000001,{bounds:Q,step:Y,min:X,max:K,precision:G,count:B,maxTicks:w,maxDigits:T,includeBounds:M}=$,H=Y||1,W=w-1,{min:z,max:F}=J,j=!$0(X),_=!$0(K),P=!$0(B),L=(F-z)/(T+1),D=l9((F-z)/W/H)*H,C,S,V,I;if(D<0.00000000000001&&!j&&!_)return[{value:z},{value:F}];if(I=Math.ceil(F/D)-Math.floor(z/D),I>W)D=l9(I*D/W/H)*H;if(!$0(G))C=Math.pow(10,G),D=Math.ceil(D*C)/C;if(Q==="ticks")S=Math.floor(z/D)*D,V=Math.ceil(F/D)*D;else S=z,V=F;if(j&&_&&Y&&bJ((K-X)/Y,D/1000))I=Math.round(Math.min((K-X)/D,w)),D=(K-X)/I,S=X,V=K;else if(P)S=j?X:S,V=_?K:V,I=B-1,D=(V-S)/I;else if(I=(V-S)/D,u2(I,Math.round(I),D/1000))I=Math.round(I);else I=Math.ceil(I);let g=Math.max(n9(D),n9(S));C=Math.pow(10,$0(G)?g:G),S=Math.round(S*C)/C,V=Math.round(V*C)/C;let E=0;if(j){if(M&&S!==X){if(Z.push({value:X}),S<X)E++;if(u2(Math.round((S+E*D)*C)/C,X,rZ(X,L,$)))E++}else if(S<X)E++}for(;E<I;++E){let K0=Math.round((S+E*D)*C)/C;if(_&&K0>K)break;Z.push({value:K0})}if(_&&M&&V!==K)if(Z.length&&u2(Z[Z.length-1].value,K,rZ(K,L,$)))Z[Z.length-1].value=K;else Z.push({value:K});else if(!_||V===K)Z.push({value:V});return Z}function rZ($,J,{horizontal:Z,minRotation:q}){let Q=X1(q),Y=(Z?Math.sin(Q):Math.cos(Q))||0.001,X=0.75*J*(""+$).length;return Math.min(J/Y,X)}class g5 extends T2{constructor($){super($);this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse($,J){if($0($))return null;if((typeof $==="number"||$ instanceof Number)&&!isFinite(+$))return null;return+$}handleTickRangeOptions(){let{beginAtZero:$}=this.options,{minDefined:J,maxDefined:Z}=this.getUserBounds(),{min:q,max:Q}=this,Y=(K)=>q=J?q:K,X=(K)=>Q=Z?Q:K;if($){let K=Y2(q),G=Y2(Q);if(K<0&&G<0)X(0);else if(K>0&&G>0)Y(0)}if(q===Q){let K=Q===0?1:Math.abs(Q*0.05);if(X(Q+K),!$)Y(q-K)}this.min=q,this.max=Q}getTickLimit(){let $=this.options.ticks,{maxTicksLimit:J,stepSize:Z}=$,q;if(Z){if(q=Math.ceil(this.max/Z)-Math.floor(this.min/Z)+1,q>1000)console.warn(`scales.${this.id}.ticks.stepSize: ${Z} would result generating up to ${q} ticks. Limiting to 1000.`),q=1000}else q=this.computeTickLimit(),J=J||11;if(J)q=Math.min(J,q);return q}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let $=this.options,J=$.ticks,Z=this.getTickLimit();Z=Math.max(2,Z);let q={maxTicks:Z,bounds:$.bounds,min:$.min,max:$.max,precision:J.precision,step:J.stepSize,count:J.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:J.minRotation||0,includeBounds:J.includeBounds!==!1},Q=this._range||this,Y=RG(q,Q);if($.bounds==="ticks")i9(Y,this,"value");if($.reverse)Y.reverse(),this.start=this.max,this.end=this.min;else this.start=this.min,this.end=this.max;return Y}configure(){let $=this.ticks,J=this.min,Z=this.max;if(super.configure(),this.options.offset&&$.length){let q=(Z-J)/Math.max($.length-1,1)/2;J-=q,Z+=q}this._startValue=J,this._endValue=Z,this._valueRange=Z-J}getLabelForValue($){return L5($,this.chart.options.locale,this.options.ticks.format)}}class m6 extends g5{static id="linear";static defaults={ticks:{callback:V5.formatters.numeric}};determineDataLimits(){let{min:$,max:J}=this.getMinMax(!0);this.min=H0($)?$:0,this.max=H0(J)?J:1,this.handleTickRangeOptions()}computeTickLimit(){let $=this.isHorizontal(),J=$?this.width:this.height,Z=X1(this.options.ticks.minRotation),q=($?Math.sin(Z):Math.cos(Z))||0.001,Q=this._resolveTickFontOptions(0);return Math.ceil(J/Math.min(40,Q.lineHeight/q))}getPixelForValue($){return $===null?NaN:this.getPixelForDecimal(($-this._startValue)/this._valueRange)}getValueForPixel($){return this._startValue+this.getDecimalForPixel($)*this._valueRange}}var h5=($)=>Math.floor(S1($)),w2=($,J)=>Math.pow(10,h5($)+J);function cZ($){return $/Math.pow(10,h5($))===1}function sZ($,J,Z){let q=Math.pow(10,Z),Q=Math.floor($/q);return Math.ceil(J/q)-Q}function _G($,J){let Z=J-$,q=h5(Z);while(sZ($,J,q)>10)q++;while(sZ($,J,q)<10)q--;return Math.min(q,h5($))}function DG($,{min:J,max:Z}){J=h0($.min,J);let q=[],Q=h5(J),Y=_G(J,Z),X=Y<0?Math.pow(10,Math.abs(Y)):1,K=Math.pow(10,Y),G=Q>Y?Math.pow(10,Q):0,B=Math.round((J-G)*X)/X,w=Math.floor((J-G)/K/10)*K*10,T=Math.floor((B-w)/Math.pow(10,Y)),M=h0($.min,Math.round((G+w+T*Math.pow(10,Y))*X)/X);while(M<Z){if(q.push({value:M,major:cZ(M),significand:T}),T>=10)T=T<15?15:20;else T++;if(T>=20)Y++,T=2,X=Y>=0?1:X;M=Math.round((G+w+T*Math.pow(10,Y))*X)/X}let H=h0($.max,M);return q.push({value:H,major:cZ(H),significand:T}),q}class LG extends T2{static id="logarithmic";static defaults={ticks:{callback:V5.formatters.logarithmic,major:{enabled:!0}}};constructor($){super($);this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse($,J){let Z=g5.prototype.parse.apply(this,[$,J]);if(Z===0){this._zero=!0;return}return H0(Z)&&Z>0?Z:null}determineDataLimits(){let{min:$,max:J}=this.getMinMax(!0);if(this.min=H0($)?Math.max(0,$):null,this.max=H0(J)?Math.max(0,J):null,this.options.beginAtZero)this._zero=!0;if(this._zero&&this.min!==this._suggestedMin&&!H0(this._userMin))this.min=$===w2(this.min,0)?w2(this.min,-1):w2(this.min,0);this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:$,maxDefined:J}=this.getUserBounds(),Z=this.min,q=this.max,Q=(X)=>Z=$?Z:X,Y=(X)=>q=J?q:X;if(Z===q)if(Z<=0)Q(1),Y(10);else Q(w2(Z,-1)),Y(w2(q,1));if(Z<=0)Q(w2(q,-1));if(q<=0)Y(w2(Z,1));this.min=Z,this.max=q}buildTicks(){let $=this.options,J={min:this._userMin,max:this._userMax},Z=DG(J,this);if($.bounds==="ticks")i9(Z,this,"value");if($.reverse)Z.reverse(),this.start=this.max,this.end=this.min;else this.start=this.min,this.end=this.max;return Z}getLabelForValue($){return $===void 0?"0":L5($,this.chart.options.locale,this.options.ticks.format)}configure(){let $=this.min;super.configure(),this._startValue=S1($),this._valueRange=S1(this.max)-S1($)}getPixelForValue($){if($===void 0||$===0)$=this.min;if($===null||isNaN($))return NaN;return this.getPixelForDecimal($===this.min?0:(S1($)-this._startValue)/this._valueRange)}getValueForPixel($){let J=this.getDecimalForPixel($);return Math.pow(10,this._startValue+J*this._valueRange)}}function A6($){let J=$.ticks;if(J.display&&$.display){let Z=E0(J.backdropPadding);return s(J.font&&J.font.size,z0.font.size)+Z.height}return 0}function VG($,J,Z){return Z=T0(Z)?Z:[Z],{w:rJ($,J.string,Z),h:Z.length*J.lineHeight}}function oZ($,J,Z,q,Q){if($===q||$===Q)return{start:J-Z/2,end:J+Z/2};else if($<q||$>Q)return{start:J-Z,end:J};return{start:J,end:J+Z}}function PG($){let J={l:$.left+$._padding.left,r:$.right-$._padding.right,t:$.top+$._padding.top,b:$.bottom-$._padding.bottom},Z=Object.assign({},J),q=[],Q=[],Y=$._pointLabels.length,X=$.options.pointLabels,K=X.centerPointLabels?e/Y:0;for(let G=0;G<Y;G++){let B=X.setContext($.getPointLabelContext(G));Q[G]=B.padding;let w=$.getPointPosition(G,$.drawingArea+Q[G],K),T=N0(B.font),M=VG($.ctx,T,$._pointLabels[G]);q[G]=M;let H=b0($.getIndexAngle(G)+K),W=Math.round(i4(H)),z=oZ(W,w.x,M.w,0,180),F=oZ(W,w.y,M.h,90,270);IG(Z,J,H,z,F)}$.setCenterPoint(J.l-Z.l,Z.r-J.r,J.t-Z.t,Z.b-J.b),$._pointLabelItems=NG($,q,Q)}function IG($,J,Z,q,Q){let Y=Math.abs(Math.sin(Z)),X=Math.abs(Math.cos(Z)),K=0,G=0;if(q.start<J.l)K=(J.l-q.start)/Y,$.l=Math.min($.l,J.l-K);else if(q.end>J.r)K=(q.end-J.r)/Y,$.r=Math.max($.r,J.r+K);if(Q.start<J.t)G=(J.t-Q.start)/X,$.t=Math.min($.t,J.t-G);else if(Q.end>J.b)G=(Q.end-J.b)/X,$.b=Math.max($.b,J.b+G)}function SG($,J,Z){let q=$.drawingArea,{extra:Q,additionalAngle:Y,padding:X,size:K}=Z,G=$.getPointPosition(J,q+Q+X,Y),B=Math.round(i4(b0(G.angle+j0))),w=bG(G.y,K.h,B),T=OG(B),M=AG(G.x,K.w,T);return{visible:!0,x:G.x,y:w,textAlign:T,left:M,top:w,right:M+K.w,bottom:w+K.h}}function CG($,J){if(!J)return!0;let{left:Z,top:q,right:Q,bottom:Y}=$;return!(B1({x:Z,y:q},J)||B1({x:Z,y:Y},J)||B1({x:Q,y:q},J)||B1({x:Q,y:Y},J))}function NG($,J,Z){let q=[],Q=$._pointLabels.length,Y=$.options,{centerPointLabels:X,display:K}=Y.pointLabels,G={extra:A6(Y)/2,additionalAngle:X?e/Q:0},B;for(let w=0;w<Q;w++){G.padding=Z[w],G.size=J[w];let T=SG($,w,G);if(q.push(T),K==="auto"){if(T.visible=CG(T,B),T.visible)B=T}}return q}function OG($){if($===0||$===180)return"center";else if($<180)return"left";return"right"}function AG($,J,Z){if(Z==="right")$-=J;else if(Z==="center")$-=J/2;return $}function bG($,J,Z){if(Z===90||Z===270)$-=J/2;else if(Z>270||Z<90)$-=J;return $}function fG($,J,Z){let{left:q,top:Q,right:Y,bottom:X}=Z,{backdropColor:K}=J;if(!$0(K)){let G=K2(J.borderRadius),B=E0(J.backdropPadding);$.fillStyle=K;let w=q-B.left,T=Q-B.top,M=Y-q+B.width,H=X-Q+B.height;if(Object.values(G).some((W)=>W!==0))$.beginPath(),S5($,{x:w,y:T,w:M,h:H,radius:G}),$.fill();else $.fillRect(w,T,M,H)}}function kG($,J){let{ctx:Z,options:{pointLabels:q}}=$;for(let Q=J-1;Q>=0;Q--){let Y=$._pointLabelItems[Q];if(!Y.visible)continue;let X=q.setContext($.getPointLabelContext(Q));fG(Z,X,Y);let K=N0(X.font),{x:G,y:B,textAlign:w}=Y;U2(Z,$._pointLabels[Q],G,B+K.lineHeight/2,K,{color:X.color,textAlign:w,textBaseline:"middle"})}}function Vq($,J,Z,q){let{ctx:Q}=$;if(Z)Q.arc($.xCenter,$.yCenter,J,0,B0);else{let Y=$.getPointPosition(0,J);Q.moveTo(Y.x,Y.y);for(let X=1;X<q;X++)Y=$.getPointPosition(X,J),Q.lineTo(Y.x,Y.y)}}function vG($,J,Z,q,Q){let Y=$.ctx,X=J.circular,{color:K,lineWidth:G}=J;if(!X&&!q||!K||!G||Z<0)return;Y.save(),Y.strokeStyle=K,Y.lineWidth=G,Y.setLineDash(Q.dash||[]),Y.lineDashOffset=Q.dashOffset,Y.beginPath(),Vq($,Z,X,q),Y.closePath(),Y.stroke(),Y.restore()}function EG($,J,Z){return C1($,{label:Z,index:J,type:"pointLabel"})}class yG extends g5{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:V5.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback($){return $},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor($){super($);this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let $=this._padding=E0(A6(this.options)/2),J=this.width=this.maxWidth-$.width,Z=this.height=this.maxHeight-$.height;this.xCenter=Math.floor(this.left+J/2+$.left),this.yCenter=Math.floor(this.top+Z/2+$.top),this.drawingArea=Math.floor(Math.min(J,Z)/2)}determineDataLimits(){let{min:$,max:J}=this.getMinMax(!1);this.min=H0($)&&!isNaN($)?$:0,this.max=H0(J)&&!isNaN(J)?J:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/A6(this.options))}generateTickLabels($){g5.prototype.generateTickLabels.call(this,$),this._pointLabels=this.getLabels().map((J,Z)=>{let q=U0(this.options.pointLabels.callback,[J,Z],this);return q||q===0?q:""}).filter((J,Z)=>this.chart.getDataVisibility(Z))}fit(){let $=this.options;if($.display&&$.pointLabels.display)PG(this);else this.setCenterPoint(0,0,0,0)}setCenterPoint($,J,Z,q){this.xCenter+=Math.floor(($-J)/2),this.yCenter+=Math.floor((Z-q)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max($,J,Z,q))}getIndexAngle($){let J=B0/(this._pointLabels.length||1),Z=this.options.startAngle||0;return b0($*J+X1(Z))}getDistanceFromCenterForValue($){if($0($))return NaN;let J=this.drawingArea/(this.max-this.min);if(this.options.reverse)return(this.max-$)*J;return($-this.min)*J}getValueForDistanceFromCenter($){if($0($))return NaN;let J=$/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-J:this.min+J}getPointLabelContext($){let J=this._pointLabels||[];if($>=0&&$<J.length){let Z=J[$];return EG(this.getContext(),$,Z)}}getPointPosition($,J,Z=0){let q=this.getIndexAngle($)-j0+Z;return{x:Math.cos(q)*J+this.xCenter,y:Math.sin(q)*J+this.yCenter,angle:q}}getPointPositionForValue($,J){return this.getPointPosition($,this.getDistanceFromCenterForValue(J))}getBasePosition($){return this.getPointPositionForValue($||0,this.getBaseValue())}getPointLabelPosition($){let{left:J,top:Z,right:q,bottom:Q}=this._pointLabelItems[$];return{left:J,top:Z,right:q,bottom:Q}}drawBackground(){let{backgroundColor:$,grid:{circular:J}}=this.options;if($){let Z=this.ctx;Z.save(),Z.beginPath(),Vq(this,this.getDistanceFromCenterForValue(this._endValue),J,this._pointLabels.length),Z.closePath(),Z.fillStyle=$,Z.fill(),Z.restore()}}drawGrid(){let $=this.ctx,J=this.options,{angleLines:Z,grid:q,border:Q}=J,Y=this._pointLabels.length,X,K,G;if(J.pointLabels.display)kG(this,Y);if(q.display)this.ticks.forEach((B,w)=>{if(w!==0||w===0&&this.min<0){K=this.getDistanceFromCenterForValue(B.value);let T=this.getContext(w),M=q.setContext(T),H=Q.setContext(T);vG(this,M,K,Y,H)}});if(Z.display){$.save();for(X=Y-1;X>=0;X--){let B=Z.setContext(this.getPointLabelContext(X)),{color:w,lineWidth:T}=B;if(!T||!w)continue;$.lineWidth=T,$.strokeStyle=w,$.setLineDash(B.borderDash),$.lineDashOffset=B.borderDashOffset,K=this.getDistanceFromCenterForValue(J.reverse?this.min:this.max),G=this.getPointPosition(X,K),$.beginPath(),$.moveTo(this.xCenter,this.yCenter),$.lineTo(G.x,G.y),$.stroke()}$.restore()}}drawBorder(){}drawLabels(){let $=this.ctx,J=this.options,Z=J.ticks;if(!Z.display)return;let q=this.getIndexAngle(0),Q,Y;$.save(),$.translate(this.xCenter,this.yCenter),$.rotate(q),$.textAlign="center",$.textBaseline="middle",this.ticks.forEach((X,K)=>{if(K===0&&this.min>=0&&!J.reverse)return;let G=Z.setContext(this.getContext(K)),B=N0(G.font);if(Q=this.getDistanceFromCenterForValue(this.ticks[K].value),G.showLabelBackdrop){$.font=B.string,Y=$.measureText(X.label).width,$.fillStyle=G.backdropColor;let w=E0(G.backdropPadding);$.fillRect(-Y/2-w.left,-Q-B.size/2-w.top,Y+w.width,B.size+w.height)}U2($,X.label,0,-Q,B,{color:G.color,strokeColor:G.textStrokeColor,strokeWidth:G.textStrokeWidth})}),$.restore()}drawTitle(){}}var z8={millisecond:{common:!0,size:1,steps:1000},second:{common:!0,size:1000,steps:60},minute:{common:!0,size:60000,steps:60},hour:{common:!0,size:3600000,steps:24},day:{common:!0,size:86400000,steps:30},week:{common:!1,size:604800000,steps:4},month:{common:!0,size:2628000000,steps:12},quarter:{common:!1,size:7884000000,steps:4},year:{common:!0,size:31540000000}},m0=Object.keys(z8);function lZ($,J){return $-J}function iZ($,J){if($0(J))return null;let Z=$._adapter,{parser:q,round:Q,isoWeekday:Y}=$._parseOpts,X=J;if(typeof q==="function")X=q(X);if(!H0(X))X=typeof q==="string"?Z.parse(X,q):Z.parse(X);if(X===null)return null;if(Q)X=Q==="week"&&(x2(Y)||Y===!0)?Z.startOf(X,"isoWeek",Y):Z.startOf(X,Q);return+X}function nZ($,J,Z,q){let Q=m0.length;for(let Y=m0.indexOf($);Y<Q-1;++Y){let X=z8[m0[Y]],K=X.steps?X.steps:Number.MAX_SAFE_INTEGER;if(X.common&&Math.ceil((Z-J)/(K*X.size))<=q)return m0[Y]}return m0[Q-1]}function gG($,J,Z,q,Q){for(let Y=m0.length-1;Y>=m0.indexOf(Z);Y--){let X=m0[Y];if(z8[X].common&&$._adapter.diff(Q,q,X)>=J-1)return X}return m0[Z?m0.indexOf(Z):0]}function hG($){for(let J=m0.indexOf($)+1,Z=m0.length;J<Z;++J)if(z8[m0[J]].common)return m0[J]}function aZ($,J,Z){if(!Z)$[J]=!0;else if(Z.length){let{lo:q,hi:Q}=n4(Z,J),Y=Z[q]>=J?Z[q]:Z[Q];$[Y]=!0}}function uG($,J,Z,q){let Q=$._adapter,Y=+Q.startOf(J[0].value,q),X=J[J.length-1].value,K,G;for(K=Y;K<=X;K=+Q.add(K,1,q))if(G=Z[K],G>=0)J[G].major=!0;return J}function tZ($,J,Z){let q=[],Q={},Y=J.length,X,K;for(X=0;X<Y;++X)K=J[X],Q[K]=X,q.push({value:K,major:!1});return Y===0||!Z?q:uG($,q,Q,Z)}class b6 extends T2{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor($){super($);this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init($,J={}){let Z=$.time||($.time={}),q=this._adapter=new _U._date($.adapters.date);q.init(J),g2(Z.displayFormats,q.formats()),this._parseOpts={parser:Z.parser,round:Z.round,isoWeekday:Z.isoWeekday},super.init($),this._normalized=J.normalized}parse($,J){if($===void 0)return null;return iZ(this,$)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let $=this.options,J=this._adapter,Z=$.time.unit||"day",{min:q,max:Q,minDefined:Y,maxDefined:X}=this.getUserBounds();function K(G){if(!Y&&!isNaN(G.min))q=Math.min(q,G.min);if(!X&&!isNaN(G.max))Q=Math.max(Q,G.max)}if(!Y||!X){if(K(this._getLabelBounds()),$.bounds!=="ticks"||$.ticks.source!=="labels")K(this.getMinMax(!1))}q=H0(q)&&!isNaN(q)?q:+J.startOf(Date.now(),Z),Q=H0(Q)&&!isNaN(Q)?Q:+J.endOf(Date.now(),Z)+1,this.min=Math.min(q,Q-1),this.max=Math.max(q+1,Q)}_getLabelBounds(){let $=this.getLabelTimestamps(),J=Number.POSITIVE_INFINITY,Z=Number.NEGATIVE_INFINITY;if($.length)J=$[0],Z=$[$.length-1];return{min:J,max:Z}}buildTicks(){let $=this.options,J=$.time,Z=$.ticks,q=Z.source==="labels"?this.getLabelTimestamps():this._generate();if($.bounds==="ticks"&&q.length)this.min=this._userMin||q[0],this.max=this._userMax||q[q.length-1];let Q=this.min,Y=this.max,X=vJ(q,Q,Y);if(this._unit=J.unit||(Z.autoSkip?nZ(J.minUnit,this.min,this.max,this._getLabelCapacity(Q)):gG(this,X.length,J.minUnit,this.min,this.max)),this._majorUnit=!Z.major.enabled||this._unit==="year"?void 0:hG(this._unit),this.initOffsets(q),$.reverse)X.reverse();return tZ(this,X,this._majorUnit)}afterAutoSkip(){if(this.options.offsetAfterAutoskip)this.initOffsets(this.ticks.map(($)=>+$.value))}initOffsets($=[]){let J=0,Z=0,q,Q;if(this.options.offset&&$.length){if(q=this.getDecimalForValue($[0]),$.length===1)J=1-q;else J=(this.getDecimalForValue($[1])-q)/2;if(Q=this.getDecimalForValue($[$.length-1]),$.length===1)Z=Q;else Z=(Q-this.getDecimalForValue($[$.length-2]))/2}let Y=$.length<3?0.5:0.25;J=v0(J,0,Y),Z=v0(Z,0,Y),this._offsets={start:J,end:Z,factor:1/(J+1+Z)}}_generate(){let $=this._adapter,J=this.min,Z=this.max,q=this.options,Q=q.time,Y=Q.unit||nZ(Q.minUnit,J,Z,this._getLabelCapacity(J)),X=s(q.ticks.stepSize,1),K=Y==="week"?Q.isoWeekday:!1,G=x2(K)||K===!0,B={},w=J,T,M;if(G)w=+$.startOf(w,"isoWeek",K);if(w=+$.startOf(w,G?"day":Y),$.diff(Z,J,Y)>1e5*X)throw new Error(J+" and "+Z+" are too far apart with stepSize of "+X+" "+Y);let H=q.ticks.source==="data"&&this.getDataTimestamps();for(T=w,M=0;T<Z;T=+$.add(T,X,Y),M++)aZ(B,T,H);if(T===Z||q.bounds==="ticks"||M===1)aZ(B,T,H);return Object.keys(B).sort(lZ).map((W)=>+W)}getLabelForValue($){let J=this._adapter,Z=this.options.time;if(Z.tooltipFormat)return J.format($,Z.tooltipFormat);return J.format($,Z.displayFormats.datetime)}format($,J){let q=this.options.time.displayFormats,Q=this._unit,Y=J||q[Q];return this._adapter.format($,Y)}_tickFormatFunction($,J,Z,q){let Q=this.options,Y=Q.ticks.callback;if(Y)return U0(Y,[$,J,Z],this);let X=Q.time.displayFormats,K=this._unit,G=this._majorUnit,B=K&&X[K],w=G&&X[G],T=Z[J],M=G&&w&&T&&T.major;return this._adapter.format($,q||(M?w:B))}generateTickLabels($){let J,Z,q;for(J=0,Z=$.length;J<Z;++J)q=$[J],q.label=this._tickFormatFunction(q.value,J,$)}getDecimalForValue($){return $===null?NaN:($-this.min)/(this.max-this.min)}getPixelForValue($){let J=this._offsets,Z=this.getDecimalForValue($);return this.getPixelForDecimal((J.start+Z)*J.factor)}getValueForPixel($){let J=this._offsets,Z=this.getDecimalForPixel($)/J.factor-J.end;return this.min+Z*(this.max-this.min)}_getLabelSize($){let J=this.options.ticks,Z=this.ctx.measureText($).width,q=X1(this.isHorizontal()?J.maxRotation:J.minRotation),Q=Math.cos(q),Y=Math.sin(q),X=this._resolveTickFontOptions(0).size;return{w:Z*Q+X*Y,h:Z*Y+X*Q}}_getLabelCapacity($){let J=this.options.time,Z=J.displayFormats,q=Z[J.unit]||Z.millisecond,Q=this._tickFormatFunction($,0,tZ(this,[$],this._majorUnit),q),Y=this._getLabelSize(Q),X=Math.floor(this.isHorizontal()?this.width/Y.w:this.height/Y.h)-1;return X>0?X:1}getDataTimestamps(){let $=this._cache.data||[],J,Z;if($.length)return $;let q=this.getMatchingVisibleMetas();if(this._normalized&&q.length)return this._cache.data=q[0].controller.getAllParsedValues(this);for(J=0,Z=q.length;J<Z;++J)$=$.concat(q[J].controller.getAllParsedValues(this));return this._cache.data=this.normalize($)}getLabelTimestamps(){let $=this._cache.labels||[],J,Z;if($.length)return $;let q=this.getLabels();for(J=0,Z=q.length;J<Z;++J)$.push(iZ(this,q[J]));return this._cache.labels=this._normalized?$:this.normalize($)}normalize($){return gJ($.sort(lZ))}}function K8($,J,Z){let q=0,Q=$.length-1,Y,X,K,G;if(Z){if(J>=$[q].pos&&J<=$[Q].pos)({lo:q,hi:Q}=m1($,"pos",J));({pos:Y,time:K}=$[q]),{pos:X,time:G}=$[Q]}else{if(J>=$[q].time&&J<=$[Q].time)({lo:q,hi:Q}=m1($,"time",J));({time:Y,pos:K}=$[q]),{time:X,pos:G}=$[Q]}let B=X-Y;return B?K+(G-K)*(J-Y)/B:K}class xG extends b6{static id="timeseries";static defaults=b6.defaults;constructor($){super($);this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let $=this._getTimestampsForTable(),J=this._table=this.buildLookupTable($);this._minPos=K8(J,this.min),this._tableRange=K8(J,this.max)-this._minPos,super.initOffsets($)}buildLookupTable($){let{min:J,max:Z}=this,q=[],Q=[],Y,X,K,G,B;for(Y=0,X=$.length;Y<X;++Y)if(G=$[Y],G>=J&&G<=Z)q.push(G);if(q.length<2)return[{time:J,pos:0},{time:Z,pos:1}];for(Y=0,X=q.length;Y<X;++Y)if(B=q[Y+1],K=q[Y-1],G=q[Y],Math.round((B+K)/2)!==G)Q.push({time:G,pos:Y/(X-1)});return Q}_generate(){let $=this.min,J=this.max,Z=super.getDataTimestamps();if(!Z.includes($)||!Z.length)Z.splice(0,0,$);if(!Z.includes(J)||Z.length===1)Z.push(J);return Z.sort((q,Q)=>q-Q)}_getTimestampsForTable(){let $=this._cache.all||[];if($.length)return $;let J=this.getDataTimestamps(),Z=this.getLabelTimestamps();if(J.length&&Z.length)$=this.normalize(J.concat(Z));else $=J.length?J:Z;return $=this._cache.all=$,$}getDecimalForValue($){return(K8(this._table,$)-this._minPos)/this._tableRange}getValueForPixel($){let J=this._offsets,Z=this.getDecimalForPixel($)/J.factor-J.end;return K8(this._table,Z*this._tableRange+this._minPos,!0)}}M2.register(v6,d2,h6,m6,x6,jq,k6,g6,Lq,_q);var x5=60;function m5($){return getComputedStyle(document.documentElement).getPropertyValue($).trim()}function W8($=1){let J=m5("--color-primary");if(!J)return`rgba(139,92,246,${$})`;return`oklch(${J} / ${$})`}function U1($=1){let J=m5("--color-muted");if(!J)return`rgba(100,100,100,${$})`;return`oklch(${J} / ${$})`}function mG($=1){let J=m5("--color-destructive");if(!J)return`rgba(239,68,68,${$})`;return`oklch(${J} / ${$})`}function Iq($=1){let J=m5("--color-warning");if(!J)return`rgba(234,179,8,${$})`;return`oklch(${J} / ${$})`}function Sq($=1){let J=m5("--color-success");if(!J)return`rgba(34,197,94,${$})`;return`oklch(${J} / ${$})`}function Pq($,J=1){if($>90)return mG(J);if($>70)return Iq(J);return Sq(J)}var pG=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("circle",{cx:"12",cy:"12",r:"10"}),U("polyline",{points:"12 6 12 12 16 14"})),dG=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),U("circle",{cx:"9",cy:"7",r:"4"}),U("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),U("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})),rG=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),U("polyline",{points:"17 6 23 6 23 12"})),cG=()=>U("svg",{class:"size-8 text-muted-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},U("polygon",{points:"5 3 19 12 5 21 5 3"}));class p6 extends N{pollTimer=null;viewerChart=null;cpuGauge=null;memGauge=null;diskGauge=null;resourceChart=null;viewerCanvasRef=null;cpuCanvasRef=null;memCanvasRef=null;diskCanvasRef=null;resourceCanvasRef=null;state={status:null,hardware:null,loading:!0,error:null,viewerHistory:[],cpuHistory:[],memHistory:[],diskHistory:[],labels:[]};componentDidMount(){this.loadData(),this.pollTimer=setInterval(()=>this.loadData(),5000)}componentWillUnmount(){if(this.pollTimer)clearInterval(this.pollTimer);this.destroyCharts()}destroyCharts(){this.viewerChart?.destroy(),this.viewerChart=null,this.cpuGauge?.destroy(),this.cpuGauge=null,this.memGauge?.destroy(),this.memGauge=null,this.diskGauge?.destroy(),this.diskGauge=null,this.resourceChart?.destroy(),this.resourceChart=null}async loadData(){try{let[$,J]=await Promise.all([v.admin.getStatus(this.props.token),v.admin.getHardware(this.props.token).catch(()=>null)]),Z=$,q=J,Q=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),Y=[...this.state.viewerHistory,Z?.viewerCount||0].slice(-x5),X=q?.cpu?.[0]?.percent!=null?Math.round(q.cpu[0].percent):0,K=q?.memory?Math.round(q.memory.percent):0,G=q?.disk?Math.round(q.disk.percent):0,B=[...this.state.cpuHistory,X].slice(-x5),w=[...this.state.memHistory,K].slice(-x5),T=[...this.state.diskHistory,G].slice(-x5),M=[...this.state.labels,Q].slice(-x5);this.setState({status:$,hardware:J,loading:!1,error:null,viewerHistory:Y,cpuHistory:B,memHistory:w,diskHistory:T,labels:M},()=>{this.updateCharts()})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load",loading:!1})}}updateCharts(){let{viewerHistory:$,cpuHistory:J,memHistory:Z,diskHistory:q,labels:Q,status:Y,hardware:X}=this.state;if((Y?.online||!1)&&this.viewerCanvasRef)if(!this.viewerChart)this.viewerChart=new M2(this.viewerCanvasRef,{type:"line",data:{labels:Q,datasets:[{label:"Viewers",data:$,borderColor:W8(1),backgroundColor:W8(0.1),borderWidth:2,fill:!0,tension:0.4,pointRadius:0,pointHoverRadius:4,pointHoverBackgroundColor:W8(1)}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:300},interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",titleFont:{size:11},bodyFont:{size:11},padding:8,cornerRadius:6}},scales:{x:{display:!0,grid:{color:U1(0.1)},ticks:{color:U1(0.5),font:{size:9},maxTicksLimit:8}},y:{display:!0,beginAtZero:!0,grid:{color:U1(0.1)},ticks:{color:U1(0.5),font:{size:10},stepSize:1,callback:(w)=>Number.isInteger(w)?w:""}}}}});else this.viewerChart.data.labels=Q,this.viewerChart.data.datasets[0].data=$,this.viewerChart.update("none");if(X&&this.resourceCanvasRef)if(!this.resourceChart)this.resourceChart=new M2(this.resourceCanvasRef,{type:"line",data:{labels:Q,datasets:[{label:"CPU",data:J,borderColor:W8(0.9),backgroundColor:"transparent",borderWidth:1.5,tension:0.3,pointRadius:0},{label:"Memory",data:Z,borderColor:Iq(0.9),backgroundColor:"transparent",borderWidth:1.5,tension:0.3,pointRadius:0},{label:"Disk",data:q,borderColor:Sq(0.9),backgroundColor:"transparent",borderWidth:1.5,tension:0.3,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:300},interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"bottom",labels:{color:U1(0.7),font:{size:10},boxWidth:12,boxHeight:2,padding:12}},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",titleFont:{size:11},bodyFont:{size:11},padding:8,cornerRadius:6,callbacks:{label:(w)=>`${w.dataset.label}: ${w.parsed.y}%`}}},scales:{x:{display:!0,grid:{color:U1(0.1)},ticks:{color:U1(0.5),font:{size:9},maxTicksLimit:8}},y:{display:!0,min:0,max:100,grid:{color:U1(0.1)},ticks:{color:U1(0.5),font:{size:10},stepSize:25,callback:(w)=>`${w}%`}}}}});else this.resourceChart.data.labels=Q,this.resourceChart.data.datasets[0].data=J,this.resourceChart.data.datasets[1].data=Z,this.resourceChart.data.datasets[2].data=q,this.resourceChart.update("none");let B=X;if(B){let w=B.cpu?.[0]?.percent!=null?Math.round(B.cpu[0].percent):0,T=B.memory?Math.round(B.memory.percent):0,M=B.disk?Math.round(B.disk.percent):0;this.updateGauge("cpu",this.cpuCanvasRef,w),this.updateGauge("mem",this.memCanvasRef,T),this.updateGauge("disk",this.diskCanvasRef,M)}}updateGauge($,J,Z){if(!J)return;let q=$==="cpu"?"cpuGauge":$==="mem"?"memGauge":"diskGauge",Q=this[q];if(!Q)this[q]=new M2(J,{type:"doughnut",data:{datasets:[{data:[Z,100-Z],backgroundColor:[Pq(Z,0.8),U1(0.15)],borderWidth:0,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!0,cutout:"75%",rotation:-90,circumference:180,animation:{duration:400,easing:"easeOutQuart"},plugins:{legend:{display:!1},tooltip:{enabled:!1}}}});else Q.data.datasets[0].data=[Z,100-Z],Q.data.datasets[0].backgroundColor=[Pq(Z,0.8),U1(0.15)],Q.update("none")}renderOnlineState($){let J=$?.viewerCount||0,Z=$?.sessionPeakViewerCount||0,q=$?.lastConnectTime,Q=$?.broadcaster,Y=Q?.streamDetails;return U("div",{class:"space-y-6"},U("div",{class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},U(y,null,U(m,null,U(n,{className:"flex items-center gap-1.5"},U(pG,null),"Stream started"),U(d,{className:"text-2xl tabular-nums"},q?d0(q):"Just now"))),U(y,null,U(m,null,U(n,{className:"flex items-center gap-1.5"},U(dG,null),"Current viewers"),U(d,{className:"text-2xl tabular-nums"},J))),U(y,null,U(m,null,U(n,{className:"flex items-center gap-1.5"},U(rG,null),"Session peak"),U(d,{className:"text-2xl tabular-nums"},Z)))),U(y,null,U(m,null,U(d,null,"Viewers Over Time"),U(n,null,"Real-time viewer count  updates every 5s")),U(p,null,U("div",{style:{height:"220px"}},U("canvas",{ref:(X)=>{this.viewerCanvasRef=X}})))),U("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},U(y,null,U(m,null,U(d,null,"Inbound Stream"),U(n,null,"Details from the broadcasting source")),U(p,null,U("div",{class:"space-y-2"},Q?.remoteAddr&&U("div",{class:"flex justify-between text-sm"},U("span",{class:"text-muted-foreground"},"Source"),U("span",{class:"font-mono text-foreground"},Q.remoteAddr)),Y&&U(t2,null,U(k0,null),U("div",{class:"flex justify-between text-sm"},U("span",{class:"text-muted-foreground"},"Video"),U("span",{class:"text-foreground"},Y.videoCodec,"  ",Y.videoBitrate," kbps")),U("div",{class:"flex justify-between text-sm"},U("span",{class:"text-muted-foreground"},"Resolution"),U("span",{class:"text-foreground"},Y.width,"",Y.height," @ ",Y.framerate,"fps")),U("div",{class:"flex justify-between text-sm"},U("span",{class:"text-muted-foreground"},"Audio"),U("span",{class:"text-foreground"},Y.audioCodec,"  ",Y.audioBitrate," kbps"))),!Y&&!Q?.remoteAddr&&U("p",{class:"text-sm text-muted-foreground italic"},"No stream details available")))),this.renderHardwareGauges()),this.state.hardware&&U(y,null,U(m,null,U(d,null,"Resource History"),U(n,null,"CPU, memory, and disk usage over time")),U(p,null,U("div",{style:{height:"200px"}},U("canvas",{ref:(X)=>{this.resourceCanvasRef=X}})))))}renderOfflineState($){let J=$?.lastDisconnectTime;return U("div",{class:"space-y-6"},U(y,null,U(p,{className:"py-12"},U("div",{class:"flex flex-col items-center text-center"},U("div",{class:"flex size-12 items-center justify-center rounded-full bg-muted mb-4"},U(cG,null)),U("h3",{class:"text-lg font-semibold"},"No active stream"),U("p",{class:"text-sm text-muted-foreground mt-1 mb-2 max-w-sm"},"Start streaming to see your dashboard come alive with real-time charts and stats."),J&&U(x,{variant:"outline",className:"mt-1"},"Last stream ended ",d0(J))))),U("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4"},U(y,null,U(m,null,U(d,null,"Broadcasting Software"),U(n,null,"Get started with OBS or Streamlabs")),U(p,null,U("p",{class:"text-sm text-muted-foreground leading-relaxed"},"Point your streaming software to your server's RTMP endpoint to begin broadcasting."))),U(y,null,U(m,null,U(d,null,"Stream Key"),U(n,null,"Found in Video configuration")),U(p,null,U("p",{class:"text-sm text-muted-foreground leading-relaxed"},"Your stream key is in the Video tab. Keep it secret  anyone with the key can stream to your server.")))),this.renderHardwareGauges(),this.state.hardware&&U(y,null,U(m,null,U(d,null,"Resource History"),U(n,null,"CPU, memory, and disk usage over time")),U(p,null,U("div",{style:{height:"200px"}},U("canvas",{ref:(Z)=>{this.resourceCanvasRef=Z}})))))}renderHardwareGauges(){let{hardware:$}=this.state;if(!$)return null;let J=$,Z=J.cpu?.[0]?.percent!=null?Math.round(J.cpu[0].percent):0,q=J.memory?Math.round(J.memory.percent):0,Q=J.disk?Math.round(J.disk.percent):0;return U(y,null,U(m,null,U(d,null,"System Resources"),U(n,null,J.cpu?.[0]?.modelName||"Server hardware")),U(p,null,U("div",{class:"grid grid-cols-3 gap-4"},U("div",{class:"flex flex-col items-center"},U("div",{class:"relative",style:{width:"100px",height:"60px"}},U("canvas",{ref:(Y)=>{this.cpuCanvasRef=Y}}),U("div",{class:"absolute inset-x-0 bottom-0 text-center"},U("span",{class:R("text-lg font-bold tabular-nums",Z>90?"text-destructive":"")},Z,"%"))),U("span",{class:"text-xs text-muted-foreground mt-1"},"CPU")),U("div",{class:"flex flex-col items-center"},U("div",{class:"relative",style:{width:"100px",height:"60px"}},U("canvas",{ref:(Y)=>{this.memCanvasRef=Y}}),U("div",{class:"absolute inset-x-0 bottom-0 text-center"},U("span",{class:R("text-lg font-bold tabular-nums",q>90?"text-destructive":"")},q,"%"))),U("span",{class:"text-xs text-muted-foreground mt-1"},"Memory")),U("div",{class:"flex flex-col items-center"},U("div",{class:"relative",style:{width:"100px",height:"60px"}},U("canvas",{ref:(Y)=>{this.diskCanvasRef=Y}}),U("div",{class:"absolute inset-x-0 bottom-0 text-center"},U("span",{class:R("text-lg font-bold tabular-nums",Q>90?"text-destructive":"")},Q,"%"))),U("span",{class:"text-xs text-muted-foreground mt-1"},"Disk")))))}render(){let{status:$,loading:J,error:Z}=this.state;if(J)return U("div",{class:"space-y-4"},U(r,{className:"h-8 w-48"}),U("div",{class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},U(r,{className:"h-24 rounded-xl"}),U(r,{className:"h-24 rounded-xl"}),U(r,{className:"h-24 rounded-xl"})),U(r,{className:"h-64 rounded-xl"}),U("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},U(r,{className:"h-48 rounded-xl"}),U(r,{className:"h-48 rounded-xl"})));if(Z)return U(W0,{variant:"destructive"},U(F0,null,Z));let q=$,Q=q?.online||!1;return U("div",null,U("div",{class:"mb-6"},U("h1",{class:"text-2xl font-bold tracking-tight"},"Dashboard"),U("p",{class:"text-sm text-muted-foreground mt-1"},Q?"Your stream is live.":"Server overview and quick actions.")),Q?this.renderOnlineState(q):this.renderOfflineState(q))}}class d6 extends N{state={loading:!0,saving:!1,error:null,name:"",streamTitle:"",summary:"",tags:"",serverURL:"",offlineMessage:"",welcomeMessage:"",extraPageContent:"",nsfw:!1,socialHandles:[],newSocialPlatform:"",newSocialURL:""};componentDidMount(){this.loadConfig()}async loadConfig(){try{let $=await v.admin.getConfig(this.props.token),J=$?.instanceDetails||{};this.setState({loading:!1,name:J.name||"",streamTitle:J.streamTitle||"",summary:J.summary||"",tags:(J.tags||[]).join(", "),serverURL:$?.yp?.instanceUrl||"",offlineMessage:J.offlineMessage||"",welcomeMessage:J.welcomeMessage||"",extraPageContent:J.extraPageContent||"",nsfw:J.nsfw||!1,socialHandles:J.socialHandles||[]})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load config",loading:!1})}}handleSave=async()=>{this.setState({saving:!0,error:null});try{let $=this.state.tags.split(",").map((J)=>J.trim()).filter(Boolean);await Promise.all([v.admin.setServerName(this.props.token,this.state.name),v.admin.setStreamTitle(this.props.token,this.state.streamTitle),v.admin.setServerSummary(this.props.token,this.state.summary),v.admin.setTags(this.props.token,$),v.admin.setOfflineMessage(this.props.token,this.state.offlineMessage),v.admin.setWelcomeMessage(this.props.token,this.state.welcomeMessage),v.admin.setNSFW(this.props.token,this.state.nsfw),v.admin.setSocialHandles(this.props.token,this.state.socialHandles),this.state.serverURL?v.admin.setServerURL(this.props.token,this.state.serverURL):Promise.resolve(),this.state.extraPageContent?v.admin.setExtraPageContent(this.props.token,this.state.extraPageContent):Promise.resolve()]),this.setState({saving:!1}),X0({title:"Configuration saved",description:"Your changes have been applied."})}catch($){let J=$ instanceof Error?$.message:"Failed to save";this.setState({saving:!1,error:J}),X0({title:"Save failed",description:J,variant:"destructive"})}};handleInput=($)=>(J)=>{this.setState({[$]:J.target.value})};addSocialHandle=()=>{let $=this.state.newSocialPlatform.trim(),J=this.state.newSocialURL.trim();if(!$||!J)return;this.setState({socialHandles:[...this.state.socialHandles,{platform:$,url:J}],newSocialPlatform:"",newSocialURL:""})};removeSocialHandle=($)=>{this.setState({socialHandles:this.state.socialHandles.filter((J,Z)=>Z!==$)})};render(){let{loading:$,saving:J,error:Z,name:q,streamTitle:Q,summary:Y,tags:X,serverURL:K,offlineMessage:G,welcomeMessage:B,extraPageContent:w,nsfw:T,socialHandles:M,newSocialPlatform:H,newSocialURL:W}=this.state;if($)return U("div",{class:"max-w-3xl space-y-4"},U(r,{className:"h-8 w-64"}),U(r,{className:"h-4 w-96"}),U(r,{className:"h-64 rounded-xl"}),U(r,{className:"h-32 rounded-xl"}),U(r,{className:"h-20 rounded-xl"}));return U("div",{class:"max-w-3xl space-y-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"General Configuration"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Configure your server's public-facing information.")),Z&&U(W0,{variant:"destructive"},U(F0,null,Z)),U(y,null,U(m,null,U(d,null,"Instance Details"),U(n,null,"Basic information about your streaming server.")),U(p,null,U("div",{class:"space-y-4"},U("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4"},U("div",{class:"space-y-1.5"},U(Y0,null,"Server Name"),U(q0,{type:"text",value:q,onInput:this.handleInput("name"),placeholder:"My Stream"}),U("p",{class:"text-xs text-muted-foreground"},"The public name of your server.")),U("div",{class:"space-y-1.5"},U(Y0,null,"Stream Title"),U(q0,{type:"text",value:Q,onInput:this.handleInput("streamTitle"),placeholder:"What are you streaming?"}),U("p",{class:"text-xs text-muted-foreground"},"Shown when your stream is live. Can be changed while streaming."))),U("div",{class:"space-y-1.5"},U(Y0,null,"Server URL"),U(q0,{type:"text",value:K,onInput:this.handleInput("serverURL"),placeholder:"https://live.mycelium.social"}),U("p",{class:"text-xs text-muted-foreground"},"The public URL of your Oni server. Used for federation and directory listing.")),U("div",{class:"space-y-1.5"},U(Y0,null,"Summary"),U(_1,{className:"min-h-[100px]",value:Y,onInput:this.handleInput("summary"),placeholder:"Tell viewers about your stream..."}),U("p",{class:"text-xs text-muted-foreground"},"A brief description shown on your stream page.")),U("div",{class:"space-y-1.5"},U(Y0,null,"Tags"),U(q0,{type:"text",value:X,onInput:this.handleInput("tags"),placeholder:"gaming, music, art"}),U("p",{class:"text-xs text-muted-foreground"},"Comma-separated tags to help people discover your stream."))))),U(y,null,U(m,null,U(d,null,"Messages"),U(n,null,"Customize messages shown to viewers.")),U(p,null,U("div",{class:"space-y-4"},U("div",{class:"space-y-1.5"},U(Y0,null,"Offline Message"),U(_1,{className:"min-h-[80px]",value:G,onInput:this.handleInput("offlineMessage"),placeholder:"Custom message shown when stream is offline"}),U("p",{class:"text-xs text-muted-foreground"},"Displayed to visitors when you're not streaming.")),U(k0,null),U("div",{class:"space-y-1.5"},U(Y0,null,"Welcome Message"),U(_1,{className:"min-h-[80px]",value:B,onInput:this.handleInput("welcomeMessage"),placeholder:"Welcome to the stream!"}),U("p",{class:"text-xs text-muted-foreground"},"Shown to viewers when they first join the chat.")),U(k0,null),U("div",{class:"space-y-1.5"},U(Y0,null,"Extra Page Content"),U(_1,{className:"min-h-[100px] font-mono text-xs",value:w,onInput:this.handleInput("extraPageContent"),placeholder:"Markdown or HTML content..."}),U("p",{class:"text-xs text-muted-foreground"},"Additional content displayed below the video player. Supports Markdown."))))),U(y,null,U(m,null,U(d,null,"Social Links"),U(n,null,"Links to your social profiles shown on the stream page.")),U(p,{className:"space-y-3"},M.map((z,F)=>U("div",{key:F,class:"flex items-center gap-2"},U(x,{variant:"secondary",className:"shrink-0 capitalize"},z.platform),U("span",{class:"text-sm text-muted-foreground truncate flex-1"},z.url),U(f,{variant:"ghost",size:"icon-sm",className:"size-7 shrink-0 text-destructive/60 hover:text-destructive",onClick:()=>this.removeSocialHandle(F)},U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polyline",{points:"3 6 5 6 21 6"}),U("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}))))),U(k0,null),U("div",{class:"flex gap-2"},U(q0,{type:"text",className:"w-32 text-xs",placeholder:"Platform",value:H,onInput:(z)=>this.setState({newSocialPlatform:z.target.value})}),U(q0,{type:"text",className:"flex-1 text-xs",placeholder:"https://...",value:W,onInput:(z)=>this.setState({newSocialURL:z.target.value})}),U(f,{size:"sm",onClick:this.addSocialHandle,disabled:!H.trim()||!W.trim()},"Add")))),U(y,null,U(m,null,U(d,null,"Content Settings")),U(p,null,U("div",{class:"flex items-center justify-between rounded-lg border p-4"},U("div",null,U("p",{class:"text-sm font-medium"},"NSFW Content"),U("p",{class:"text-sm text-muted-foreground"},"Mark your stream as containing adult content.")),U(a0,{checked:T,onChange:(z)=>this.setState({nsfw:z})})))),U("div",{class:"flex items-center gap-4 pt-2 pb-8"},U(f,{onClick:this.handleSave,disabled:J,className:"px-8"},J?"Saving...":"Save Configuration")))}}var sG=[{value:1,label:"Low Latency",description:"~4s delay. Best for interactive streams."},{value:2,label:"Medium",description:"~8s delay. Good balance of quality and latency."},{value:3,label:"High Quality",description:"~15s delay. Best video quality, higher latency."},{value:4,label:"Offline",description:"Optimized for VOD-style playback."}],oG=[{value:1,label:"Fastest",description:"Lowest quality, minimal CPU"},{value:2,label:"Faster",description:"Low quality, low CPU"},{value:3,label:"Medium",description:"Balanced quality and CPU"},{value:4,label:"Slower",description:"High quality, more CPU"},{value:5,label:"Slowest",description:"Best quality, maximum CPU"}],lG=[{label:"Source (passthrough)",width:0,height:0},{label:"1080p",width:1920,height:1080},{label:"720p",width:1280,height:720},{label:"480p",width:854,height:480},{label:"360p",width:640,height:360}];var Cq=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),U("line",{x1:"5",y1:"12",x2:"19",y2:"12"})),Nq=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polyline",{points:"3 6 5 6 21 6"}),U("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})),iG=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),U("circle",{cx:"12",cy:"12",r:"3"})),nG=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),U("line",{x1:"1",y1:"1",x2:"23",y2:"23"}));var Oq=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),U("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}));function Aq(){return{videoPassthrough:!1,audioPassthrough:!1,videoBitrate:1200,audioBitrate:128,scaledWidth:1280,scaledHeight:720,framerate:24,cpuUsageLevel:3}}class r6 extends N{state={loading:!0,saving:!1,error:null,latencyLevel:2,variants:[],streamKeys:[],showStreamKeys:new Set,newKeyValue:"",newKeyComment:"",rtmpPort:1935,webPort:8080,serverURL:"",videoCodec:"",supportedCodecs:[],streamKeyOverridden:!1};componentDidMount(){this.loadConfig()}async loadConfig(){try{let $=await v.admin.getConfig(this.props.token),J=$?.videoSettings||{},q=($?.streamKeys||[]).map((Y)=>({key:Y.key||Y.Key||"",comment:Y.comment||Y.Comment||""}));if(q.length===0&&$?.streamKey)q.push({key:$.streamKey,comment:"Default"});let Q=$?.yp?.instanceUrl||window.location.origin;this.setState({loading:!1,latencyLevel:J.latencyLevel||2,variants:J.videoQualityVariants||[Aq()],streamKeys:q,rtmpPort:$?.rtmpServerPort||1935,webPort:$?.webServerPort||8080,serverURL:Q,videoCodec:$?.videoCodec||"",supportedCodecs:$?.supportedCodecs||[],streamKeyOverridden:$?.streamKeyOverridden||!1})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load config",loading:!1})}}handleSave=async()=>{this.setState({saving:!0,error:null});try{await Promise.all([v.admin.setStreamLatencyLevel(this.props.token,this.state.latencyLevel),v.admin.setStreamOutputVariants(this.props.token,this.state.variants)]),this.setState({saving:!1}),X0({title:"Video configuration saved",description:"Changes will apply on next stream start."})}catch($){let J=$ instanceof Error?$.message:"Failed to save";this.setState({saving:!1,error:J}),X0({title:"Save failed",description:J,variant:"destructive"})}};handleSaveStreamKeys=async()=>{try{await v.admin.setStreamKeys(this.props.token,this.state.streamKeys),X0({title:"Stream keys saved"})}catch($){X0({title:"Failed to save stream keys",variant:"destructive"})}};addStreamKey=()=>{let $=this.state.newKeyValue.trim();if(!$)return;let J=this.state.newKeyComment.trim()||`Key ${this.state.streamKeys.length+1}`;this.setState({streamKeys:[...this.state.streamKeys,{key:$,comment:J}],newKeyValue:"",newKeyComment:""},()=>this.handleSaveStreamKeys())};removeStreamKey=($)=>{let J=this.state.streamKeys.filter((Z,q)=>q!==$);this.setState({streamKeys:J},()=>this.handleSaveStreamKeys())};toggleShowKey($){let J=new Set(this.state.showStreamKeys);if(J.has($))J.delete($);else J.add($);this.setState({showStreamKeys:J})}getRtmpHost(){try{return new URL(this.state.serverURL).hostname}catch{return window.location.hostname}}handleVideoCodecChange=async($)=>{try{await v.admin.setVideoCodec(this.props.token,$),this.setState({videoCodec:$}),X0({title:"Video codec updated"})}catch{X0({title:"Failed to update codec",variant:"destructive"})}};updateVariant($,J){let Z=[...this.state.variants];Z[$]={...Z[$],...J},this.setState({variants:Z})}addVariant=()=>{this.setState({variants:[...this.state.variants,Aq()]})};removeVariant=($)=>{if(this.state.variants.length<=1)return;let J=this.state.variants.filter((Z,q)=>q!==$);this.setState({variants:J})};copyToClipboard($){navigator.clipboard.writeText($).then(()=>{X0({title:"Copied to clipboard"})}).catch(()=>{})}renderVariantCard($,J){let Z=$.videoPassthrough,q=Z?"Source":$.scaledWidth===0?"Source":`${$.scaledWidth}${$.scaledHeight}`;return U(y,{key:J},U(m,null,U("div",{class:"flex items-center justify-between"},U("div",{class:"flex items-center gap-2"},U(d,null,"Output #",J+1),U(x,{variant:"secondary"},q),Z&&U(x,{variant:"outline"},"Passthrough")),this.state.variants.length>1&&U(f,{variant:"ghost",size:"icon-sm",className:"text-destructive/60 hover:text-destructive hover:bg-destructive/10",onClick:()=>this.removeVariant(J)},U(Nq,null)))),U(p,null,U("div",{class:"space-y-6"},U("div",{class:"flex items-center justify-between rounded-lg border p-4"},U("div",{class:"pr-4"},U("p",{class:"text-sm font-medium"},"Video Passthrough"),U("p",{class:"text-sm text-muted-foreground mt-0.5"},"Re-use the inbound stream without re-encoding. Lowest CPU.")),U(a0,{checked:$.videoPassthrough,onChange:(Q)=>this.updateVariant(J,{videoPassthrough:Q})})),!$.videoPassthrough&&U(t2,null,U("div",{class:"space-y-3"},U(Y0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Resolution"),U("div",{class:"flex flex-wrap gap-2"},lG.map((Q)=>{let Y=$.scaledWidth===Q.width&&$.scaledHeight===Q.height;return U("button",{key:Q.label,class:R("pill-btn px-4 py-2 rounded-lg text-xs font-medium cursor-pointer",Y&&"active"),onClick:()=>this.updateVariant(J,{scaledWidth:Q.width,scaledHeight:Q.height})},Q.label)})),$.scaledWidth>0&&U("div",{class:"flex gap-3 mt-1"},U("div",{class:"space-y-1.5"},U(Y0,{className:"text-[11px] text-muted-foreground"},"Width"),U(q0,{type:"number",className:"h-9 w-28 text-xs tabular-nums",value:String($.scaledWidth),onInput:(Q)=>this.updateVariant(J,{scaledWidth:parseInt(Q.target.value)||0})})),U("div",{class:"space-y-1.5"},U(Y0,{className:"text-[11px] text-muted-foreground"},"Height"),U(q0,{type:"number",className:"h-9 w-28 text-xs tabular-nums",value:String($.scaledHeight),onInput:(Q)=>this.updateVariant(J,{scaledHeight:parseInt(Q.target.value)||0})})))),U("div",{class:"section-divider"}),U("div",{class:"space-y-3"},U("div",{class:"flex items-center justify-between"},U(Y0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Video Bitrate"),U(x,{variant:"outline",className:"tabular-nums font-mono text-xs"},$.videoBitrate," kbps")),U("input",{type:"range",min:"200",max:"6000",step:"100",value:String($.videoBitrate),onInput:(Q)=>this.updateVariant(J,{videoBitrate:parseInt(Q.target.value)})}),U("div",{class:"flex justify-between text-[10px] text-muted-foreground/40 px-1"},U("span",null,"200 kbps"),U("span",null,"6000 kbps"))),U("div",{class:"space-y-3"},U(Y0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Framerate"),U("div",{class:"flex flex-wrap gap-2"},[24,30,60].map((Q)=>{let Y=$.framerate===Q;return U("button",{key:Q,class:R("pill-btn px-4 py-2 rounded-lg text-xs font-medium cursor-pointer",Y&&"active"),onClick:()=>this.updateVariant(J,{framerate:Q})},Q," fps")}),U(q0,{type:"number",className:"h-9 w-24 text-xs",placeholder:"Custom",value:[24,30,60].includes($.framerate)?"":String($.framerate),onInput:(Q)=>{let Y=parseInt(Q.target.value);if(Y>0)this.updateVariant(J,{framerate:Y})}}))),U("div",{class:"section-divider"}),U("div",{class:"space-y-3"},U(Y0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Encoding Speed"),U("div",{class:"grid grid-cols-1 sm:grid-cols-5 gap-2"},oG.map((Q)=>{let Y=$.cpuUsageLevel===Q.value;return U("button",{key:Q.value,class:R("radio-card rounded-lg px-3 py-3 text-center cursor-pointer",Y&&"active"),onClick:()=>this.updateVariant(J,{cpuUsageLevel:Q.value})},U("p",{class:R("text-xs font-semibold",Y?"text-primary":"text-foreground")},Q.label),U("p",{class:"text-[10px] text-muted-foreground mt-0.5 leading-tight"},Q.description.split(",")[0]))})))),U("div",{class:"section-divider"}),U("div",{class:"flex items-center justify-between rounded-xl border border-border bg-muted/20 p-4"},U("div",{class:"pr-4"},U("p",{class:"text-sm font-medium text-foreground"},"Audio Passthrough"),U("p",{class:"text-xs text-muted-foreground mt-0.5"},"Re-use the inbound audio stream without re-encoding.")),U(a0,{checked:$.audioPassthrough,onChange:(Q)=>this.updateVariant(J,{audioPassthrough:Q})})),!$.audioPassthrough&&U("div",{class:"space-y-3"},U("div",{class:"flex items-center justify-between"},U(Y0,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground"},"Audio Bitrate"),U(x,{variant:"outline",className:"tabular-nums font-mono text-xs"},$.audioBitrate," kbps")),U("input",{type:"range",min:"64",max:"320",step:"16",value:String($.audioBitrate),onInput:(Q)=>this.updateVariant(J,{audioBitrate:parseInt(Q.target.value)})}),U("div",{class:"flex justify-between text-[10px] text-muted-foreground/40 px-1"},U("span",null,"64 kbps"),U("span",null,"320 kbps"))))))}render(){let{loading:$,saving:J,error:Z,latencyLevel:q,variants:Q,streamKeys:Y,showStreamKeys:X,newKeyValue:K,newKeyComment:G,rtmpPort:B,serverURL:w,videoCodec:T,supportedCodecs:M,streamKeyOverridden:H}=this.state;if($)return U("div",{class:"max-w-3xl space-y-4"},U(r,{className:"h-8 w-64"}),U(r,{className:"h-4 w-96"}),U(r,{className:"h-48 rounded-xl"}),U(r,{className:"h-64 rounded-xl"}));return U("div",{class:"max-w-3xl space-y-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Video Configuration"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Configure video output quality, latency, and stream key.")),Z&&U(W0,{variant:"destructive"},U(F0,null,Z)),U(y,null,U(m,null,U(d,null,"Stream Keys"),U(n,null,"Authenticate with your broadcasting software. You can have multiple keys for different devices or co-streamers.")),U(p,{className:"space-y-4"},H&&U(W0,null,U(F0,null,"Stream key is overridden by a command-line flag. Changes here won't take effect until the flag is removed.")),U("div",{class:"rounded-xl border border-border bg-muted/30 p-4 space-y-3"},U("p",{class:"text-[11px] text-muted-foreground font-semibold uppercase tracking-wider"},"RTMP URL"),U("div",{class:"flex items-center gap-2"},U("code",{class:"text-xs text-foreground font-mono bg-background px-3 py-1.5 rounded-lg border border-border flex-1 truncate"},"rtmp://",this.getRtmpHost(),":",B,"/live"),U(f,{variant:"outline",size:"icon-sm",className:"shrink-0",onClick:()=>this.copyToClipboard(`rtmp://${this.getRtmpHost()}:${B}/live`)},U(Oq,null))),U("p",{class:"text-[10px] text-muted-foreground"},'Use this URL in OBS  Settings  Stream  Server. Put your stream key in the "Stream Key" field.')),U(k0,null),Y.length===0&&U(W0,{variant:"destructive"},U(F0,null,"No stream keys configured. You won't be able to stream until you add at least one key.")),U("div",{class:"space-y-2"},Y.map((W,z)=>U("div",{key:z,class:"flex items-center gap-2 rounded-lg border border-border p-3"},U("div",{class:"flex-1 min-w-0"},U("p",{class:"text-xs font-medium text-muted-foreground mb-1"},W.comment||`Key ${z+1}`),U("div",{class:"flex items-center gap-1"},U("code",{class:"text-xs font-mono truncate"},X.has(z)?W.key:""))),U(f,{variant:"ghost",size:"icon-sm",className:"size-7 shrink-0",onClick:()=>this.toggleShowKey(z)},X.has(z)?U(nG,null):U(iG,null)),U(f,{variant:"ghost",size:"icon-sm",className:"size-7 shrink-0",onClick:()=>this.copyToClipboard(W.key)},U(Oq,null)),U(f,{variant:"ghost",size:"icon-sm",className:"size-7 shrink-0 text-destructive/60 hover:text-destructive",onClick:()=>this.removeStreamKey(z)},U(Nq,null))))),U(k0,null),U("div",{class:"space-y-2"},U(Y0,{className:"text-xs font-semibold text-muted-foreground"},"Add Stream Key"),U("div",{class:"flex gap-2"},U(q0,{type:"text",className:"flex-1 text-xs font-mono",placeholder:"Stream key value",value:K,onInput:(W)=>this.setState({newKeyValue:W.target.value})}),U(q0,{type:"text",className:"w-36 text-xs",placeholder:"Label (optional)",value:G,onInput:(W)=>this.setState({newKeyComment:W.target.value})}),U(f,{size:"sm",onClick:this.addStreamKey,disabled:!K.trim(),className:"gap-1"},U(Cq,null)," Add"))))),M.length>1&&U(y,null,U(m,null,U(d,null,"Video Codec"),U(n,null,"Hardware-accelerated codecs reduce CPU usage significantly.")),U(p,null,U("div",{class:"flex flex-wrap gap-2"},M.map((W)=>{return U("button",{key:W,class:R("pill-btn px-4 py-2 rounded-lg text-xs font-medium cursor-pointer",T===W&&"active"),onClick:()=>this.handleVideoCodecChange(W)},W)})))),U(y,null,U(m,null,U(d,null,"Latency"),U(n,null,"Lower latency is better for interactive streams. Higher latency produces better video quality.")),U(p,null,U("div",{class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},sG.map((W)=>{let z=q===W.value;return U("button",{key:W.value,class:R("radio-card rounded-xl px-4 py-4 text-left cursor-pointer",z&&"active"),onClick:()=>this.setState({latencyLevel:W.value})},U("div",{class:"flex items-center justify-between mb-1"},U("p",{class:R("text-sm font-semibold",z?"text-primary":"text-foreground")},W.label),z&&U("span",{class:"size-2.5 rounded-full bg-primary ring-2 ring-primary/30 shrink-0"})),U("p",{class:"text-xs text-muted-foreground leading-relaxed"},W.description))})))),U("div",{class:"flex items-center justify-between"},U("div",null,U("h2",{class:"text-lg font-semibold text-foreground"},"Output Variants"),U("p",{class:"text-xs text-muted-foreground mt-0.5"},"Each variant creates a separate quality option for viewers.")),U(f,{variant:"outline",size:"sm",onClick:this.addVariant,className:"gap-1.5"},U(Cq,null),"Add Variant")),U("div",{class:"space-y-4"},Q.map((W,z)=>this.renderVariantCard(W,z))),U("div",{class:"flex items-center gap-4 pt-2 pb-8"},U(f,{onClick:this.handleSave,disabled:J,className:"px-8"},J?"Saving...":"Save Video Configuration"),U("p",{class:"text-xs text-muted-foreground"},"Changes take effect on next stream start.")))}}class c6 extends N{state={loading:!0,error:null,chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,chatSpamProtectionEnabled:!0,chatSlurFilterEnabled:!0,forbiddenUsernames:"",suggestedUsernames:"",hideViewerCount:!1,systemMessage:"",sendingMessage:!1};componentDidMount(){this.loadConfig()}async loadConfig(){try{let $=await v.admin.getConfig(this.props.token);this.setState({loading:!1,chatDisabled:$?.chatDisabled||!1,chatJoinMessagesEnabled:$?.chatJoinMessagesEnabled??!0,chatEstablishedUserMode:$?.chatEstablishedUserMode||!1,chatSpamProtectionEnabled:$?.chatSpamProtectionEnabled??!0,chatSlurFilterEnabled:$?.chatSlurFilterEnabled??!0,forbiddenUsernames:($?.forbiddenUsernames||[]).join(`
`),suggestedUsernames:($?.suggestedUsernames||[]).join(`
`),hideViewerCount:$?.hideViewerCount||!1})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load config",loading:!1})}}async toggleSetting($,J,Z){try{await $(this.props.token,Z),this.setState({[J]:Z}),X0({title:"Setting updated"})}catch(q){X0({title:"Failed to update setting",variant:"destructive"})}}handleSaveForbiddenUsernames=async()=>{try{let $=this.state.forbiddenUsernames.split(`
`).map((J)=>J.trim()).filter(Boolean);await v.admin.updateForbiddenUsernames(this.props.token,$),X0({title:"Forbidden usernames updated"})}catch{X0({title:"Failed to save",variant:"destructive"})}};handleSaveSuggestedUsernames=async()=>{try{let $=this.state.suggestedUsernames.split(`
`).map((J)=>J.trim()).filter(Boolean);await v.admin.updateSuggestedUsernames(this.props.token,$),X0({title:"Suggested usernames updated"})}catch{X0({title:"Failed to save",variant:"destructive"})}};handleSendSystemMessage=async()=>{let $=this.state.systemMessage.trim();if(!$)return;this.setState({sendingMessage:!0});try{await v.admin.sendSystemMessage(this.props.token,$),this.setState({systemMessage:"",sendingMessage:!1}),X0({title:"System message sent"})}catch{this.setState({sendingMessage:!1}),X0({title:"Failed to send message",variant:"destructive"})}};renderToggle($,J,Z,q,Q){return U("div",{class:"flex items-center justify-between rounded-xl border border-border bg-muted/20 p-4"},U("div",{class:"pr-4"},U("p",{class:"text-sm font-medium text-foreground"},$),U("p",{class:"text-xs text-muted-foreground mt-0.5 leading-relaxed"},J)),U(a0,{checked:Z,onChange:(Y)=>this.toggleSetting(Q,q,Y)}))}render(){let{loading:$,error:J,chatDisabled:Z,chatJoinMessagesEnabled:q,chatEstablishedUserMode:Q,chatSpamProtectionEnabled:Y,chatSlurFilterEnabled:X,forbiddenUsernames:K,suggestedUsernames:G,hideViewerCount:B,systemMessage:w,sendingMessage:T}=this.state;if($)return U("div",{class:"max-w-3xl space-y-4"},U(r,{className:"h-8 w-64"}),U(r,{className:"h-4 w-96"}),U(r,{className:"h-48 rounded-xl"}),U(r,{className:"h-48 rounded-xl"}));return U("div",{class:"max-w-3xl space-y-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Chat Configuration"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Configure chat settings, moderation, and spam protection.")),J&&U(W0,{variant:"destructive"},U(F0,null,J)),U(y,null,U(m,null,U(d,null,"Send System Message"),U(n,null,"Broadcast to all connected chat users.")),U(p,null,U("div",{class:"flex gap-2"},U(q0,{className:"flex-1 text-xs",placeholder:"Type a system message...",value:w,onInput:(M)=>this.setState({systemMessage:M.target.value}),onKeyDown:(M)=>{if(M.key==="Enter")this.handleSendSystemMessage()}}),U(f,{size:"sm",onClick:this.handleSendSystemMessage,disabled:!w.trim()||T},T?"Sending...":"Send")))),U(y,null,U(m,null,U(d,null,"General")),U(p,null,U("div",{class:"space-y-3"},this.renderToggle("Disable Chat","Completely hide the chat from your stream page.",Z,"chatDisabled",v.admin.updateChatDisabled),this.renderToggle("Show Join Messages","Display a message when users join or leave the chat.",q,"chatJoinMessagesEnabled",v.admin.updateChatJoinMessages),this.renderToggle("Hide Viewer Count","Hide the number of current viewers from the public page.",B,"hideViewerCount",v.admin.updateHideViewerCount)))),U(y,null,U(m,null,U(d,null,"Moderation"),U(n,null,"Protect your chat from spam and unwanted content.")),U(p,null,U("div",{class:"space-y-3"},this.renderToggle("Established User Mode","Only allow users who have been registered for a while to chat. New users will need to wait before they can send messages.",Q,"chatEstablishedUserMode",v.admin.updateChatEstablishedMode),this.renderToggle("Spam Protection","Automatically detect and block spam messages, including repeated messages and excessive links.",Y,"chatSpamProtectionEnabled",v.admin.updateChatSpamProtection),this.renderToggle("Slur Filter","Automatically filter messages containing known slurs and offensive language.",X,"chatSlurFilterEnabled",v.admin.updateChatSlurFilter)))),U(y,null,U(m,null,U(d,null,"Usernames"),U(n,null,"Manage forbidden and suggested usernames for chat.")),U(p,null,U("div",{class:"space-y-5"},U("div",{class:"space-y-2"},U(Y0,null,"Forbidden Usernames"),U("p",{class:"text-sm text-muted-foreground"},"Users will not be able to register with these names. One per line."),U(_1,{className:"min-h-[80px] text-xs font-mono",placeholder:`admin
moderator
system`,value:K,onInput:(M)=>this.setState({forbiddenUsernames:M.target.value})}),U(f,{size:"sm",variant:"secondary",onClick:this.handleSaveForbiddenUsernames},"Save Forbidden List")),U(k0,null),U("div",{class:"space-y-2"},U(Y0,null,"Suggested Usernames"),U("p",{class:"text-sm text-muted-foreground"},"Suggested names shown to new users when registering. One per line."),U(_1,{className:"min-h-[80px] text-xs font-mono",placeholder:`Viewer
Chatter
Lurker`,value:G,onInput:(M)=>this.setState({suggestedUsernames:M.target.value})}),U(f,{size:"sm",variant:"secondary",onClick:this.handleSaveSuggestedUsernames},"Save Suggested List"))))))}}var aG=()=>U("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),U("circle",{cx:"9",cy:"7",r:"4"}),U("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),U("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})),tG=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polyline",{points:"23 4 23 10 17 10"}),U("polyline",{points:"1 20 1 14 7 14"}),U("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})),eG=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("circle",{cx:"12",cy:"12",r:"10"}),U("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),U("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})),$B=()=>U("svg",{class:"size-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("circle",{cx:"12",cy:"12",r:"10"}),U("polyline",{points:"12 6 12 12 16 14"})),JB=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),U("circle",{cx:"12",cy:"7",r:"4"}));class s6 extends N{pollTimer=null;state={loading:!0,error:null,viewers:[],chatClients:[],pollTimer:null};componentDidMount(){this.loadData(),this.pollTimer=setInterval(()=>this.loadData(),1e4)}componentWillUnmount(){if(this.pollTimer)clearInterval(this.pollTimer)}async loadData(){try{let[$,J]=await Promise.all([v.admin.getViewers(this.props.token).catch(()=>[]),v.admin.getConnectedClients(this.props.token).catch(()=>[])]);this.setState({loading:!1,error:null,viewers:Array.isArray($)?$:[],chatClients:Array.isArray(J)?J:[]})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load viewers",loading:!1})}}handleRefresh=()=>{this.setState({loading:!0}),this.loadData()};render(){let{loading:$,error:J,viewers:Z,chatClients:q}=this.state,Q=Z.length,Y=q.length;if($&&Z.length===0)return U("div",{class:"space-y-4"},U(r,{className:"h-8 w-48"}),U(r,{className:"h-4 w-96"}),U("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-3"},U(r,{className:"h-20 rounded-xl"}),U(r,{className:"h-20 rounded-xl"})),U(r,{className:"h-64 rounded-xl"}));return U("div",null,U("div",{class:"flex items-center justify-between mb-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Viewers"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Connected viewers and chat participants.")),U(f,{variant:"secondary",size:"sm",onClick:this.handleRefresh},U(tG,null),"Refresh")),J&&U(W0,{variant:"destructive",className:"mb-4"},U(F0,null,J)),U("div",{class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6"},U(y,null,U(m,null,U(n,null,"Stream Viewers"),U(d,{className:"text-2xl tabular-nums"},Q))),U(y,null,U(m,null,U(n,null,"Chat Participants"),U(d,{className:"text-2xl tabular-nums"},Y)))),U(y,{className:"mb-4"},U(m,null,U(d,null,"Connected Viewers")),U(p,null,Q===0?U("div",{class:"text-center py-8"},U("div",{class:"size-12 rounded-full bg-muted/30 flex items-center justify-center mx-auto mb-3"},U(aG,null)),U("p",{class:"text-sm text-muted-foreground"},"No viewers connected"),U("p",{class:"text-xs text-muted-foreground mt-1"},"Viewers will appear here when someone watches your stream.")):U(v8,null,U(E8,null,U(B4,null,U(F2,null,"User"),U(F2,null,"Connected"),U(F2,null,"Location"),U(F2,null,"Client"))),U(y8,null,Z.map((X,K)=>U(B4,{key:X.id||X.clientID||K},U(j2,null,U("div",{class:"flex items-center gap-2 min-w-0"},U(JB,null),U("div",{class:"min-w-0"},U("p",{class:"text-sm truncate"},X.displayName||X.username||"Anonymous"),X.messageCount!=null&&X.messageCount>0&&U("p",{class:"text-xs text-muted-foreground"},X.messageCount," messages")))),U(j2,{className:"text-muted-foreground"},U("div",{class:"flex items-center gap-1"},U($B,null),X.connectedAt?d0(X.connectedAt):X.createdAt?d0(X.createdAt):"")),U(j2,{className:"text-muted-foreground"},U("div",{class:"flex items-center gap-1"},U(eG,null),U("span",{class:"truncate"},X.geo||""))),U(j2,{className:"text-muted-foreground text-xs"},X.userAgent?ZB(X.userAgent):""))))))),U(y,null,U(m,null,U(d,null,"Chat Participants")),U(p,null,Y===0?U("div",{class:"text-center py-6"},U("p",{class:"text-sm text-muted-foreground"},"No chat participants")):U("div",{class:"flex flex-wrap gap-2"},q.map((X,K)=>U(x,{key:X.id||K,variant:"secondary",className:"gap-1.5 py-1"},U("span",{class:"size-2 rounded-full bg-success"}),X.displayName||X.username||"Anonymous"))))),U("p",{class:"text-[10px] text-muted-foreground/30 mt-4 text-center"},"Auto-refreshes every 10 seconds"))}}function ZB($){if($.includes("Firefox"))return"Firefox";if($.includes("Chrome"))return"Chrome";if($.includes("Safari"))return"Safari";if($.includes("Edge"))return"Edge";if($.includes("OBS"))return"OBS";if($.includes("VLC"))return"VLC";if($.length>20)return $.slice(0,20)+"";return $}var qB=()=>U("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),U("polyline",{points:"14 2 14 8 20 8"}),U("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),U("line",{x1:"16",y1:"17",x2:"8",y2:"17"})),QB=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polyline",{points:"23 4 23 10 17 10"}),U("polyline",{points:"1 20 1 14 7 14"}),U("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})),YB=()=>U("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),U("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),U("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"}));class o6 extends N{pollTimer=null;scrollRef=null;state={loading:!0,error:null,logs:[],warnings:[],activeView:"logs",filterLevel:"all",autoScroll:!0,search:""};componentDidMount(){this.loadData(),this.pollTimer=setInterval(()=>this.loadData(),5000)}componentWillUnmount(){if(this.pollTimer)clearInterval(this.pollTimer)}componentDidUpdate($,J){if(this.state.autoScroll&&this.scrollRef&&J.logs.length!==this.state.logs.length)this.scrollRef.scrollTop=this.scrollRef.scrollHeight}async loadData(){try{let[$,J]=await Promise.all([v.admin.getLogEntries(this.props.token).catch(()=>[]),v.admin.getWarnings(this.props.token).catch(()=>[])]);this.setState({loading:!1,error:null,logs:Array.isArray($)?$:[],warnings:Array.isArray(J)?J:[]})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load logs",loading:!1})}}handleRefresh=()=>{this.loadData()};getFilteredLogs(){let{logs:$,warnings:J,activeView:Z,filterLevel:q,search:Q}=this.state,Y=Z==="warnings"?J:$;if(q!=="all")Y=Y.filter((X)=>X.level===q);if(Q.trim()){let X=Q.toLowerCase();Y=Y.filter((K)=>K.message?.toLowerCase().includes(X))}return Y}getLevelColor($){switch($?.toLowerCase()){case"error":return"text-destructive";case"warn":case"warning":return"text-warning";case"info":return"text-blue-400";case"debug":return"text-muted-foreground/50";default:return"text-foreground"}}getLevelBadge($){let Z={error:"bg-destructive/10 text-destructive border-destructive/20",warn:"bg-warning/10 text-warning border-warning/20",warning:"bg-warning/10 text-warning border-warning/20",info:"bg-blue-500/10 text-blue-400 border-blue-500/20",debug:"bg-muted text-muted-foreground border-border/50"}[$?.toLowerCase()]||"bg-muted text-muted-foreground border-border/50";return U("span",{class:R("inline-flex items-center px-1.5 py-0 rounded text-[9px] font-mono uppercase border",Z)},($||"log").slice(0,4))}formatLogTime($){try{return new Date($).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return $||""}}render(){let{loading:$,error:J,activeView:Z,filterLevel:q,autoScroll:Q,search:Y,warnings:X}=this.state,K=this.getFilteredLogs();if($&&this.state.logs.length===0)return U("div",{class:"space-y-4"},U(r,{className:"h-8 w-48"}),U(r,{className:"h-4 w-96"}),U(r,{className:"h-96 rounded-xl"}));return U("div",null,U("div",{class:"flex items-center justify-between mb-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Logs"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Server logs and warnings.")),U("div",{class:"flex items-center gap-2"},U(f,{variant:"secondary",size:"sm",onClick:this.handleRefresh},U(QB,null),"Refresh"))),J&&U(W0,{variant:"destructive",className:"mb-4"},U(F0,null,J)),U("div",{class:"flex items-center gap-1 mb-4 p-1 bg-muted/30 rounded-lg w-fit"},U("button",{class:R("px-3 py-1.5 rounded-md text-xs font-medium transition-colors",Z==="logs"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),onClick:()=>this.setState({activeView:"logs"})},"All Logs"),U("button",{class:R("px-3 py-1.5 rounded-md text-xs font-medium transition-colors flex items-center gap-1.5",Z==="warnings"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),onClick:()=>this.setState({activeView:"warnings"})},U(YB,null),"Warnings",X.length>0&&U(x,{variant:"destructive",className:"text-[9px] px-1 py-0 h-4"},X.length))),U("div",{class:"flex items-center gap-3 mb-3"},U("div",{class:"flex items-center gap-1"},["all","error","warn","info","debug"].map((G)=>U("button",{key:G,class:R("px-2 py-1 rounded text-[10px] font-medium transition-colors uppercase",q===G?"bg-primary/15 text-primary":"text-muted-foreground/50 hover:text-muted-foreground hover:bg-muted/30"),onClick:()=>this.setState({filterLevel:G})},G))),U(k0,{orientation:"vertical",className:"h-5"}),U(q0,{className:"h-7 text-xs flex-1 max-w-xs",placeholder:"Search logs...",value:Y,onInput:(G)=>this.setState({search:G.target.value})}),U("div",{class:"flex items-center gap-1.5"},U(a0,{checked:Q,onChange:(G)=>this.setState({autoScroll:G})}),U("span",{class:"text-[10px] text-muted-foreground select-none"},"Auto-scroll"))),U("div",{ref:(G)=>{this.scrollRef=G},class:"rounded-xl border border-border bg-card/40 overflow-hidden"},U("div",{class:"overflow-y-auto font-mono text-[11px] leading-relaxed",style:{"max-height":"600px"}},K.length===0?U("div",{class:"text-center py-12"},U("div",{class:"size-12 rounded-full bg-muted/30 flex items-center justify-center mx-auto mb-3"},U(qB,null)),U("p",{class:"text-sm text-muted-foreground"},"No log entries"),U("p",{class:"text-[11px] text-muted-foreground/50 mt-1"},Y?"Try a different search term.":"Logs will appear here as the server runs.")):K.map((G,B)=>U("div",{key:B,class:R("flex items-start gap-2 px-3 py-1.5 hover:bg-muted/20 transition-colors border-b border-border/10",G.level==="error"&&"bg-destructive/5",G.level==="warn"||G.level==="warning"?"bg-warning/5":"")},U("span",{class:"text-muted-foreground/40 shrink-0 w-16 text-right tabular-nums"},this.formatLogTime(G.time)),U("span",{class:"shrink-0 mt-0.5"},this.getLevelBadge(G.level)),U("span",{class:R("flex-1 break-all",this.getLevelColor(G.level))},G.message))))),U("p",{class:"text-[10px] text-muted-foreground/30 mt-3 text-center"},"Showing ",K.length," entries  Auto-refreshes every 5 seconds"))}}var XB=()=>U("svg",{class:"size-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})),UB=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),U("line",{x1:"5",y1:"12",x2:"19",y2:"12"})),KB=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("polyline",{points:"3 6 5 6 21 6"}),U("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})),bq=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),U("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})),GB=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),U("circle",{cx:"12",cy:"12",r:"3"})),BB=()=>U("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),U("line",{x1:"1",y1:"1",x2:"23",y2:"23"}));class l6 extends N{state={loading:!0,error:null,tokens:[],showCreate:!1,newTokenName:"",creating:!1,newlyCreatedToken:null,revealedTokens:new Set,confirmDelete:null};componentDidMount(){this.loadTokens()}async loadTokens(){try{let $=await v.admin.getAccessTokens(this.props.token);this.setState({loading:!1,tokens:Array.isArray($)?$:[]})}catch($){this.setState({error:$ instanceof Error?$.message:"Failed to load tokens",loading:!1})}}handleCreate=async()=>{let $=this.state.newTokenName.trim();if(!$)return;this.setState({creating:!0});try{let J=await v.admin.createAccessToken(this.props.token,{name:$,scopes:[]});this.setState({creating:!1,showCreate:!1,newTokenName:"",newlyCreatedToken:J?.accessToken||null}),this.loadTokens(),X0({title:"Access token created"})}catch(J){this.setState({creating:!1}),X0({title:"Failed to create token",variant:"destructive"})}};handleDelete=async($)=>{try{await v.admin.deleteAccessToken(this.props.token,$),this.setState({confirmDelete:null}),this.loadTokens(),X0({title:"Token deleted"})}catch{X0({title:"Failed to delete token",variant:"destructive"})}};toggleReveal($){let J=new Set(this.state.revealedTokens);if(J.has($))J.delete($);else J.add($);this.setState({revealedTokens:J})}copyToClipboard($){navigator.clipboard.writeText($).then(()=>{X0({title:"Copied to clipboard"})}).catch(()=>{})}maskToken($){if($.length<=8)return"";return $.slice(0,4)+""+$.slice(-4)}render(){let{loading:$,error:J,tokens:Z,showCreate:q,newTokenName:Q,creating:Y,newlyCreatedToken:X,revealedTokens:K,confirmDelete:G}=this.state;if($)return U("div",{class:"space-y-4"},U(r,{className:"h-8 w-48"}),U(r,{className:"h-4 w-96"}),U(r,{className:"h-32 rounded-xl"}),U(r,{className:"h-32 rounded-xl"}));return U("div",{class:"max-w-3xl"},U("div",{class:"flex items-center justify-between mb-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Access Tokens"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Manage API access tokens for integrations and external tools.")),U(f,{variant:q?"outline":"secondary",size:"sm",onClick:()=>this.setState({showCreate:!q,newlyCreatedToken:null})},q?"Cancel":U("span",{class:"flex items-center gap-1.5"},U(UB,null)," New Token"))),J&&U(W0,{variant:"destructive",className:"mb-4"},U(F0,null,J)),X&&U(W0,{className:"mb-4 border-success/30 bg-success/5"},U(F0,null,U("div",{class:"space-y-2"},U("p",{class:"text-sm font-medium text-success"},"Token created successfully!"),U("p",{class:"text-sm text-muted-foreground"},"Copy this token now  you won't be able to see it again."),U("div",{class:"flex items-center gap-2"},U("code",{class:"text-xs font-mono bg-background px-2 py-1 rounded border border-border/40 flex-1 truncate text-foreground"},X),U(f,{variant:"secondary",size:"icon-sm",className:"shrink-0",onClick:()=>this.copyToClipboard(X)},U(bq,null)))))),q&&U(y,{className:"mb-4"},U(m,null,U(d,null,"Create Access Token"),U(n,null,"Create a new token for API access or integrations.")),U(p,null,U("div",{class:"space-y-3"},U("div",{class:"space-y-1.5"},U(Y0,null,"Token Name"),U(q0,{type:"text",placeholder:"e.g. OBS Integration, Bot Access",value:Q,onInput:(B)=>this.setState({newTokenName:B.target.value}),onKeyDown:(B)=>{if(B.key==="Enter")this.handleCreate()}}),U("p",{class:"text-xs text-muted-foreground"},"A descriptive name to identify this token.")),U(f,{onClick:this.handleCreate,disabled:!Q.trim()||Y},Y?"Creating...":"Create Token")))),Z.length===0?U(y,null,U(p,{className:"py-12"},U("div",{class:"flex flex-col items-center text-center"},U("div",{class:"size-14 rounded-full bg-muted/30 flex items-center justify-center mb-3"},U(XB,null)),U("p",{class:"text-sm font-medium text-foreground mb-1"},"No access tokens"),U("p",{class:"text-xs text-muted-foreground max-w-sm"},"Create an access token to allow external tools and integrations to interact with your server.")))):U("div",{class:"space-y-3"},Z.map((B)=>{let w=K.has(B.accessToken),T=G===B.accessToken;return U(y,{key:B.accessToken},U(p,{className:"p-5"},U("div",{class:"flex items-start justify-between gap-3"},U("div",{class:"min-w-0 flex-1"},U("div",{class:"flex items-center gap-2 mb-1"},U("p",{class:"text-sm font-medium text-foreground"},B.displayName||"Unnamed Token"),B.scopes&&B.scopes.length>0&&B.scopes.map((M)=>U(x,{key:M,variant:"secondary",className:"text-[9px] px-1.5 py-0"},M.replace(/_/g," ")))),U("div",{class:"flex items-center gap-2 mb-2"},U("code",{class:"text-[11px] font-mono text-muted-foreground bg-muted/30 px-2 py-0.5 rounded"},w?B.accessToken:this.maskToken(B.accessToken)),U("button",{class:"text-muted-foreground/50 hover:text-muted-foreground transition-colors",onClick:()=>this.toggleReveal(B.accessToken)},w?U(BB,null):U(GB,null)),U("button",{class:"text-muted-foreground/50 hover:text-muted-foreground transition-colors",onClick:()=>this.copyToClipboard(B.accessToken)},U(bq,null))),U("div",{class:"flex items-center gap-3 text-[10px] text-muted-foreground/50"},B.createdAt&&U("span",null,"Created ",d0(B.createdAt)),B.lastUsed&&U("span",null,"Last used ",d0(B.lastUsed)))),U("div",{class:"shrink-0"},T?U("div",{class:"flex items-center gap-1.5"},U(f,{variant:"destructive",size:"xs",onClick:()=>this.handleDelete(B.accessToken)},"Confirm"),U(f,{variant:"ghost",size:"xs",onClick:()=>this.setState({confirmDelete:null})},"Cancel")):U(f,{variant:"ghost",size:"icon-sm",className:"text-destructive/60 hover:text-destructive hover:bg-destructive/10",onClick:()=>this.setState({confirmDelete:B.accessToken})},U(KB,null))))))})),U("div",{class:"mt-6"},U("p",{class:"text-sm text-muted-foreground leading-relaxed"},"Access tokens allow external applications to interact with your Oni server's API. Tokens with admin access can modify server configuration. Keep your tokens secure and revoke any that are no longer needed.")))}}class i6 extends N{unsubManager=null;unsubRelay=null;state={manager:S2(),relayState:G9(),newRelayUrl:"",newProfileName:"",showAddProfile:!1};componentDidMount(){this.unsubManager=r$(()=>{this.setState({manager:S2()})}),this.unsubRelay=u$(()=>{this.setState({relayState:G9()})})}componentWillUnmount(){this.unsubManager?.(),this.unsubRelay?.()}handleAddRelay=($)=>{let J=this.state.newRelayUrl.trim();if(!J)return;C2($,J),this.setState({newRelayUrl:""})};handleCreateProfile=()=>{let $=this.state.newProfileName.trim();if(!$)return;s$($),this.setState({newProfileName:"",showAddProfile:!1})};getStatusColor($){switch(this.state.relayState.statuses.get($)){case"connected":return"bg-success";case"connecting":return"bg-warning";case"error":return"bg-destructive";default:return"bg-muted-foreground/30"}}getStatusLabel($){return this.state.relayState.statuses.get($)||"disconnected"}renderProfile($,J){return U(y,{key:$.id,className:R(J&&"border-primary/40")},U(m,null,U("div",{class:"flex items-center justify-between"},U("div",{class:"flex items-center gap-2"},U("button",{class:R("text-sm font-semibold cursor-pointer bg-transparent border-none",J?"text-primary":"text-foreground hover:text-primary"),onClick:()=>c$($.id)},$.name),J&&U(x,{variant:"default"},"Active"),$.builtin&&U(x,{variant:"secondary"},"Built-in")),U("div",{class:"flex items-center gap-2"},U(x,{variant:"outline"},$.relays.length," relays"),!$.builtin&&U(f,{variant:"ghost",size:"xs",className:"text-destructive hover:text-destructive",onClick:()=>o$($.id)},"Delete")))),U(p,null,U("div",{class:"space-y-1.5 mb-3"},$.relays.length===0?U("p",{class:"text-xs text-muted-foreground italic"},"No relays configured"):$.relays.map((Z)=>U("div",{key:Z,class:"flex items-center justify-between group px-2 py-1.5 rounded-md bg-background"},U("div",{class:"flex items-center gap-2 min-w-0"},U("span",{class:R("size-2 rounded-full shrink-0",this.getStatusColor(Z))}),U("span",{class:"text-xs text-foreground truncate"},Z),U(x,{variant:"ghost",className:"text-[10px] px-0"},this.getStatusLabel(Z))),U(f,{variant:"ghost",size:"xs",className:"text-destructive hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity shrink-0",onClick:()=>N4($.id,Z)},"Remove")))),U("div",{class:"flex gap-2"},U(q0,{className:"flex-1 h-8 text-xs",placeholder:"wss://relay.example.com",value:this.state.newRelayUrl,onInput:(Z)=>this.setState({newRelayUrl:Z.target.value}),onKeyDown:(Z)=>{if(Z.key==="Enter")this.handleAddRelay($.id)}}),U(f,{size:"sm",className:"h-8",onClick:()=>this.handleAddRelay($.id)},"Add"))))}render(){let{manager:$,showAddProfile:J,newProfileName:Z}=this.state;return U("div",null,U("div",{class:"flex items-center justify-between mb-6"},U("div",null,U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Relay Manager"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Manage relay profiles and connections.")),U(f,{variant:J?"outline":"secondary",size:"sm",onClick:()=>this.setState({showAddProfile:!J})},J?"Cancel":"+ New Profile")),U("p",{class:"text-sm text-muted-foreground mb-4"},"Manage relay profiles for your Nostr identity. Outbox relays are where you publish events. Inbox relays are where others can find your posts. Indexers are used for bootstrapping."),J&&U("div",{class:"flex gap-2 mb-4"},U(q0,{className:"flex-1",placeholder:"Profile name",value:Z,onInput:(q)=>this.setState({newProfileName:q.target.value}),onKeyDown:(q)=>{if(q.key==="Enter")this.handleCreateProfile()}}),U(f,{onClick:this.handleCreateProfile},"Create")),U("div",{class:"space-y-4"},$.profiles.map((q)=>this.renderProfile(q,q.id===$.activeProfileId))))}}class n6 extends N{unsubAuth=null;unsubBootstrap=null;unsubLive=null;state={pubkey:L0().pubkey,authLoading:L0().isLoading,authError:L0().error,profile:g1().profile,bootstrapPhase:g1().phase,relayCount:g1().relayList.length,followingCount:g1().followingCount,liveEventsEnabled:b2().enabled,liveEventPublishing:b2().isPublishing,liveEventError:b2().error,lastPublished:b2().lastPublished};componentDidMount(){this.unsubAuth=y1(()=>{let $=L0();this.setState({pubkey:$.pubkey,authLoading:$.isLoading,authError:$.error})}),this.unsubBootstrap=k4(()=>{let $=g1();this.setState({profile:$.profile,bootstrapPhase:$.phase,relayCount:$.relayList.length,followingCount:$.followingCount})}),this.unsubLive=QJ(()=>{let $=b2();this.setState({liveEventsEnabled:$.enabled,liveEventPublishing:$.isPublishing,liveEventError:$.error,lastPublished:$.lastPublished})})}componentWillUnmount(){this.unsubAuth?.(),this.unsubBootstrap?.(),this.unsubLive?.()}render(){let{pubkey:$,authLoading:J,authError:Z,profile:q,bootstrapPhase:Q,relayCount:Y,followingCount:X,liveEventsEnabled:K,liveEventPublishing:G,liveEventError:B,lastPublished:w}=this.state;return U("div",null,U("div",{class:"mb-6"},U("h1",{class:"text-2xl font-bold text-foreground tracking-tight"},"Nostr Identity"),U("p",{class:"text-sm text-muted-foreground mt-1"},"Connect your Nostr account and manage live event publishing.")),U(y,{className:"mb-4"},U(m,null,U(d,null,"Account")),U(p,null,$?U("div",null,U("div",{class:"flex items-start gap-4 mb-4"},U(b1,{className:"size-16"},U(D1,{src:q?.picture,alt:""}),U(f1,{className:"text-xl"},(q?.displayName||q?.name||$.charAt(0)).charAt(0).toUpperCase())),U("div",{class:"min-w-0"},U("p",{class:"text-lg font-semibold text-foreground truncate"},q?.displayName||q?.name||V4($,8)),U("p",{class:"text-xs text-muted-foreground font-mono truncate mb-1"},P2($)),q?.nip05&&U(x,{variant:"outline",className:"text-[10px] border-primary/30 text-primary"},q.nip05),q?.about&&U("p",{class:"text-xs text-muted-foreground mt-1 line-clamp-2"},q.about))),U("div",{class:"grid grid-cols-3 gap-3 mb-4"},U("div",{class:"text-center p-2 rounded-md bg-background"},U("p",{class:"text-lg font-semibold text-foreground"},Y),U("p",{class:"text-xs text-muted-foreground"},"Relays")),U("div",{class:"text-center p-2 rounded-md bg-background"},U("p",{class:"text-lg font-semibold text-foreground"},X),U("p",{class:"text-xs text-muted-foreground"},"Following")),U("div",{class:"text-center p-2 rounded-md bg-background"},U("p",{class:"text-lg font-semibold text-foreground capitalize"},Q),U("p",{class:"text-xs text-muted-foreground"},"Status"))),U(f,{variant:"destructive",size:"sm",onClick:()=>O4()},"Sign Out")):U("div",null,U("p",{class:"text-sm text-muted-foreground mb-3"},"Connect your Nostr identity to publish NIP-53 live events and manage your stream's social presence."),U(f,{onClick:()=>N2(),disabled:J},J?"Connecting...":"Connect with Nostr"),Z&&U("p",{class:"text-xs text-destructive mt-2"},Z),U("p",{class:"text-xs text-muted-foreground mt-2"},"Requires a NIP-07 browser extension (nos2x-fox, Alby, etc.) or Amber on Android.")))),U(y,{className:"mb-4"},U(m,null,U("div",{class:"flex items-center justify-between"},U("div",null,U(d,null,"NIP-53 Live Events"),U(n,null,"Auto-publish live activity events to your outbox relays.")),U(a0,{checked:K,onChange:(T)=>YJ(T)}))),U(p,null,K&&!$&&U(W0,{variant:"destructive",className:"mb-2"},U(F0,null,"You must connect a Nostr identity above to publish live events.")),G&&U("p",{class:"text-xs text-primary"},"Publishing live event..."),B&&U("p",{class:"text-xs text-destructive mt-1"},B),w&&U("p",{class:"text-xs text-muted-foreground mt-1"},"Last published: ",new Date(w).toLocaleTimeString()))),U(y,null,U(m,null,U(d,null,"How it works")),U(p,null,U("ul",{class:"text-sm text-muted-foreground space-y-1.5"},U("li",null," Your Nostr identity is bootstrapped by querying indexer relays for your profile (kind 0) and relay list (NIP-65 kind 10002)."),U("li",null," Outbox and inbox relays from your NIP-65 list are automatically populated in the Relay Manager."),U("li",null," NIP-53 live events are published to your outbox relays so followers can discover your stream."),U("li",null," Indexer relays are discovered via rstate API or NIP-66 monitor relays as a fallback."),U("li",null," This is the same identity system used by Mycelium (app.mycelium.social).")))))}}class a6 extends N{unsubAuth=null;state={activeTab:"overview",token:"",authenticated:!1,authChecking:!0,authError:null,streamKeyInput:""};componentDidMount(){A4(),this.unsubAuth=y1(()=>this.onAuthChange()),this.onAuthChange()}componentWillUnmount(){this.unsubAuth?.()}async onAuthChange(){let $=L0();if($.pubkey)await this.verifyBearerToken($.pubkey);else if(!$.isLoading)this.setState({authChecking:!1})}async verifyBearerToken($){this.setState({authChecking:!0,authError:null});try{if(!(await fetch("/api/admin/serverconfig",{headers:{Authorization:`Bearer ${$}`}})).ok)throw new Error("Not authorized");this.setState({authenticated:!0,token:$,authChecking:!1,authError:null})}catch{this.setState({authenticated:!1,authChecking:!1,authError:"Your Nostr identity is not authorized as admin."})}}handleStreamKeyLogin=async($)=>{$.preventDefault();let J=this.state.streamKeyInput.trim();if(!J)return;this.setState({authChecking:!0,authError:null});try{if(!(await fetch("/api/admin/serverconfig",{headers:{Authorization:"Basic "+btoa("admin:"+J)}})).ok)throw new Error("Invalid stream key");this.setState({authenticated:!0,token:J,authChecking:!1,authError:null})}catch{this.setState({authenticated:!1,authChecking:!1,authError:"Invalid stream key."})}};handleNostrLogin=()=>{N2()};handleTabChange=($)=>{this.setState({activeTab:$})};getAuthHeaders(){let{token:$}=this.state;if($.length===64)return{Authorization:`Bearer ${$}`};return{Authorization:"Basic "+btoa("admin:"+$)}}renderTab(){let{activeTab:$,token:J}=this.state;switch($){case"overview":return U(p6,{token:J});case"general":return U(d6,{token:J});case"video":return U(r6,{token:J});case"chat":return U(c6,{token:J});case"viewers":return U(s6,{token:J});case"logs":return U(o6,{token:J});case"tokens":return U(l6,{token:J});case"nostr":return U(n6,null);case"relays":return U(i6,null);default:return null}}render(){let{authenticated:$,authChecking:J,authError:Z,streamKeyInput:q}=this.state,Q=L0();if(J)return U("div",{class:"flex items-center justify-center min-h-screen bg-background"},U("div",{class:"flex flex-col items-center gap-4"},U(K1,{size:"lg"}),U("p",{class:"text-sm text-muted-foreground"},"Checking authorization...")));if(!$)return U("div",{class:"flex items-center justify-center min-h-screen bg-background"},U(y,{className:"w-full max-w-sm py-6 gap-5 mx-4"},U(m,{className:"text-center"},U("div",{class:"mx-auto size-14 rounded-2xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center mb-3 ring-1 ring-primary/10"},U("svg",{class:"size-7 text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},U("polygon",{points:"5 3 19 12 5 21 5 3"}))),U(d,{className:"text-xl font-bold"},"Oni Admin"),U(n,{className:"text-sm mt-1"},Q.pubkey?"Your Nostr identity is not authorized. Use the stream key instead.":"Sign in with Nostr or enter your stream key.")),U(p,{className:"space-y-5"},!Q.pubkey&&U(f,{onClick:this.handleNostrLogin,className:"w-full h-10 gap-2 font-semibold",variant:"outline",disabled:Q.isLoading},Q.isLoading?U(K1,{size:"sm",className:"mr-1"}):U("svg",{class:"size-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})),"Sign in with Nostr"),U("div",{class:"relative"},U("div",{class:"absolute inset-0 flex items-center"},U("span",{class:"w-full border-t border-border"})),U("div",{class:"relative flex justify-center text-xs uppercase"},U("span",{class:"bg-card px-3 text-muted-foreground/50 font-medium tracking-wider"},"or stream key"))),U("form",{onSubmit:this.handleStreamKeyLogin,class:"space-y-3"},U("div",{class:"space-y-2"},U(Y0,{className:"text-xs font-semibold text-muted-foreground/70"},"Stream Key"),U(q0,{type:"password",value:q,onInput:(Y)=>this.setState({streamKeyInput:Y.target.value}),placeholder:"Enter your stream key",className:"h-10"})),Z&&U(W0,{variant:"destructive",className:"py-2.5 border-destructive/20 bg-destructive/5"},U(F0,{className:"text-xs"},Z)),U(f,{type:"submit",className:"w-full h-10 font-semibold"},"Sign In"))),U(k8,{className:"justify-center pt-2"},U("a",{href:"/",class:"text-xs font-medium text-muted-foreground/50 hover:text-foreground transition-colors flex items-center gap-1.5"},U("svg",{class:"size-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},U("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})),"Back to stream"))));return U(h9,{activeTab:this.state.activeTab,onTabChange:this.handleTabChange},this.renderTab())}}var fq=document.getElementById("root");if(fq){let $=window.location.pathname.startsWith("/admin");N7($?U(a6,null):U(g9,null),fq)}

//# debugId=BECE18605683744A64756E2164756E21
//# sourceMappingURL=main-2w86j3a3.js.map
